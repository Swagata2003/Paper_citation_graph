/*! For license information please see main.2531e901.js.LICENSE.txt */
(()=>{var t={9813:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<o(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var s=2*(i+1)-1,l=t[s],c=s+1,u=t[c];if(0>o(l,n))c<r&&0>o(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[s]=n,i=s);else{if(!(c<r&&0>o(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function x(t){if(m=!1,_(t),!g)if(null!==i(c))g=!0,L(w);else{var e=i(u);null!==e&&D(x,e.startTime-t)}}function w(t,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var o=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&D(x,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,M=null,T=-1,k=5,C=-1;function A(){return!(e.unstable_now()-C<k)}function P(){if(null!==M){var t=e.unstable_now();C=t;var n=!0;try{n=M(!0,t)}finally{n?S():(E=!1,M=null)}}else E=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=P,S=function(){R.postMessage(null)}}else S=function(){v(P,0)};function L(t){M=t,E||(E=!0,S())}function D(t,n){T=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(u,t),null===i(c)&&t===i(u)&&(m?(y(T),T=-1):m=!0,D(x,o-a))):(t.sortIndex=s,n(c,t),g||p||(g=!0,L(w))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},8784:(t,e,n)=>{"use strict";t.exports=n(9813)},6331:t=>{t.exports=function(t,e){var n=e.length;if(0!==n){var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}}},4695:t=>{function e(t,e,n){var i,r,o,a,s;function l(){var c=Date.now()-a;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,n||(s=t.apply(o,r),o=r=null))}null==e&&(e=100);var c=function(){o=this,r=arguments,a=Date.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(s=t.apply(o,r),o=r=null),s};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(s=t.apply(o,r),o=r=null,clearTimeout(i),i=null)},c}e.debounce=e,t.exports=e},7674:t=>{"use strict";var e={ellipse:"\u2026",chars:[" ","-"],max:140,truncate:!0};function n(t,e,n,i){if(t<=e)return t;if(e<2)return t.slice(0,e-n.length)+n;for(var r=e-n.length,o=Math.floor(r/2),a=o,s=t.length-o,l=0;l<o;l++){var c=t.charAt(l),u=t.length-l,h=t.charAt(u);-1!==i.indexOf(c)&&(a=l),-1!==i.indexOf(h)&&(s=u)}return t.slice(0,a)+n+t.slice(s)}function i(t,e,n,i,r){if(t.length<=e)return t;for(var o=e-n.length,a=o,s=0;s<=o;s++){var l=t.charAt(s);-1!==i.indexOf(l)&&(a=s)}return r||a!=o?t.slice(0,a)+n:""}t.exports=function(t,r,o){if("string"!==typeof t||0===t.length)return"";if(0===r)return"";for(var a in o=o||{},e)null!==o[a]&&"undefined"!==typeof o[a]||(o[a]=e[a]);return o.max=r||o.max,"middle"==o.truncate?n(t,o.max,o.ellipse,o.chars):i(t,o.max,o.ellipse,o.chars,o.truncate)},t.exports.ellipsizeMiddle=n,t.exports.ellipsize=i},8306:(t,e,n)=>{var i=n(393),r=n(3524).Fd;function o(t,e){return"outbound"===t||"inbound"===t?e.directedSize+2*e.undirectedSize:"in"===t||"out"===t||"directed"===t?e.directedSize:2*e.undirectedSize}function a(t,e){var n=t[(e=e||"outbound")+"Neighbors"].bind(t),r=o(e,t),a=i.getPointerArray(r),s=i.getPointerArray(t.order);this.graph=t,this.neighborhood=new s(r),this.starts=new a(t.order+1),this.nodes=t.nodes();var l,c,u,h,d,f={},p=0;for(l=0,c=t.order;l<c;l++)f[this.nodes[l]]=l;for(l=0,c=t.order;l<c;l++)for(d=n(this.nodes[l]),this.starts[l]=p,u=0,h=d.length;u<h;u++)this.neighborhood[p++]=f[d[u]];this.starts[l]=r}function s(t,e,n){var a=t[(n=n||"outbound")+"Edges"].bind(t),s=o(n,t),l=i.getPointerArray(s),c=i.getPointerArray(t.order),u=r(e).fromMinimalEntry;this.graph=t,this.neighborhood=new c(s),this.weights=new Float64Array(s),this.outDegrees=new Float64Array(t.order),this.starts=new l(t.order+1),this.nodes=t.nodes();var h,d,f,p,g,m,v,y,b,_={},x=0;for(h=0,d=t.order;h<d;h++)_[this.nodes[h]]=h;for(h=0,d=t.order;h<d;h++)for(v=a(g=this.nodes[h]),this.starts[h]=x,f=0,p=v.length;f<p;f++)y=v[f],m=t.opposite(g,y),b=u(y,t.getEdgeAttributes(y)),this.neighborhood[x]=_[m],this.weights[x++]=b,this.outDegrees[h]+=b;this.starts[h]=s}a.prototype.bounds=function(t){return[this.starts[t],this.starts[t+1]]},a.prototype.project=function(){var t=this,e={};return t.nodes.forEach((function(n,i){e[n]=Array.from(t.neighborhood.slice(t.starts[i],t.starts[i+1])).map((function(e){return t.nodes[e]}))})),e},a.prototype.collect=function(t){var e,n,i={};for(e=0,n=t.length;e<n;e++)i[this.nodes[e]]=t[e];return i},a.prototype.assign=function(t,e){var n=0;this.graph.updateEachNodeAttributes((function(i,r){return r[t]=e[n++],r}),{attributes:[t]})},s.prototype.bounds=a.prototype.bounds,s.prototype.project=a.prototype.project,s.prototype.collect=a.prototype.collect,s.prototype.assign=a.prototype.assign,e.u=s},3384:t=>{t.exports={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}},7889:(t,e)=>{e.assign=function(t){t=t||{};var e,n,i,r=Array.prototype.slice.call(arguments).slice(1);for(e=0,i=r.length;e<i;e++)if(r[e])for(n in r[e])t[n]=r[e][n];return t},e.validateSettings=function(t){return"linLogMode"in t&&"boolean"!==typeof t.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&"boolean"!==typeof t.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&"boolean"!==typeof t.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&"number"!==typeof t.edgeWeightInfluence?{message:"the `edgeWeightInfluence` setting should be a number."}:!("scalingRatio"in t)||"number"===typeof t.scalingRatio&&t.scalingRatio>=0?"strongGravityMode"in t&&"boolean"!==typeof t.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:!("gravity"in t)||"number"===typeof t.gravity&&t.gravity>=0?"slowDown"in t&&!("number"===typeof t.slowDown||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&"boolean"!==typeof t.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:!("barnesHutTheta"in t)||"number"===typeof t.barnesHutTheta&&t.barnesHutTheta>=0?null:{message:"the `barnesHutTheta` setting should be a number >= 0."}:{message:"the `gravity` setting should be a number >= 0."}:{message:"the `scalingRatio` setting should be a number >= 0."}},e.graphToByteArrays=function(t,e){var n,i=t.order,r=t.size,o={},a=new Float32Array(10*i),s=new Float32Array(3*r);return n=0,t.forEachNode((function(t,e){o[t]=n,a[n]=e.x,a[n+1]=e.y,a[n+2]=0,a[n+3]=0,a[n+4]=0,a[n+5]=0,a[n+6]=1,a[n+7]=1,a[n+8]=e.size||1,a[n+9]=e.fixed?1:0,n+=10})),n=0,t.forEachEdge((function(t,i,r,l,c,u,h){var d=o[r],f=o[l],p=e(t,i,r,l,c,u,h);a[d+6]+=p,a[f+6]+=p,s[n]=d,s[n+1]=f,s[n+2]=p,n+=3})),{nodes:a,edges:s}},e.assignLayoutChanges=function(t,e,n){var i=0;t.updateEachNodeAttributes((function(t,r){return r.x=e[i],r.y=e[i+1],i+=10,n?n(t,r):r}))},e.readGraphPositions=function(t,e){var n=0;t.forEachNode((function(t,i){e[n]=i.x,e[n+1]=i.y,n+=10}))},e.collectLayoutChanges=function(t,e,n){for(var i=t.nodes(),r={},o=0,a=0,s=e.length;o<s;o+=10){if(n){var l=Object.assign({},t.getNodeAttributes(i[a]));l.x=e[o],l.y=e[o+1],l=n(i[a],l),r[i[a]]={x:l.x,y:l.y}}else r[i[a]]={x:e[o],y:e[o+1]};a++}return r},e.createWorker=function(t){var e=window.URL||window.webkitURL,n=t.toString(),i=e.createObjectURL(new Blob(["("+n+").call(this);"],{type:"text/javascript"})),r=new Worker(i);return e.revokeObjectURL(i),r}},6388:(t,e,n)=>{var i=n(4223),r=n(3524).Fd,o=n(8090),a=n(7889),s=n(3384);function l(t,e,n){if(!i(e))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");"number"===typeof n&&(n={iterations:n});var l=n.iterations;if("number"!==typeof l)throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(l<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var c=r("getEdgeWeight"in n?n.getEdgeWeight:"weight").fromEntry,u="function"===typeof n.outputReducer?n.outputReducer:null,h=a.assign({},s,n.settings),d=a.validateSettings(h);if(d)throw new Error("graphology-layout-forceatlas2: "+d.message);var f,p=a.graphToByteArrays(e,c);for(f=0;f<l;f++)o(h,p.nodes,p.edges);if(!t)return a.collectLayoutChanges(e,p.nodes);a.assignLayoutChanges(e,p.nodes,u)}var c=l.bind(null,!1);c.assign=l.bind(null,!0),c.inferSettings=function(t){var e="number"===typeof t?t:t.order;return{barnesHutOptimize:e>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(e)}},t.exports=c},8090:t=>{var e=10;t.exports=function(t,n,i){var r,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,_,x,w,S,E,M,T,k=n.length,C=i.length,A=t.adjustSizes,P=t.barnesHutTheta*t.barnesHutTheta,O=[];for(a=0;a<k;a+=e)n[a+4]=n[a+2],n[a+5]=n[a+3],n[a+2]=0,n[a+3]=0;if(t.outboundAttractionDistribution){for(p=0,a=0;a<k;a+=e)p+=n[a+6];p/=k/e}if(t.barnesHutOptimize){var R,L,D,I=1/0,N=-1/0,z=1/0,F=-1/0;for(a=0;a<k;a+=e)I=Math.min(I,n[a+0]),N=Math.max(N,n[a+0]),z=Math.min(z,n[a+1]),F=Math.max(F,n[a+1]);var U=N-I,B=F-z;for(U>B?F=(z-=(U-B)/2)+U:N=(I-=(B-U)/2)+B,O[0]=-1,O[1]=(I+N)/2,O[2]=(z+F)/2,O[3]=Math.max(N-I,F-z),O[4]=-1,O[5]=-1,O[6]=0,O[7]=0,O[8]=0,r=1,a=0;a<k;a+=e)for(o=0,D=3;;){if(!(O[o+5]>=0)){if(O[o+0]<0){O[o+0]=a;break}if(O[o+5]=9*r,h=O[o+3]/2,O[(d=O[o+5])+0]=-1,O[d+1]=O[o+1]-h,O[d+2]=O[o+2]-h,O[d+3]=h,O[d+4]=d+9,O[d+5]=-1,O[d+6]=0,O[d+7]=0,O[d+8]=0,O[(d+=9)+0]=-1,O[d+1]=O[o+1]-h,O[d+2]=O[o+2]+h,O[d+3]=h,O[d+4]=d+9,O[d+5]=-1,O[d+6]=0,O[d+7]=0,O[d+8]=0,O[(d+=9)+0]=-1,O[d+1]=O[o+1]+h,O[d+2]=O[o+2]-h,O[d+3]=h,O[d+4]=d+9,O[d+5]=-1,O[d+6]=0,O[d+7]=0,O[d+8]=0,O[(d+=9)+0]=-1,O[d+1]=O[o+1]+h,O[d+2]=O[o+2]+h,O[d+3]=h,O[d+4]=O[o+4],O[d+5]=-1,O[d+6]=0,O[d+7]=0,O[d+8]=0,r+=4,R=n[O[o+0]+0]<O[o+1]?n[O[o+0]+1]<O[o+2]?O[o+5]:O[o+5]+9:n[O[o+0]+1]<O[o+2]?O[o+5]+18:O[o+5]+27,O[o+6]=n[O[o+0]+6],O[o+7]=n[O[o+0]+0],O[o+8]=n[O[o+0]+1],O[R+0]=O[o+0],O[o+0]=-1,R===(L=n[a+0]<O[o+1]?n[a+1]<O[o+2]?O[o+5]:O[o+5]+9:n[a+1]<O[o+2]?O[o+5]+18:O[o+5]+27)){if(D--){o=R;continue}D=3;break}O[L+0]=a;break}R=n[a+0]<O[o+1]?n[a+1]<O[o+2]?O[o+5]:O[o+5]+9:n[a+1]<O[o+2]?O[o+5]+18:O[o+5]+27,O[o+7]=(O[o+7]*O[o+6]+n[a+0]*n[a+6])/(O[o+6]+n[a+6]),O[o+8]=(O[o+8]*O[o+6]+n[a+1]*n[a+6])/(O[o+6]+n[a+6]),O[o+6]+=n[a+6],o=R}}if(t.barnesHutOptimize){for(g=t.scalingRatio,a=0;a<k;a+=e)for(o=0;;)if(O[o+5]>=0){if(b=Math.pow(n[a+0]-O[o+7],2)+Math.pow(n[a+1]-O[o+8],2),4*(f=O[o+3])*f/b<P){if(m=n[a+0]-O[o+7],v=n[a+1]-O[o+8],!0===A?b>0?(_=g*n[a+6]*O[o+6]/b,n[a+2]+=m*_,n[a+3]+=v*_):b<0&&(_=-g*n[a+6]*O[o+6]/Math.sqrt(b),n[a+2]+=m*_,n[a+3]+=v*_):b>0&&(_=g*n[a+6]*O[o+6]/b,n[a+2]+=m*_,n[a+3]+=v*_),(o=O[o+4])<0)break;continue}o=O[o+5]}else if((c=O[o+0])>=0&&c!==a&&(b=(m=n[a+0]-n[c+0])*m+(v=n[a+1]-n[c+1])*v,!0===A?b>0?(_=g*n[a+6]*n[c+6]/b,n[a+2]+=m*_,n[a+3]+=v*_):b<0&&(_=-g*n[a+6]*n[c+6]/Math.sqrt(b),n[a+2]+=m*_,n[a+3]+=v*_):b>0&&(_=g*n[a+6]*n[c+6]/b,n[a+2]+=m*_,n[a+3]+=v*_)),(o=O[o+4])<0)break}else for(g=t.scalingRatio,s=0;s<k;s+=e)for(l=0;l<s;l+=e)m=n[s+0]-n[l+0],v=n[s+1]-n[l+1],!0===A?(b=Math.sqrt(m*m+v*v)-n[s+8]-n[l+8])>0?(_=g*n[s+6]*n[l+6]/b/b,n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_):b<0&&(_=100*g*n[s+6]*n[l+6],n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_):(b=Math.sqrt(m*m+v*v))>0&&(_=g*n[s+6]*n[l+6]/b/b,n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_);for(d=t.gravity/t.scalingRatio,g=t.scalingRatio,a=0;a<k;a+=e)_=0,m=n[a+0],v=n[a+1],b=Math.sqrt(Math.pow(m,2)+Math.pow(v,2)),t.strongGravityMode?b>0&&(_=g*n[a+6]*d):b>0&&(_=g*n[a+6]*d/b),n[a+2]-=m*_,n[a+3]-=v*_;for(g=1*(t.outboundAttractionDistribution?p:1),u=0;u<C;u+=3)s=i[u+0],l=i[u+1],h=i[u+2],y=Math.pow(h,t.edgeWeightInfluence),m=n[s+0]-n[l+0],v=n[s+1]-n[l+1],!0===A?(b=Math.sqrt(m*m+v*v)-n[s+8]-n[l+8],t.linLogMode?t.outboundAttractionDistribution?b>0&&(_=-g*y*Math.log(1+b)/b/n[s+6]):b>0&&(_=-g*y*Math.log(1+b)/b):t.outboundAttractionDistribution?b>0&&(_=-g*y/n[s+6]):b>0&&(_=-g*y)):(b=Math.sqrt(Math.pow(m,2)+Math.pow(v,2)),t.linLogMode?t.outboundAttractionDistribution?b>0&&(_=-g*y*Math.log(1+b)/b/n[s+6]):b>0&&(_=-g*y*Math.log(1+b)/b):t.outboundAttractionDistribution?(b=1,_=-g*y/n[s+6]):(b=1,_=-g*y)),b>0&&(n[s+2]+=m*_,n[s+3]+=v*_,n[l+2]-=m*_,n[l+3]-=v*_);if(!0===A)for(a=0;a<k;a+=e)1!==n[a+9]&&((x=Math.sqrt(Math.pow(n[a+2],2)+Math.pow(n[a+3],2)))>10&&(n[a+2]=10*n[a+2]/x,n[a+3]=10*n[a+3]/x),w=n[a+6]*Math.sqrt((n[a+4]-n[a+2])*(n[a+4]-n[a+2])+(n[a+5]-n[a+3])*(n[a+5]-n[a+3])),S=Math.sqrt((n[a+4]+n[a+2])*(n[a+4]+n[a+2])+(n[a+5]+n[a+3])*(n[a+5]+n[a+3]))/2,E=.1*Math.log(1+S)/(1+Math.sqrt(w)),M=n[a+0]+n[a+2]*(E/t.slowDown),n[a+0]=M,T=n[a+1]+n[a+3]*(E/t.slowDown),n[a+1]=T);else for(a=0;a<k;a+=e)1!==n[a+9]&&(w=n[a+6]*Math.sqrt((n[a+4]-n[a+2])*(n[a+4]-n[a+2])+(n[a+5]-n[a+3])*(n[a+5]-n[a+3])),S=Math.sqrt((n[a+4]+n[a+2])*(n[a+4]+n[a+2])+(n[a+5]+n[a+3])*(n[a+5]+n[a+3]))/2,E=n[a+7]*Math.log(1+S)/(1+Math.sqrt(w)),n[a+7]=Math.min(1,Math.sqrt(E*(Math.pow(n[a+2],2)+Math.pow(n[a+3],2))/(1+Math.sqrt(w)))),M=n[a+0]+n[a+2]*(E/t.slowDown),n[a+0]=M,T=n[a+1]+n[a+3]*(E/t.slowDown),n[a+1]=T);return{}}},4483:t=>{t.exports={gridSize:20,margin:5,expansion:1.1,ratio:1,speed:3}},3700:(t,e)=>{e.validateSettings=function(t){return"gridSize"in t&&"number"!==typeof t.gridSize||t.gridSize<=0?{message:"the `gridSize` setting should be a positive number."}:"margin"in t&&"number"!==typeof t.margin||t.margin<0?{message:"the `margin` setting should be 0 or a positive number."}:"expansion"in t&&"number"!==typeof t.expansion||t.expansion<=0?{message:"the `expansion` setting should be a positive number."}:"ratio"in t&&"number"!==typeof t.ratio||t.ratio<=0?{message:"the `ratio` setting should be a positive number."}:"speed"in t&&"number"!==typeof t.speed||t.speed<=0?{message:"the `speed` setting should be a positive number."}:null},e.graphToByteArray=function(t,e){var n=t.order,i=new Float32Array(3*n),r=0;return t.forEachNode((function(t,n){"function"===typeof e&&(n=e(t,n)),i[r]=n.x,i[r+1]=n.y,i[r+2]=n.size||1,r+=3})),i},e.assignLayoutChanges=function(t,e,n){var i=0;t.forEachNode((function(r){var o={x:e[i],y:e[i+1]};"function"===typeof n&&(o=n(r,o)),t.mergeNodeAttributes(r,o),i+=3}))},e.collectLayoutChanges=function(t,e,n){var i={},r=0;return t.forEachNode((function(t){var o={x:e[r],y:e[r+1]};"function"===typeof n&&(o=n(t,o)),i[t]=o,r+=3})),i},e.createWorker=function(t){var e=window.URL||window.webkitURL,n=t.toString(),i=e.createObjectURL(new Blob(["("+n+").call(this);"],{type:"text/javascript"})),r=new Worker(i);return e.revokeObjectURL(i),r}},7241:(t,e,n)=>{var i=n(4223),r=n(915),o=n(3700),a=n(4483);function s(t,e,n){if(!i(e))throw new Error("graphology-layout-noverlap: the given graph is not a valid graphology instance.");var s=(n="number"===typeof n?{maxIterations:n}:n||{}).maxIterations||500;if("number"!==typeof s||s<=0)throw new Error("graphology-layout-force: you should provide a positive number of maximum iterations.");var l=Object.assign({},a,n.settings),c=o.validateSettings(l);if(c)throw new Error("graphology-layout-noverlap: "+c.message);var u,h=o.graphToByteArray(e,n.inputReducer),d=!1;for(u=0;u<s&&!d;u++)d=r(l,h).converged;if(!t)return o.collectLayoutChanges(e,h,n.outputReducer);o.assignLayoutChanges(e,h,n.outputReducer)}var l=s.bind(null,!1);l.assign=s.bind(null,!0),t.exports=l},915:t=>{function e(){return.01*(.5-Math.random())}t.exports=function(t,n){var i,r,o,a,s,l,c=t.margin,u=t.ratio,h=t.expansion,d=t.gridSize,f=t.speed,p=!0,g=n.length,m=g/3|0,v=new Float32Array(m),y=new Float32Array(m),b=1/0,_=1/0,x=-1/0,w=-1/0;for(i=0;i<g;i+=3)o=n[i+0],a=n[i+1],l=n[i+2]*u+c,b=Math.min(b,o-l),x=Math.max(x,o+l),_=Math.min(_,a-l),w=Math.max(w,a+l);var S=x-b,E=w-_,M=(b+x)/2,T=(_+w)/2;b=M-h*S/2,x=M+h*S/2,_=T-h*E/2,w=T+h*E/2;var k,C,A,P,O,R,L,D,I,N,z,F,U=new Array(d*d),B=U.length;for(k=0;k<B;k++)U[k]=[];for(i=0;i<g;i+=3)for(o=n[i+0],a=n[i+1],C=o-(l=n[i+2]*u+c),A=o+l,P=a-l,O=a+l,R=Math.floor(d*(C-b)/(x-b)),L=Math.floor(d*(A-b)/(x-b)),D=Math.floor(d*(P-_)/(w-_)),I=Math.floor(d*(O-_)/(w-_)),N=R;N<=L;N++)for(z=D;z<=I;z++)U[N*d+z].push(i);var j,H,V,G,W,q,X,Y,K,Z,Q,J,$=new Set;for(k=0;k<B;k++)for(i=0,s=(F=U[k]).length;i<s;i++)for(V=n[(j=F[i])+0],W=n[j+1],X=n[j+2],r=i+1;r<s;r++)H=F[r],K=j+"\xa7"+H,B>1&&$.has(K)||(B>1&&$.add(K),G=n[H+0],q=n[H+1],Y=n[H+2],Z=G-V,Q=q-W,(J=Math.sqrt(Z*Z+Q*Q))<X*u+c+(Y*u+c)&&(p=!1,H=H/3|0,J>0?(v[H]+=Z/J*(1+X),y[H]+=Q/J*(1+X)):(v[H]+=S*e(),y[H]+=E*e())));for(i=0,r=0;i<g;i+=3,r++)n[i+0]+=.1*v[r]*f,n[i+1]+=.1*y[r]*f;return{converged:p}}},9476:(t,e,n)=>{var i=n(6064),r=n(4223),o={dimensions:["x","y"],center:.5,scale:1};function a(t,e,n){if(!r(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var a=(n=i(n,o)).dimensions;if(!Array.isArray(a)||2!==a.length)throw new Error("graphology-layout/random: given dimensions are invalid.");var s=n.center,l=n.scale,c=2*Math.PI,u=(s-.5)*l,h=e.order,d=a[0],f=a[1];function p(t,e){return e[d]=l*Math.cos(t*c/h)+u,e[f]=l*Math.sin(t*c/h)+u,e}var g=0;if(!t){var m={};return e.forEachNode((function(t){m[t]=p(g++,{})})),m}e.updateEachNodeAttributes((function(t,e){return p(g++,e),e}),{attributes:a})}var s=a.bind(null,!1);s.assign=a.bind(null,!0),t.exports=s},3598:(t,e,n)=>{var i=n(6064),r=n(4223),o={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function a(t,e,n){if(!r(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");var a=(n=i(n,o)).dimensions;if(!Array.isArray(a)||a.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var s=a.length,l=n.center,c=n.rng,u=n.scale,h=(l-.5)*u;function d(t){for(var e=0;e<s;e++)t[a[e]]=c()*u+h;return t}if(!t){var f={};return e.forEachNode((function(t){f[t]=d({})})),f}e.updateEachNodeAttributes((function(t,e){return d(e),e}),{attributes:a})}var s=a.bind(null,!1);s.assign=a.bind(null,!0),t.exports=s},8492:(t,e,n)=>{var i=n(4223);function r(t,e,n,r){var o=e+"Centrality";if(!i(n))throw new Error("graphology-centrality/"+o+": the given graph is not a valid graphology instance.");if("degree"!==e&&"undirected"===n.type)throw new Error("graphology-centrality/"+o+": cannot compute "+e+" centrality on an undirected graph.");var a=(r=r||{}).nodeCentralityAttribute||o,s=n.order-1,l=n[e].bind(n);if(!t){var c={};return n.forEachNode((function(t){c[t]=l(t)/s})),c}n.updateEachNodeAttributes((function(t,e){return e[a]=l(t)/s,e}),{attributes:[a]})}var o=r.bind(null,!1,"degree"),a=r.bind(null,!1,"inDegree"),s=r.bind(null,!1,"outDegree");o.assign=r.bind(null,!0,"degree"),a.assign=r.bind(null,!0,"inDegree"),s.assign=r.bind(null,!0,"outDegree"),e.gI=o},4033:(t,e,n)=>{var i=n(4223),r=n(6064),o=n(8306).u,a={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function s(t,e,n){if(!i(e))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");var s,l,c,u,h=(n=r(n,a)).alpha,d=n.maxIterations,f=n.tolerance,p=n.nodePagerankAttribute,g=e.order,m=1/g,v=new o(e,n.getEdgeWeight),y=new Float64Array(e.order),b=new Float64Array(v.weights.length),_=[];for(s=0;s<g;s++)for(y[s]=m,c=v.starts[s+1],0===(u=v.outDegrees[s])&&_.push(s),l=v.starts[s];l<c;l++)b[l]=v.weights[l]/u;for(var x,w,S=0,E=0,M=!1;S<d;){for(w=y,y=new Float64Array(e.order),x=0,s=0,c=_.length;s<c;s++)x+=w[_[s]];for(x*=h,s=0;s<g;s++){for(c=v.starts[s+1],l=v.starts[s];l<c;l++)y[v.neighborhood[l]]+=h*w[s]*b[l];y[s]+=x*m+(1-h)*m}for(E=0,s=0;s<g;s++)E+=Math.abs(y[s]-w[s]);if(E<g*f){M=!0;break}S++}if(!M)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(!t)return v.collect(y);v.assign(p,y)}var l=s.bind(null,!1);l.assign=s.bind(null,!0),t.exports=l},5937:(t,e,n)=>{var i=n(4223),r=n(3524).Fd,o=n(2104),a="weight";function s(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:0}function l(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1]>e[1]?1:t[1]<e[1]?-1:t[2]>e[2]?1:t[2]<e[2]?-1:t[3]>e[3]?1:t[3]<e[3]?-1:0}},6747:(t,e,n)=>{var i=n(7153),r=n(4374);n(5937),i.bidirectional,i.singleSource,i.singleSourceLength,i.undirectedSingleSourceLength,i.brandes,r.edgePathFromNodePath},7153:(t,e,n)=>{var i=n(4223),r=n(2867),o=n(6331);function a(t,e,n){if(!i(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,a={},s=0;a[n]=0;for(var l,c,u,h=[n];0!==h.length;){var d=[];for(l=0,c=h.length;l<c;l++)u=h[l],r.has(u)||(r.add(u),o(d,e[t](u)),a[u]=s);s++,h=d}return a}var s=a.bind(null,"outboundNeighbors"),l=a.bind(null,"neighbors");e.bidirectional=function(t,e,n){if(!i(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if((e=""+e)===(n=""+n))return[e];var r=t.inboundNeighbors.bind(t),o=t.outboundNeighbors.bind(t),a={},s={};a[e]=null,s[n]=null;var l,c,u,h,d,f,p,g,m=[e],v=[n],y=!1;t:for(;m.length&&v.length;)if(m.length<=v.length){for(l=m,m=[],d=0,p=l.length;d<p;d++)for(f=0,g=(u=o(c=l[d])).length;f<g;f++)if((h=u[f])in a||(m.push(h),a[h]=c),h in s){y=!0;break t}}else for(l=v,v=[],d=0,p=l.length;d<p;d++)for(f=0,g=(u=r(c=l[d])).length;f<g;f++)if((h=u[f])in s||(v.push(h),s[h]=c),h in a){y=!0;break t}if(!y)return null;for(var b=[];h;)b.unshift(h),h=a[h];for(h=s[b[b.length-1]];h;)b.push(h),h=s[h];return b.length?b:null},e.singleSource=function(t,e){if(!i(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');var n,r,o,a,s,l,c={},u={};for(c[e=""+e]=!0,u[e]=[e];Object.keys(c).length;)for(o in n=c,c={},n)for(s=0,l=(r=t.outboundNeighbors(o)).length;s<l;s++)u[a=r[s]]||(u[a]=u[o].concat(a),c[a]=!0);return u},e.singleSourceLength=s,e.undirectedSingleSourceLength=l,e.brandes=function(t,e){e=""+e;var n,i,o,a,s,l,c,u,h,d=[],f={},p={},g=t.nodes();for(l=0,u=g.length;l<u;l++)f[a=g[l]]=[],p[a]=0;var m={};p[e]=1,m[e]=0;for(var v=r.of(e);v.size;)for(a=v.dequeue(),d.push(a),n=m[a],i=p[a],c=0,h=(o=t.outboundNeighbors(a)).length;c<h;c++)(s=o[c])in m||(v.enqueue(s),m[s]=n+1),m[s]===n+1&&(p[s]+=i,f[s].push(a));return[d,f,p]}},4374:(t,e)=>{var n=function(){return!0};e.edgePathFromNodePath=function(t,e){var i,r,o,a,s=e.length;if(s<2)return r=e[0],(a=t.multi?t.findEdge(r,r,n):t.edge(r,r))?[a]:[];s--;var l=new Array(s);for(i=0;i<s;i++){if(r=e[i],o=e[i+1],void 0===(a=t.multi?t.findOutboundEdge(r,o,n):t.edge(r,o)))throw new Error("graphology-shortest-path: given path is impossible in given graph.");l[i]=a}return l}},6064:t=>{t.exports=function t(e,n){e=e||{};var i,r={};for(var o in n){var a=e[o],s=n[o];!(i=s)||"object"!==typeof i||"function"===typeof i||Array.isArray(i)||i instanceof Set||i instanceof Map||i instanceof RegExp||i instanceof Date?r[o]=void 0===a?s:a:r[o]=t(a,s)}return r}},3524:(t,e)=>{function n(t){return"number"!==typeof t||isNaN(t)?1:t}function i(t,e){var n={},i=function(t){return"undefined"===typeof t?e:t};"function"===typeof e&&(i=e);var r=function(e){return i(e[t])},o=function(){return i(void 0)};return"string"===typeof t?(n.fromAttributes=r,n.fromGraph=function(t,e){return r(t.getEdgeAttributes(e))},n.fromEntry=function(t,e){return r(e)},n.fromPartialEntry=n.fromEntry,n.fromMinimalEntry=n.fromEntry):"function"===typeof t?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},n.fromGraph=function(e,n){var r=e.extremities(n);return i(t(n,e.getEdgeAttributes(n),r[0],r[1],e.getNodeAttributes(r[0]),e.getNodeAttributes(r[1]),e.isUndirected(n)))},n.fromEntry=function(e,n,r,o,a,s,l){return i(t(e,n,r,o,a,s,l))},n.fromPartialEntry=function(e,n,r,o){return i(t(e,n,r,o))},n.fromMinimalEntry=function(e,n){return i(t(e,n))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o,n.fromMinimalEntry=o),n}e.Fd=function(t){return i(t,n)}},4223:t=>{t.exports=function(t){return null!==t&&"object"===typeof t&&"function"===typeof t.addUndirectedEdgeWithKey&&"function"===typeof t.dropNode&&"boolean"===typeof t.multi}},7611:function(t){t.exports=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function o(t,e,n){return o=r()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o},o.apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return o(t,arguments,n(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),i(a,t)},a(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var l=function(){for(var t=arguments[0],e=1,n=arguments.length;e<n;e++)if(arguments[e])for(var i in arguments[e])t[i]=arguments[e][i];return t};function c(t,e,n,i){var r=t._nodes.get(e),o=null;return r?o="mixed"===i?r.out&&r.out[n]||r.undirected&&r.undirected[n]:"directed"===i?r.out&&r.out[n]:r.undirected&&r.undirected[n]:o}function u(e){return"object"===t(e)&&null!==e}function h(t){var e;for(e in t)return!1;return!0}function d(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function f(t,e,n){var i={enumerable:!0,configurable:!0};"function"==typeof n?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function p(t){return!!u(t)&&!(t.attributes&&!Array.isArray(t.attributes))}"function"==typeof Object.assign&&(l=Object.assign);var g,m={exports:{}},v="object"==typeof Reflect?Reflect:null,y=v&&"function"==typeof v.apply?v.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};g=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var b=Number.isNaN||function(t){return t!=t};function _(){_.init.call(this)}m.exports=_,m.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,o),i(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}P(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&P(t,"error",e,n)}(t,r,{once:!0})}))},_.EventEmitter=_,_.prototype._events=void 0,_.prototype._eventsCount=0,_.prototype._maxListeners=void 0;var x=10;function w(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function S(t){return void 0===t._maxListeners?_.defaultMaxListeners:t._maxListeners}function E(t,e,n,i){var r,o,a,s;if(w(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=S(t))>0&&a.length>r&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return t}function M(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function T(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=M.bind(i);return r.listener=n,i.wrapFn=r,r}function k(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):A(r,r.length)}function C(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function A(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function P(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){i.once&&t.removeEventListener(e,r),n(o)}))}}function O(t){if("function"!=typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}Object.defineProperty(_,"defaultMaxListeners",{enumerable:!0,get:function(){return x},set:function(t){if("number"!=typeof t||t<0||b(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");x=t}}),_.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||b(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},_.prototype.getMaxListeners=function(){return S(this)},_.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=r[t];if(void 0===s)return!1;if("function"==typeof s)y(s,this,e);else{var l=s.length,c=A(s,l);for(n=0;n<l;++n)y(c[n],this,e)}return!0},_.prototype.addListener=function(t,e){return E(this,t,e,!1)},_.prototype.on=_.prototype.addListener,_.prototype.prependListener=function(t,e){return E(this,t,e,!0)},_.prototype.once=function(t,e){return w(e),this.on(t,T(this,t,e)),this},_.prototype.prependOnceListener=function(t,e){return w(e),this.prependListener(t,T(this,t,e)),this},_.prototype.removeListener=function(t,e){var n,i,r,o,a;if(w(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},_.prototype.off=_.prototype.removeListener,_.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},_.prototype.listeners=function(t){return k(this,t,!0)},_.prototype.rawListeners=function(t){return k(this,t,!1)},_.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):C.call(t,e)},_.prototype.listenerCount=C,_.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]},"undefined"!=typeof Symbol&&(O.prototype[Symbol.iterator]=function(){return this}),O.of=function(){var t=arguments,e=t.length,n=0;return new O((function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}}))},O.empty=function(){return new O((function(){return{done:!0}}))},O.fromSequence=function(t){var e=0,n=t.length;return new O((function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}}))},O.is=function(t){return t instanceof O||"object"==typeof t&&null!==t&&"function"==typeof t.next};var R=O,L={};L.ARRAY_BUFFER_SUPPORT="undefined"!=typeof ArrayBuffer,L.SYMBOL_SUPPORT="undefined"!=typeof Symbol;var D=R,I=L,N=I.ARRAY_BUFFER_SUPPORT,z=I.SYMBOL_SUPPORT,F=function(t){var e=function(t){return"string"==typeof t||Array.isArray(t)||N&&ArrayBuffer.isView(t)?D.fromSequence(t):"object"!=typeof t||null===t?null:z&&"function"==typeof t[Symbol.iterator]?t[Symbol.iterator]():"function"==typeof t.next?t:null}(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e},U=F,B=function(t,e){for(var n,i=arguments.length>1?e:1/0,r=i!==1/0?new Array(i):[],o=0,a=U(t);;){if(o===i)return r;if((n=a.next()).done)return o!==e&&(r.length=o),r;r[o++]=n.value}},j=function(t){function n(e){var n;return(n=t.call(this)||this).name="GraphError",n.message=e,n}return e(n,t),n}(a(Error)),H=function(t){function n(e){var i;return(i=t.call(this,e)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return e(n,t),n}(j),V=function(t){function n(e){var i;return(i=t.call(this,e)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return e(n,t),n}(j),G=function(t){function n(e){var i;return(i=t.call(this,e)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(s(i),n.prototype.constructor),i}return e(n,t),n}(j);function W(t,e){this.key=t,this.attributes=e,this.clear()}function q(t,e){this.key=t,this.attributes=e,this.clear()}function X(t,e){this.key=t,this.attributes=e,this.clear()}function Y(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}function K(t,e,n,i,r,o,a){var s,l,c,u;if(i=""+i,0===n){if(!(s=t._nodes.get(i)))throw new V("Graph.".concat(e,': could not find the "').concat(i,'" node in the graph.'));c=r,u=o}else if(3===n){if(r=""+r,!(l=t._edges.get(r)))throw new V("Graph.".concat(e,': could not find the "').concat(r,'" edge in the graph.'));var h=l.source.key,d=l.target.key;if(i===h)s=l.target;else{if(i!==d)throw new V("Graph.".concat(e,': the "').concat(i,'" node is not attached to the "').concat(r,'" edge (').concat(h,", ").concat(d,")."));s=l.source}c=o,u=a}else{if(!(l=t._edges.get(i)))throw new V("Graph.".concat(e,': could not find the "').concat(i,'" edge in the graph.'));s=1===n?l.source:l.target,c=r,u=o}return[s,c,u]}W.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},q.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},X.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},Y.prototype.attach=function(){var t="out",e="in";this.undirected&&(t=e="undirected");var n=this.source.key,i=this.target.key;this.source[t][i]=this,this.undirected&&n===i||(this.target[e][n]=this)},Y.prototype.attachMulti=function(){var t="out",e="in",n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");var r=this.source[t],o=r[i];if(void 0===o)return r[i]=this,void(this.undirected&&n===i||(this.target[e][n]=this));o.previous=this,this.next=o,r[i]=this,this.target[e][n]=this},Y.prototype.detach=function(){var t=this.source.key,e=this.target.key,n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]},Y.prototype.detachMulti=function(){var t=this.source.key,e=this.target.key,n="out",i="in";this.undirected&&(n=i="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Z=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=K(this,e,n,t,i,r),a=o[0],s=o[1];return a.attributes[s]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){return K(this,e,n,t,i)[0].attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=K(this,e,n,t,i,r),a=o[0],s=o[1];return a.attributes.hasOwnProperty(s)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r,o){var a=K(this,e,n,t,i,r,o),s=a[0],l=a[1],c=a[2];return s.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r,o){var a=K(this,e,n,t,i,r,o),s=a[0],l=a[1],c=a[2];if("function"!=typeof c)throw new H("Graph.".concat(e,": updater should be a function."));var u=s.attributes,h=c(u[l]);return u[l]=h,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=K(this,e,n,t,i,r),a=o[0],s=o[1];return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=K(this,e,n,t,i,r),a=o[0],s=o[1];if(!u(s))throw new H("Graph.".concat(e,": provided attributes are not a plain object."));return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=K(this,e,n,t,i,r),a=o[0],s=o[1];if(!u(s))throw new H("Graph.".concat(e,": provided attributes are not a plain object."));return l(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o=K(this,e,n,t,i,r),a=o[0],s=o[1];if("function"!=typeof s)throw new H("Graph.".concat(e,": provided updater is not a function."));return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}}],Q=[{name:function(t){return"get".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=c(this,o,a,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return r.attributes[i]}}},{name:function(t){return"get".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t){var i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var r=""+t,o=""+arguments[1];if(!(i=c(this,r,o,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(r,'" - "').concat(o,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(i=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return i.attributes}}},{name:function(t){return"has".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=c(this,o,a,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return r.attributes.hasOwnProperty(i)}}},{name:function(t){return"set".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+t,s=""+i;if(i=arguments[2],r=arguments[3],!(o=c(this,a,s,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(o=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return o.attributes[i]=r,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}},{name:function(t){return"update".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i,r){var o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var a=""+t,s=""+i;if(i=arguments[2],r=arguments[3],!(o=c(this,a,s,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(a,'" - "').concat(s,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(o=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if("function"!=typeof r)throw new H("Graph.".concat(e,": updater should be a function."));return o.attributes[i]=r(o.attributes[i]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:i}),this}}},{name:function(t){return"remove".concat(t,"Attribute")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=c(this,o,a,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}return delete r.attributes[i],this.emit("edgeAttributesUpdated",{key:r.key,type:"remove",attributes:r.attributes,name:i}),this}}},{name:function(t){return"replace".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=c(this,o,a,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if(!u(i))throw new H("Graph.".concat(e,": provided attributes are not a plain object."));return r.attributes=i,this.emit("edgeAttributesUpdated",{key:r.key,type:"replace",attributes:r.attributes}),this}}},{name:function(t){return"merge".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=c(this,o,a,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if(!u(i))throw new H("Graph.".concat(e,": provided attributes are not a plain object."));return l(r.attributes,i),this.emit("edgeAttributesUpdated",{key:r.key,type:"merge",attributes:r.attributes,data:i}),this}}},{name:function(t){return"update".concat(t,"Attributes")},attacher:function(t,e,n){t.prototype[e]=function(t,i){var r;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new G("Graph.".concat(e,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new G("Graph.".concat(e,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var o=""+t,a=""+i;if(i=arguments[2],!(r=c(this,o,a,n)))throw new V("Graph.".concat(e,': could not find an edge for the given path ("').concat(o,'" - "').concat(a,'").'))}else{if("mixed"!==n)throw new G("Graph.".concat(e,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(t=""+t,!(r=this._edges.get(t)))throw new V("Graph.".concat(e,': could not find the "').concat(t,'" edge in the graph.'))}if("function"!=typeof i)throw new H("Graph.".concat(e,": provided updater is not a function."));return r.attributes=i(r.attributes),this.emit("edgeAttributesUpdated",{key:r.key,type:"update",attributes:r.attributes}),this}}}],J=R,$=F,tt=function(){var t=arguments,e=null,n=-1;return new J((function(){for(var i=null;;){if(null===e){if(++n>=t.length)return{done:!0};e=$(t[n])}if(!0!==(i=e.next()).done)break;e=null}return i}))},et=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function nt(t,e,n,i){var r=!1;for(var o in e)if(o!==i){var a=e[o];if(r=n(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),t&&r)return a.key}}function it(t,e,n,i){var r,o,a,s=!1;for(var l in e)if(l!==i){r=e[l];do{if(o=r.source,a=r.target,s=n(r.key,r.attributes,o.key,a.key,o.attributes,a.attributes,r.undirected),t&&s)return r.key;r=r.next}while(void 0!==r)}}function rt(t,e){var n,i=Object.keys(t),r=i.length,o=0;return new R((function(){do{if(n)n=n.next;else{if(o>=r)return{done:!0};var a=i[o++];if(a===e){n=void 0;continue}n=t[a]}}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}))}function ot(t,e,n,i){var r=e[n];if(r){var o=r.source,a=r.target;return i(r.key,r.attributes,o.key,a.key,o.attributes,a.attributes,r.undirected)&&t?r.key:void 0}}function at(t,e,n,i){var r=e[n];if(r){var o=!1;do{if(o=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&o)return r.key;r=r.next}while(void 0!==r)}}function st(t,e){var n=t[e];return void 0!==n.next?new R((function(){if(!n)return{done:!0};var t={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:t}})):R.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function lt(t,e){if(0===t.size)return[];if("mixed"===e||e===t.type)return"function"==typeof Array.from?Array.from(t._edges.keys()):B(t._edges.keys(),t._edges.size);for(var n,i,r="undirected"===e?t.undirectedSize:t.directedSize,o=new Array(r),a="undirected"===e,s=t._edges.values(),l=0;!0!==(n=s.next()).done;)(i=n.value).undirected===a&&(o[l++]=i.key);return o}function ct(t,e,n,i){if(0!==e.size)for(var r,o,a="mixed"!==n&&n!==e.type,s="undirected"===n,l=!1,c=e._edges.values();!0!==(r=c.next()).done;)if(o=r.value,!a||o.undirected===s){var u=o,h=u.key,d=u.attributes,f=u.source,p=u.target;if(l=i(h,d,f.key,p.key,f.attributes,p.attributes,o.undirected),t&&l)return h}}function ut(t,e){if(0===t.size)return R.empty();var n="mixed"!==e&&e!==t.type,i="undirected"===e,r=t._edges.values();return new R((function(){for(var t,e;;){if((t=r.next()).done)return t;if(e=t.value,!n||e.undirected===i)break}return{value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected},done:!1}}))}function ht(t,e,n,i,r,o){var a,s=e?it:nt;if("undirected"!==n){if("out"!==i&&(a=s(t,r.in,o),t&&a))return a;if("in"!==i&&(a=s(t,r.out,o,i?void 0:r.key),t&&a))return a}if("directed"!==n&&(a=s(t,r.undirected,o),t&&a))return a}function dt(t,e,n,i){var r=[];return ht(!1,t,e,n,i,(function(t){r.push(t)})),r}function ft(t,e,n){var i=R.empty();return"undirected"!==t&&("out"!==e&&void 0!==n.in&&(i=tt(i,rt(n.in))),"in"!==e&&void 0!==n.out&&(i=tt(i,rt(n.out,e?void 0:n.key)))),"directed"!==t&&void 0!==n.undirected&&(i=tt(i,rt(n.undirected))),i}function pt(t,e,n,i,r,o,a){var s,l=n?at:ot;if("undirected"!==e){if(void 0!==r.in&&"out"!==i&&(s=l(t,r.in,o,a),t&&s))return s;if(void 0!==r.out&&"in"!==i&&(i||r.key!==o)&&(s=l(t,r.out,o,a),t&&s))return s}if("directed"!==e&&void 0!==r.undirected&&(s=l(t,r.undirected,o,a),t&&s))return s}function gt(t,e,n,i,r){var o=[];return pt(!1,t,e,n,i,r,(function(t){o.push(t)})),o}function mt(t,e,n,i){var r=R.empty();return"undirected"!==t&&(void 0!==n.in&&"out"!==e&&i in n.in&&(r=tt(r,st(n.in,i))),void 0!==n.out&&"in"!==e&&i in n.out&&(e||n.key!==i)&&(r=tt(r,st(n.out,i)))),"directed"!==t&&void 0!==n.undirected&&i in n.undirected&&(r=tt(r,st(n.undirected,i))),r}var vt=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function yt(){this.A=null,this.B=null}function bt(t,e,n,i,r){for(var o in i){var a=i[o],s=a.source,l=a.target,c=s===n?l:s;if(!e||!e.has(c.key)){var u=r(c.key,c.attributes);if(t&&u)return c.key}}}function _t(t,e,n,i,r){if("mixed"!==e){if("undirected"===e)return bt(t,null,i,i.undirected,r);if("string"==typeof n)return bt(t,null,i,i[n],r)}var o,a=new yt;if("undirected"!==e){if("out"!==n){if(o=bt(t,null,i,i.in,r),t&&o)return o;a.wrap(i.in)}if("in"!==n){if(o=bt(t,a,i,i.out,r),t&&o)return o;a.wrap(i.out)}}if("directed"!==e&&(o=bt(t,a,i,i.undirected,r),t&&o))return o}function xt(t,e,n){var i=Object.keys(n),r=i.length,o=0;return new R((function(){var a=null;do{if(o>=r)return t&&t.wrap(n),{done:!0};var s=n[i[o++]],l=s.source,c=s.target;a=l===e?c:l,t&&t.has(a.key)&&(a=null)}while(null===a);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}))}function wt(t,e){var n=e.name,i=e.type,r=e.direction;t.prototype[n]=function(t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new V("Graph.".concat(n,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return Object.keys(n.undirected);if("string"==typeof e)return Object.keys(n[e])}var i=[];return _t(!1,t,e,n,(function(t){i.push(t)})),i}("mixed"===i?this.type:i,r,e)}}function St(t,e){var n=e.name,i=e.type,r=e.direction,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return R.empty();t=""+t;var e=this._nodes.get(t);if(void 0===e)throw new V("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return function(t,e,n){if("mixed"!==t){if("undirected"===t)return xt(null,n,n.undirected);if("string"==typeof e)return xt(null,n,n[e])}var i=R.empty(),r=new yt;return"undirected"!==t&&("out"!==e&&(i=tt(i,xt(r,n,n.in))),"in"!==e&&(i=tt(i,xt(r,n,n.out)))),"directed"!==t&&(i=tt(i,xt(r,n,n.undirected))),i}("mixed"===i?this.type:i,r,e)}}function Et(t,e,n,i,r){for(var o,a,s,l,c,u,h,d=i._nodes.values(),f=i.type;!0!==(o=d.next()).done;){var p=!1;if(a=o.value,"undirected"!==f)for(s in l=a.out){c=l[s];do{if(u=c.target,p=!0,h=r(a.key,u.key,a.attributes,u.attributes,c.key,c.attributes,c.undirected),t&&h)return c;c=c.next}while(c)}if("directed"!==f)for(s in l=a.undirected)if(!(e&&a.key>s)){c=l[s];do{if((u=c.target).key!==s&&(u=c.source),p=!0,h=r(a.key,u.key,a.attributes,u.attributes,c.key,c.attributes,c.undirected),t&&h)return c;c=c.next}while(c)}if(n&&!p&&(h=r(a.key,null,a.attributes,null,null,null,null),t&&h))return null}}function Mt(t){if(!u(t))throw new H('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new H("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!u(t.attributes)||null===t.attributes))throw new H("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Tt(t){if(!u(t))throw new H('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new H("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new H("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!u(t.attributes)||null===t.attributes))throw new H("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&"boolean"!=typeof t.undirected)throw new H("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}yt.prototype.wrap=function(t){null===this.A?this.A=t:null===this.B&&(this.B=t)},yt.prototype.has=function(t){return null!==this.A&&t in this.A||null!==this.B&&t in this.B};var kt,Ct=(kt=255&Math.floor(256*Math.random()),function(){return kt++}),At=new Set(["directed","undirected","mixed"]),Pt=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ot={allowSelfLoops:!0,multi:!1,type:"mixed"};function Rt(t,e,n){var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function Lt(t,e,n,i,r,o,a,s){if(!i&&"undirected"===t.type)throw new G("Graph.".concat(e,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new G("Graph.".concat(e,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(s&&!u(s))throw new H("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));if(o=""+o,a=""+a,s=s||{},!t.allowSelfLoops&&o===a)throw new G("Graph.".concat(e,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var l=t._nodes.get(o),c=t._nodes.get(a);if(!l)throw new V("Graph.".concat(e,': source node "').concat(o,'" not found.'));if(!c)throw new V("Graph.".concat(e,': target node "').concat(a,'" not found.'));var h={key:null,undirected:i,source:o,target:a,attributes:s};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new G("Graph.".concat(e,': the "').concat(r,'" edge already exists in the graph.'));if(!t.multi&&(i?void 0!==l.undirected[a]:void 0!==l.out[a]))throw new G("Graph.".concat(e,': an edge linking "').concat(o,'" to "').concat(a,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var d=new Y(i,r,l,c,s);t._edges.set(r,d);var f=o===a;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,h.key=r,t.emit("edgeAdded",h),r}function Dt(t,e,n,i,r,o,a,s,c){if(!i&&"undirected"===t.type)throw new G("Graph.".concat(e,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(i&&"directed"===t.type)throw new G("Graph.".concat(e,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(s)if(c){if("function"!=typeof s)throw new H("Graph.".concat(e,': invalid updater function. Expecting a function but got "').concat(s,'"'))}else if(!u(s))throw new H("Graph.".concat(e,': invalid attributes. Expecting an object but got "').concat(s,'"'));var h;if(o=""+o,a=""+a,c&&(h=s,s=void 0),!t.allowSelfLoops&&o===a)throw new G("Graph.".concat(e,': source & target are the same ("').concat(o,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var d,f,p=t._nodes.get(o),g=t._nodes.get(a);if(!n&&(d=t._edges.get(r))){if(!(d.source.key===o&&d.target.key===a||i&&d.source.key===a&&d.target.key===o))throw new G("Graph.".concat(e,': inconsistency detected when attempting to merge the "').concat(r,'" edge with "').concat(o,'" source & "').concat(a,'" target vs. ("').concat(d.source.key,'", "').concat(d.target.key,'").'));f=d}if(f||t.multi||!p||(f=i?p.undirected[a]:p.out[a]),f){var m=[f.key,!1,!1,!1];if(c?!h:!s)return m;if(c){var v=f.attributes;f.attributes=h(v),t.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else l(f.attributes,s),t.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return m}s=s||{},c&&h&&(s=h(s));var y={key:null,undirected:i,source:o,target:a,attributes:s};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new G("Graph.".concat(e,': the "').concat(r,'" edge already exists in the graph.'));var b=!1,_=!1;p||(p=Rt(t,o,{}),b=!0,o===a&&(g=p,_=!0)),g||(g=Rt(t,a,{}),_=!0),d=new Y(i,r,p,g,s),t._edges.set(r,d);var x=o===a;return i?(p.undirectedDegree++,g.undirectedDegree++,x&&(p.undirectedLoops++,t._undirectedSelfLoopCount++)):(p.outDegree++,g.inDegree++,x&&(p.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,y.key=r,t.emit("edgeAdded",y),[r,!0,b,_]}function It(t,e){t._edges.delete(e.key);var n=e.source,i=e.target,r=e.attributes,o=e.undirected,a=n===i;o?(n.undirectedDegree--,i.undirectedDegree--,a&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,a&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:o})}var Nt=function(n){function i(t){var e;if(e=n.call(this)||this,"boolean"!=typeof(t=l({},Ot,t)).multi)throw new H("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(t.multi,'".'));if(!At.has(t.type))throw new H('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(t.type,'".'));if("boolean"!=typeof t.allowSelfLoops)throw new H("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(t.allowSelfLoops,'".'));var i="mixed"===t.type?W:"directed"===t.type?q:X;d(s(e),"NodeDataClass",i);var r="geid_"+Ct()+"_",o=0;return d(s(e),"_attributes",{}),d(s(e),"_nodes",new Map),d(s(e),"_edges",new Map),d(s(e),"_directedSize",0),d(s(e),"_undirectedSize",0),d(s(e),"_directedSelfLoopCount",0),d(s(e),"_undirectedSelfLoopCount",0),d(s(e),"_edgeKeyGenerator",(function(){var t;do{t=r+o++}while(e._edges.has(t));return t})),d(s(e),"_options",t),Pt.forEach((function(t){return d(s(e),t,e[t])})),f(s(e),"order",(function(){return e._nodes.size})),f(s(e),"size",(function(){return e._edges.size})),f(s(e),"directedSize",(function(){return e._directedSize})),f(s(e),"undirectedSize",(function(){return e._undirectedSize})),f(s(e),"selfLoopCount",(function(){return e._directedSelfLoopCount+e._undirectedSelfLoopCount})),f(s(e),"directedSelfLoopCount",(function(){return e._directedSelfLoopCount})),f(s(e),"undirectedSelfLoopCount",(function(){return e._undirectedSelfLoopCount})),f(s(e),"multi",e._options.multi),f(s(e),"type",e._options.type),f(s(e),"allowSelfLoops",e._options.allowSelfLoops),f(s(e),"implementation",(function(){return"graphology"})),e}e(i,n);var r=i.prototype;return r._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},r.hasNode=function(t){return this._nodes.has(""+t)},r.hasDirectedEdge=function(t,e){if("undirected"===this.type)return!1;if(1===arguments.length){var n=""+t,i=this._edges.get(n);return!!i&&!i.undirected}if(2===arguments.length){t=""+t,e=""+e;var r=this._nodes.get(t);return!!r&&r.out.hasOwnProperty(e)}throw new H("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.hasUndirectedEdge=function(t,e){if("directed"===this.type)return!1;if(1===arguments.length){var n=""+t,i=this._edges.get(n);return!!i&&i.undirected}if(2===arguments.length){t=""+t,e=""+e;var r=this._nodes.get(t);return!!r&&r.undirected.hasOwnProperty(e)}throw new H("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.hasEdge=function(t,e){if(1===arguments.length){var n=""+t;return this._edges.has(n)}if(2===arguments.length){t=""+t,e=""+e;var i=this._nodes.get(t);return!!i&&(void 0!==i.out&&i.out.hasOwnProperty(e)||void 0!==i.undirected&&i.undirected.hasOwnProperty(e))}throw new H("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},r.directedEdge=function(t,e){if("undirected"!==this.type){if(t=""+t,e=""+e,this.multi)throw new G("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var n=this._nodes.get(t);if(!n)throw new V('Graph.directedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new V('Graph.directedEdge: could not find the "'.concat(e,'" target node in the graph.'));var i=n.out&&n.out[e]||void 0;return i?i.key:void 0}},r.undirectedEdge=function(t,e){if("directed"!==this.type){if(t=""+t,e=""+e,this.multi)throw new G("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var n=this._nodes.get(t);if(!n)throw new V('Graph.undirectedEdge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new V('Graph.undirectedEdge: could not find the "'.concat(e,'" target node in the graph.'));var i=n.undirected&&n.undirected[e]||void 0;return i?i.key:void 0}},r.edge=function(t,e){if(this.multi)throw new G("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.edge: could not find the "'.concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new V('Graph.edge: could not find the "'.concat(e,'" target node in the graph.'));var i=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(i)return i.key},r.areDirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.areDirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)},r.areOutNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.areOutNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out},r.areInNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.areInNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in},r.areUndirectedNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.areUndirectedNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"directed"!==this.type&&e in n.undirected},r.areNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.areNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&(e in n.in||e in n.out)||"directed"!==this.type&&e in n.undirected},r.areInboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.areInboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.in||"directed"!==this.type&&e in n.undirected},r.areOutboundNeighbors=function(t,e){t=""+t,e=""+e;var n=this._nodes.get(t);if(!n)throw new V('Graph.areOutboundNeighbors: could not find the "'.concat(t,'" node in the graph.'));return"undirected"!==this.type&&e in n.out||"directed"!==this.type&&e in n.undirected},r.inDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.inDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree},r.outDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.outDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.outDegree},r.directedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.directedDegree: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree+e.outDegree},r.undirectedDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.undirectedDegree: could not find the "'.concat(t,'" node in the graph.'));return"directed"===this.type?0:e.undirectedDegree},r.inboundDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.inboundDegree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree),n},r.outboundDegree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.outboundDegree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.outDegree),n},r.degree=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.degree: could not find the "'.concat(t,'" node in the graph.'));var n=0;return"directed"!==this.type&&(n+=e.undirectedDegree),"undirected"!==this.type&&(n+=e.inDegree+e.outDegree),n},r.inDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree-e.directedLoops},r.outDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.outDegree-e.directedLoops},r.directedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"undirected"===this.type?0:e.inDegree+e.outDegree-2*e.directedLoops},r.undirectedDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));return"directed"===this.type?0:e.undirectedDegree-2*e.undirectedLoops},r.inboundDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var n=0,i=0;return"directed"!==this.type&&(n+=e.undirectedDegree,i+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.inDegree,i+=e.directedLoops),n-i},r.outboundDegreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var n=0,i=0;return"directed"!==this.type&&(n+=e.undirectedDegree,i+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.outDegree,i+=e.directedLoops),n-i},r.degreeWithoutSelfLoops=function(t){t=""+t;var e=this._nodes.get(t);if(!e)throw new V('Graph.degreeWithoutSelfLoops: could not find the "'.concat(t,'" node in the graph.'));var n=0,i=0;return"directed"!==this.type&&(n+=e.undirectedDegree,i+=2*e.undirectedLoops),"undirected"!==this.type&&(n+=e.inDegree+e.outDegree,i+=2*e.directedLoops),n-i},r.source=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new V('Graph.source: could not find the "'.concat(t,'" edge in the graph.'));return e.source.key},r.target=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new V('Graph.target: could not find the "'.concat(t,'" edge in the graph.'));return e.target.key},r.extremities=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new V('Graph.extremities: could not find the "'.concat(t,'" edge in the graph.'));return[e.source.key,e.target.key]},r.opposite=function(t,e){t=""+t,e=""+e;var n=this._edges.get(e);if(!n)throw new V('Graph.opposite: could not find the "'.concat(e,'" edge in the graph.'));var i=n.source.key,r=n.target.key;if(t===i)return r;if(t===r)return i;throw new V('Graph.opposite: the "'.concat(t,'" node is not attached to the "').concat(e,'" edge (').concat(i,", ").concat(r,")."))},r.hasExtremity=function(t,e){t=""+t,e=""+e;var n=this._edges.get(t);if(!n)throw new V('Graph.hasExtremity: could not find the "'.concat(t,'" edge in the graph.'));return n.source.key===e||n.target.key===e},r.isUndirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new V('Graph.isUndirected: could not find the "'.concat(t,'" edge in the graph.'));return e.undirected},r.isDirected=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new V('Graph.isDirected: could not find the "'.concat(t,'" edge in the graph.'));return!e.undirected},r.isSelfLoop=function(t){t=""+t;var e=this._edges.get(t);if(!e)throw new V('Graph.isSelfLoop: could not find the "'.concat(t,'" edge in the graph.'));return e.source===e.target},r.addNode=function(t,e){var n=function(t,e,n){if(n&&!u(n))throw new H('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(n,'"'));if(e=""+e,n=n||{},t._nodes.has(e))throw new G('Graph.addNode: the "'.concat(e,'" node already exist in the graph.'));var i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}(this,t,e);return n.key},r.mergeNode=function(t,e){if(e&&!u(e))throw new H('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(e,'"'));t=""+t,e=e||{};var n=this._nodes.get(t);return n?(e&&(l(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})),[t,!1]):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])},r.updateNode=function(t,e){if(e&&"function"!=typeof e)throw new H('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(e,'"'));t=""+t;var n=this._nodes.get(t);if(n){if(e){var i=n.attributes;n.attributes=e(i),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}var r=e?e({}):{};return n=new this.NodeDataClass(t,r),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0]},r.dropNode=function(t){t=""+t;var e,n=this._nodes.get(t);if(!n)throw new V('Graph.dropNode: could not find the "'.concat(t,'" node in the graph.'));if("undirected"!==this.type){for(var i in n.out){e=n.out[i];do{It(this,e),e=e.next}while(e)}for(var r in n.in){e=n.in[r];do{It(this,e),e=e.next}while(e)}}if("directed"!==this.type)for(var o in n.undirected){e=n.undirected[o];do{It(this,e),e=e.next}while(e)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})},r.dropEdge=function(t){var e;if(arguments.length>1){var n=""+arguments[0],i=""+arguments[1];if(!(e=c(this,n,i,this.type)))throw new V('Graph.dropEdge: could not find the "'.concat(n,'" -> "').concat(i,'" edge in the graph.'))}else if(t=""+t,!(e=this._edges.get(t)))throw new V('Graph.dropEdge: could not find the "'.concat(t,'" edge in the graph.'));return It(this,e),this},r.dropDirectedEdge=function(t,e){if(arguments.length<2)throw new G("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new G("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=c(this,t=""+t,e=""+e,"directed");if(!n)throw new V('Graph.dropDirectedEdge: could not find a "'.concat(t,'" -> "').concat(e,'" edge in the graph.'));return It(this,n),this},r.dropUndirectedEdge=function(t,e){if(arguments.length<2)throw new G("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new G("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var n=c(this,t,e,"undirected");if(!n)throw new V('Graph.dropUndirectedEdge: could not find a "'.concat(t,'" -> "').concat(e,'" edge in the graph.'));return It(this,n),this},r.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},r.clearEdges=function(){for(var t,e=this._nodes.values();!0!==(t=e.next()).done;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},r.getAttribute=function(t){return this._attributes[t]},r.getAttributes=function(){return this._attributes},r.hasAttribute=function(t){return this._attributes.hasOwnProperty(t)},r.setAttribute=function(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},r.updateAttribute=function(t,e){if("function"!=typeof e)throw new H("Graph.updateAttribute: updater should be a function.");var n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this},r.removeAttribute=function(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this},r.replaceAttributes=function(t){if(!u(t))throw new H("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},r.mergeAttributes=function(t){if(!u(t))throw new H("Graph.mergeAttributes: provided attributes are not a plain object.");return l(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this},r.updateAttributes=function(t){if("function"!=typeof t)throw new H("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},r.updateEachNodeAttributes=function(t,e){if("function"!=typeof t)throw new H("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!p(e))throw new H("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i,r=this._nodes.values();!0!==(n=r.next()).done;)(i=n.value).attributes=t(i.key,i.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})},r.updateEachEdgeAttributes=function(t,e){if("function"!=typeof t)throw new H("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!p(e))throw new H("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var n,i,r,o,a=this._edges.values();!0!==(n=a.next()).done;)r=(i=n.value).source,o=i.target,i.attributes=t(i.key,i.attributes,r.key,o.key,r.attributes,o.attributes,i.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})},r.forEachAdjacencyEntry=function(t){if("function"!=typeof t)throw new H("Graph.forEachAdjacencyEntry: expecting a callback.");Et(!1,!1,!1,this,t)},r.forEachAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new H("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Et(!1,!1,!0,this,t)},r.forEachAssymetricAdjacencyEntry=function(t){if("function"!=typeof t)throw new H("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Et(!1,!0,!1,this,t)},r.forEachAssymetricAdjacencyEntryWithOrphans=function(t){if("function"!=typeof t)throw new H("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Et(!1,!0,!0,this,t)},r.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):B(this._nodes.keys(),this._nodes.size)},r.forEachNode=function(t){if("function"!=typeof t)throw new H("Graph.forEachNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)t((n=e.value).key,n.attributes)},r.findNode=function(t){if("function"!=typeof t)throw new H("Graph.findNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)if(t((n=e.value).key,n.attributes))return n.key},r.mapNodes=function(t){if("function"!=typeof t)throw new H("Graph.mapNode: expecting a callback.");for(var e,n,i=this._nodes.values(),r=new Array(this.order),o=0;!0!==(e=i.next()).done;)n=e.value,r[o++]=t(n.key,n.attributes);return r},r.someNode=function(t){if("function"!=typeof t)throw new H("Graph.someNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)if(t((n=e.value).key,n.attributes))return!0;return!1},r.everyNode=function(t){if("function"!=typeof t)throw new H("Graph.everyNode: expecting a callback.");for(var e,n,i=this._nodes.values();!0!==(e=i.next()).done;)if(!t((n=e.value).key,n.attributes))return!1;return!0},r.filterNodes=function(t){if("function"!=typeof t)throw new H("Graph.filterNodes: expecting a callback.");for(var e,n,i=this._nodes.values(),r=[];!0!==(e=i.next()).done;)t((n=e.value).key,n.attributes)&&r.push(n.key);return r},r.reduceNodes=function(t,e){if("function"!=typeof t)throw new H("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new H("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var n,i,r=e,o=this._nodes.values();!0!==(n=o.next()).done;)r=t(r,(i=n.value).key,i.attributes);return r},r.nodeEntries=function(){var t=this._nodes.values();return new R((function(){var e=t.next();if(e.done)return e;var n=e.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}))},r.export=function(){var t=this,e=new Array(this._nodes.size),n=0;this._nodes.forEach((function(t,i){e[n++]=function(t,e){var n={key:t};return h(e.attributes)||(n.attributes=l({},e.attributes)),n}(i,t)}));var i=new Array(this._edges.size);return n=0,this._edges.forEach((function(e,r){i[n++]=function(t,e,n){var i={key:e,source:n.source.key,target:n.target.key};return h(n.attributes)||(i.attributes=l({},n.attributes)),"mixed"===t&&n.undirected&&(i.undirected=!0),i}(t.type,r,e)})),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}},r.import=function(t){var e,n,r,o,a,s=this,l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t instanceof i)return t.forEachNode((function(t,e){l?s.mergeNode(t,e):s.addNode(t,e)})),t.forEachEdge((function(t,e,n,i,r,o,a){l?a?s.mergeUndirectedEdgeWithKey(t,n,i,e):s.mergeDirectedEdgeWithKey(t,n,i,e):a?s.addUndirectedEdgeWithKey(t,n,i,e):s.addDirectedEdgeWithKey(t,n,i,e)})),this;if(!u(t))throw new H("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!u(t.attributes))throw new H("Graph.import: invalid attributes. Expecting a plain object.");l?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}if(t.nodes){if(r=t.nodes,!Array.isArray(r))throw new H("Graph.import: invalid nodes. Expecting an array.");for(e=0,n=r.length;e<n;e++){Mt(o=r[e]);var c=o,h=c.key,d=c.attributes;l?this.mergeNode(h,d):this.addNode(h,d)}}if(t.edges){var f=!1;if("undirected"===this.type&&(f=!0),r=t.edges,!Array.isArray(r))throw new H("Graph.import: invalid edges. Expecting an array.");for(e=0,n=r.length;e<n;e++){Tt(a=r[e]);var p=a,g=p.source,m=p.target,v=p.attributes,y=p.undirected,b=void 0===y?f:y;"key"in a?(l?b?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:b?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,a.key,g,m,v):(l?b?this.mergeUndirectedEdge:this.mergeDirectedEdge:b?this.addUndirectedEdge:this.addDirectedEdge).call(this,g,m,v)}}return this},r.nullCopy=function(t){var e=new i(l({},this._options,t));return e.replaceAttributes(l({},this.getAttributes())),e},r.emptyCopy=function(t){var e=this.nullCopy(t);return this._nodes.forEach((function(t,n){var i=l({},t.attributes);t=new e.NodeDataClass(n,i),e._nodes.set(n,t)})),e},r.copy=function(t){if("string"==typeof(t=t||{}).type&&t.type!==this.type&&"mixed"!==t.type)throw new G('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(t.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof t.multi&&t.multi!==this.multi&&!0!==t.multi)throw new G("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof t.allowSelfLoops&&t.allowSelfLoops!==this.allowSelfLoops&&!0!==t.allowSelfLoops)throw new G("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var e,n,i=this.emptyCopy(t),r=this._edges.values();!0!==(e=r.next()).done;)Lt(i,"copy",!1,(n=e.value).undirected,n.key,n.source.key,n.target.key,l({},n.attributes));return i},r.toJSON=function(){return this.export()},r.toString=function(){return"[object Graph]"},r.inspect=function(){var e=this,n={};this._nodes.forEach((function(t,e){n[e]=t.attributes}));var i={},r={};this._edges.forEach((function(t,n){var o,a=t.undirected?"--":"->",s="",l=t.source.key,c=t.target.key;t.undirected&&l>c&&(o=l,l=c,c=o);var u="(".concat(l,")").concat(a,"(").concat(c,")");n.startsWith("geid_")?e.multi&&(void 0===r[u]?r[u]=0:r[u]++,s+="".concat(r[u],". ")):s+="[".concat(n,"]: "),i[s+=u]=t.attributes}));var o={};for(var a in this)this.hasOwnProperty(a)&&!Pt.has(a)&&"function"!=typeof this[a]&&"symbol"!==t(a)&&(o[a]=this[a]);return o.attributes=this._attributes,o.nodes=n,o.edges=i,d(o,"constructor",this.constructor),o},i}(m.exports.EventEmitter);"undefined"!=typeof Symbol&&(Nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Nt.prototype.inspect),[{name:function(t){return"".concat(t,"Edge")},generateKey:!0},{name:function(t){return"".concat(t,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(t){return"".concat(t,"EdgeWithKey")}},{name:function(t){return"".concat(t,"DirectedEdgeWithKey")},type:"directed"},{name:function(t){return"".concat(t,"UndirectedEdgeWithKey")},type:"undirected"}].forEach((function(t){["add","merge","update"].forEach((function(e){var n=t.name(e),i="add"===e?Lt:Dt;t.generateKey?Nt.prototype[n]=function(r,o,a){return i(this,n,!0,"undirected"===(t.type||this.type),null,r,o,a,"update"===e)}:Nt.prototype[n]=function(r,o,a,s){return i(this,n,!1,"undirected"===(t.type||this.type),r,o,a,s,"update"===e)}}))})),function(t){Z.forEach((function(e){var n=e.name,i=e.attacher;i(t,n("Node"),0),i(t,n("Source"),1),i(t,n("Target"),2),i(t,n("Opposite"),3)}))}(Nt),function(t){Q.forEach((function(e){var n=e.name,i=e.attacher;i(t,n("Edge"),"mixed"),i(t,n("DirectedEdge"),"directed"),i(t,n("UndirectedEdge"),"undirected")}))}(Nt),function(t){et.forEach((function(e){!function(t,e){var n=e.name,i=e.type,r=e.direction;t.prototype[n]=function(t,e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return[];if(!arguments.length)return lt(this,i);if(1===arguments.length){t=""+t;var o=this._nodes.get(t);if(void 0===o)throw new V("Graph.".concat(n,': could not find the "').concat(t,'" node in the graph.'));return dt(this.multi,"mixed"===i?this.type:i,r,o)}if(2===arguments.length){t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new V("Graph.".concat(n,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new V("Graph.".concat(n,':  could not find the "').concat(e,'" target node in the graph.'));return gt(i,this.multi,r,a,e)}throw new H("Graph.".concat(n,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"===i||"mixed"===this.type||i===this.type){if(1===arguments.length)return ct(!1,this,i,n=t);if(2===arguments.length){t=""+t,n=e;var a=this._nodes.get(t);if(void 0===a)throw new V("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return ht(!1,this.multi,"mixed"===i?this.type:i,r,a,n)}if(3===arguments.length){t=""+t,e=""+e;var s=this._nodes.get(t);if(!s)throw new V("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new V("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return pt(!1,i,this.multi,r,s,e,n)}throw new H("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){var t,e=Array.prototype.slice.call(arguments),n=e.pop();if(0===e.length){var r=0;"directed"!==i&&(r+=this.undirectedSize),"undirected"!==i&&(r+=this.directedSize),t=new Array(r);var a=0;e.push((function(e,i,r,o,s,l,c){t[a++]=n(e,i,r,o,s,l,c)}))}else t=[],e.push((function(e,i,r,o,a,s,l){t.push(n(e,i,r,o,a,s,l))}));return this[o].apply(this,e),t};var s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),n=[];return t.push((function(t,i,r,o,a,s,l){e(t,i,r,o,a,s,l)&&n.push(t)})),this[o].apply(this,t),n};var l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){var t,e,n=Array.prototype.slice.call(arguments);if(n.length<2||n.length>4)throw new H("Graph.".concat(l,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(n.length,")."));if("function"==typeof n[n.length-1]&&"function"!=typeof n[n.length-2])throw new H("Graph.".concat(l,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===n.length?(t=n[0],e=n[1],n=[]):3===n.length?(t=n[1],e=n[2],n=[n[0]]):4===n.length&&(t=n[2],e=n[3],n=[n[0],n[1]]);var i=e;return n.push((function(e,n,r,o,a,s,l){i=t(i,e,n,r,o,a,s,l)})),this[o].apply(this,n),i}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e,n){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return!1;if(1===arguments.length)return ct(!0,this,i,n=t);if(2===arguments.length){t=""+t,n=e;var a=this._nodes.get(t);if(void 0===a)throw new V("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return ht(!0,this.multi,"mixed"===i?this.type:i,r,a,n)}if(3===arguments.length){t=""+t,e=""+e;var s=this._nodes.get(t);if(!s)throw new V("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new V("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return pt(!0,i,this.multi,r,s,e,n)}throw new H("Graph.".concat(o,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var a="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,n,i,r,o,a,s){return e(t,n,i,r,o,a,s)})),!!this[o].apply(this,t)};var s="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){var t=Array.prototype.slice.call(arguments),e=t.pop();return t.push((function(t,n,i,r,o,a,s){return!e(t,n,i,r,o,a,s)})),!this[o].apply(this,t)}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(t,e){if("mixed"!==i&&"mixed"!==this.type&&i!==this.type)return R.empty();if(!arguments.length)return ut(this,i);if(1===arguments.length){t=""+t;var n=this._nodes.get(t);if(!n)throw new V("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));return ft(i,r,n)}if(2===arguments.length){t=""+t,e=""+e;var a=this._nodes.get(t);if(!a)throw new V("Graph.".concat(o,':  could not find the "').concat(t,'" source node in the graph.'));if(!this._nodes.has(e))throw new V("Graph.".concat(o,':  could not find the "').concat(e,'" target node in the graph.'));return mt(i,r,a,e)}throw new H("Graph.".concat(o,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(t,e)}))}(Nt),function(t){vt.forEach((function(e){wt(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(t,e){if("mixed"===i||"mixed"===this.type||i===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new V("Graph.".concat(o,': could not find the "').concat(t,'" node in the graph.'));_t(!1,"mixed"===i?this.type:i,r,n,e)}};var a="map"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(t,e){var n=[];return this[o](t,(function(t,i){n.push(e(t,i))})),n};var s="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(t,e){var n=[];return this[o](t,(function(t,i){e(t,i)&&n.push(t)})),n};var l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(t,e,n){if(arguments.length<3)throw new H("Graph.".concat(l,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var i=n;return this[o](t,(function(t,n){i=e(i,t,n)})),i}}(t,e),function(t,e){var n=e.name,i=e.type,r=e.direction,o=n[0].toUpperCase()+n.slice(1,-1),a="find"+o;t.prototype[a]=function(t,e){if("mixed"===i||"mixed"===this.type||i===this.type){t=""+t;var n=this._nodes.get(t);if(void 0===n)throw new V("Graph.".concat(a,': could not find the "').concat(t,'" node in the graph.'));return _t(!0,"mixed"===i?this.type:i,r,n,e)}};var s="some"+o;t.prototype[s]=function(t,e){return!!this[a](t,e)};var l="every"+o;t.prototype[l]=function(t,e){return!this[a](t,(function(t,n){return!e(t,n)}))}}(t,e),St(t,e)}))}(Nt);var zt=function(t){function n(e){var n=l({type:"directed"},e);if("multi"in n&&!1!==n.multi)throw new H("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==n.type)throw new H('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Nt),Ft=function(t){function n(e){var n=l({type:"undirected"},e);if("multi"in n&&!1!==n.multi)throw new H("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==n.type)throw new H('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Nt),Ut=function(t){function n(e){var n=l({multi:!0},e);if("multi"in n&&!0!==n.multi)throw new H("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return t.call(this,n)||this}return e(n,t),n}(Nt),Bt=function(t){function n(e){var n=l({type:"directed",multi:!0},e);if("multi"in n&&!0!==n.multi)throw new H("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==n.type)throw new H('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Nt),jt=function(t){function n(e){var n=l({type:"undirected",multi:!0},e);if("multi"in n&&!0!==n.multi)throw new H("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==n.type)throw new H('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');return t.call(this,n)||this}return e(n,t),n}(Nt);function Ht(t){t.from=function(e,n){var i=l({},e.options,n),r=new t(i);return r.import(e),r}}return Ht(Nt),Ht(zt),Ht(Ft),Ht(Ut),Ht(Bt),Ht(jt),Nt.Graph=Nt,Nt.DirectedGraph=zt,Nt.UndirectedGraph=Ft,Nt.MultiGraph=Ut,Nt.MultiDirectedGraph=Bt,Nt.MultiUndirectedGraph=jt,Nt.InvalidArgumentsGraphError=H,Nt.NotFoundGraphError=V,Nt.UsageGraphError=G,Nt}()},2104:(t,e,n)=>{var i=n(8771),r=n(5475),o=n(1861),a=r.DEFAULT_COMPARATOR,s=r.reverseComparator;function l(t,e,n,i){for(var r,o,a=e[i];i>n&&t(a,o=e[r=i-1>>1])<0;)e[i]=o,i=r;e[i]=a}function c(t,e,n){for(var i,r=e.length,o=n,a=e[n],s=2*n+1;s<r;)(i=s+1)<r&&t(e[s],e[i])>=0&&(s=i),e[n]=e[s],s=2*(n=s)+1;e[n]=a,l(t,e,o,n)}function u(t,e,n){e.push(n),l(t,e,0,e.length-1)}function h(t,e){var n=e.pop();if(0!==e.length){var i=e[0];return e[0]=n,c(t,e,0),i}return n}function d(t,e,n){if(0===e.length)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var i=e[0];return e[0]=n,c(t,e,0),i}function f(t,e,n){var i;return 0!==e.length&&t(e[0],n)<0&&(i=e[0],e[0]=n,n=i,c(t,e,0)),n}function p(t,e){for(var n=e.length>>1;--n>=0;)c(t,e,n)}function g(t,e){for(var n=e.length,i=0,r=new Array(n);i<n;)r[i++]=h(t,e);return r}function m(t){if(this.clear(),this.comparator=t||a,"function"!==typeof this.comparator)throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}function v(t){if(this.clear(),this.comparator=t||a,"function"!==typeof this.comparator)throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=s(this.comparator)}m.prototype.clear=function(){this.items=[],this.size=0},m.prototype.push=function(t){return u(this.comparator,this.items,t),++this.size},m.prototype.peek=function(){return this.items[0]},m.prototype.pop=function(){return 0!==this.size&&this.size--,h(this.comparator,this.items)},m.prototype.replace=function(t){return d(this.comparator,this.items,t)},m.prototype.pushpop=function(t){return f(this.comparator,this.items,t)},m.prototype.consume=function(){return this.size=0,g(this.comparator,this.items)},m.prototype.toArray=function(){return g(this.comparator,this.items.slice())},m.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:m,enumerable:!1}),t},"undefined"!==typeof Symbol&&(m.prototype[Symbol.for("nodejs.util.inspect.custom")]=m.prototype.inspect),v.prototype=m.prototype,m.from=function(t,e){var n,i=new m(e);return n=o.isArrayLike(t)?t.slice():o.toArray(t),p(i.comparator,n),i.items=n,i.size=n.length,i},v.from=function(t,e){var n,i=new v(e);return n=o.isArrayLike(t)?t.slice():o.toArray(t),p(i.comparator,n),i.items=n,i.size=n.length,i},m.siftUp=c,m.siftDown=l,m.push=u,m.pop=h,m.replace=d,m.pushpop=f,m.heapify=p,m.consume=g,m.nsmallest=function(t,e,n){2===arguments.length&&(n=e,e=t,t=a);var r,l,c,u,h=s(t),f=1/0;if(1===e){if(o.isArrayLike(n)){for(r=0,l=n.length;r<l;r++)c=n[r],(f===1/0||t(c,f)<0)&&(f=c);return(u=new n.constructor(1))[0]=f,u}return i(n,(function(e){(f===1/0||t(e,f)<0)&&(f=e)})),[f]}if(o.isArrayLike(n)){if(e>=n.length)return n.slice().sort(t);for(u=n.slice(0,e),p(h,u),r=e,l=n.length;r<l;r++)h(n[r],u[0])>0&&d(h,u,n[r]);return u.sort(t)}var g=o.guessLength(n);return null!==g&&g<e&&(e=g),u=new Array(e),r=0,i(n,(function(t){r<e?u[r]=t:(r===e&&p(h,u),h(t,u[0])>0&&d(h,u,t)),r++})),u.length>r&&(u.length=r),u.sort(t)},m.nlargest=function(t,e,n){2===arguments.length&&(n=e,e=t,t=a);var r,l,c,u,h=s(t),f=-1/0;if(1===e){if(o.isArrayLike(n)){for(r=0,l=n.length;r<l;r++)c=n[r],(f===-1/0||t(c,f)>0)&&(f=c);return(u=new n.constructor(1))[0]=f,u}return i(n,(function(e){(f===-1/0||t(e,f)>0)&&(f=e)})),[f]}if(o.isArrayLike(n)){if(e>=n.length)return n.slice().sort(h);for(u=n.slice(0,e),p(t,u),r=e,l=n.length;r<l;r++)t(n[r],u[0])>0&&d(t,u,n[r]);return u.sort(h)}var g=o.guessLength(n);return null!==g&&g<e&&(e=g),u=new Array(e),r=0,i(n,(function(n){r<e?u[r]=n:(r===e&&p(t,u),t(n,u[0])>0&&d(t,u,n)),r++})),u.length>r&&(u.length=r),u.sort(h)},m.MinHeap=m,m.MaxHeap=v,t.exports=m},2867:(t,e,n)=>{var i=n(6823),r=n(8771);function o(){this.clear()}o.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},o.prototype.enqueue=function(t){return this.items.push(t),++this.size},o.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}},o.prototype.peek=function(){if(this.size)return this.items[this.offset]},o.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)},o.prototype.toArray=function(){return this.items.slice(this.offset)},o.prototype.values=function(){var t=this.items,e=this.offset;return new i((function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}}))},o.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new i((function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}}))},"undefined"!==typeof Symbol&&(o.prototype[Symbol.iterator]=o.prototype.values),o.prototype.toString=function(){return this.toArray().join(",")},o.prototype.toJSON=function(){return this.toArray()},o.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:o,enumerable:!1}),t},"undefined"!==typeof Symbol&&(o.prototype[Symbol.for("nodejs.util.inspect.custom")]=o.prototype.inspect),o.from=function(t){var e=new o;return r(t,(function(t){e.enqueue(t)})),e},o.of=function(){return o.from(arguments)},t.exports=o},5475:(t,e)=>{e.DEFAULT_COMPARATOR=function(t,e){return t<e?-1:t>e?1:0},e.DEFAULT_REVERSE_COMPARATOR=function(t,e){return t<e?1:t>e?-1:0},e.reverseComparator=function(t){return function(e,n){return t(n,e)}},e.createTupleComparator=function(t){return 2===t?function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:t[1]<e[1]?-1:t[1]>e[1]?1:0}:function(e,n){for(var i=0;i<t;){if(e[i]<n[i])return-1;if(e[i]>n[i])return 1;i++}return 0}}},1861:(t,e,n)=>{var i=n(8771),r=n(393);function o(t){return"number"===typeof t.length?t.length:"number"===typeof t.size?t.size:void 0}e.isArrayLike=function(t){return Array.isArray(t)||r.isTypedArray(t)},e.guessLength=o,e.toArray=function(t){var e=o(t),n="number"===typeof e?new Array(e):[],r=0;return i(t,(function(t){n[r++]=t})),n},e.toArrayWithIndices=function(t){var e=o(t),n="number"===typeof e?r.getPointerArray(e):Array,a="number"===typeof e?new Array(e):[],s="number"===typeof e?new n(e):[],l=0;return i(t,(function(t){a[l]=t,s[l]=l++})),[a,s]}},393:(t,e)=>{var n=Math.pow(2,8)-1,i=Math.pow(2,16)-1,r=Math.pow(2,32)-1,o=Math.pow(2,7)-1,a=Math.pow(2,15)-1,s=Math.pow(2,31)-1;e.getPointerArray=function(t){var e=t-1;if(e<=n)return Uint8Array;if(e<=i)return Uint16Array;if(e<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},e.getSignedPointerArray=function(t){var e=t-1;return e<=o?Int8Array:e<=a?Int16Array:e<=s?Int32Array:Float64Array},e.getNumberType=function(t){return t===(0|t)?-1===Math.sign(t)?t<=127&&t>=-128?Int8Array:t<=32767&&t>=-32768?Int16Array:Int32Array:t<=255?Uint8Array:t<=65535?Uint16Array:Uint32Array:Float64Array};var l={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};e.getMinimalRepresentation=function(t,n){var i,r,o,a,s,c=null,u=0;for(a=0,s=t.length;a<s;a++)o=n?n(t[a]):t[a],r=e.getNumberType(o),(i=l[r.name])>u&&(u=i,c=r);return c},e.isTypedArray=function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView(t)},e.concat=function(){var t,e,n,i=0;for(t=0,n=arguments.length;t<n;t++)i+=arguments[t].length;var r=new arguments[0].constructor(i);for(t=0,e=0;t<n;t++)r.set(arguments[t],e),e+=arguments[t].length;return r},e.indices=function(t){for(var n=new(e.getPointerArray(t))(t),i=0;i<t;i++)n[i]=i;return n}},8771:(t,e,n)=>{var i=n(6010),r=i.ARRAY_BUFFER_SUPPORT,o=i.SYMBOL_SUPPORT;t.exports=function(t,e){var n,i,a,s,l;if(!t)throw new Error("obliterator/forEach: invalid iterable.");if("function"!==typeof e)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(t)||r&&ArrayBuffer.isView(t)||"string"===typeof t||"[object Arguments]"===t.toString())for(a=0,s=t.length;a<s;a++)e(t[a],a);else if("function"!==typeof t.forEach)if(o&&Symbol.iterator in t&&"function"!==typeof t.next&&(t=t[Symbol.iterator]()),"function"!==typeof t.next)for(i in t)t.hasOwnProperty(i)&&e(t[i],i);else for(n=t,a=0;!0!==(l=n.next()).done;)e(l.value,a),a++;else t.forEach(e)}},6823:t=>{function e(t){if("function"!==typeof t)throw new Error("obliterator/iterator: expecting a function!");this.next=t}"undefined"!==typeof Symbol&&(e.prototype[Symbol.iterator]=function(){return this}),e.of=function(){var t=arguments,n=t.length,i=0;return new e((function(){return i>=n?{done:!0}:{done:!1,value:t[i++]}}))},e.empty=function(){return new e((function(){return{done:!0}}))},e.fromSequence=function(t){var n=0,i=t.length;return new e((function(){return n>=i?{done:!0}:{done:!1,value:t[n++]}}))},e.is=function(t){return t instanceof e||"object"===typeof t&&null!==t&&"function"===typeof t.next},t.exports=e},6010:(t,e)=>{e.ARRAY_BUFFER_SUPPORT="undefined"!==typeof ArrayBuffer,e.SYMBOL_SUPPORT="undefined"!==typeof Symbol},2730:(t,e,n)=>{"use strict";var i=n(5043),r=n(8853);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(s[t]=e,t=0;t<e.length;t++)a.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,i,r,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=m.hasOwnProperty(e)?m[e]:null;(null!==r?0!==r.type:i||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var _=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function I(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=D&&t[D]||t["@@iterator"])?t:null}var N,z=Object.assign;function F(t){if(void 0===N)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);N=e&&e[1]||""}return"\n"+N+t}var U=!1;function B(t,e){if(!t||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s]){var l="\n"+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?F(t):""}function j(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case M:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case k:return(t.displayName||"Context")+".Consumer";case T:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case O:return null!==(e=t.displayName||null)?e:H(t.type)||"Memo";case R:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function G(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function W(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=W(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function X(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=W(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function K(t,e){var n=e.checked;return z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Z(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=G(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){Q(t,e);var n=G(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,G(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+G(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function it(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:G(n)}}function ot(t,e){var n=G(e.value),i=G(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function at(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=gt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var vt=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(vt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,Et=null;function Mt(t){if(t=br(t)){if("function"!==typeof wt)throw Error(o(280));var e=t.stateNode;e&&(e=xr(e),wt(t.stateNode,t.type,e))}}function Tt(t){St?Et?Et.push(t):Et=[t]:St=t}function kt(){if(St){var t=St,e=Et;if(Et=St=null,Mt(t),e)for(t=0;t<e.length;t++)Mt(e[t])}}function Ct(t,e){return t(e)}function At(){}var Pt=!1;function Ot(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return Ct(t,e,n)}finally{Pt=!1,(null!==St||null!==Et)&&(At(),kt())}}function Rt(t,e){var n=t.stateNode;if(null===n)return null;var i=xr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var Lt=!1;if(u)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(ut){Lt=!1}function It(t,e,n,i,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Nt=!1,zt=null,Ft=!1,Ut=null,Bt={onError:function(t){Nt=!0,zt=t}};function jt(t,e,n,i,r,o,a,s,l){Nt=!1,zt=null,It.apply(Bt,arguments)}function Ht(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Vt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Gt(t){if(Ht(t)!==t)throw Error(o(188))}function Wt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ht(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Gt(r),t;if(a===i)return Gt(r),e;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?qt(t):null}function qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=qt(t);if(null!==e)return e;t=t.sibling}return null}var Xt=r.unstable_scheduleCallback,Yt=r.unstable_cancelCallback,Kt=r.unstable_shouldYield,Zt=r.unstable_requestPaint,Qt=r.unstable_now,Jt=r.unstable_getCurrentPriorityLevel,$t=r.unstable_ImmediatePriority,te=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,ne=r.unstable_LowPriority,ie=r.unstable_IdlePriority,re=null,oe=null;var ae=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~r;0!==s?i=he(s):0!==(o&=a)&&(i=he(o))}else 0!==(a=n&~r)?i=he(a):0!==o&&(i=he(o));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(o=e&-e)||16===r&&0!==(4194240&o)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-ae(e)),i|=t[n],e&=~r;return i}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ve(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-ae(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ae(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function _e(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,we,Se,Ee,Me,Te=!1,ke=[],Ce=null,Ae=null,Pe=null,Oe=new Map,Re=new Map,Le=[],De="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ie(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Oe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Re.delete(e.pointerId)}}function Ne(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==e&&(null!==(e=br(e))&&we(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function ze(t){var e=yr(t.target);if(null!==e){var n=Ht(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Vt(n)))return t.blockedOn=e,void Me(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ke(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=br(n))&&we(e),t.blockedOn=n,!1;var i=new(n=t.nativeEvent).constructor(n.type,n);_t=i,n.target.dispatchEvent(i),_t=null,e.shift()}return!0}function Ue(t,e,n){Fe(t)&&n.delete(e)}function Be(){Te=!1,null!==Ce&&Fe(Ce)&&(Ce=null),null!==Ae&&Fe(Ae)&&(Ae=null),null!==Pe&&Fe(Pe)&&(Pe=null),Oe.forEach(Ue),Re.forEach(Ue)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,Te||(Te=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Be)))}function He(t){function e(e){return je(e,t)}if(0<ke.length){je(ke[0],t);for(var n=1;n<ke.length;n++){var i=ke[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==Ce&&je(Ce,t),null!==Ae&&je(Ae,t),null!==Pe&&je(Pe,t),Oe.forEach(e),Re.forEach(e),n=0;n<Le.length;n++)(i=Le[n]).blockedOn===t&&(i.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)ze(n),null===n.blockedOn&&Le.shift()}var Ve=_.ReactCurrentBatchConfig,Ge=!0;function We(t,e,n,i){var r=be,o=Ve.transition;Ve.transition=null;try{be=1,Xe(t,e,n,i)}finally{be=r,Ve.transition=o}}function qe(t,e,n,i){var r=be,o=Ve.transition;Ve.transition=null;try{be=4,Xe(t,e,n,i)}finally{be=r,Ve.transition=o}}function Xe(t,e,n,i){if(Ge){var r=Ke(t,e,n,i);if(null===r)Gi(t,e,i,Ye,n),Ie(t,i);else if(function(t,e,n,i,r){switch(e){case"focusin":return Ce=Ne(Ce,t,e,n,i,r),!0;case"dragenter":return Ae=Ne(Ae,t,e,n,i,r),!0;case"mouseover":return Pe=Ne(Pe,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Oe.set(o,Ne(Oe.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Re.set(o,Ne(Re.get(o)||null,t,e,n,i,r)),!0}return!1}(r,t,e,n,i))i.stopPropagation();else if(Ie(t,i),4&e&&-1<De.indexOf(t)){for(;null!==r;){var o=br(r);if(null!==o&&xe(o),null===(o=Ke(t,e,n,i))&&Gi(t,e,i,Ye,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Gi(t,e,i,null,n)}}var Ye=null;function Ke(t,e,n,i){if(Ye=null,null!==(t=yr(t=xt(i))))if(null===(e=Ht(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Vt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Ze(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case $t:return 1;case te:return 4;case ee:case ne:return 16;case ie:return 536870912;default:return 16}default:return 16}}var Qe=null,Je=null,$e=null;function tn(){if($e)return $e;var t,e,n=Je,i=n.length,r="value"in Qe?Qe.value:Qe.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[o-e];e++);return $e=r.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,i,r,o){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=z({},cn,{view:0,detail:0}),dn=on(hn),fn=z({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(an=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=an=0,ln=t),an)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),pn=on(fn),gn=on(z({},fn,{dataTransfer:0})),mn=on(z({},hn,{relatedTarget:0})),vn=on(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=on(yn),_n=on(z({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function Mn(){return En}var Tn=z({},hn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),kn=on(Tn),Cn=on(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(z({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Pn=on(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=z({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(On),Ln=[9,13,27,32],Dn=u&&"CompositionEvent"in window,In=null;u&&"documentMode"in document&&(In=document.documentMode);var Nn=u&&"TextEvent"in window&&!In,zn=u&&(!Dn||In&&8<In&&11>=In),Fn=String.fromCharCode(32),Un=!1;function Bn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function Wn(t,e,n,i){Tt(i),0<(e=qi(e,"onChange")).length&&(n=new un("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qn=null,Xn=null;function Yn(t){Fi(t,0)}function Kn(t){if(X(_r(t)))return t}function Zn(t,e){if("change"===t)return e}var Qn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),$n="function"===typeof ti.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ei(){qn&&(qn.detachEvent("onpropertychange",ni),Xn=qn=null)}function ni(t){if("value"===t.propertyName&&Kn(Xn)){var e=[];Wn(e,Xn,t,xt(t)),Ot(Yn,e)}}function ii(t,e,n){"focusin"===t?(ei(),Xn=n,(qn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Kn(Xn)}function oi(t,e){if("click"===t)return Kn(e)}function ai(t,e){if("input"===t||"change"===t)return Kn(e)}var si="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function li(t,e){if(si(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(e,r)||!si(t[r],e[r]))return!1}return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ui(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function hi(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hi(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function di(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pi(t){var e=di(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(e=i.start,void 0===(t=i.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var a=ui(n,i);r&&a&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,bi=!1;function _i(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(vi,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mi)))}function xi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wi={animationend:xi("Animation","AnimationEnd"),animationiteration:xi("Animation","AnimationIteration"),animationstart:xi("Animation","AnimationStart"),transitionend:xi("Transition","TransitionEnd")},Si={},Ei={};function Mi(t){if(Si[t])return Si[t];if(!wi[t])return t;var e,n=wi[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ei)return Si[t]=n[e];return t}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ti=Mi("animationend"),ki=Mi("animationiteration"),Ci=Mi("animationstart"),Ai=Mi("transitionend"),Pi=new Map,Oi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(t,e){Pi.set(t,e),l(e,[t])}for(var Li=0;Li<Oi.length;Li++){var Di=Oi[Li];Ri(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Ri(Ti,"onAnimationEnd"),Ri(ki,"onAnimationIteration"),Ri(Ci,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ni=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function zi(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,a,s,l,c){if(jt.apply(this,arguments),Nt){if(!Nt)throw Error(o(198));var u=zt;Nt=!1,zt=null,Ft||(Ft=!0,Ut=u)}}(i,e,void 0,t),t.currentTarget=null}function Fi(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break t;zi(r,s,c),o=l}else for(a=0;a<i.length;a++){if(l=(s=i[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break t;zi(r,s,c),o=l}}}if(Ft)throw t=Ut,Ft=!1,Ut=null,t}function Ui(t,e){var n=e[gr];void 0===n&&(n=e[gr]=new Set);var i=t+"__bubble";n.has(i)||(Vi(e,t,2,!1),n.add(i))}function Bi(t,e,n){var i=0;e&&(i|=4),Vi(n,t,i,e)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[ji]){t[ji]=!0,a.forEach((function(e){"selectionchange"!==e&&(Ni.has(e)||Bi(e,!1,t),Bi(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[ji]||(e[ji]=!0,Bi("selectionchange",!1,e))}}function Vi(t,e,n,i){switch(Ze(e)){case 1:var r=We;break;case 4:r=qe;break;default:r=Xe}n=r.bind(null,e,n,t),r=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Gi(t,e,n,i,r){var o=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=yr(s)))return;if(5===(l=a.tag)||6===l){i=o=a;continue t}s=s.parentNode}}i=i.return}Ot((function(){var i=o,r=xt(n),a=[];t:{var s=Pi.get(t);if(void 0!==s){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ti:case ki:case Ci:l=vn;break;case Ai:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Rt(p,d))&&u.push(Wi(p,g,f)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,r),a.push({event:s,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===_t||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=Ht(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:_r(l),f=null==c?s:_r(c),(s=new u(g,p+"leave",l,n,r)).target=h,s.relatedTarget=f,g=null,yr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Xi(f))p++;for(f=0,g=d;g;g=Xi(g))f++;for(;0<p-f;)u=Xi(u),p--;for(;0<f-p;)d=Xi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Xi(u),d=Xi(d)}u=null}else u=null;null!==l&&Yi(a,s,l,u,!1),null!==c&&null!==h&&Yi(a,h,c,u,!0)}if("select"===(l=(s=i?_r(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Zn;else if(Gn(s))if(Qn)m=ai;else{m=ri;var v=ii}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=oi);switch(m&&(m=m(t,i))?Wn(a,m,n,r):(v&&v(t,s,i),"focusout"===t&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&tt(s,"number",s.value)),v=i?_r(i):window,t){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,_i(a,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":_i(a,n,r)}var y;if(Dn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Hn?Bn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=tn()):(Je="value"in(Qe=r)?Qe.value:Qe.textContent,Hn=!0)),0<(v=qi(i,b)).length&&(b=new _n(b,t,null,n,r),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Nn?function(t,e){switch(t){case"compositionend":return jn(e);case"keypress":return 32!==e.which?null:(Un=!0,Fn);case"textInput":return(t=e.data)===Fn&&Un?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Dn&&Bn(t,e)?(t=tn(),$e=Je=Qe=null,Hn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new _n("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Fi(a,e)}))}function Wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qi(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Rt(t,n))&&i.unshift(Wi(t,o,r)),null!=(o=Rt(t,e))&&i.push(Wi(t,o,r))),t=t.return}return i}function Xi(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yi(t,e,n,i,r){for(var o=e._reactName,a=[];null!==n&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=Rt(n,o))&&a.unshift(Wi(n,l,s)):r||null!=(l=Rt(n,o))&&a.push(Wi(n,l,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}var Ki=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function Qi(t){return("string"===typeof t?t:""+t).replace(Ki,"\n").replace(Zi,"")}function Ji(t,e,n){if(e=Qi(e),Qi(t)!==e&&n)throw Error(o(425))}function $i(){}var tr=null,er=null;function nr(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(t){return or.resolve(null).then(t).catch(sr)}:ir;function sr(t){setTimeout((function(){throw t}))}function lr(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return t.removeChild(r),void He(e);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);He(e)}function cr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ur(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(t){var e=t[dr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[dr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ur(t);null!==t;){if(n=t[dr])return n;t=ur(t)}return e}n=(t=n).parentNode}return null}function br(t){return!(t=t[dr]||t[pr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function _r(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function xr(t){return t[fr]||null}var wr=[],Sr=-1;function Er(t){return{current:t}}function Mr(t){0>Sr||(t.current=wr[Sr],wr[Sr]=null,Sr--)}function Tr(t,e){Sr++,wr[Sr]=t.current,t.current=e}var kr={},Cr=Er(kr),Ar=Er(!1),Pr=kr;function Or(t,e){var n=t.type.contextTypes;if(!n)return kr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Rr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Lr(){Mr(Ar),Mr(Cr)}function Dr(t,e,n){if(Cr.current!==kr)throw Error(o(168));Tr(Cr,e),Tr(Ar,n)}function Ir(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(o(108,V(t)||"Unknown",r));return z({},n,i)}function Nr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,Pr=Cr.current,Tr(Cr,t),Tr(Ar,Ar.current),!0}function zr(t,e,n){var i=t.stateNode;if(!i)throw Error(o(169));n?(t=Ir(t,e,Pr),i.__reactInternalMemoizedMergedChildContext=t,Mr(Ar),Mr(Cr),Tr(Cr,t)):Mr(Ar),Tr(Ar,n)}var Fr=null,Ur=!1,Br=!1;function jr(t){null===Fr?Fr=[t]:Fr.push(t)}function Hr(){if(!Br&&null!==Fr){Br=!0;var t=0,e=be;try{var n=Fr;for(be=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}Fr=null,Ur=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(t+1)),Xt($t,Hr),r}finally{be=e,Br=!1}}return null}var Vr=[],Gr=0,Wr=null,qr=0,Xr=[],Yr=0,Kr=null,Zr=1,Qr="";function Jr(t,e){Vr[Gr++]=qr,Vr[Gr++]=Wr,Wr=t,qr=e}function $r(t,e,n){Xr[Yr++]=Zr,Xr[Yr++]=Qr,Xr[Yr++]=Kr,Kr=t;var i=Zr;t=Qr;var r=32-ae(i)-1;i&=~(1<<r),n+=1;var o=32-ae(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zr=1<<32-ae(e)+r|n<<r|i,Qr=o+t}else Zr=1<<o|n<<r|i,Qr=t}function to(t){null!==t.return&&(Jr(t,1),$r(t,1,0))}function eo(t){for(;t===Wr;)Wr=Vr[--Gr],Vr[Gr]=null,qr=Vr[--Gr],Vr[Gr]=null;for(;t===Kr;)Kr=Xr[--Yr],Xr[Yr]=null,Qr=Xr[--Yr],Xr[Yr]=null,Zr=Xr[--Yr],Xr[Yr]=null}var no=null,io=null,ro=!1,oo=null;function ao(t,e){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function so(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,io=cr(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,io=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Kr?{id:Zr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,io=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function co(t){if(ro){var e=io;if(e){var n=e;if(!so(t,e)){if(lo(t))throw Error(o(418));e=cr(n.nextSibling);var i=no;e&&so(t,e)?ao(i,n):(t.flags=-4097&t.flags|2,ro=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,ro=!1,no=t}}}function uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!ro)return uo(t),ro=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!nr(t.type,t.memoizedProps)),e&&(e=io)){if(lo(t))throw fo(),Error(o(418));for(;e;)ao(t,e),e=cr(e.nextSibling)}if(uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){io=cr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}io=null}}else io=no?cr(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=io;t;)t=cr(t.nextSibling)}function po(){io=no=null,ro=!1}function go(t){null===oo?oo=[t]:oo.push(t)}var mo=_.ReactCurrentBatchConfig;function vo(t,e){if(t&&t.defaultProps){for(var n in e=z({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var yo=Er(null),bo=null,_o=null,xo=null;function wo(){xo=_o=bo=null}function So(t){var e=yo.current;Mr(yo),t._currentValue=e}function Eo(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){bo=t,xo=_o=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(_s=!0),t.firstContext=null)}function To(t){var e=t._currentValue;if(xo!==t)if(t={context:t,memoizedValue:e,next:null},null===_o){if(null===bo)throw Error(o(308));_o=t,bo.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var ko=null;function Co(t){null===ko?ko=[t]:ko.push(t)}function Ao(t,e,n,i){var r=e.interleaved;return null===r?(n.next=n,Co(e)):(n.next=r.next,r.next=n),e.interleaved=n,Po(t,i)}function Po(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Oo=!1;function Ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Do(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Io(t,e,n){var i=t.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Po(t,n)}return null===(r=i.interleaved)?(e.next=e,Co(i)):(e.next=r.next,r.next=e),i.interleaved=e,Po(t,n)}function No(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}function zo(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fo(t,e,n,i){var r=t.updateQueue;Oo=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=t.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,f=s.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var p=t,g=s;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break t;h=z({},h,d);break t;case 2:Oo=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=r.effects)?r.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(d=s).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(e=r.shared.interleaved)){r=e;do{a|=r.lane,r=r.next}while(r!==e)}else null===o&&(r.shared.lanes=0);zl|=a,t.lanes=a,t.memoizedState=h}}function Uo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var Bo=(new i.Component).refs;function jo(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:z({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Ho={isMounted:function(t){return!!(t=t._reactInternals)&&Ht(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),o=Do(i,r);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Io(t,o,r))&&(ic(e,t,r,i),No(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ec(),r=nc(t),o=Do(i,r);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Io(t,o,r))&&(ic(e,t,r,i),No(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),i=nc(t),r=Do(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),null!==(e=Io(t,r,i))&&(ic(e,t,i,n),No(e,t,i))}};function Vo(t,e,n,i,r,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function Go(t,e,n){var i=!1,r=kr,o=e.contextType;return"object"===typeof o&&null!==o?o=To(o):(r=Rr(e)?Pr:Cr.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?Or(t,r):kr),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ho,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Wo(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ho.enqueueReplaceState(e,e.state,null)}function qo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Bo,Ro(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=To(o):(o=Rr(e)?Pr:Cr.current,r.context=Or(t,o)),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(jo(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&Ho.enqueueReplaceState(r,r.state,null),Fo(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}function Xo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,t));var r=i,a=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===a?e.ref:(e=function(t){var e=r.refs;e===Bo&&(e=r.refs={}),null===t?delete e[a]:e[a]=t},e._stringRef=a,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ko(t){return(0,t._init)(t._payload)}function Zo(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Dc(t,e)).index=0,t.sibling=null,t}function a(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,i){return null===e||6!==e.tag?((e=Fc(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function c(t,e,n,i){var o=n.type;return o===S?h(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Ko(o)===e.type)?((i=r(e,n.props)).ref=Xo(t,e,n),i.return=t,i):((i=Ic(n.type,n.key,n.props,null,t.mode,i)).ref=Xo(t,e,n),i.return=t,i)}function u(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Uc(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,o){return null===e||7!==e.tag?((e=Nc(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Fc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Ic(e.type,e.key,e.props,null,t.mode,n)).ref=Xo(t,null,e),n.return=t,n;case w:return(e=Uc(e,t.mode,n)).return=t,e;case R:return d(t,(0,e._init)(e._payload),n)}if(et(e)||I(e))return(e=Nc(e,t.mode,n,null)).return=t,e;Yo(t,e)}return null}function f(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===r?c(t,e,n,i):null;case w:return n.key===r?u(t,e,n,i):null;case R:return f(t,e,(r=n._init)(n._payload),i)}if(et(n)||I(n))return null!==r?null:h(t,e,n,i,null);Yo(t,n)}return null}function p(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r);case w:return u(e,t=t.get(null===i.key?n:i.key)||null,i,r);case R:return p(t,e,n,(0,i._init)(i._payload),r)}if(et(i)||I(i))return h(e,t=t.get(n)||null,i,r,null);Yo(e,i)}return null}function g(r,o,s,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(r,h,s[g],l);if(null===v){null===h&&(h=m);break}t&&h&&null===v.alternate&&e(r,h),o=a(v,o,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===s.length)return n(r,h),ro&&Jr(r,g),c;if(null===h){for(;g<s.length;g++)null!==(h=d(r,s[g],l))&&(o=a(h,o,g),null===u?c=h:u.sibling=h,u=h);return ro&&Jr(r,g),c}for(h=i(r,h);g<s.length;g++)null!==(m=p(h,r,g,s[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=a(m,o,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(r,t)})),ro&&Jr(r,g),c}function m(r,s,l,c){var u=I(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=s,m=s=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(r,g,y.value,c);if(null===b){null===g&&(g=v);break}t&&g&&null===b.alternate&&e(r,g),s=a(b,s,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(r,g),ro&&Jr(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(s=a(y,s,m),null===h?u=y:h.sibling=y,h=y);return ro&&Jr(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(t&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=a(y,s,m),null===h?u=y:h.sibling=y,h=y);return t&&g.forEach((function(t){return e(r,t)})),ro&&Jr(r,m),u}return function t(i,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:t:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(i,u.sibling),(o=r(u,a.props.children)).return=i,i=o;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ko(c)===u.type){n(i,u.sibling),(o=r(u,a.props)).ref=Xo(i,u,a),o.return=i,i=o;break t}n(i,u);break}e(i,u),u=u.sibling}a.type===S?((o=Nc(a.props.children,i.mode,l,a.key)).return=i,i=o):((l=Ic(a.type,a.key,a.props,null,i.mode,l)).ref=Xo(i,o,a),l.return=i,i=l)}return s(i);case w:t:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(i,o.sibling),(o=r(o,a.children||[])).return=i,i=o;break t}n(i,o);break}e(i,o),o=o.sibling}(o=Uc(a,i.mode,l)).return=i,i=o}return s(i);case R:return t(i,o,(u=a._init)(a._payload),l)}if(et(a))return g(i,o,a,l);if(I(a))return m(i,o,a,l);Yo(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,a)).return=i,i=o):(n(i,o),(o=Fc(a,i.mode,l)).return=i,i=o),s(i)):n(i,o)}}var Qo=Zo(!0),Jo=Zo(!1),$o={},ta=Er($o),ea=Er($o),na=Er($o);function ia(t){if(t===$o)throw Error(o(174));return t}function ra(t,e){switch(Tr(na,e),Tr(ea,t),Tr(ta,$o),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Mr(ta),Tr(ta,e)}function oa(){Mr(ta),Mr(ea),Mr(na)}function aa(t){ia(na.current);var e=ia(ta.current),n=lt(e,t.type);e!==n&&(Tr(ea,t),Tr(ta,n))}function sa(t){ea.current===t&&(Mr(ta),Mr(ea))}var la=Er(0);function ca(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ua=[];function ha(){for(var t=0;t<ua.length;t++)ua[t]._workInProgressVersionPrimary=null;ua.length=0}var da=_.ReactCurrentDispatcher,fa=_.ReactCurrentBatchConfig,pa=0,ga=null,ma=null,va=null,ya=!1,ba=!1,_a=0,xa=0;function wa(){throw Error(o(321))}function Sa(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function Ea(t,e,n,i,r,a){if(pa=a,ga=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,da.current=null===t||null===t.memoizedState?ss:ls,t=n(i,r),ba){a=0;do{if(ba=!1,_a=0,25<=a)throw Error(o(301));a+=1,va=ma=null,e.updateQueue=null,da.current=cs,t=n(i,r)}while(ba)}if(da.current=as,e=null!==ma&&null!==ma.next,pa=0,va=ma=ga=null,ya=!1,e)throw Error(o(300));return t}function Ma(){var t=0!==_a;return _a=0,t}function Ta(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ga.memoizedState=va=t:va=va.next=t,va}function ka(){if(null===ma){var t=ga.alternate;t=null!==t?t.memoizedState:null}else t=ma.next;var e=null===va?ga.memoizedState:va.next;if(null!==e)va=e,ma=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ma=t).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===va?ga.memoizedState=va=t:va=va.next=t}return va}function Ca(t,e){return"function"===typeof e?e(t):e}function Aa(t){var e=ka(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var i=ma,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((pa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=i):c=c.next=d,ga.lanes|=h,zl|=h}u=u.next}while(null!==u&&u!==a);null===c?s=i:c.next=l,si(i,e.memoizedState)||(_s=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{a=r.lane,ga.lanes|=a,zl|=a,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pa(t){var e=ka(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=t(a,s.action),s=s.next}while(s!==r);si(a,e.memoizedState)||(_s=!0),e.memoizedState=a,null===e.baseQueue&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function Oa(){}function Ra(t,e){var n=ga,i=ka(),r=e(),a=!si(i.memoizedState,r);if(a&&(i.memoizedState=r,_s=!0),i=i.queue,Ga(Ia.bind(null,n,i,t),[t]),i.getSnapshot!==e||a||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,Ua(9,Da.bind(null,n,i,r,e),void 0,null),null===Pl)throw Error(o(349));0!==(30&pa)||La(n,e,r)}return r}function La(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=ga.updateQueue)?(e={lastEffect:null,stores:null},ga.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Da(t,e,n,i){e.value=n,e.getSnapshot=i,Na(e)&&za(t)}function Ia(t,e,n){return n((function(){Na(e)&&za(t)}))}function Na(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!si(t,n)}catch(i){return!0}}function za(t){var e=Po(t,1);null!==e&&ic(e,t,1,-1)}function Fa(t){var e=Ta();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,ga,t),[e.memoizedState,t]}function Ua(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=ga.updateQueue)?(e={lastEffect:null,stores:null},ga.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Ba(){return ka().memoizedState}function ja(t,e,n,i){var r=Ta();ga.flags|=t,r.memoizedState=Ua(1|e,n,void 0,void 0===i?null:i)}function Ha(t,e,n,i){var r=ka();i=void 0===i?null:i;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==i&&Sa(i,a.deps))return void(r.memoizedState=Ua(e,n,o,i))}ga.flags|=t,r.memoizedState=Ua(1|e,n,o,i)}function Va(t,e){return ja(8390656,8,t,e)}function Ga(t,e){return Ha(2048,8,t,e)}function Wa(t,e){return Ha(4,2,t,e)}function qa(t,e){return Ha(4,4,t,e)}function Xa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ya(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ha(4,4,Xa.bind(null,e,t),n)}function Ka(){}function Za(t,e){var n=ka();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Sa(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Qa(t,e){var n=ka();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Sa(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ja(t,e,n){return 0===(21&pa)?(t.baseState&&(t.baseState=!1,_s=!0),t.memoizedState=n):(si(n,e)||(n=ge(),ga.lanes|=n,zl|=n,t.baseState=!0),e)}function $a(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var i=fa.transition;fa.transition={};try{t(!1),e()}finally{be=n,fa.transition=i}}function ts(){return ka().memoizedState}function es(t,e,n){var i=nc(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},is(t))rs(e,n);else if(null!==(n=Ao(t,e,n,i))){ic(n,t,i,ec()),os(n,e,i)}}function ns(t,e,n){var i=nc(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(t))rs(e,r);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,si(s,a)){var l=e.interleaved;return null===l?(r.next=r,Co(e)):(r.next=l.next,l.next=r),void(e.interleaved=r)}}catch(c){}null!==(n=Ao(t,e,r,i))&&(ic(n,t,i,r=ec()),os(n,e,i))}}function is(t){var e=t.alternate;return t===ga||null!==e&&e===ga}function rs(t,e){ba=ya=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function os(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,ye(t,n)}}var as={readContext:To,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ss={readContext:To,useCallback:function(t,e){return Ta().memoizedState=[t,void 0===e?null:e],t},useContext:To,useEffect:Va,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ja(4194308,4,Xa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ja(4194308,4,t,e)},useInsertionEffect:function(t,e){return ja(4,2,t,e)},useMemo:function(t,e){var n=Ta();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ta();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=es.bind(null,ga,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Ta().memoizedState=t},useState:Fa,useDebugValue:Ka,useDeferredValue:function(t){return Ta().memoizedState=t},useTransition:function(){var t=Fa(!1),e=t[0];return t=$a.bind(null,t[1]),Ta().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ga,r=Ta();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Pl)throw Error(o(349));0!==(30&pa)||La(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,Va(Ia.bind(null,i,a,t),[t]),i.flags|=2048,Ua(9,Da.bind(null,i,a,n,e),void 0,null),n},useId:function(){var t=Ta(),e=Pl.identifierPrefix;if(ro){var n=Qr;e=":"+e+"R"+(n=(Zr&~(1<<32-ae(Zr)-1)).toString(32)+n),0<(n=_a++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=xa++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:To,useCallback:Za,useContext:To,useEffect:Ga,useImperativeHandle:Ya,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Qa,useReducer:Aa,useRef:Ba,useState:function(){return Aa(Ca)},useDebugValue:Ka,useDeferredValue:function(t){return Ja(ka(),ma.memoizedState,t)},useTransition:function(){return[Aa(Ca)[0],ka().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Ra,useId:ts,unstable_isNewReconciler:!1},cs={readContext:To,useCallback:Za,useContext:To,useEffect:Ga,useImperativeHandle:Ya,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Qa,useReducer:Pa,useRef:Ba,useState:function(){return Pa(Ca)},useDebugValue:Ka,useDeferredValue:function(t){var e=ka();return null===ma?e.memoizedState=t:Ja(e,ma.memoizedState,t)},useTransition:function(){return[Pa(Ca)[0],ka().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Ra,useId:ts,unstable_isNewReconciler:!1};function us(t,e){try{var n="",i=e;do{n+=j(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r,digest:null}}function hs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ds(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(t,e,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wl||(Wl=!0,ql=i),ds(0,e)},n}function gs(t,e,n){(n=Do(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ds(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,e),"function"!==typeof i&&(null===Xl?Xl=new Set([this]):Xl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ms(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new fs;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Tc.bind(null,t,e,n),e.then(t,t))}function vs(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ys(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Do(-1,1)).tag=2,Io(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}var bs=_.ReactCurrentOwner,_s=!1;function xs(t,e,n,i){e.child=null===t?Jo(e,null,n,i):Qo(e,t.child,n,i)}function ws(t,e,n,i,r){n=n.render;var o=e.ref;return Mo(e,r),i=Ea(t,e,n,i,o,r),n=Ma(),null===t||_s?(ro&&n&&to(e),e.flags|=1,xs(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ws(t,e,r))}function Ss(t,e,n,i,r){if(null===t){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ic(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Es(t,e,o,i,r))}if(o=t.child,0===(t.lanes&r)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&t.ref===e.ref)return Ws(t,e,r)}return e.flags|=1,(t=Dc(o,i)).ref=e.ref,t.return=e,e.child=t}function Es(t,e,n,i,r){if(null!==t){var o=t.memoizedProps;if(li(o,i)&&t.ref===e.ref){if(_s=!1,e.pendingProps=i=o,0===(t.lanes&r))return e.lanes=t.lanes,Ws(t,e,r);0!==(131072&t.flags)&&(_s=!0)}}return ks(t,e,n,i,r)}function Ms(t,e,n){var i=e.pendingProps,r=i.children,o=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(Dl,Ll),Ll|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tr(Dl,Ll),Ll|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Tr(Dl,Ll),Ll|=i}else null!==o?(i=o.baseLanes|n,e.memoizedState=null):i=n,Tr(Dl,Ll),Ll|=i;return xs(t,e,r,n),e.child}function Ts(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ks(t,e,n,i,r){var o=Rr(n)?Pr:Cr.current;return o=Or(e,o),Mo(e,r),n=Ea(t,e,n,i,o,r),i=Ma(),null===t||_s?(ro&&i&&to(e),e.flags|=1,xs(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ws(t,e,r))}function Cs(t,e,n,i,r){if(Rr(n)){var o=!0;Nr(e)}else o=!1;if(Mo(e,r),null===e.stateNode)Gs(t,e),Go(e,n,i),qo(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=To(c):c=Or(e,c=Rr(n)?Pr:Cr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==c)&&Wo(e,a,i,c),Oo=!1;var d=e.memoizedState;a.state=d,Fo(e,i,a,r),l=e.memoizedState,s!==i||d!==l||Ar.current||Oo?("function"===typeof u&&(jo(e,n,u,i),l=e.memoizedState),(s=Oo||Vo(e,n,s,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Lo(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:vo(e.type,s),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=Or(e,l=Rr(n)?Pr:Cr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&Wo(e,a,i,l),Oo=!1,d=e.memoizedState,a.state=d,Fo(e,i,a,r);var p=e.memoizedState;s!==h||d!==p||Ar.current||Oo?("function"===typeof f&&(jo(e,n,f,i),p=e.memoizedState),(c=Oo||Vo(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return As(t,e,n,i,o,r)}function As(t,e,n,i,r,o){Ts(t,e);var a=0!==(128&e.flags);if(!i&&!a)return r&&zr(e,n,!1),Ws(t,e,o);i=e.stateNode,bs.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=Qo(e,t.child,null,o),e.child=Qo(e,null,s,o)):xs(t,e,s,o),e.memoizedState=i.state,r&&zr(e,n,!0),e.child}function Ps(t){var e=t.stateNode;e.pendingContext?Dr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Dr(0,e.context,!1),ra(t,e.containerInfo)}function Os(t,e,n,i,r){return po(),go(r),e.flags|=256,xs(t,e,n,i),e.child}var Rs,Ls,Ds,Is,Ns={dehydrated:null,treeContext:null,retryLane:0};function zs(t){return{baseLanes:t,cachePool:null,transitions:null}}function Fs(t,e,n){var i,r=e.pendingProps,a=la.current,s=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&a)),i?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(a|=1),Tr(la,1&a),null===t)return co(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=r.children,t=r.fallback,s?(r=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=zc(l,r,0,null),t=Nc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zs(n),e.memoizedState=Ns,t):Us(e,l));if(null!==(a=t.memoizedState)&&null!==(i=a.dehydrated))return function(t,e,n,i,r,a,s){if(n)return 256&e.flags?(e.flags&=-257,Bs(t,e,s,i=hs(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(a=i.fallback,r=e.mode,i=zc({mode:"visible",children:i.children},r,0,null),(a=Nc(a,r,s,null)).flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,0!==(1&e.mode)&&Qo(e,t.child,null,s),e.child.memoizedState=zs(s),e.memoizedState=Ns,a);if(0===(1&e.mode))return Bs(t,e,s,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Bs(t,e,s,i=hs(a=Error(o(419)),i,void 0))}if(l=0!==(s&t.childLanes),_s||l){if(null!==(i=Pl)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|s))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Po(t,r),ic(i,t,r,-1))}return mc(),Bs(t,e,s,i=hs(Error(o(421))))}return"$?"===r.data?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,io=cr(r.nextSibling),no=e,ro=!0,oo=null,null!==t&&(Xr[Yr++]=Zr,Xr[Yr++]=Qr,Xr[Yr++]=Kr,Zr=t.id,Qr=t.overflow,Kr=e),e=Us(e,i.children),e.flags|=4096,e)}(t,e,l,r,i,a,n);if(s){s=r.fallback,l=e.mode,i=(a=t.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&e.child!==a?((r=e.child).childLanes=0,r.pendingProps=c,e.deletions=null):(r=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?s=Dc(i,s):(s=Nc(s,l,n,null)).flags|=2,s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,l=null===(l=t.child.memoizedState)?zs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ns,r}return t=(s=t.child).sibling,r=Dc(s,{mode:"visible",children:r.children}),0===(1&e.mode)&&(r.lanes=n),r.return=e,r.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Us(t,e){return(e=zc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Bs(t,e,n,i){return null!==i&&go(i),Qo(e,t.child,null,n),(t=Us(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function js(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),Eo(t.return,e,n)}function Hs(t,e,n,i,r){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Vs(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(xs(t,e,i.children,n),0!==(2&(i=la.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&js(t,n,e);else if(19===t.tag)js(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tr(la,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===ca(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Hs(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===ca(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Hs(e,!0,n,null,o);break;case"together":Hs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ws(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),zl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=Dc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Dc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function qs(t,e){if(!ro)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Xs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Ys(t,e,n){var i=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(e),null;case 1:case 17:return Rr(e.type)&&Lr(),Xs(e),null;case 3:return i=e.stateNode,oa(),Mr(Ar),Mr(Cr),ha(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(sc(oo),oo=null))),Ls(t,e),Xs(e),null;case 5:sa(e);var r=ia(na.current);if(n=e.type,null!==t&&null!=e.stateNode)Ds(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(o(166));return Xs(e),null}if(t=ia(ta.current),ho(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[dr]=e,i[fr]=a,t=0!==(1&e.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Ii.length;r++)Ui(Ii[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":Z(i,a),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Ui("invalid",i);break;case"textarea":rt(i,a),Ui("invalid",i)}for(var l in yt(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,t),r=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":q(i),$(i,a,!0);break;case"textarea":q(i),at(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=$i)}i=r,e.updateQueue=i,null!==i&&(e.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[dr]=e,t[fr]=i,Rs(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,i),n){case"dialog":Ui("cancel",t),Ui("close",t),r=i;break;case"iframe":case"object":case"embed":Ui("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ii.length;r++)Ui(Ii[r],t);r=i;break;case"source":Ui("error",t),r=i;break;case"img":case"image":case"link":Ui("error",t),Ui("load",t),r=i;break;case"details":Ui("toggle",t),r=i;break;case"input":Z(t,i),r=K(t,i),Ui("invalid",t);break;case"option":default:r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=z({},i,{value:void 0}),Ui("invalid",t);break;case"textarea":rt(t,i),r=it(t,i),Ui("invalid",t)}for(a in yt(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?mt(t,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ui("scroll",t):null!=u&&b(t,a,u,l))}switch(n){case"input":q(t),$(t,i,!1);break;case"textarea":q(t),at(t);break;case"option":null!=i.value&&t.setAttribute("value",""+G(i.value));break;case"select":t.multiple=!!i.multiple,null!=(a=i.value)?nt(t,!!i.multiple,a,!1):null!=i.defaultValue&&nt(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(t.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Xs(e),null;case 6:if(t&&null!=e.stateNode)Is(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(o(166));if(n=ia(na.current),ia(ta.current),ho(e)){if(i=e.stateNode,n=e.memoizedProps,i[dr]=e,(a=i.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Ji(i.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&t.mode))}a&&(e.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=e,e.stateNode=i}return Xs(e),null;case 13:if(Mr(la),i=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,a=!1;else if(a=ho(e),null!==i&&null!==i.dehydrated){if(null===t){if(!a)throw Error(o(318));if(!(a=null!==(a=e.memoizedState)?a.dehydrated:null))throw Error(o(317));a[dr]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Xs(e),a=!1}else null!==oo&&(sc(oo),oo=null),a=!0;if(!a)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((i=null!==i)!==(null!==t&&null!==t.memoizedState)&&i&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&la.current)?0===Il&&(Il=3):mc())),null!==e.updateQueue&&(e.flags|=4),Xs(e),null);case 4:return oa(),Ls(t,e),null===t&&Hi(e.stateNode.containerInfo),Xs(e),null;case 10:return So(e.type._context),Xs(e),null;case 19:if(Mr(la),null===(a=e.memoizedState))return Xs(e),null;if(i=0!==(128&e.flags),null===(l=a.rendering))if(i)qs(a,!1);else{if(0!==Il||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=ca(t))){for(e.flags|=128,qs(a,!1),null!==(i=l.updateQueue)&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;null!==n;)t=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tr(la,1&la.current|2),e.child}t=t.sibling}null!==a.tail&&Qt()>Vl&&(e.flags|=128,i=!0,qs(a,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=ca(l))){if(e.flags|=128,i=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ro)return Xs(e),null}else 2*Qt()-a.renderingStartTime>Vl&&1073741824!==n&&(e.flags|=128,i=!0,qs(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=a.last)?n.sibling=l:e.child=l,a.last=l)}return null!==a.tail?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Qt(),e.sibling=null,n=la.current,Tr(la,i?1&n|2:1&n),e):(Xs(e),null);case 22:case 23:return dc(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Ll)&&(Xs(e),6&e.subtreeFlags&&(e.flags|=8192)):Xs(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ks(t,e){switch(eo(e),e.tag){case 1:return Rr(e.type)&&Lr(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return oa(),Mr(Ar),Mr(Cr),ha(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return sa(e),null;case 13:if(Mr(la),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Mr(la),null;case 4:return oa(),null;case 10:return So(e.type._context),null;case 22:case 23:return dc(),null;default:return null}}Rs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Ds=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ia(ta.current);var o,a=null;switch(n){case"input":r=K(t,r),i=K(t,i),a=[];break;case"select":r=z({},r,{value:void 0}),i=z({},i,{value:void 0}),a=[];break;case"textarea":r=it(t,r),i=it(t,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(t.onclick=$i)}for(u in yt(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}},Is=function(t,e,n,i){n!==i&&(e.flags|=4)};var Zs=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,$s=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Mc(t,e,i)}else n.current=null}function el(t,e,n){try{n()}catch(i){Mc(t,e,i)}}var nl=!1;function il(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(e,n,o)}r=r.next}while(r!==i)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ol(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[dr],delete e[fr],delete e[gr],delete e[mr],delete e[vr])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=$i));else if(4!==i&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var hl=null,dl=!1;function fl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(re,n)}catch(s){}switch(n.tag){case 5:Qs||tl(n,e);case 6:var i=hl,r=dl;hl=null,fl(t,e,n),dl=r,null!==(hl=i)&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?lr(t.parentNode,n):1===t.nodeType&&lr(t,n),He(t)):lr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,fl(t,e,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,e,a),r=r.next}while(r!==i)}fl(t,e,n);break;case 1:if(!Qs&&(tl(n,e),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Mc(n,e,s)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?(Qs=(i=Qs)||null!==n.memoizedState,fl(t,e,n),Qs=i):fl(t,e,n);break;default:fl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Js),e.forEach((function(e){var i=Ac.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===hl)throw Error(o(160));pl(a,s,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Mc(r,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)vl(e,t),e=e.sibling}function vl(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),yl(t),4&i){try{il(3,t,t.return),rl(3,t)}catch(m){Mc(t,t.return,m)}try{il(5,t,t.return)}catch(m){Mc(t,t.return,m)}}break;case 1:ml(e,t),yl(t),512&i&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),yl(t),512&i&&null!==n&&tl(n,n.return),32&t.flags){var r=t.stateNode;try{dt(r,"")}catch(m){Mc(t,t.return,m)}}if(4&i&&null!=(r=t.stateNode)){var a=t.memoizedProps,s=null!==n?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(r,a),bt(l,s);var u=bt(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?mt(r,d):"dangerouslySetInnerHTML"===h?ht(r,d):"children"===h?dt(r,d):b(r,h,d,u)}switch(l){case"input":J(r,a);break;case"textarea":ot(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?nt(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?nt(r,!!a.multiple,a.defaultValue,!0):nt(r,!!a.multiple,a.multiple?[]:"",!1))}r[fr]=a}catch(m){Mc(t,t.return,m)}}break;case 6:if(ml(e,t),yl(t),4&i){if(null===t.stateNode)throw Error(o(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(m){Mc(t,t.return,m)}}break;case 3:if(ml(e,t),yl(t),4&i&&null!==n&&n.memoizedState.isDehydrated)try{He(e.containerInfo)}catch(m){Mc(t,t.return,m)}break;case 4:default:ml(e,t),yl(t);break;case 13:ml(e,t),yl(t),8192&(r=t.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Qt())),4&i&&gl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Qs=(u=Qs)||h,ml(e,t),Qs=u):ml(e,t),yl(t),8192&i){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for($s=t,h=t.child;null!==h;){for(d=$s=h;null!==$s;){switch(p=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Mc(i,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,$s=p):wl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",s))}catch(m){Mc(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Mc(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),yl(t),4&i&&gl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var i=n;break t}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(dt(r,""),i.flags&=-33),ul(t,ll(t),r);break;case 3:case 4:var a=i.stateNode.containerInfo;cl(t,ll(t),a);break;default:throw Error(o(161))}}catch(s){Mc(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function bl(t,e,n){$s=t,_l(t,e,n)}function _l(t,e,n){for(var i=0!==(1&t.mode);null!==$s;){var r=$s,o=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Zs;if(!a){var s=r.alternate,l=null!==s&&null!==s.memoizedState||Qs;s=Zs;var c=Qs;if(Zs=a,(Qs=l)&&!c)for($s=r;null!==$s;)l=(a=$s).child,22===a.tag&&null!==a.memoizedState?Sl(r):null!==l?(l.return=a,$s=l):Sl(r);for(;null!==o;)$s=o,_l(o,e,n),o=o.sibling;$s=r,Zs=s,Qs=c}xl(t)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,$s=o):xl(t)}}function xl(t){for(;null!==$s;){var e=$s;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qs||rl(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!Qs)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:vo(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;null!==a&&Uo(e,a,i);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Uo(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&He(d)}}}break;default:throw Error(o(163))}Qs||512&e.flags&&ol(e)}catch(f){Mc(e,e.return,f)}}if(e===t){$s=null;break}if(null!==(n=e.sibling)){n.return=e.return,$s=n;break}$s=e.return}}function wl(t){for(;null!==$s;){var e=$s;if(e===t){$s=null;break}var n=e.sibling;if(null!==n){n.return=e.return,$s=n;break}$s=e.return}}function Sl(t){for(;null!==$s;){var e=$s;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Mc(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Mc(e,r,l)}}var o=e.return;try{ol(e)}catch(l){Mc(e,o,l)}break;case 5:var a=e.return;try{ol(e)}catch(l){Mc(e,a,l)}}}catch(l){Mc(e,e.return,l)}if(e===t){$s=null;break}var s=e.sibling;if(null!==s){s.return=e.return,$s=s;break}$s=e.return}}var El,Ml=Math.ceil,Tl=_.ReactCurrentDispatcher,kl=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Al=0,Pl=null,Ol=null,Rl=0,Ll=0,Dl=Er(0),Il=0,Nl=null,zl=0,Fl=0,Ul=0,Bl=null,jl=null,Hl=0,Vl=1/0,Gl=null,Wl=!1,ql=null,Xl=null,Yl=!1,Kl=null,Zl=0,Ql=0,Jl=null,$l=-1,tc=0;function ec(){return 0!==(6&Al)?Qt():-1!==$l?$l:$l=Qt()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==mo.transition?(0===tc&&(tc=ge()),tc):0!==(t=be)?t:t=void 0===(t=window.event)?16:Ze(t.type)}function ic(t,e,n,i){if(50<Ql)throw Ql=0,Jl=null,Error(o(185));ve(t,n,i),0!==(2&Al)&&t===Pl||(t===Pl&&(0===(2&Al)&&(Fl|=n),4===Il&&lc(t,Rl)),rc(t,i),1===n&&0===Al&&0===(1&e.mode)&&(Vl=Qt()+500,Ur&&Hr()))}function rc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ae(o),s=1<<a,l=r[a];-1===l?0!==(s&n)&&0===(s&i)||(r[a]=fe(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var i=de(t,t===Pl?Rl:0);if(0===i)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){Ur=!0,jr(t)}(cc.bind(null,t)):jr(cc.bind(null,t)),ar((function(){0===(6&Al)&&Hr()})),n=null;else{switch(_e(i)){case 1:n=$t;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=ie}n=Pc(n,oc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oc(t,e){if($l=-1,tc=0,0!==(6&Al))throw Error(o(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var i=de(t,t===Pl?Rl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=vc(t,i);else{e=i;var r=Al;Al|=2;var a=gc();for(Pl===t&&Rl===e||(Gl=null,Vl=Qt()+500,fc(t,e));;)try{bc();break}catch(l){pc(t,l)}wo(),Tl.current=a,Al=r,null!==Ol?e=0:(Pl=null,Rl=0,e=Il)}if(0!==e){if(2===e&&(0!==(r=pe(t))&&(i=r,e=ac(t,r))),1===e)throw n=Nl,fc(t,0),lc(t,i),rc(t,Qt()),n;if(6===e)lc(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!si(o(),r))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=vc(t,i))&&(0!==(a=pe(t))&&(i=a,e=ac(t,a))),1===e))throw n=Nl,fc(t,0),lc(t,i),rc(t,Qt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(o(345));case 2:case 5:wc(t,jl,Gl);break;case 3:if(lc(t,i),(130023424&i)===i&&10<(e=Hl+500-Qt())){if(0!==de(t,0))break;if(((r=t.suspendedLanes)&i)!==i){ec(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=ir(wc.bind(null,t,jl,Gl),e);break}wc(t,jl,Gl);break;case 4:if(lc(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-ae(i);a=1<<s,(s=e[s])>r&&(r=s),i&=~a}if(i=r,10<(i=(120>(i=Qt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ml(i/1960))-i)){t.timeoutHandle=ir(wc.bind(null,t,jl,Gl),i);break}wc(t,jl,Gl);break;default:throw Error(o(329))}}}return rc(t,Qt()),t.callbackNode===n?oc.bind(null,t):null}function ac(t,e){var n=Bl;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=vc(t,e))&&(e=jl,jl=n,null!==e&&sc(e)),t}function sc(t){null===jl?jl=t:jl.push.apply(jl,t)}function lc(t,e){for(e&=~Ul,e&=~Fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ae(e),i=1<<n;t[n]=-1,e&=~i}}function cc(t){if(0!==(6&Al))throw Error(o(327));Sc();var e=de(t,0);if(0===(1&e))return rc(t,Qt()),null;var n=vc(t,e);if(0!==t.tag&&2===n){var i=pe(t);0!==i&&(e=i,n=ac(t,i))}if(1===n)throw n=Nl,fc(t,0),lc(t,e),rc(t,Qt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wc(t,jl,Gl),rc(t,Qt()),null}function uc(t,e){var n=Al;Al|=1;try{return t(e)}finally{0===(Al=n)&&(Vl=Qt()+500,Ur&&Hr())}}function hc(t){null!==Kl&&0===Kl.tag&&0===(6&Al)&&Sc();var e=Al;Al|=1;var n=Cl.transition,i=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=i,Cl.transition=n,0===(6&(Al=e))&&Hr()}}function dc(){Ll=Dl.current,Mr(Dl)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(eo(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:oa(),Mr(Ar),Mr(Cr),ha();break;case 5:sa(i);break;case 4:oa();break;case 13:case 19:Mr(la);break;case 10:So(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=t,Ol=t=Dc(t.current,null),Rl=Ll=e,Il=0,Nl=null,Ul=Fl=zl=0,jl=Bl=null,null!==ko){for(e=0;e<ko.length;e++)if(null!==(i=(n=ko[e]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var a=o.next;o.next=r,i.next=a}n.pending=i}ko=null}return t}function pc(t,e){for(;;){var n=Ol;try{if(wo(),da.current=as,ya){for(var i=ga.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ya=!1}if(pa=0,va=ma=ga=null,ba=!1,_a=0,kl.current=null,null===n||null===n.return){Il=1,Nl=e,Ol=null;break}t:{var a=t,s=n.return,l=n,c=e;if(e=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,e),1&p.mode&&ms(a,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ms(a,u,e),mc();break t}c=Error(o(426))}else if(ro&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,l,0,e),go(us(c,l));break t}}a=c=us(c,l),4!==Il&&(Il=2),null===Bl?Bl=[a]:Bl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,zo(a,ps(0,c,e));break t;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e,zo(a,gs(a,l,e));break t}}a=a.return}while(null!==a)}xc(n)}catch(_){e=_,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function gc(){var t=Tl.current;return Tl.current=as,null===t?as:t}function mc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Pl||0===(268435455&zl)&&0===(268435455&Fl)||lc(Pl,Rl)}function vc(t,e){var n=Al;Al|=2;var i=gc();for(Pl===t&&Rl===e||(Gl=null,fc(t,e));;)try{yc();break}catch(r){pc(t,r)}if(wo(),Al=n,Tl.current=i,null!==Ol)throw Error(o(261));return Pl=null,Rl=0,Il}function yc(){for(;null!==Ol;)_c(Ol)}function bc(){for(;null!==Ol&&!Kt();)_c(Ol)}function _c(t){var e=El(t.alternate,t,Ll);t.memoizedProps=t.pendingProps,null===e?xc(t):Ol=e,kl.current=null}function xc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ys(n,e,Ll)))return void(Ol=n)}else{if(null!==(n=Ks(n,e)))return n.flags&=32767,void(Ol=n);if(null===t)return Il=6,void(Ol=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ol=e);Ol=e=t}while(null!==e);0===Il&&(Il=5)}function wc(t,e,n){var i=be,r=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,i){do{Sc()}while(null!==Kl);if(0!==(6&Al))throw Error(o(327));n=t.finishedWork;var r=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ae(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}(t,a),t===Pl&&(Ol=Pl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(ee,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var s=be;be=1;var l=Al;Al|=4,kl.current=null,function(t,e){if(tr=Ge,fi(t=di())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var i=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break t}var s=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=s+r),d!==a||0!==i&&3!==d.nodeType||(c=s+i),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===r&&(l=s),f===a&&++h===i&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(er={focusedElem:t,selectionRange:n},Ge=!1,$s=e;null!==$s;)if(t=(e=$s).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,$s=t;else for(;null!==$s;){e=$s;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:vo(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(x){Mc(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,$s=t;break}$s=e.return}g=nl,nl=!1}(t,n),vl(n,t),pi(er),Ge=!!tr,er=tr=null,t.current=n,bl(n,t,r),Zt(),Al=l,be=s,Cl.transition=a}else t.current=n;if(Yl&&(Yl=!1,Kl=t,Zl=r),a=t.pendingLanes,0===a&&(Xl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(re,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rc(t,Qt()),null!==e)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,t=ql,ql=null,t;0!==(1&Zl)&&0!==t.tag&&Sc(),a=t.pendingLanes,0!==(1&a)?t===Jl?Ql++:(Ql=0,Jl=t):Ql=0,Hr()}(t,e,n,i)}finally{Cl.transition=r,be=i}return null}function Sc(){if(null!==Kl){var t=_e(Zl),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Kl)var i=!1;else{if(t=Kl,Kl=null,Zl=0,0!==(6&Al))throw Error(o(331));var r=Al;for(Al|=4,$s=t.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($s=u;null!==$s;){var h=$s;switch(h.tag){case 0:case 11:case 15:il(8,h,a)}var d=h.child;if(null!==d)d.return=h,$s=d;else for(;null!==$s;){var f=(h=$s).sibling,p=h.return;if(al(h),h===u){$s=null;break}if(null!==f){f.return=p,$s=f;break}$s=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else t:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:il(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$s=y;break t}$s=a.return}}var b=t.current;for($s=b;null!==$s;){var _=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,$s=_;else t:for(s=b;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Mc(l,l.return,w)}if(l===s){$s=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,$s=x;break t}$s=l.return}}if(Al=r,Hr(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(re,t)}catch(w){}i=!0}return i}finally{be=n,Cl.transition=e}}return!1}function Ec(t,e,n){t=Io(t,e=ps(0,e=us(n,e),1),1),e=ec(),null!==t&&(ve(t,1,e),rc(t,e))}function Mc(t,e,n){if(3===t.tag)Ec(t,t,n);else for(;null!==e;){if(3===e.tag){Ec(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xl||!Xl.has(i))){e=Io(e,t=gs(e,t=us(n,t),1),1),t=ec(),null!==e&&(ve(e,1,t),rc(e,t));break}}e=e.return}}function Tc(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Pl===t&&(Rl&n)===n&&(4===Il||3===Il&&(130023424&Rl)===Rl&&500>Qt()-Hl?fc(t,0):Ul|=n),rc(t,e)}function kc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Po(t,e))&&(ve(t,e,n),rc(t,n))}function Cc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),kc(t,n)}function Ac(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(e),kc(t,n)}function Pc(t,e){return Xt(t,e)}function Oc(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(t,e,n,i){return new Oc(t,e,n,i)}function Lc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Dc(t,e){var n=t.alternate;return null===n?((n=Rc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ic(t,e,n,i,r,a){var s=2;if(i=t,"function"===typeof t)Lc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Nc(n.children,r,a,e);case E:s=8,r|=8;break;case M:return(t=Rc(12,n,e,2|r)).elementType=M,t.lanes=a,t;case A:return(t=Rc(13,n,e,r)).elementType=A,t.lanes=a,t;case P:return(t=Rc(19,n,e,r)).elementType=P,t.lanes=a,t;case L:return zc(n,r,a,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case T:s=10;break t;case k:s=9;break t;case C:s=11;break t;case O:s=14;break t;case R:s=16,i=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Rc(s,n,e,r)).elementType=t,e.type=i,e.lanes=a,e}function Nc(t,e,n,i){return(t=Rc(7,t,i,e)).lanes=n,t}function zc(t,e,n,i){return(t=Rc(22,t,i,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function Fc(t,e,n){return(t=Rc(6,t,null,e)).lanes=n,t}function Uc(t,e,n){return(e=Rc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bc(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function jc(t,e,n,i,r,o,a,s,l){return t=new Bc(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Rc(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),t}function Hc(t){if(!t)return kr;t:{if(Ht(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Rr(n))return Ir(t,n,e)}return e}function Vc(t,e,n,i,r,o,a,s,l){return(t=jc(n,i,!0,t,0,o,0,s,l)).context=Hc(null),n=t.current,(o=Do(i=ec(),r=nc(n))).callback=void 0!==e&&null!==e?e:null,Io(n,o,r),t.current.lanes=r,ve(t,r,i),rc(t,i),t}function Gc(t,e,n,i){var r=e.current,o=ec(),a=nc(r);return n=Hc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Do(o,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),null!==(t=Io(r,e,a))&&(ic(t,r,a,o),No(t,r,a)),a}function Wc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function qc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xc(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}El=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ar.current)_s=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return _s=!1,function(t,e,n){switch(e.tag){case 3:Ps(e),po();break;case 5:aa(e);break;case 1:Rr(e.type)&&Nr(e);break;case 4:ra(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tr(yo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=e.memoizedState))return null!==i.dehydrated?(Tr(la,1&la.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Fs(t,e,n):(Tr(la,1&la.current),null!==(t=Ws(t,e,n))?t.sibling:null);Tr(la,1&la.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return Vs(t,e,n);e.flags|=128}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tr(la,la.current),i)break;return null;case 22:case 23:return e.lanes=0,Ms(t,e,n)}return Ws(t,e,n)}(t,e,n);_s=0!==(131072&t.flags)}else _s=!1,ro&&0!==(1048576&e.flags)&&$r(e,qr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Gs(t,e),t=e.pendingProps;var r=Or(e,Cr.current);Mo(e,n),r=Ea(null,e,i,t,r,n);var a=Ma();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rr(i)?(a=!0,Nr(e)):a=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ro(e),r.updater=Ho,e.stateNode=r,r._reactInternals=e,qo(e,i,t,n),e=As(null,e,i,!0,a,n)):(e.tag=0,ro&&a&&to(e),xs(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(Gs(t,e),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return Lc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===O)return 14}return 2}(i),t=vo(i,t),r){case 0:e=ks(null,e,i,t,n);break t;case 1:e=Cs(null,e,i,t,n);break t;case 11:e=ws(null,e,i,t,n);break t;case 14:e=Ss(null,e,i,vo(i.type,t),n);break t}throw Error(o(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,ks(t,e,i,r=e.elementType===i?r:vo(i,r),n);case 1:return i=e.type,r=e.pendingProps,Cs(t,e,i,r=e.elementType===i?r:vo(i,r),n);case 3:t:{if(Ps(e),null===t)throw Error(o(387));i=e.pendingProps,r=(a=e.memoizedState).element,Lo(t,e),Fo(e,i,null,n);var s=e.memoizedState;if(i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,256&e.flags){e=Os(t,e,i,n,r=us(Error(o(423)),e));break t}if(i!==r){e=Os(t,e,i,n,r=us(Error(o(424)),e));break t}for(io=cr(e.stateNode.containerInfo.firstChild),no=e,ro=!0,oo=null,n=Jo(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),i===r){e=Ws(t,e,n);break t}xs(t,e,i,n)}e=e.child}return e;case 5:return aa(e),null===t&&co(e),i=e.type,r=e.pendingProps,a=null!==t?t.memoizedProps:null,s=r.children,nr(i,r)?s=null:null!==a&&nr(i,a)&&(e.flags|=32),Ts(t,e),xs(t,e,s,n),e.child;case 6:return null===t&&co(e),null;case 13:return Fs(t,e,n);case 4:return ra(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=Qo(e,null,i,n):xs(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,ws(t,e,i,r=e.elementType===i?r:vo(i,r),n);case 7:return xs(t,e,e.pendingProps,n),e.child;case 8:case 12:return xs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,a=e.memoizedProps,s=r.value,Tr(yo,i._currentValue),i._currentValue=s,null!==a)if(si(a.value,s)){if(a.children===r.children&&!Ar.current){e=Ws(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Do(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Eo(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===e.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Eo(s,n,e),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Mo(e,n),i=i(r=To(r)),e.flags|=1,xs(t,e,i,n),e.child;case 14:return r=vo(i=e.type,e.pendingProps),Ss(t,e,i,r=vo(i.type,r),n);case 15:return Es(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vo(i,r),Gs(t,e),e.tag=1,Rr(i)?(t=!0,Nr(e)):t=!1,Mo(e,n),Go(e,i,r),qo(e,i,r,n),As(null,e,i,!0,t,n);case 19:return Vs(t,e,n);case 22:return Ms(t,e,n)}throw Error(o(156,e.tag))};var Yc="function"===typeof reportError?reportError:function(t){console.error(t)};function Kc(t){this._internalRoot=t}function Zc(t){this._internalRoot=t}function Qc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $c(){}function tu(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof r){var s=r;r=function(){var t=Wc(a);s.call(t)}}Gc(e,a,t,r)}else a=function(t,e,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var t=Wc(a);o.call(t)}}var a=Vc(e,i,t,0,null,!1,0,"",$c);return t._reactRootContainer=a,t[pr]=a.current,Hi(8===t.nodeType?t.parentNode:t),hc(),a}for(;r=t.lastChild;)t.removeChild(r);if("function"===typeof i){var s=i;i=function(){var t=Wc(l);s.call(t)}}var l=jc(t,0,!1,null,0,!1,0,"",$c);return t._reactRootContainer=l,t[pr]=l.current,Hi(8===t.nodeType?t.parentNode:t),hc((function(){Gc(e,l,n,i)})),l}(n,e,t,r,i);return Wc(a)}Zc.prototype.render=Kc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Gc(t,e,null,null)},Zc.prototype.unmount=Kc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hc((function(){Gc(null,t,null,null)})),e[pr]=null}},Zc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&ze(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),rc(e,Qt()),0===(6&Al)&&(Vl=Qt()+500,Hr()))}break;case 13:hc((function(){var e=Po(t,1);if(null!==e){var n=ec();ic(e,t,1,n)}})),Xc(t,1)}},we=function(t){if(13===t.tag){var e=Po(t,134217728);if(null!==e)ic(e,t,134217728,ec());Xc(t,134217728)}},Se=function(t){if(13===t.tag){var e=nc(t),n=Po(t,e);if(null!==n)ic(n,t,e,ec());Xc(t,e)}},Ee=function(){return be},Me=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},wt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=xr(i);if(!r)throw Error(o(90));X(i),J(i,r)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=uc,At=hc;var eu={usingClientEntryPoint:!1,Events:[br,_r,xr,Tt,kt,uc]},nu={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Wt(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{re=ru.inject(iu),oe=ru}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(e))throw Error(o(200));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Qc(t))throw Error(o(299));var n=!1,i="",r=Yc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(i=e.identifierPrefix),void 0!==e.onRecoverableError&&(r=e.onRecoverableError)),e=jc(t,1,!1,null,0,n,0,i,r),t[pr]=e.current,Hi(8===t.nodeType?t.parentNode:t),new Kc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Wt(e))?null:t.stateNode},e.flushSync=function(t){return hc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Qc(t))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",s=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Vc(e,null,t,1,null!=n?n:null,r,0,a,s),t[pr]=e.current,Hi(t),i)for(t=0;t<i.length;t++)r=(r=(n=i[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Zc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(o(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(o(40));return!!t._reactRootContainer&&(hc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pr]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jc(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return tu(t,e,n,!1,i)},e.version="18.2.0-next-9e3b772b8-20220608"},4391:(t,e,n)=>{"use strict";var i=n(7950);e.createRoot=i.createRoot,e.hydrateRoot=i.hydrateRoot},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},7302:(t,e)=>{"use strict";e.ConcurrentRoot=1,e.ContinuousEventPriority=4,e.DefaultEventPriority=16,e.DiscreteEventPriority=1},6958:(t,e,n)=>{t.exports=function(t){var e={},i=n(5043),r=n(8513),o=Object.assign;function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function w(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=x&&t[x]||t["@@iterator"])?t:null}function S(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case m:return"Suspense";case v:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case p:return(t.displayName||"Context")+".Consumer";case f:return(t._context.displayName||"Context")+".Provider";case g:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case y:return null!==(e=t.displayName||null)?e:S(t.type)||"Memo";case b:e=t._payload,t=t._init;try{return S(t(e))}catch(n){}}return null}function E(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(e);case 8:return e===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function M(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function T(t){if(M(t)!==t)throw Error(a(188))}function k(t){var e=t.alternate;if(!e){if(null===(e=M(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return T(r),t;if(o===i)return T(r),e;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=o;break}if(l===i){s=!0,i=r,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=r;break}if(l===i){s=!0,i=o,n=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}function C(t){return null!==(t=k(t))?A(t):null}function A(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=A(t);if(null!==e)return e;t=t.sibling}return null}function P(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){if(4!==t.tag){var e=P(t);if(null!==e)return e}t=t.sibling}return null}var O,R=Array.isArray,L=t.getPublicInstance,D=t.getRootHostContext,I=t.getChildHostContext,N=t.prepareForCommit,z=t.resetAfterCommit,F=t.createInstance,U=t.appendInitialChild,B=t.finalizeInitialChildren,j=t.prepareUpdate,H=t.shouldSetTextContent,V=t.createTextInstance,G=t.scheduleTimeout,W=t.cancelTimeout,q=t.noTimeout,X=t.isPrimaryRenderer,Y=t.supportsMutation,K=t.supportsPersistence,Z=t.supportsHydration,Q=t.getInstanceFromNode,J=t.preparePortalMount,$=t.getCurrentEventPriority,tt=t.detachDeletedInstance,et=t.supportsMicrotasks,nt=t.scheduleMicrotask,it=t.supportsTestSelectors,rt=t.findFiberRoot,ot=t.getBoundingRect,at=t.getTextContent,st=t.isHiddenSubtree,lt=t.matchAccessibilityRole,ct=t.setFocusIfFocusable,ut=t.setupIntersectionObserver,ht=t.appendChild,dt=t.appendChildToContainer,ft=t.commitTextUpdate,pt=t.commitMount,gt=t.commitUpdate,mt=t.insertBefore,vt=t.insertInContainerBefore,yt=t.removeChild,bt=t.removeChildFromContainer,_t=t.resetTextContent,xt=t.hideInstance,wt=t.hideTextInstance,St=t.unhideInstance,Et=t.unhideTextInstance,Mt=t.clearContainer,Tt=t.cloneInstance,kt=t.createContainerChildSet,Ct=t.appendChildToContainerChildSet,At=t.finalizeContainerChildren,Pt=t.replaceContainerChildren,Ot=t.cloneHiddenInstance,Rt=t.cloneHiddenTextInstance,Lt=t.canHydrateInstance,Dt=t.canHydrateTextInstance,It=t.canHydrateSuspenseInstance,Nt=t.isSuspenseInstancePending,zt=t.isSuspenseInstanceFallback,Ft=t.registerSuspenseInstanceRetry,Ut=t.getNextHydratableSibling,Bt=t.getFirstHydratableChild,jt=t.getFirstHydratableChildWithinContainer,Ht=t.getFirstHydratableChildWithinSuspenseInstance,Vt=t.hydrateInstance,Gt=t.hydrateTextInstance,Wt=t.hydrateSuspenseInstance,qt=t.getNextHydratableInstanceAfterSuspenseInstance,Xt=t.commitHydratedContainer,Yt=t.commitHydratedSuspenseInstance,Kt=t.clearSuspenseBoundary,Zt=t.clearSuspenseBoundaryFromContainer,Qt=t.shouldDeleteUnhydratedTailInstances,Jt=t.didNotMatchHydratedContainerTextInstance,$t=t.didNotMatchHydratedTextInstance;function te(t){if(void 0===O)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);O=e&&e[1]||""}return"\n"+O+t}var ee=!1;function ne(t,e){if(!t||ee)return"";ee=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s]){var l="\n"+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{ee=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?te(t):""}var ie=Object.prototype.hasOwnProperty,re=[],oe=-1;function ae(t){return{current:t}}function se(t){0>oe||(t.current=re[oe],re[oe]=null,oe--)}function le(t,e){oe++,re[oe]=t.current,t.current=e}var ce={},ue=ae(ce),he=ae(!1),de=ce;function fe(t,e){var n=t.type.contextTypes;if(!n)return ce;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function pe(t){return null!==(t=t.childContextTypes)&&void 0!==t}function ge(){se(he),se(ue)}function me(t,e,n){if(ue.current!==ce)throw Error(a(168));le(ue,e),le(he,n)}function ve(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in e))throw Error(a(108,E(t)||"Unknown",r));return o({},n,i)}function ye(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ce,de=ue.current,le(ue,t),le(he,he.current),!0}function be(t,e,n){var i=t.stateNode;if(!i)throw Error(a(169));n?(t=ve(t,e,de),i.__reactInternalMemoizedMergedChildContext=t,se(he),se(ue),le(ue,t)):se(he),le(he,n)}var _e=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(xe(t)/we|0)|0},xe=Math.log,we=Math.LN2;var Se=64,Ee=4194304;function Me(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Te(t,e){var n=t.pendingLanes;if(0===n)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=268435455&n;if(0!==a){var s=a&~r;0!==s?i=Me(s):0!==(o&=a)&&(i=Me(o))}else 0!==(a=n&~r)?i=Me(a):0!==o&&(i=Me(o));if(0===i)return 0;if(0!==e&&e!==i&&0===(e&r)&&((r=i&-i)>=(o=e&-e)||16===r&&0!==(4194240&o)))return e;if(0!==(4&i)&&(i|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-_e(e)),i|=t[n],e&=~r;return i}function ke(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Ce(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ae(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pe(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-_e(e)]=n}function Oe(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-_e(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Re=0;function Le(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var De=r.unstable_scheduleCallback,Ie=r.unstable_cancelCallback,Ne=r.unstable_shouldYield,ze=r.unstable_requestPaint,Fe=r.unstable_now,Ue=r.unstable_ImmediatePriority,Be=r.unstable_UserBlockingPriority,je=r.unstable_NormalPriority,He=r.unstable_IdlePriority,Ve=null,Ge=null;var We="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},qe=null,Xe=!1,Ye=!1;function Ke(t){null===qe?qe=[t]:qe.push(t)}function Ze(){if(!Ye&&null!==qe){Ye=!0;var t=0,e=Re;try{var n=qe;for(Re=1;t<n.length;t++){var i=n[t];do{i=i(!0)}while(null!==i)}qe=null,Xe=!1}catch(r){throw null!==qe&&(qe=qe.slice(t+1)),De(Ue,Ze),r}finally{Re=e,Ye=!1}}return null}var Qe=s.ReactCurrentBatchConfig;function Je(t,e){if(We(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ie.call(e,r)||!We(t[r],e[r]))return!1}return!0}function $e(t){switch(t.tag){case 5:return te(t.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return t=ne(t.type,!1);case 11:return t=ne(t.type.render,!1);case 1:return t=ne(t.type,!0);default:return""}}function tn(t,e){if(t&&t.defaultProps){for(var n in e=o({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var en=ae(null),nn=null,rn=null,on=null;function an(){on=rn=nn=null}function sn(t,e,n){X?(le(en,e._currentValue),e._currentValue=n):(le(en,e._currentValue2),e._currentValue2=n)}function ln(t){var e=en.current;se(en),X?t._currentValue=e:t._currentValue2=e}function cn(t,e,n){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==i&&(i.childLanes|=e)):null!==i&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function un(t,e){nn=t,on=rn=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Nr=!0),t.firstContext=null)}function hn(t){var e=X?t._currentValue:t._currentValue2;if(on!==t)if(t={context:t,memoizedValue:e,next:null},null===rn){if(null===nn)throw Error(a(308));rn=t,nn.dependencies={lanes:0,firstContext:t}}else rn=rn.next=t;return e}var dn=null,fn=!1;function pn(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gn(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vn(t,e){var n=t.updateQueue;null!==n&&(n=n.shared,null!==Ko&&0!==(1&t.mode)&&0===(2&Yo)?(null===(t=n.interleaved)?(e.next=e,null===dn?dn=[n]:dn.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(null===(t=n.pending)?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function yn(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Oe(t,n)}}function bn(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _n(t,e,n,i){var r=t.updateQueue;fn=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?a=u:s.next=u,s=c;var h=t.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(null!==a){var d=r.baseState;for(s=0,h=u=c=null,l=a;;){var f=l.lane,p=l.eventTime;if((i&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var g=t,m=l;switch(f=e,p=n,m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(p,d,f);break t}d=g;break t;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(p,d,f):g)||void 0===f)break t;d=o({},d,f);break t;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(t.flags|=64,null===(f=r.effects)?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,s|=f;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(f=l).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===h&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,null!==(e=r.shared.interleaved)){r=e;do{s|=r.lane,r=r.next}while(r!==e)}else null===a&&(r.shared.lanes=0);na|=s,t.lanes=s,t.memoizedState=d}}function xn(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var wn=(new i.Component).refs;function Sn(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:o({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var En={isMounted:function(t){return!!(t=t._reactInternals)&&M(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=xa(),r=wa(t),o=mn(i,r);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),vn(t,o),null!==(e=Sa(t,r,i))&&yn(e,t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=xa(),r=wa(t),o=mn(i,r);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),vn(t,o),null!==(e=Sa(t,r,i))&&yn(e,t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xa(),i=wa(t),r=mn(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),vn(t,r),null!==(e=Sa(t,i,n))&&yn(e,t,i)}};function Mn(t,e,n,i,r,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!Je(n,i)||!Je(r,o))}function Tn(t,e,n){var i=!1,r=ce,o=e.contextType;return"object"===typeof o&&null!==o?o=hn(o):(r=pe(e)?de:ue.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?fe(t,r):ce),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=En,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function kn(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&En.enqueueReplaceState(e,e.state,null)}function Cn(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=wn,pn(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=hn(o):(o=pe(e)?de:ue.current,r.context=fe(t,o)),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(Sn(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&En.enqueueReplaceState(r,r.state,null),_n(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308)}var An=[],Pn=0,On=null,Rn=0,Ln=[],Dn=0,In=null,Nn=1,zn="";function Fn(t,e){An[Pn++]=Rn,An[Pn++]=On,On=t,Rn=e}function Un(t,e,n){Ln[Dn++]=Nn,Ln[Dn++]=zn,Ln[Dn++]=In,In=t;var i=Nn;t=zn;var r=32-_e(i)-1;i&=~(1<<r),n+=1;var o=32-_e(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Nn=1<<32-_e(e)+r|n<<r|i,zn=o+t}else Nn=1<<o|n<<r|i,zn=t}function Bn(t){null!==t.return&&(Fn(t,1),Un(t,1,0))}function jn(t){for(;t===On;)On=An[--Pn],An[Pn]=null,Rn=An[--Pn],An[Pn]=null;for(;t===In;)In=Ln[--Dn],Ln[Dn]=null,zn=Ln[--Dn],Ln[Dn]=null,Nn=Ln[--Dn],Ln[Dn]=null}var Hn=null,Vn=null,Gn=!1,Wn=!1,qn=null;function Xn(t,e){var n=Ja(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function Yn(t,e){switch(t.tag){case 5:return null!==(e=Lt(e,t.type,t.pendingProps))&&(t.stateNode=e,Hn=t,Vn=Bt(e),!0);case 6:return null!==(e=Dt(e,t.pendingProps))&&(t.stateNode=e,Hn=t,Vn=null,!0);case 13:if(null!==(e=It(e))){var n=null!==In?{id:Nn,overflow:zn}:null;return t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ja(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Hn=t,Vn=null,!0}return!1;default:return!1}}function Kn(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function Zn(t){if(Gn){var e=Vn;if(e){var n=e;if(!Yn(t,e)){if(Kn(t))throw Error(a(418));e=Ut(n);var i=Hn;e&&Yn(t,e)?Xn(i,n):(t.flags=-4097&t.flags|2,Gn=!1,Hn=t)}}else{if(Kn(t))throw Error(a(418));t.flags=-4097&t.flags|2,Gn=!1,Hn=t}}}function Qn(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Hn=t}function Jn(t){if(!Z||t!==Hn)return!1;if(!Gn)return Qn(t),Gn=!0,!1;if(3!==t.tag&&(5!==t.tag||Qt(t.type)&&!H(t.type,t.memoizedProps))){var e=Vn;if(e){if(Kn(t)){for(t=Vn;t;)t=Ut(t);throw Error(a(418))}for(;e;)Xn(t,e),e=Ut(e)}}if(Qn(t),13===t.tag){if(!Z)throw Error(a(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));Vn=qt(t)}else Vn=Hn?Ut(t.stateNode):null;return!0}function $n(){Z&&(Vn=Hn=null,Wn=Gn=!1)}function ti(t){null===qn?qn=[t]:qn.push(t)}function ei(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,t));var r=i,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=r.refs;e===wn&&(e=r.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function ni(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ii(t){return(0,t._init)(t._payload)}function ri(t){function e(e,n){if(t){var i=e.deletions;null===i?(e.deletions=[n],e.flags|=16):i.push(n)}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=ts(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags|=2,n):i:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function h(t,e,n,i){return null===e||6!==e.tag?((e=rs(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n,i){var o=n.type;return o===u?p(t,e,n.props.children,i,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===b&&ii(o)===e.type)?((i=r(e,n.props)).ref=ei(t,e,n),i.return=t,i):((i=es(n.type,n.key,n.props,null,t.mode,i)).ref=ei(t,e,n),i.return=t,i)}function f(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=os(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function p(t,e,n,i,o){return null===e||7!==e.tag?((e=ns(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function g(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=rs(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case l:return(n=es(e.type,e.key,e.props,null,t.mode,n)).ref=ei(t,null,e),n.return=t,n;case c:return(e=os(e,t.mode,n)).return=t,e;case b:return g(t,(0,e._init)(e._payload),n)}if(R(e)||w(e))return(e=ns(e,t.mode,n,null)).return=t,e;ni(t,e)}return null}function m(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:h(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?d(t,e,n,i):null;case c:return n.key===r?f(t,e,n,i):null;case b:return m(t,e,(r=n._init)(n._payload),i)}if(R(n)||w(n))return null!==r?null:p(t,e,n,i,null);ni(t,n)}return null}function v(t,e,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return h(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return d(e,t=t.get(null===i.key?n:i.key)||null,i,r);case c:return f(e,t=t.get(null===i.key?n:i.key)||null,i,r);case b:return v(t,e,n,(0,i._init)(i._payload),r)}if(R(i)||w(i))return p(e,t=t.get(n)||null,i,r,null);ni(e,i)}return null}function y(r,a,s,l){for(var c=null,u=null,h=a,d=a=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=m(r,h,s[d],l);if(null===p){null===h&&(h=f);break}t&&h&&null===p.alternate&&e(r,h),a=o(p,a,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===s.length)return n(r,h),Gn&&Fn(r,d),c;if(null===h){for(;d<s.length;d++)null!==(h=g(r,s[d],l))&&(a=o(h,a,d),null===u?c=h:u.sibling=h,u=h);return Gn&&Fn(r,d),c}for(h=i(r,h);d<s.length;d++)null!==(f=v(h,r,d,s[d],l))&&(t&&null!==f.alternate&&h.delete(null===f.key?d:f.key),a=o(f,a,d),null===u?c=f:u.sibling=f,u=f);return t&&h.forEach((function(t){return e(r,t)})),Gn&&Fn(r,d),c}function _(r,s,l,c){var u=w(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,d=s,f=s=0,p=null,y=l.next();null!==d&&!y.done;f++,y=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var b=m(r,d,y.value,c);if(null===b){null===d&&(d=p);break}t&&d&&null===b.alternate&&e(r,d),s=o(b,s,f),null===h?u=b:h.sibling=b,h=b,d=p}if(y.done)return n(r,d),Gn&&Fn(r,f),u;if(null===d){for(;!y.done;f++,y=l.next())null!==(y=g(r,y.value,c))&&(s=o(y,s,f),null===h?u=y:h.sibling=y,h=y);return Gn&&Fn(r,f),u}for(d=i(r,d);!y.done;f++,y=l.next())null!==(y=v(d,r,f,y.value,c))&&(t&&null!==y.alternate&&d.delete(null===y.key?f:y.key),s=o(y,s,f),null===h?u=y:h.sibling=y,h=y);return t&&d.forEach((function(t){return e(r,t)})),Gn&&Fn(r,f),u}return function t(i,o,a,h){if("object"===typeof a&&null!==a&&a.type===u&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case l:t:{for(var d=a.key,f=o;null!==f;){if(f.key===d){if((d=a.type)===u){if(7===f.tag){n(i,f.sibling),(o=r(f,a.props.children)).return=i,i=o;break t}}else if(f.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===b&&ii(d)===f.type){n(i,f.sibling),(o=r(f,a.props)).ref=ei(i,f,a),o.return=i,i=o;break t}n(i,f);break}e(i,f),f=f.sibling}a.type===u?((o=ns(a.props.children,i.mode,h,a.key)).return=i,i=o):((h=es(a.type,a.key,a.props,null,i.mode,h)).ref=ei(i,o,a),h.return=i,i=h)}return s(i);case c:t:{for(f=a.key;null!==o;){if(o.key===f){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(i,o.sibling),(o=r(o,a.children||[])).return=i,i=o;break t}n(i,o);break}e(i,o),o=o.sibling}(o=os(a,i.mode,h)).return=i,i=o}return s(i);case b:return t(i,o,(f=a._init)(a._payload),h)}if(R(a))return y(i,o,a,h);if(w(a))return _(i,o,a,h);ni(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,a)).return=i,i=o):(n(i,o),(o=rs(a,i.mode,h)).return=i,i=o),s(i)):n(i,o)}}var oi=ri(!0),ai=ri(!1),si={},li=ae(si),ci=ae(si),ui=ae(si);function hi(t){if(t===si)throw Error(a(174));return t}function di(t,e){le(ui,e),le(ci,t),le(li,si),t=D(e),se(li),le(li,t)}function fi(){se(li),se(ci),se(ui)}function pi(t){var e=hi(ui.current),n=hi(li.current);n!==(e=I(n,t.type,e))&&(le(ci,t),le(li,e))}function gi(t){ci.current===t&&(se(li),se(ci))}var mi=ae(0);function vi(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Nt(n)||zt(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yi=[];function bi(){for(var t=0;t<yi.length;t++){var e=yi[t];X?e._workInProgressVersionPrimary=null:e._workInProgressVersionSecondary=null}yi.length=0}var _i=s.ReactCurrentDispatcher,xi=s.ReactCurrentBatchConfig,wi=0,Si=null,Ei=null,Mi=null,Ti=!1,ki=!1,Ci=0,Ai=0;function Pi(){throw Error(a(321))}function Oi(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!We(t[n],e[n]))return!1;return!0}function Ri(t,e,n,i,r,o){if(wi=o,Si=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_i.current=null===t||null===t.memoizedState?pr:gr,t=n(i,r),ki){o=0;do{if(ki=!1,Ci=0,25<=o)throw Error(a(301));o+=1,Mi=Ei=null,e.updateQueue=null,_i.current=mr,t=n(i,r)}while(ki)}if(_i.current=fr,e=null!==Ei&&null!==Ei.next,wi=0,Mi=Ei=Si=null,Ti=!1,e)throw Error(a(300));return t}function Li(){var t=0!==Ci;return Ci=0,t}function Di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Mi?Si.memoizedState=Mi=t:Mi=Mi.next=t,Mi}function Ii(){if(null===Ei){var t=Si.alternate;t=null!==t?t.memoizedState:null}else t=Ei.next;var e=null===Mi?Si.memoizedState:Mi.next;if(null!==e)Mi=e,Ei=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Ei=t).memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},null===Mi?Si.memoizedState=Mi=t:Mi=Mi.next=t}return Mi}function Ni(t,e){return"function"===typeof e?e(t):e}function zi(t){var e=Ii(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=Ei,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((wi&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=i):c=c.next=d,Si.lanes|=h,na|=h}u=u.next}while(null!==u&&u!==o);null===c?s=i:c.next=l,We(i,e.memoizedState)||(Nr=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=c,n.lastRenderedState=i}if(null!==(t=n.interleaved)){r=t;do{o=r.lane,Si.lanes|=o,na|=o,r=r.next}while(r!==t)}else null===r&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fi(t){var e=Ii(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=t(o,s.action),s=s.next}while(s!==r);We(o,e.memoizedState)||(Nr=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Ui(){}function Bi(t,e){var n=Si,i=Ii(),r=e(),o=!We(i.memoizedState,r);if(o&&(i.memoizedState=r,Nr=!0),i=i.queue,Qi(Vi.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||null!==Mi&&1&Mi.memoizedState.tag){if(n.flags|=2048,qi(9,Hi.bind(null,n,i,r,e),void 0,null),null===Ko)throw Error(a(349));0!==(30&wi)||ji(n,e,r)}return r}function ji(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=Si.updateQueue)?(e={lastEffect:null,stores:null},Si.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Hi(t,e,n,i){e.value=n,e.getSnapshot=i,Gi(e)&&Sa(t,1,-1)}function Vi(t,e,n){return n((function(){Gi(e)&&Sa(t,1,-1)}))}function Gi(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!We(t,n)}catch(i){return!0}}function Wi(t){var e=Di();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:t},e.queue=t,t=t.dispatch=lr.bind(null,Si,t),[e.memoizedState,t]}function qi(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=Si.updateQueue)?(e={lastEffect:null,stores:null},Si.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Xi(){return Ii().memoizedState}function Yi(t,e,n,i){var r=Di();Si.flags|=t,r.memoizedState=qi(1|e,n,void 0,void 0===i?null:i)}function Ki(t,e,n,i){var r=Ii();i=void 0===i?null:i;var o=void 0;if(null!==Ei){var a=Ei.memoizedState;if(o=a.destroy,null!==i&&Oi(i,a.deps))return void(r.memoizedState=qi(e,n,o,i))}Si.flags|=t,r.memoizedState=qi(1|e,n,o,i)}function Zi(t,e){return Yi(8390656,8,t,e)}function Qi(t,e){return Ki(2048,8,t,e)}function Ji(t,e){return Ki(4,2,t,e)}function $i(t,e){return Ki(4,4,t,e)}function tr(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function er(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Ki(4,4,tr.bind(null,e,t),n)}function nr(){}function ir(t,e){var n=Ii();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Oi(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function rr(t,e){var n=Ii();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&Oi(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function or(t,e){var n=Re;Re=0!==n&&4>n?n:4,t(!0);var i=xi.transition;xi.transition={};try{t(!1),e()}finally{Re=n,xi.transition=i}}function ar(){return Ii().memoizedState}function sr(t,e,n){var i=wa(t);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cr(t)?ur(e,n):(hr(t,e,n),null!==(t=Sa(t,i,n=xa()))&&dr(t,e,i))}function lr(t,e,n){var i=wa(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cr(t))ur(e,r);else{hr(t,e,r);var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,We(s,a))return}catch(l){}null!==(t=Sa(t,i,n=xa()))&&dr(t,e,i)}}function cr(t){var e=t.alternate;return t===Si||null!==e&&e===Si}function ur(t,e){ki=Ti=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hr(t,e,n){null!==Ko&&0!==(1&t.mode)&&0===(2&Yo)?(null===(t=e.interleaved)?(n.next=n,null===dn?dn=[e]:dn.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(null===(t=e.pending)?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function dr(t,e,n){if(0!==(4194240&n)){var i=e.lanes;n|=i&=t.pendingLanes,e.lanes=n,Oe(t,n)}}var fr={readContext:hn,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},pr={readContext:hn,useCallback:function(t,e){return Di().memoizedState=[t,void 0===e?null:e],t},useContext:hn,useEffect:Zi,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Yi(4194308,4,tr.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yi(4,2,t,e)},useMemo:function(t,e){var n=Di();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Di();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=sr.bind(null,Si,t),[i.memoizedState,t]},useRef:function(t){return t={current:t},Di().memoizedState=t},useState:Wi,useDebugValue:nr,useDeferredValue:function(t){var e=Wi(t),n=e[0],i=e[1];return Zi((function(){var e=xi.transition;xi.transition={};try{i(t)}finally{xi.transition=e}}),[t]),n},useTransition:function(){var t=Wi(!1),e=t[0];return t=or.bind(null,t[1]),Di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Si,r=Di();if(Gn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===Ko)throw Error(a(349));0!==(30&wi)||ji(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Zi(Vi.bind(null,i,o,t),[t]),i.flags|=2048,qi(9,Hi.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Di(),e=Ko.identifierPrefix;if(Gn){var n=zn;e=":"+e+"R"+(n=(Nn&~(1<<32-_e(Nn)-1)).toString(32)+n),0<(n=Ci++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Ai++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Qi,useImperativeHandle:er,useInsertionEffect:Ji,useLayoutEffect:$i,useMemo:rr,useReducer:zi,useRef:Xi,useState:function(){return zi(Ni)},useDebugValue:nr,useDeferredValue:function(t){var e=zi(Ni),n=e[0],i=e[1];return Qi((function(){var e=xi.transition;xi.transition={};try{i(t)}finally{xi.transition=e}}),[t]),n},useTransition:function(){return[zi(Ni)[0],Ii().memoizedState]},useMutableSource:Ui,useSyncExternalStore:Bi,useId:ar,unstable_isNewReconciler:!1},mr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Qi,useImperativeHandle:er,useInsertionEffect:Ji,useLayoutEffect:$i,useMemo:rr,useReducer:Fi,useRef:Xi,useState:function(){return Fi(Ni)},useDebugValue:nr,useDeferredValue:function(t){var e=Fi(Ni),n=e[0],i=e[1];return Qi((function(){var e=xi.transition;xi.transition={};try{i(t)}finally{xi.transition=e}}),[t]),n},useTransition:function(){return[Fi(Ni)[0],Ii().memoizedState]},useMutableSource:Ui,useSyncExternalStore:Bi,useId:ar,unstable_isNewReconciler:!1};function vr(t,e){try{var n="",i=e;do{n+=$e(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r}}function yr(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var br,_r,xr,wr,Sr="function"===typeof WeakMap?WeakMap:Map;function Er(t,e,n){(n=mn(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ha||(ha=!0,da=i),yr(0,e)},n}function Mr(t,e,n){(n=mn(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){yr(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){yr(0,e),"function"!==typeof i&&(null===fa?fa=new Set([this]):fa.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function Tr(t,e,n){var i=t.pingCache;if(null===i){i=t.pingCache=new Sr;var r=new Set;i.set(e,r)}else void 0===(r=i.get(e))&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=qa.bind(null,t,e,n),e.then(t,t))}function kr(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function Cr(t,e,n,i,r){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=mn(-1,1)).tag=2,vn(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=r,t)}function Ar(t){t.flags|=4}function Pr(t,e){if(null!==t&&t.child===e.child)return!0;if(0!==(16&e.flags))return!1;for(t=e.child;null!==t;){if(0!==(12854&t.flags)||0!==(12854&t.subtreeFlags))return!1;t=t.sibling}return!0}if(Y)br=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)U(t,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_r=function(){},xr=function(t,e,n,i,r){if((t=t.memoizedProps)!==i){var o=e.stateNode,a=hi(li.current);n=j(o,n,t,i,r,a),(e.updateQueue=n)&&Ar(e)}},wr=function(t,e,n,i){n!==i&&Ar(e)};else if(K){br=function(t,e,n,i){for(var r=e.child;null!==r;){if(5===r.tag){var o=r.stateNode;n&&i&&(o=Ot(o,r.type,r.memoizedProps,r)),U(t,o)}else if(6===r.tag)o=r.stateNode,n&&i&&(o=Rt(o,r.memoizedProps,r)),U(t,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),br(t,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Or=function(t,e,n,i){for(var r=e.child;null!==r;){if(5===r.tag){var o=r.stateNode;n&&i&&(o=Ot(o,r.type,r.memoizedProps,r)),Ct(t,o)}else if(6===r.tag)o=r.stateNode,n&&i&&(o=Rt(o,r.memoizedProps,r)),Ct(t,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),Or(t,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_r=function(t,e){var n=e.stateNode;if(!Pr(t,e)){t=n.containerInfo;var i=kt(t);Or(i,e,!1,!1),n.pendingChildren=i,Ar(e),At(t,i)}},xr=function(t,e,n,i,r){var o=t.stateNode,a=t.memoizedProps;if((t=Pr(t,e))&&a===i)e.stateNode=o;else{var s=e.stateNode,l=hi(li.current),c=null;a!==i&&(c=j(s,n,a,i,r,l)),t&&null===c?e.stateNode=o:(o=Tt(o,c,n,a,i,e,t,s),B(o,n,i,r,l)&&Ar(e),e.stateNode=o,t?Ar(e):br(o,e,!1,!1))}},wr=function(t,e,n,i){n!==i?(t=hi(ui.current),n=hi(li.current),e.stateNode=V(i,t,n,e),Ar(e)):e.stateNode=t.stateNode}}else _r=function(){},xr=function(){},wr=function(){};function Rr(t,e){if(!Gn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Lr(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=t,r=r.sibling;else for(r=t.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Dr(t,e,n){var i=e.pendingProps;switch(jn(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(e),null;case 1:case 17:return pe(e.type)&&ge(),Lr(e),null;case 3:return i=e.stateNode,fi(),se(he),se(ue),bi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(Jn(e)?Ar(e):null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==qn&&(Ca(qn),qn=null))),_r(t,e),Lr(e),null;case 5:gi(e),n=hi(ui.current);var r=e.type;if(null!==t&&null!=e.stateNode)xr(t,e,r,i,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(null===e.stateNode)throw Error(a(166));return Lr(e),null}if(t=hi(li.current),Jn(e)){if(!Z)throw Error(a(175));t=Vt(e.stateNode,e.type,e.memoizedProps,n,t,e,!Wn),e.updateQueue=t,null!==t&&Ar(e)}else{var o=F(r,i,n,t,e);br(o,e,!1,!1),e.stateNode=o,B(o,r,i,n,t)&&Ar(e)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Lr(e),null;case 6:if(t&&null!=e.stateNode)wr(t,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(a(166));if(t=hi(ui.current),n=hi(li.current),Jn(e)){if(!Z)throw Error(a(176));if(t=e.stateNode,i=e.memoizedProps,(n=Gt(t,i,e,!Wn))&&null!==(r=Hn))switch(o=0!==(1&r.mode),r.tag){case 3:Jt(r.stateNode.containerInfo,t,i,o);break;case 5:$t(r.type,r.memoizedProps,r.stateNode,t,i,o)}n&&Ar(e)}else e.stateNode=V(i,t,n,e)}return Lr(e),null;case 13:if(se(mi),i=e.memoizedState,Gn&&null!==Vn&&0!==(1&e.mode)&&0===(128&e.flags)){for(t=Vn;t;)t=Ut(t);return $n(),e.flags|=98560,e}if(null!==i&&null!==i.dehydrated){if(i=Jn(e),null===t){if(!i)throw Error(a(318));if(!Z)throw Error(a(344));if(!(t=null!==(t=e.memoizedState)?t.dehydrated:null))throw Error(a(317));Wt(t,e)}else $n(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return Lr(e),null}return null!==qn&&(Ca(qn),qn=null),0!==(128&e.flags)?(e.lanes=n,e):(i=null!==i,n=!1,null===t?Jn(e):n=null!==t.memoizedState,i&&!n&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&mi.current)?0===ta&&(ta=3):Na())),null!==e.updateQueue&&(e.flags|=4),Lr(e),null);case 4:return fi(),_r(t,e),null===t&&J(e.stateNode.containerInfo),Lr(e),null;case 10:return ln(e.type._context),Lr(e),null;case 19:if(se(mi),null===(r=e.memoizedState))return Lr(e),null;if(i=0!==(128&e.flags),null===(o=r.rendering))if(i)Rr(r,!1);else{if(0!==ta||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(o=vi(t))){for(e.flags|=128,Rr(r,!1),null!==(t=o.updateQueue)&&(e.updateQueue=t,e.flags|=4),e.subtreeFlags=0,t=n,i=e.child;null!==i;)r=t,(n=i).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return le(mi,1&mi.current|2),e.child}t=t.sibling}null!==r.tail&&Fe()>la&&(e.flags|=128,i=!0,Rr(r,!1),e.lanes=4194304)}else{if(!i)if(null!==(t=vi(o))){if(e.flags|=128,i=!0,null!==(t=t.updateQueue)&&(e.updateQueue=t,e.flags|=4),Rr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!Gn)return Lr(e),null}else 2*Fe()-r.renderingStartTime>la&&1073741824!==n&&(e.flags|=128,i=!0,Rr(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(null!==(t=r.last)?t.sibling=o:e.child=o,r.last=o)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Fe(),e.sibling=null,t=mi.current,le(mi,i?1&t|2:1&t),e):(Lr(e),null);case 22:case 23:return Ra(),i=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==i&&(e.flags|=8192),i&&0!==(1&e.mode)?0!==(1073741824&Jo)&&(Lr(e),Y&&6&e.subtreeFlags&&(e.flags|=8192)):Lr(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}var Ir=s.ReactCurrentOwner,Nr=!1;function zr(t,e,n,i){e.child=null===t?ai(e,null,n,i):oi(e,t.child,n,i)}function Fr(t,e,n,i,r){n=n.render;var o=e.ref;return un(e,r),i=Ri(t,e,n,i,o,r),n=Li(),null===t||Nr?(Gn&&n&&Bn(e),e.flags|=1,zr(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ro(t,e,r))}function Ur(t,e,n,i,r){if(null===t){var o=n.type;return"function"!==typeof o||$a(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=es(n.type,null,i,e,e.mode,r)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Br(t,e,o,i,r))}if(o=t.child,0===(t.lanes&r)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Je)(a,i)&&t.ref===e.ref)return ro(t,e,r)}return e.flags|=1,(t=ts(o,i)).ref=e.ref,t.return=e,e.child=t}function Br(t,e,n,i,r){if(null!==t&&Je(t.memoizedProps,i)&&t.ref===e.ref){if(Nr=!1,0===(t.lanes&r))return e.lanes=t.lanes,ro(t,e,r);0!==(131072&t.flags)&&(Nr=!0)}return Vr(t,e,n,i,r)}function jr(t,e,n){var i=e.pendingProps,r=i.children,o=null!==t?t.memoizedState:null;if("hidden"===i.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null},le($o,Jo),Jo|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null},e.updateQueue=null,le($o,Jo),Jo|=t,null;e.memoizedState={baseLanes:0,cachePool:null},i=null!==o?o.baseLanes:n,le($o,Jo),Jo|=i}else null!==o?(i=o.baseLanes|n,e.memoizedState=null):i=n,le($o,Jo),Jo|=i;return zr(t,e,r,n),e.child}function Hr(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vr(t,e,n,i,r){var o=pe(n)?de:ue.current;return o=fe(e,o),un(e,r),n=Ri(t,e,n,i,o,r),i=Li(),null===t||Nr?(Gn&&i&&Bn(e),e.flags|=1,zr(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ro(t,e,r))}function Gr(t,e,n,i,r){if(pe(n)){var o=!0;ye(e)}else o=!1;if(un(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),Tn(e,n,i),Cn(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=hn(c):c=fe(e,c=pe(n)?de:ue.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==c)&&kn(e,a,i,c),fn=!1;var d=e.memoizedState;a.state=d,_n(e,i,a,r),l=e.memoizedState,s!==i||d!==l||he.current||fn?("function"===typeof u&&(Sn(e,n,u,i),l=e.memoizedState),(s=fn||Mn(e,n,s,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4194308)):("function"===typeof a.componentDidMount&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):("function"===typeof a.componentDidMount&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,gn(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:tn(e.type,s),a.props=c,h=e.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=fe(e,l=pe(n)?de:ue.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&kn(e,a,i,l),fn=!1,d=e.memoizedState,a.state=d,_n(e,i,a,r);var p=e.memoizedState;s!==h||d!==p||he.current||fn?("function"===typeof f&&(Sn(e,n,f,i),p=e.memoizedState),(c=fn||Mn(e,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Wr(t,e,n,i,o,r)}function Wr(t,e,n,i,r,o){Hr(t,e);var a=0!==(128&e.flags);if(!i&&!a)return r&&be(e,n,!1),ro(t,e,o);i=e.stateNode,Ir.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=oi(e,t.child,null,o),e.child=oi(e,null,s,o)):zr(t,e,s,o),e.memoizedState=i.state,r&&be(e,n,!0),e.child}function qr(t){var e=t.stateNode;e.pendingContext?me(0,e.pendingContext,e.pendingContext!==e.context):e.context&&me(0,e.context,!1),di(t,e.containerInfo)}function Xr(t,e,n,i,r){return $n(),ti(r),e.flags|=256,zr(t,e,n,i),e.child}var Yr={dehydrated:null,treeContext:null,retryLane:0};function Kr(t){return{baseLanes:t,cachePool:null}}function Zr(t,e,n){var i,r=e.pendingProps,o=mi.current,s=!1,l=0!==(128&e.flags);if((i=l)||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),le(mi,1&o),null===t)return Zn(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:zt(t)?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=is(o,r,0,null),t=ns(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Kr(n),e.memoizedState=Yr,t):Qr(e,o));if(null!==(o=t.memoizedState)){if(null!==(i=o.dehydrated)){if(l)return 256&e.flags?(e.flags&=-257,to(t,e,n,Error(a(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=is({mode:"visible",children:r.children},o,0,null),(s=ns(s,o,n,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&oi(e,t.child,null,n),e.child.memoizedState=Kr(n),e.memoizedState=Yr,s);if(0===(1&e.mode))e=to(t,e,n,null);else if(zt(i))e=to(t,e,n,Error(a(419)));else if(r=0!==(n&t.childLanes),Nr||r){if(null!==(r=Ko)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(r=0!==(s&(r.suspendedLanes|n))?0:s)&&r!==o.retryLane&&(o.retryLane=r,Sa(t,r,-1))}Na(),e=to(t,e,n,Error(a(421)))}else Nt(i)?(e.flags|=128,e.child=t.child,e=Ya.bind(null,t),Ft(i,e),e=null):(n=o.treeContext,Z&&(Vn=Ht(i),Hn=e,Gn=!0,qn=null,Wn=!1,null!==n&&(Ln[Dn++]=Nn,Ln[Dn++]=zn,Ln[Dn++]=In,Nn=n.id,zn=n.overflow,In=e)),(e=Qr(e,e.pendingProps.children)).flags|=4096);return e}return s?(r=$r(t,e,r.children,r.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?Kr(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=t.childLanes&~n,e.memoizedState=Yr,r):(n=Jr(t,e,r.children,n),e.memoizedState=null,n)}return s?(r=$r(t,e,r.children,r.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?Kr(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=t.childLanes&~n,e.memoizedState=Yr,r):(n=Jr(t,e,r.children,n),e.memoizedState=null,n)}function Qr(t,e){return(e=is({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Jr(t,e,n,i){var r=t.child;return t=r.sibling,n=ts(r,{mode:"visible",children:n}),0===(1&e.mode)&&(n.lanes=i),n.return=e,n.sibling=null,null!==t&&(null===(i=e.deletions)?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n}function $r(t,e,n,i,r){var o=e.mode,a=(t=t.child).sibling,s={mode:"hidden",children:n};return 0===(1&o)&&e.child!==t?((n=e.child).childLanes=0,n.pendingProps=s,e.deletions=null):(n=ts(t,s)).subtreeFlags=14680064&t.subtreeFlags,null!==a?i=ts(a,i):(i=ns(i,o,r,null)).flags|=2,i.return=e,n.return=e,n.sibling=i,e.child=n,i}function to(t,e,n,i){return null!==i&&ti(i),oi(e,t.child,null,n),(t=Qr(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function eo(t,e,n){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),cn(t.return,e,n)}function no(t,e,n,i,r){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function io(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(zr(t,e,i.children,n),0!==(2&(i=mi.current)))i=1&i|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&eo(t,n,e);else if(19===t.tag)eo(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(le(mi,i),0===(1&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===vi(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),no(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===vi(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}no(e,!0,n,null,o);break;case"together":no(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ro(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),na|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=ts(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=ts(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function oo(t,e){switch(jn(e),e.tag){case 1:return pe(e.type)&&ge(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return fi(),se(he),se(ue),bi(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return gi(e),null;case 13:if(se(mi),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));$n()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return se(mi),null;case 4:return fi(),null;case 10:return ln(e.type._context),null;case 22:case 23:return Ra(),null;default:return null}}var ao=!1,so=!1,lo="function"===typeof WeakSet?WeakSet:Set,co=null;function uo(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Wa(t,e,i)}else n.current=null}function ho(t,e,n){try{n()}catch(i){Wa(t,e,i)}}var fo=!1;function po(t,e,n){var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,void 0!==o&&ho(e,n,o)}r=r.next}while(r!==i)}}function go(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function mo(t){var e=t.ref;if(null!==e){var n=t.stateNode;if(5===t.tag)t=L(n);else t=n;"function"===typeof e?e(t):e.current=t}}function vo(t,e,n){if(Ge&&"function"===typeof Ge.onCommitFiberUnmount)try{Ge.onCommitFiberUnmount(Ve,e)}catch(a){}switch(e.tag){case 0:case 11:case 14:case 15:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var i=t=t.next;do{var r=i,o=r.destroy;r=r.tag,void 0!==o&&(0!==(2&r)||0!==(4&r))&&ho(e,n,o),i=i.next}while(i!==t)}break;case 1:if(uo(e,n),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){Wa(e,n,a)}break;case 5:uo(e,n);break;case 4:Y?Mo(t,e,n):K&&K&&(e=e.stateNode.containerInfo,n=kt(e),Pt(e,n))}}function yo(t,e,n){for(var i=e;;)if(vo(t,i,n),null===i.child||Y&&4===i.tag){if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function bo(t){var e=t.alternate;null!==e&&(t.alternate=null,bo(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&tt(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _o(t){return 5===t.tag||3===t.tag||4===t.tag}function xo(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||_o(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function wo(t){if(Y){t:{for(var e=t.return;null!==e;){if(_o(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(n.tag){case 5:e=n.stateNode,32&n.flags&&(_t(e),n.flags&=-33),Eo(t,n=xo(t),e);break;case 3:case 4:e=n.stateNode.containerInfo,So(t,n=xo(t),e);break;default:throw Error(a(161))}}}function So(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?vt(n,t,e):dt(n,t);else if(4!==i&&null!==(t=t.child))for(So(t,e,n),t=t.sibling;null!==t;)So(t,e,n),t=t.sibling}function Eo(t,e,n){var i=t.tag;if(5===i||6===i)t=t.stateNode,e?mt(n,t,e):ht(n,t);else if(4!==i&&null!==(t=t.child))for(Eo(t,e,n),t=t.sibling;null!==t;)Eo(t,e,n),t=t.sibling}function Mo(t,e,n){for(var i,r,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(i=s.stateNode,s.tag){case 5:r=!1;break t;case 3:case 4:i=i.containerInfo,r=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag)yo(t,o,n),r?bt(i,o.stateNode):yt(i,o.stateNode);else if(18===o.tag)r?Zt(i,o.stateNode):Kt(i,o.stateNode);else if(4===o.tag){if(null!==o.child){i=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(vo(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function To(t,e){if(Y){switch(e.tag){case 0:case 11:case 14:case 15:return po(3,e,e.return),go(3,e),void po(5,e,e.return);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var r=e.type,o=e.updateQueue;e.updateQueue=null,null!==o&&gt(n,o,r,t,i,e)}return;case 6:if(null===e.stateNode)throw Error(a(162));return n=e.memoizedProps,void ft(e.stateNode,null!==t?t.memoizedProps:n,n);case 3:return void(Z&&null!==t&&t.memoizedState.isDehydrated&&Xt(e.stateNode.containerInfo));case 13:case 19:return void ko(e)}throw Error(a(163))}switch(e.tag){case 0:case 11:case 14:case 15:return po(3,e,e.return),go(3,e),void po(5,e,e.return);case 12:case 22:case 23:return;case 13:case 19:return void ko(e);case 3:Z&&null!==t&&t.memoizedState.isDehydrated&&Xt(e.stateNode.containerInfo)}t:if(K){switch(e.tag){case 1:case 5:case 6:break t;case 3:case 4:e=e.stateNode,Pt(e.containerInfo,e.pendingChildren);break t}throw Error(a(163))}}function ko(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new lo),e.forEach((function(e){var i=Ka.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function Co(t,e,n){co=t,Ao(t,e,n)}function Ao(t,e,n){for(var i=0!==(1&t.mode);null!==co;){var r=co,o=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||ao;if(!a){var s=r.alternate,l=null!==s&&null!==s.memoizedState||so;s=ao;var c=so;if(ao=a,(so=l)&&!c)for(co=r;null!==co;)l=(a=co).child,22===a.tag&&null!==a.memoizedState?Ro(r):null!==l?(l.return=a,co=l):Ro(r);for(;null!==o;)co=o,Ao(o,e,n),o=o.sibling;co=r,ao=s,so=c}Po(t)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,co=o):Po(t)}}function Po(t){for(;null!==co;){var e=co;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:so||go(5,e);break;case 1:var i=e.stateNode;if(4&e.flags&&!so)if(null===n)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&xn(e,o,i);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:n=L(e.child.stateNode);break;case 1:n=e.child.stateNode}xn(e,s,n)}break;case 5:var l=e.stateNode;null===n&&4&e.flags&&pt(l,e.type,e.memoizedProps,e);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Z&&null===e.memoizedState){var c=e.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Yt(h)}}}break;default:throw Error(a(163))}so||512&e.flags&&mo(e)}catch(d){Wa(e,e.return,d)}}if(e===t){co=null;break}if(null!==(n=e.sibling)){n.return=e.return,co=n;break}co=e.return}}function Oo(t){for(;null!==co;){var e=co;if(e===t){co=null;break}var n=e.sibling;if(null!==n){n.return=e.return,co=n;break}co=e.return}}function Ro(t){for(;null!==co;){var e=co;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{go(4,e)}catch(l){Wa(e,n,l)}break;case 1:var i=e.stateNode;if("function"===typeof i.componentDidMount){var r=e.return;try{i.componentDidMount()}catch(l){Wa(e,r,l)}}var o=e.return;try{mo(e)}catch(l){Wa(e,o,l)}break;case 5:var a=e.return;try{mo(e)}catch(l){Wa(e,a,l)}}}catch(l){Wa(e,e.return,l)}if(e===t){co=null;break}var s=e.sibling;if(null!==s){s.return=e.return,co=s;break}co=e.return}}var Lo=0,Do=1,Io=2,No=3,zo=4;if("function"===typeof Symbol&&Symbol.for){var Fo=Symbol.for;Lo=Fo("selector.component"),Do=Fo("selector.has_pseudo_class"),Io=Fo("selector.role"),No=Fo("selector.test_id"),zo=Fo("selector.text")}function Uo(t){var e=Q(t);if(null!=e){if("string"!==typeof e.memoizedProps["data-testname"])throw Error(a(364));return e}if(null===(t=rt(t)))throw Error(a(362));return t.stateNode.current}function Bo(t,e){switch(e.$$typeof){case Lo:if(t.type===e.value)return!0;break;case Do:t:{e=e.value,t=[t,0];for(var n=0;n<t.length;){var i=t[n++],r=t[n++],o=e[r];if(5!==i.tag||!st(i)){for(;null!=o&&Bo(i,o);)o=e[++r];if(r===e.length){e=!0;break t}for(i=i.child;null!==i;)t.push(i,r),i=i.sibling}}e=!1}return e;case Io:if(5===t.tag&&lt(t.stateNode,e.value))return!0;break;case zo:if((5===t.tag||6===t.tag)&&(null!==(t=at(t))&&0<=t.indexOf(e.value)))return!0;break;case No:if(5===t.tag&&("string"===typeof(t=t.memoizedProps["data-testname"])&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function jo(t){switch(t.$$typeof){case Lo:return"<"+(S(t.value)||"Unknown")+">";case Do:return":has("+(jo(t)||"")+")";case Io:return'[role="'+t.value+'"]';case zo:return'"'+t.value+'"';case No:return'[data-testname="'+t.value+'"]';default:throw Error(a(365))}}function Ho(t,e){var n=[];t=[t,0];for(var i=0;i<t.length;){var r=t[i++],o=t[i++],a=e[o];if(5!==r.tag||!st(r)){for(;null!=a&&Bo(r,a);)a=e[++o];if(o===e.length)n.push(r);else for(r=r.child;null!==r;)t.push(r,o),r=r.sibling}}return n}function Vo(t,e){if(!it)throw Error(a(363));t=Ho(t=Uo(t),e),e=[],t=Array.from(t);for(var n=0;n<t.length;){var i=t[n++];if(5===i.tag)st(i)||e.push(i.stateNode);else for(i=i.child;null!==i;)t.push(i),i=i.sibling}return e}var Go=Math.ceil,Wo=s.ReactCurrentDispatcher,qo=s.ReactCurrentOwner,Xo=s.ReactCurrentBatchConfig,Yo=0,Ko=null,Zo=null,Qo=0,Jo=0,$o=ae(0),ta=0,ea=null,na=0,ia=0,ra=0,oa=null,aa=null,sa=0,la=1/0;function ca(){la=Fe()+500}var ua,ha=!1,da=null,fa=null,pa=!1,ga=null,ma=0,va=0,ya=null,ba=-1,_a=0;function xa(){return 0!==(6&Yo)?Fe():-1!==ba?ba:ba=Fe()}function wa(t){return 0===(1&t.mode)?1:0!==(2&Yo)&&0!==Qo?Qo&-Qo:null!==Qe.transition?(0===_a&&(t=Se,0===(4194240&(Se<<=1))&&(Se=64),_a=t),_a):0!==(t=Re)?t:$()}function Sa(t,e,n){if(50<va)throw va=0,ya=null,Error(a(185));var i=Ea(t,e);return null===i?null:(Pe(i,e,n),0!==(2&Yo)&&i===Ko||(i===Ko&&(0===(2&Yo)&&(ia|=e),4===ta&&Aa(i,Qo)),Ma(i,n),1===e&&0===Yo&&0===(1&t.mode)&&(ca(),Xe&&Ze())),i)}function Ea(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function Ma(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-_e(o),s=1<<a,l=r[a];-1===l?0!==(s&n)&&0===(s&i)||(r[a]=ke(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}(t,e);var i=Te(t,t===Ko?Qo:0);if(0===i)null!==n&&Ie(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&Ie(n),1===e)0===t.tag?function(t){Xe=!0,Ke(t)}(Pa.bind(null,t)):Ke(Pa.bind(null,t)),et?nt((function(){0===Yo&&Ze()})):De(Ue,Ze),n=null;else{switch(Le(i)){case 1:n=Ue;break;case 4:n=Be;break;case 16:default:n=je;break;case 536870912:n=He}n=Za(n,Ta.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ta(t,e){if(ba=-1,_a=0,0!==(6&Yo))throw Error(a(327));var n=t.callbackNode;if(Va()&&t.callbackNode!==n)return null;var i=Te(t,t===Ko?Qo:0);if(0===i)return null;if(0!==(30&i)||0!==(i&t.expiredLanes)||e)e=za(t,i);else{e=i;var r=Yo;Yo|=2;var o=Ia();for(Ko===t&&Qo===e||(ca(),La(t,e));;)try{Ua();break}catch(l){Da(t,l)}an(),Wo.current=o,Yo=r,null!==Zo?e=0:(Ko=null,Qo=0,e=ta)}if(0!==e){if(2===e&&(0!==(r=Ce(t))&&(i=r,e=ka(t,r))),1===e)throw n=ea,La(t,0),Aa(t,i),Ma(t,Fe()),n;if(6===e)Aa(t,i);else{if(r=t.current.alternate,0===(30&i)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!We(o(),r))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(r)&&(2===(e=za(t,i))&&(0!==(o=Ce(t))&&(i=o,e=ka(t,o))),1===e))throw n=ea,La(t,0),Aa(t,i),Ma(t,Fe()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(a(345));case 2:case 5:Ha(t,aa);break;case 3:if(Aa(t,i),(130023424&i)===i&&10<(e=sa+500-Fe())){if(0!==Te(t,0))break;if(((r=t.suspendedLanes)&i)!==i){xa(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=G(Ha.bind(null,t,aa),e);break}Ha(t,aa);break;case 4:if(Aa(t,i),(4194240&i)===i)break;for(e=t.eventTimes,r=-1;0<i;){var s=31-_e(i);o=1<<s,(s=e[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Fe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Go(i/1960))-i)){t.timeoutHandle=G(Ha.bind(null,t,aa),i);break}Ha(t,aa);break;default:throw Error(a(329))}}}return Ma(t,Fe()),t.callbackNode===n?Ta.bind(null,t):null}function ka(t,e){var n=oa;return t.current.memoizedState.isDehydrated&&(La(t,e).flags|=256),2!==(t=za(t,e))&&(e=aa,aa=n,null!==e&&Ca(e)),t}function Ca(t){null===aa?aa=t:aa.push.apply(aa,t)}function Aa(t,e){for(e&=~ra,e&=~ia,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_e(e),i=1<<n;t[n]=-1,e&=~i}}function Pa(t){if(0!==(6&Yo))throw Error(a(327));Va();var e=Te(t,0);if(0===(1&e))return Ma(t,Fe()),null;var n=za(t,e);if(0!==t.tag&&2===n){var i=Ce(t);0!==i&&(e=i,n=ka(t,i))}if(1===n)throw n=ea,La(t,0),Aa(t,e),Ma(t,Fe()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ha(t,aa),Ma(t,Fe()),null}function Oa(t){null!==ga&&0===ga.tag&&0===(6&Yo)&&Va();var e=Yo;Yo|=1;var n=Xo.transition,i=Re;try{if(Xo.transition=null,Re=1,t)return t()}finally{Re=i,Xo.transition=n,0===(6&(Yo=e))&&Ze()}}function Ra(){Jo=$o.current,se($o)}function La(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==q&&(t.timeoutHandle=q,W(n)),null!==Zo)for(n=Zo.return;null!==n;){var i=n;switch(jn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&ge();break;case 3:fi(),se(he),se(ue),bi();break;case 5:gi(i);break;case 4:fi();break;case 13:case 19:se(mi);break;case 10:ln(i.type._context);break;case 22:case 23:Ra()}n=n.return}if(Ko=t,Zo=t=ts(t.current,null),Qo=Jo=e,ta=0,ea=null,ra=ia=na=0,aa=oa=null,null!==dn){for(e=0;e<dn.length;e++)if(null!==(i=(n=dn[e]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var a=o.next;o.next=r,i.next=a}n.pending=i}dn=null}return t}function Da(t,e){for(;;){var n=Zo;try{if(an(),_i.current=fr,Ti){for(var i=Si.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Ti=!1}if(wi=0,Mi=Ei=Si=null,ki=!1,Ci=0,qo.current=null,null===n||null===n.return){ta=1,ea=e,Zo=null;break}t:{var o=t,s=n.return,l=n,c=e;if(e=Qo,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=kr(s);if(null!==p){p.flags&=-257,Cr(p,s,l,0,e),1&p.mode&&Tr(o,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){Tr(o,u,e),Na();break t}c=Error(a(426))}else if(Gn&&1&l.mode){var v=kr(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Cr(v,s,l,0,e),ti(c);break t}}o=c,4!==ta&&(ta=2),null===oa?oa=[o]:oa.push(o),c=vr(c,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e,bn(l,Er(0,c,e));break t;case 1:o=c;var y=l.type,b=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===fa||!fa.has(b)))){l.flags|=65536,e&=-e,l.lanes|=e,bn(l,Mr(l,o,e));break t}}l=l.return}while(null!==l)}ja(n)}catch(_){e=_,Zo===n&&null!==n&&(Zo=n=n.return);continue}break}}function Ia(){var t=Wo.current;return Wo.current=fr,null===t?fr:t}function Na(){0!==ta&&3!==ta&&2!==ta||(ta=4),null===Ko||0===(268435455&na)&&0===(268435455&ia)||Aa(Ko,Qo)}function za(t,e){var n=Yo;Yo|=2;var i=Ia();for(Ko===t&&Qo===e||La(t,e);;)try{Fa();break}catch(r){Da(t,r)}if(an(),Yo=n,Wo.current=i,null!==Zo)throw Error(a(261));return Ko=null,Qo=0,ta}function Fa(){for(;null!==Zo;)Ba(Zo)}function Ua(){for(;null!==Zo&&!Ne();)Ba(Zo)}function Ba(t){var e=ua(t.alternate,t,Jo);t.memoizedProps=t.pendingProps,null===e?ja(t):Zo=e,qo.current=null}function ja(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Dr(n,e,Jo)))return void(Zo=n)}else{if(null!==(n=oo(n,e)))return n.flags&=32767,void(Zo=n);if(null===t)return ta=6,void(Zo=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Zo=e);Zo=e=t}while(null!==e);0===ta&&(ta=5)}function Ha(t,e){var n=Re,i=Xo.transition;try{Xo.transition=null,Re=1,function(t,e,n){do{Va()}while(null!==ga);if(0!==(6&Yo))throw Error(a(327));var i=t.finishedWork,r=t.finishedLanes;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var o=i.lanes|i.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-_e(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}(t,o),t===Ko&&(Zo=Ko=null,Qo=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||pa||(pa=!0,Za(je,(function(){return Va(),null}))),o=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||o){o=Xo.transition,Xo.transition=null;var s=Re;Re=1;var l=Yo;Yo|=4,qo.current=null,function(t,e){for(N(t.containerInfo),co=e;null!==co;)if(e=(t=co).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,co=e;else for(;null!==co;){t=co;try{var n=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,o=t.stateNode,s=o.getSnapshotBeforeUpdate(t.elementType===t.type?i:tn(t.type,i),r);o.__reactInternalSnapshotBeforeUpdate=s}break;case 3:Y&&Mt(t.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(t,t.return,l)}if(null!==(e=t.sibling)){e.return=t.return,co=e;break}co=t.return}n=fo,fo=!1}(t,i),function(t,e){for(co=e;null!==co;){var n=(e=co).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t;Y?Mo(o,r,e):yo(o,r,e);var a=r.alternate;null!==a&&(a.return=null),r.return=null}catch(x){Wa(r,e,x)}}if(n=e.child,0!==(12854&e.subtreeFlags)&&null!==n)n.return=e,co=n;else for(;null!==co;){e=co;try{var s=e.flags;if(32&s&&Y&&_t(e.stateNode),512&s){var l=e.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&s)switch(e.tag){case 13:if(null!==e.memoizedState){var u=e.alternate;null!==u&&null!==u.memoizedState||(sa=Fe())}break;case 22:var h=null!==e.memoizedState,d=e.alternate,f=null!==d&&null!==d.memoizedState;if(n=e,Y)t:if(i=n,r=h,o=null,Y)for(var p=i;;){if(5===p.tag){if(null===o){o=p;var g=p.stateNode;r?xt(g):St(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===o){var m=p.stateNode;r?wt(m):Et(m,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===i)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===i)break;for(;null===p.sibling;){if(null===p.return||p.return===i)break t;o===p&&(o=null),p=p.return}o===p&&(o=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!==(1&n.mode)){co=n;for(var v=n.child;null!==v;){for(n=co=v;null!==co;){var y=(i=co).child;switch(i.tag){case 0:case 11:case 14:case 15:po(4,i,i.return);break;case 1:uo(i,i.return);var b=i.stateNode;if("function"===typeof b.componentWillUnmount){var _=i.return;try{b.props=i.memoizedProps,b.state=i.memoizedState,b.componentWillUnmount()}catch(x){Wa(i,_,x)}}break;case 5:uo(i,i.return);break;case 22:if(null!==i.memoizedState){Oo(n);continue}}null!==y?(y.return=i,co=y):Oo(n)}v=v.sibling}}}switch(4102&s){case 2:wo(e),e.flags&=-3;break;case 6:wo(e),e.flags&=-3,To(e.alternate,e);break;case 4096:e.flags&=-4097;break;case 4100:e.flags&=-4097,To(e.alternate,e);break;case 4:To(e.alternate,e)}}catch(x){Wa(e,e.return,x)}if(null!==(n=e.sibling)){n.return=e.return,co=n;break}co=e.return}}}(t,i),z(t.containerInfo),t.current=i,Co(i,t,r),ze(),Yo=l,Re=s,Xo.transition=o}else t.current=i;if(pa&&(pa=!1,ga=t,ma=r),o=t.pendingLanes,0===o&&(fa=null),function(t){if(Ge&&"function"===typeof Ge.onCommitFiberRoot)try{Ge.onCommitFiberRoot(Ve,t,void 0,128===(128&t.current.flags))}catch(e){}}(i.stateNode),Ma(t,Fe()),null!==e)for(n=t.onRecoverableError,i=0;i<e.length;i++)n(e[i]);if(ha)throw ha=!1,t=da,da=null,t;0!==(1&ma)&&0!==t.tag&&Va(),o=t.pendingLanes,0!==(1&o)?t===ya?va++:(va=0,ya=t):va=0,Ze()}(t,e,n)}finally{Xo.transition=i,Re=n}return null}function Va(){if(null!==ga){var t=Le(ma),e=Xo.transition,n=Re;try{if(Xo.transition=null,Re=16>t?16:t,null===ga)var i=!1;else{if(t=ga,ga=null,ma=0,0!==(6&Yo))throw Error(a(331));var r=Yo;for(Yo|=4,co=t.current;null!==co;){var o=co,s=o.child;if(0!==(16&co.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(co=u;null!==co;){var h=co;switch(h.tag){case 0:case 11:case 15:po(8,h,o)}var d=h.child;if(null!==d)d.return=h,co=d;else for(;null!==co;){var f=(h=co).sibling,p=h.return;if(bo(h),h===u){co=null;break}if(null!==f){f.return=p,co=f;break}co=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}co=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,co=s;else t:for(;null!==co;){if(0!==(2048&(o=co).flags))switch(o.tag){case 0:case 11:case 15:po(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,co=y;break t}co=o.return}}var b=t.current;for(co=b;null!==co;){var _=(s=co).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,co=_;else t:for(s=b;null!==co;){if(0!==(2048&(l=co).flags))try{switch(l.tag){case 0:case 11:case 15:go(9,l)}}catch(w){Wa(l,l.return,w)}if(l===s){co=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,co=x;break t}co=l.return}}if(Yo=r,Ze(),Ge&&"function"===typeof Ge.onPostCommitFiberRoot)try{Ge.onPostCommitFiberRoot(Ve,t)}catch(w){}i=!0}return i}finally{Re=n,Xo.transition=e}}return!1}function Ga(t,e,n){vn(t,e=Er(0,e=vr(n,e),1)),e=xa(),null!==(t=Ea(t,1))&&(Pe(t,1,e),Ma(t,e))}function Wa(t,e,n){if(3===t.tag)Ga(t,t,n);else for(;null!==e;){if(3===e.tag){Ga(e,t,n);break}if(1===e.tag){var i=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===fa||!fa.has(i))){vn(e,t=Mr(e,t=vr(n,t),1)),t=xa(),null!==(e=Ea(e,1))&&(Pe(e,1,t),Ma(e,t));break}}e=e.return}}function qa(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=xa(),t.pingedLanes|=t.suspendedLanes&n,Ko===t&&(Qo&n)===n&&(4===ta||3===ta&&(130023424&Qo)===Qo&&500>Fe()-sa?La(t,0):ra|=n),Ma(t,e)}function Xa(t,e){0===e&&(0===(1&t.mode)?e=1:(e=Ee,0===(130023424&(Ee<<=1))&&(Ee=4194304)));var n=xa();null!==(t=Ea(t,e))&&(Pe(t,e,n),Ma(t,n))}function Ya(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Xa(t,n)}function Ka(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(e),Xa(t,n)}function Za(t,e){return De(t,e)}function Qa(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(t,e,n,i){return new Qa(t,e,n,i)}function $a(t){return!(!(t=t.prototype)||!t.isReactComponent)}function ts(t,e){var n=t.alternate;return null===n?((n=Ja(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function es(t,e,n,i,r,o){var s=2;if(i=t,"function"===typeof t)$a(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case u:return ns(n.children,r,o,e);case h:s=8,r|=8;break;case d:return(t=Ja(12,n,e,2|r)).elementType=d,t.lanes=o,t;case m:return(t=Ja(13,n,e,r)).elementType=m,t.lanes=o,t;case v:return(t=Ja(19,n,e,r)).elementType=v,t.lanes=o,t;case _:return is(n,r,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case f:s=10;break t;case p:s=9;break t;case g:s=11;break t;case y:s=14;break t;case b:s=16,i=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Ja(s,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function ns(t,e,n,i){return(t=Ja(7,t,i,e)).lanes=n,t}function is(t,e,n,i){return(t=Ja(22,t,i,e)).elementType=_,t.lanes=n,t.stateNode={},t}function rs(t,e,n){return(t=Ja(6,t,null,e)).lanes=n,t}function os(t,e,n){return(e=Ja(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function as(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ae(0),this.expirationTimes=Ae(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.identifierPrefix=i,this.onRecoverableError=r,Z&&(this.mutableSourceEagerHydrationData=null)}function ss(t,e,n,i,r,o,a,s,l){return t=new as(t,e,n,s,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Ja(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},pn(o),t}function ls(t){if(!t)return ce;t:{if(M(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(pe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(pe(n))return ve(t,n,e)}return e}function cs(t){var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return null===(t=C(e))?null:t.stateNode}function us(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function hs(t,e){us(t,e),(t=t.alternate)&&us(t,e)}function ds(t){return null===(t=C(t))?null:t.stateNode}function fs(){return null}return ua=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||he.current)Nr=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return Nr=!1,function(t,e,n){switch(e.tag){case 3:qr(e),$n();break;case 5:pi(e);break;case 1:pe(e.type)&&ye(e);break;case 4:di(e,e.stateNode.containerInfo);break;case 10:sn(0,e.type._context,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(null!==i)return null!==i.dehydrated?(le(mi,1&mi.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Zr(t,e,n):(le(mi,1&mi.current),null!==(t=ro(t,e,n))?t.sibling:null);le(mi,1&mi.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(128&t.flags)){if(i)return io(t,e,n);e.flags|=128}var r=e.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),le(mi,mi.current),i)break;return null;case 22:case 23:return e.lanes=0,jr(t,e,n)}return ro(t,e,n)}(t,e,n);Nr=0!==(131072&t.flags)}else Nr=!1,Gn&&0!==(1048576&e.flags)&&Un(e,Rn,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var r=fe(e,ue.current);un(e,n),r=Ri(null,e,i,t,r,n);var o=Li();return e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pe(i)?(o=!0,ye(e)):o=!1,e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,pn(e),r.updater=En,e.stateNode=r,r._reactInternals=e,Cn(e,i,t,n),e=Wr(null,e,i,!0,o,n)):(e.tag=0,Gn&&o&&Bn(e),zr(null,e,r,n),e=e.child),e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(r=i._init)(i._payload),e.type=i,r=e.tag=function(t){if("function"===typeof t)return $a(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===g)return 11;if(t===y)return 14}return 2}(i),t=tn(i,t),r){case 0:e=Vr(null,e,i,t,n);break t;case 1:e=Gr(null,e,i,t,n);break t;case 11:e=Fr(null,e,i,t,n);break t;case 14:e=Ur(null,e,i,tn(i.type,t),n);break t}throw Error(a(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,Vr(t,e,i,r=e.elementType===i?r:tn(i,r),n);case 1:return i=e.type,r=e.pendingProps,Gr(t,e,i,r=e.elementType===i?r:tn(i,r),n);case 3:t:{if(qr(e),null===t)throw Error(a(387));i=e.pendingProps,r=(o=e.memoizedState).element,gn(t,e),_n(e,i,null,n);var s=e.memoizedState;if(i=s.element,Z&&o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Xr(t,e,i,n,r=Error(a(423)));break t}if(i!==r){e=Xr(t,e,i,n,r=Error(a(424)));break t}for(Z&&(Vn=jt(e.stateNode.containerInfo),Hn=e,Gn=!0,qn=null,Wn=!1),n=ai(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){e=ro(t,e,n);break t}zr(t,e,i,n)}e=e.child}return e;case 5:return pi(e),null===t&&Zn(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,s=r.children,H(i,r)?s=null:null!==o&&H(i,o)&&(e.flags|=32),Hr(t,e),zr(t,e,s,n),e.child;case 6:return null===t&&Zn(e),null;case 13:return Zr(t,e,n);case 4:return di(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=oi(e,null,i,n):zr(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,Fr(t,e,i,r=e.elementType===i?r:tn(i,r),n);case 7:return zr(t,e,e.pendingProps,n),e.child;case 8:case 12:return zr(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,sn(0,i,s=r.value),null!==o)if(We(o.value,s)){if(o.children===r.children&&!he.current){e=ro(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=mn(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),cn(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cn(s,n,e),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}zr(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,un(e,n),i=i(r=hn(r)),e.flags|=1,zr(t,e,i,n),e.child;case 14:return r=tn(i=e.type,e.pendingProps),Ur(t,e,i,r=tn(i.type,r),n);case 15:return Br(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:tn(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pe(i)?(t=!0,ye(e)):t=!1,un(e,n),Tn(e,i,r),Cn(e,i,r,n),Wr(null,e,i,!0,t,n);case 19:return io(t,e,n);case 22:return jr(t,e,n)}throw Error(a(156,e.tag))},e.attemptContinuousHydration=function(t){13===t.tag&&(Sa(t,134217728,xa()),hs(t,134217728))},e.attemptHydrationAtCurrentPriority=function(t){if(13===t.tag){var e=xa(),n=wa(t);Sa(t,n,e),hs(t,n)}},e.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Me(e.pendingLanes);0!==n&&(Oe(e,1|n),Ma(e,Fe()),0===(6&Yo)&&(ca(),Ze()))}break;case 13:var i=xa();Oa((function(){return Sa(t,1,i)})),hs(t,1)}},e.batchedUpdates=function(t,e){var n=Yo;Yo|=1;try{return t(e)}finally{0===(Yo=n)&&(ca(),Xe&&Ze())}},e.createComponentSelector=function(t){return{$$typeof:Lo,value:t}},e.createContainer=function(t,e,n,i,r,o,a){return ss(t,e,!1,null,0,i,0,o,a)},e.createHasPseudoClassSelector=function(t){return{$$typeof:Do,value:t}},e.createHydrationContainer=function(t,e,n,i,r,o,a,s,l){return(t=ss(n,i,!0,t,0,o,0,s,l)).context=ls(null),n=t.current,(o=mn(i=xa(),r=wa(n))).callback=void 0!==e&&null!==e?e:null,vn(n,o),t.current.lanes=r,Pe(t,r,i),Ma(t,i),t},e.createPortal=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}},e.createRoleSelector=function(t){return{$$typeof:Io,value:t}},e.createTestNameSelector=function(t){return{$$typeof:No,value:t}},e.createTextSelector=function(t){return{$$typeof:zo,value:t}},e.deferredUpdates=function(t){var e=Re,n=Xo.transition;try{return Xo.transition=null,Re=16,t()}finally{Re=e,Xo.transition=n}},e.discreteUpdates=function(t,e,n,i,r){var o=Re,a=Xo.transition;try{return Xo.transition=null,Re=1,t(e,n,i,r)}finally{Re=o,Xo.transition=a,0===Yo&&ca()}},e.findAllNodes=Vo,e.findBoundingRects=function(t,e){if(!it)throw Error(a(363));e=Vo(t,e),t=[];for(var n=0;n<e.length;n++)t.push(ot(e[n]));for(e=t.length-1;0<e;e--)for(var i=(n=t[e]).x,r=i+n.width,o=n.y,s=o+n.height,l=e-1;0<=l;l--)if(e!==l){var c=t[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(i>=u&&o>=d&&r<=h&&s<=f){t.splice(e,1);break}if(!(i!==u||n.width!==c.width||f<o||d>s)){d>o&&(c.height+=d-o,c.y=o),f<s&&(c.height=s-d),t.splice(e,1);break}if(!(o!==d||n.height!==c.height||h<i||u>r)){u>i&&(c.width+=u-i,c.x=i),h<r&&(c.width=r-u),t.splice(e,1);break}}return t},e.findHostInstance=cs,e.findHostInstanceWithNoPortals=function(t){return null===(t=null!==(t=k(t))?P(t):null)?null:t.stateNode},e.findHostInstanceWithWarning=function(t){return cs(t)},e.flushControlled=function(t){var e=Yo;Yo|=1;var n=Xo.transition,i=Re;try{Xo.transition=null,Re=1,t()}finally{Re=i,Xo.transition=n,0===(Yo=e)&&(ca(),Ze())}},e.flushPassiveEffects=Va,e.flushSync=Oa,e.focusWithin=function(t,e){if(!it)throw Error(a(363));for(e=Ho(t=Uo(t),e),e=Array.from(e),t=0;t<e.length;){var n=e[t++];if(!st(n)){if(5===n.tag&&ct(n.stateNode))return!0;for(n=n.child;null!==n;)e.push(n),n=n.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Re},e.getFindAllNodesFailureDescription=function(t,e){if(!it)throw Error(a(363));var n=0,i=[];t=[Uo(t),0];for(var r=0;r<t.length;){var o=t[r++],s=t[r++],l=e[s];if((5!==o.tag||!st(o))&&(Bo(o,l)&&(i.push(jo(l)),++s>n&&(n=s)),s<e.length))for(o=o.child;null!==o;)t.push(o,s),o=o.sibling}if(n<e.length){for(t=[];n<e.length;n++)t.push(jo(e[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+t.join(" > ")}return null},e.getPublicRootInstance=function(t){return(t=t.current).child?5===t.child.tag?L(t.child.stateNode):t.child.stateNode:null},e.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:t.findFiberByHostInstance||fs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{Ve=e.inject(t),Ge=e}catch(n){}t=!!e.checkDCE}}return t},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(t,e,n,i){if(!it)throw Error(a(363));t=Vo(t,e);var r=ut(t,n,i).disconnect;return{disconnect:function(){r()}}},e.registerMutableSourceForHydration=function(t,e){var n=e._getVersion;n=n(e._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n)},e.runWithPriority=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(t,e,n,i){var r=e.current,o=xa(),a=wa(r);return n=ls(n),null===e.context?e.context=n:e.pendingContext=n,(e=mn(o,a)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),vn(r,e),null!==(t=Sa(r,a,o))&&yn(t,r,a),a},e}},7205:(t,e,n)=>{"use strict";t.exports=n(7302)},2016:(t,e,n)=>{"use strict";t.exports=n(6958)},2062:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<o(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var s=2*(i+1)-1,l=t[s],c=s+1,u=t[c];if(0>o(l,n))c<r&&0>o(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[s]=n,i=s);else{if(!(c<r&&0>o(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function x(t){if(m=!1,_(t),!g)if(null!==i(c))g=!0,L(w);else{var e=i(u);null!==e&&D(x,e.startTime-t)}}function w(t,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var o=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&D(x,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,M=null,T=-1,k=5,C=-1;function A(){return!(e.unstable_now()-C<k)}function P(){if(null!==M){var t=e.unstable_now();C=t;var n=!0;try{n=M(!0,t)}finally{n?S():(E=!1,M=null)}}else E=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=P,S=function(){R.postMessage(null)}}else S=function(){v(P,0)};function L(t){M=t,E||(E=!0,S())}function D(t,n){T=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(u,t),null===i(c)&&t===i(u)&&(m?(y(T),T=-1):m=!0,D(x,o-a))):(t.sortIndex=s,n(c,t),g||p||(g=!0,L(w))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},8513:(t,e,n)=>{"use strict";t.exports=n(2062)},1153:(t,e,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,i)&&!l.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:r,type:t,key:c,ref:u,props:o,_owner:s.current}}e.Fragment=o,e.jsx=c,e.jsxs=c},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function y(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,g(_,v.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function M(t,e,i){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,r)&&!E.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:S.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var k=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,r,o,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=t),t=""===o?"."+C(l,0):o,x(a)?(r="",null!=t&&(r=t.replace(k,"$&/")+"/"),A(a,e,r,"",(function(t){return t}))):null!=a&&(T(a)&&(a=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+t)),e.push(a)),1;if(l=0,o=""===o?".":o+":",x(t))for(var c=0;c<t.length;c++){var u=o+C(s=t[c],c);l+=A(s,e,r,u,a)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=A(s=s.value,e,r,u=o+C(s,c++),a);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var i=[],r=0;return A(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function O(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var R={current:null},L={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!T(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=o,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,e.cloneElement=function(t,e,i){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:t.type,key:o,ref:a,props:r,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=M,e.createFactory=function(t){var e=M.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=T,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:O}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return R.current.useCallback(t,e)},e.useContext=function(t){return R.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return R.current.useDeferredValue(t)},e.useEffect=function(t,e){return R.current.useEffect(t,e)},e.useId=function(){return R.current.useId()},e.useImperativeHandle=function(t,e,n){return R.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return R.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return R.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return R.current.useMemo(t,e)},e.useReducer=function(t,e,n){return R.current.useReducer(t,e,n)},e.useRef=function(t){return R.current.useRef(t)},e.useState=function(t){return R.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return R.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return R.current.useTransition()},e.version="18.2.0"},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},579:(t,e,n)=>{"use strict";t.exports=n(1153)},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,r=t[i];if(!(0<o(r,e)))break t;t[i]=e,t[n]=r,n=i}}function i(t){return 0===t.length?null:t[0]}function r(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length,a=r>>>1;i<a;){var s=2*(i+1)-1,l=t[s],c=s+1,u=t[c];if(0>o(l,n))c<r&&0>o(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[s]=n,i=s);else{if(!(c<r&&0>o(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(t){for(var e=i(u);null!==e;){if(null===e.callback)r(u);else{if(!(e.startTime<=t))break;r(u),e.sortIndex=e.expirationTime,n(c,e)}e=i(u)}}function x(t){if(m=!1,_(t),!g)if(null!==i(c))g=!0,L(w);else{var e=i(u);null!==e&&D(x,e.startTime-t)}}function w(t,n){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var o=f;try{for(_(n),d=i(c);null!==d&&(!(d.expirationTime>n)||t&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===i(c)&&r(c),_(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&D(x,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,M=null,T=-1,k=5,C=-1;function A(){return!(e.unstable_now()-C<k)}function P(){if(null!==M){var t=e.unstable_now();C=t;var n=!0;try{n=M(!0,t)}finally{n?S():(E=!1,M=null)}}else E=!1}if("function"===typeof b)S=function(){b(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=P,S=function(){R.postMessage(null)}}else S=function(){v(P,0)};function L(t){M=t,E||(E=!0,S())}function D(t,n){T=v((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,r,o){var a=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:r,priorityLevel:t,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(t.sortIndex=o,n(u,t),null===i(c)&&t===i(u)&&(m?(y(T),T=-1):m=!0,D(x,o-a))):(t.sortIndex=s,n(c,t),g||p||(g=!0,L(w))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},5956:(t,e,n)=>{"use strict";var i=n(5043);var r="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},o=i.useState,a=i.useEffect,s=i.useLayoutEffect,l=i.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!r(t,n)}catch(i){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),i=o({inst:{value:n,getSnapshot:e}}),r=i[0].inst,u=i[1];return s((function(){r.value=n,r.getSnapshot=e,c(r)&&u({inst:r})}),[t,n,e]),a((function(){return c(r)&&u({inst:r}),t((function(){c(r)&&u({inst:r})}))}),[t]),l(n),n};e.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},5039:(t,e,n)=>{"use strict";var i=n(5043),r=n(9461);var o="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},a=r.useSyncExternalStore,s=i.useRef,l=i.useEffect,c=i.useMemo,u=i.useDebugValue;e.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function t(t){if(!l){if(l=!0,a=t,t=i(t),void 0!==r&&d.hasValue){var e=d.value;if(r(e,t))return s=e}return s=t}if(e=s,o(a,t))return e;var n=i(t);return void 0!==r&&r(e,n)?e:(a=t,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return t(e())},null===c?void 0:function(){return t(c())}]}),[e,n,i,r]);var f=a(t,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},9461:(t,e,n)=>{"use strict";t.exports=n(5956)},8443:(t,e,n)=>{"use strict";t.exports=n(5039)},8139:(t,e)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=a(t,o(n)))}return t}function o(t){if("string"===typeof t||"number"===typeof t)return t;if("object"!==typeof t)return"";if(Array.isArray(t))return r.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)i.call(t,n)&&t[n]&&(e=a(e,n));return e}function a(t,e){return e?t?t+" "+e:t+e:t}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},(()=>{var t,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var a={};t=t||[null,e({}),e([]),e(e)];for(var s=2&r&&i;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>i[t]));return a.default=()=>i,n.d(o,a),o}})(),n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/Paper_citation_graph/",(()=>{"use strict";var t={};n.r(t),n.d(t,{ACESFilmicToneMapping:()=>Get,AddEquation:()=>det,AddOperation:()=>Uet,AdditiveAnimationBlendMode:()=>bit,AdditiveBlending:()=>set,AlphaFormat:()=>wnt,AlwaysCompare:()=>nrt,AlwaysDepth:()=>Pet,AlwaysStencilFunc:()=>Yit,AmbientLight:()=>gpt,AmbientLightProbe:()=>Rpt,AnimationAction:()=>agt,AnimationClip:()=>Uft,AnimationLoader:()=>Yft,AnimationMixer:()=>lgt,AnimationObjectGroup:()=>ogt,AnimationUtils:()=>Tft,ArcCurve:()=>Vht,ArrayCamera:()=>dut,ArrowHelper:()=>$gt,Audio:()=>Gpt,AudioAnalyser:()=>Zpt,AudioContext:()=>Apt,AudioListener:()=>Vpt,AudioLoader:()=>Ppt,AxesHelper:()=>tmt,BackSide:()=>net,BasicDepthPacking:()=>Mit,BasicShadowMap:()=>Qtt,Bone:()=>rht,BooleanKeyframeTrack:()=>Rft,Box2:()=>_gt,Box3:()=>dot,Box3Helper:()=>Ygt,BoxGeometry:()=>Sst,BoxHelper:()=>Xgt,BufferAttribute:()=>Uat,BufferGeometry:()=>ist,BufferGeometryLoader:()=>wpt,ByteType:()=>dnt,Cache:()=>jft,Camera:()=>Ast,CameraHelper:()=>Ggt,CanvasTexture:()=>Bht,CapsuleGeometry:()=>udt,CatmullRomCurve3:()=>Kht,CineonToneMapping:()=>Vet,CircleGeometry:()=>hdt,ClampToEdgeWrapping:()=>$et,Clock:()=>zpt,Color:()=>Aat,ColorKeyframeTrack:()=>Lft,ColorManagement:()=>Xrt,CompressedArrayTexture:()=>Uht,CompressedTexture:()=>Fht,CompressedTextureLoader:()=>Kft,ConeGeometry:()=>fdt,CubeCamera:()=>Rst,CubeReflectionMapping:()=>Xet,CubeRefractionMapping:()=>Yet,CubeTexture:()=>Lst,CubeTextureLoader:()=>Qft,CubeUVReflectionMapping:()=>Qet,CubicBezierCurve:()=>$ht,CubicBezierCurve3:()=>tdt,CubicInterpolant:()=>Cft,CullFaceBack:()=>Ytt,CullFaceFront:()=>Ktt,CullFaceFrontBack:()=>Ztt,CullFaceNone:()=>Xtt,Curve:()=>jht,CurvePath:()=>sdt,CustomBlending:()=>het,CustomToneMapping:()=>Wet,CylinderGeometry:()=>ddt,Cylindrical:()=>ygt,Data3DTexture:()=>oot,DataArrayTexture:()=>iot,DataTexture:()=>oht,DataTextureLoader:()=>Jft,DataUtils:()=>Nat,DecrementStencilOp:()=>zit,DecrementWrapStencilOp:()=>Uit,DefaultLoadingManager:()=>Vft,DepthFormat:()=>Tnt,DepthStencilFormat:()=>knt,DepthTexture:()=>mut,DirectionalLight:()=>ppt,DirectionalLightHelper:()=>jgt,DiscreteInterpolant:()=>Pft,DisplayP3ColorSpace:()=>Rit,DodecahedronGeometry:()=>gdt,DoubleSide:()=>iet,DstAlphaFactor:()=>Eet,DstColorFactor:()=>Tet,DynamicCopyUsage:()=>urt,DynamicDrawUsage:()=>rrt,DynamicReadUsage:()=>srt,EdgesGeometry:()=>_dt,EllipseCurve:()=>Hht,EqualCompare:()=>Qit,EqualDepth:()=>Let,EqualStencilFunc:()=>Vit,EquirectangularReflectionMapping:()=>Ket,EquirectangularRefractionMapping:()=>Zet,Euler:()=>Kot,EventDispatcher:()=>vrt,ExtrudeGeometry:()=>Zdt,FileLoader:()=>Xft,Float16BufferAttribute:()=>Xat,Float32BufferAttribute:()=>Yat,Float64BufferAttribute:()=>Kat,FloatType:()=>vnt,Fog:()=>Eut,FogExp2:()=>Sut,FramebufferTexture:()=>zht,FrontSide:()=>eet,Frustum:()=>jst,GLBufferAttribute:()=>fgt,GLSL1:()=>drt,GLSL3:()=>frt,GreaterCompare:()=>$it,GreaterDepth:()=>Iet,GreaterEqualCompare:()=>ert,GreaterEqualDepth:()=>Det,GreaterEqualStencilFunc:()=>Xit,GreaterStencilFunc:()=>Wit,GridHelper:()=>Ngt,Group:()=>fut,HalfFloatType:()=>ynt,HemisphereLight:()=>ept,HemisphereLightHelper:()=>Igt,HemisphereLightProbe:()=>Opt,IcosahedronGeometry:()=>Jdt,ImageBitmapLoader:()=>kpt,ImageLoader:()=>Zft,ImageUtils:()=>Krt,IncrementStencilOp:()=>Nit,IncrementWrapStencilOp:()=>Fit,InstancedBufferAttribute:()=>cht,InstancedBufferGeometry:()=>xpt,InstancedInterleavedBuffer:()=>dgt,InstancedMesh:()=>vht,Int16BufferAttribute:()=>Vat,Int32BufferAttribute:()=>Wat,Int8BufferAttribute:()=>Bat,IntType:()=>gnt,InterleavedBuffer:()=>Tut,InterleavedBufferAttribute:()=>Cut,Interpolant:()=>kft,InterpolateDiscrete:()=>dit,InterpolateLinear:()=>fit,InterpolateSmooth:()=>pit,InvertStencilOp:()=>Bit,KeepStencilOp:()=>Dit,KeyframeTrack:()=>Oft,LOD:()=>Xut,LatheGeometry:()=>cdt,Layers:()=>Zot,LessCompare:()=>Zit,LessDepth:()=>Oet,LessEqualCompare:()=>Jit,LessEqualDepth:()=>Ret,LessEqualStencilFunc:()=>Git,LessStencilFunc:()=>Hit,Light:()=>tpt,LightProbe:()=>ypt,Line:()=>Eht,Line3:()=>Sgt,LineBasicMaterial:()=>yht,LineCurve:()=>edt,LineCurve3:()=>ndt,LineDashedMaterial:()=>bft,LineLoop:()=>Cht,LineSegments:()=>kht,LinearEncoding:()=>Sit,LinearFilter:()=>ant,LinearInterpolant:()=>Aft,LinearMipMapLinearFilter:()=>unt,LinearMipMapNearestFilter:()=>lnt,LinearMipmapLinearFilter:()=>cnt,LinearMipmapNearestFilter:()=>snt,LinearSRGBColorSpace:()=>Oit,LinearToneMapping:()=>jet,Loader:()=>Gft,LoaderUtils:()=>_pt,LoadingManager:()=>Hft,LoopOnce:()=>cit,LoopPingPong:()=>hit,LoopRepeat:()=>uit,LuminanceAlphaFormat:()=>Mnt,LuminanceFormat:()=>Ent,MOUSE:()=>Wtt,Material:()=>Eat,MaterialLoader:()=>bpt,MathUtils:()=>Ort,Matrix3:()=>Lrt,Matrix4:()=>Uot,MaxEquation:()=>met,Mesh:()=>xst,MeshBasicMaterial:()=>Oat,MeshDepthMaterial:()=>aut,MeshDistanceMaterial:()=>sut,MeshLambertMaterial:()=>vft,MeshMatcapMaterial:()=>yft,MeshNormalMaterial:()=>mft,MeshPhongMaterial:()=>pft,MeshPhysicalMaterial:()=>fft,MeshStandardMaterial:()=>dft,MeshToonMaterial:()=>gft,MinEquation:()=>get,MirroredRepeatWrapping:()=>tnt,MixOperation:()=>Fet,MultiplyBlending:()=>uet,MultiplyOperation:()=>zet,NearestFilter:()=>ent,NearestMipMapLinearFilter:()=>ont,NearestMipMapNearestFilter:()=>int,NearestMipmapLinearFilter:()=>rnt,NearestMipmapNearestFilter:()=>nnt,NeverCompare:()=>Kit,NeverDepth:()=>Aet,NeverStencilFunc:()=>jit,NoBlending:()=>oet,NoColorSpace:()=>Ait,NoToneMapping:()=>Bet,NormalAnimationBlendMode:()=>yit,NormalBlending:()=>aet,NotEqualCompare:()=>trt,NotEqualDepth:()=>Net,NotEqualStencilFunc:()=>qit,NumberKeyframeTrack:()=>Dft,Object3D:()=>uat,ObjectLoader:()=>Spt,ObjectSpaceNormalMap:()=>Cit,OctahedronGeometry:()=>$dt,OneFactor:()=>yet,OneMinusDstAlphaFactor:()=>Met,OneMinusDstColorFactor:()=>ket,OneMinusSrcAlphaFactor:()=>wet,OneMinusSrcColorFactor:()=>_et,OrthographicCamera:()=>elt,PCFShadowMap:()=>Jtt,PCFSoftShadowMap:()=>$tt,PMREMGenerator:()=>ult,Path:()=>ldt,PerspectiveCamera:()=>Pst,Plane:()=>Fst,PlaneGeometry:()=>Gst,PlaneHelper:()=>Kgt,PointLight:()=>dpt,PointLightHelper:()=>Ogt,Points:()=>Dht,PointsMaterial:()=>Aht,PolarGridHelper:()=>zgt,PolyhedronGeometry:()=>pdt,PositionalAudio:()=>Kpt,PropertyBinding:()=>rgt,PropertyMixer:()=>Qpt,QuadraticBezierCurve:()=>idt,QuadraticBezierCurve3:()=>rdt,Quaternion:()=>lot,QuaternionKeyframeTrack:()=>Nft,QuaternionLinearInterpolant:()=>Ift,RED_GREEN_RGTC2_Format:()=>sit,RED_RGTC1_Format:()=>oit,REVISION:()=>Gtt,RGBADepthPacking:()=>Tit,RGBAFormat:()=>Snt,RGBAIntegerFormat:()=>Rnt,RGBA_ASTC_10x10_Format:()=>eit,RGBA_ASTC_10x5_Format:()=>Jnt,RGBA_ASTC_10x6_Format:()=>$nt,RGBA_ASTC_10x8_Format:()=>tit,RGBA_ASTC_12x10_Format:()=>nit,RGBA_ASTC_12x12_Format:()=>iit,RGBA_ASTC_4x4_Format:()=>Gnt,RGBA_ASTC_5x4_Format:()=>Wnt,RGBA_ASTC_5x5_Format:()=>qnt,RGBA_ASTC_6x5_Format:()=>Xnt,RGBA_ASTC_6x6_Format:()=>Ynt,RGBA_ASTC_8x5_Format:()=>Knt,RGBA_ASTC_8x6_Format:()=>Znt,RGBA_ASTC_8x8_Format:()=>Qnt,RGBA_BPTC_Format:()=>rit,RGBA_ETC2_EAC_Format:()=>Vnt,RGBA_PVRTC_2BPPV1_Format:()=>Bnt,RGBA_PVRTC_4BPPV1_Format:()=>Unt,RGBA_S3TC_DXT1_Format:()=>Dnt,RGBA_S3TC_DXT3_Format:()=>Int,RGBA_S3TC_DXT5_Format:()=>Nnt,RGB_ETC1_Format:()=>jnt,RGB_ETC2_Format:()=>Hnt,RGB_PVRTC_2BPPV1_Format:()=>Fnt,RGB_PVRTC_4BPPV1_Format:()=>znt,RGB_S3TC_DXT1_Format:()=>Lnt,RGFormat:()=>Pnt,RGIntegerFormat:()=>Ont,RawShaderMaterial:()=>hft,Ray:()=>Fot,Raycaster:()=>pgt,RectAreaLight:()=>mpt,RedFormat:()=>Cnt,RedIntegerFormat:()=>Ant,ReinhardToneMapping:()=>Het,RepeatWrapping:()=>Jet,ReplaceStencilOp:()=>Iit,ReverseSubtractEquation:()=>pet,RingGeometry:()=>tft,SIGNED_RED_GREEN_RGTC2_Format:()=>lit,SIGNED_RED_RGTC1_Format:()=>ait,SRGBColorSpace:()=>Pit,Scene:()=>Mut,ShaderChunk:()=>Wst,ShaderLib:()=>Xst,ShaderMaterial:()=>Cst,ShadowMaterial:()=>uft,Shape:()=>xdt,ShapeGeometry:()=>eft,ShapePath:()=>emt,ShapeUtils:()=>Xdt,ShortType:()=>fnt,Skeleton:()=>lht,SkeletonHelper:()=>Agt,SkinnedMesh:()=>iht,Source:()=>Qrt,Sphere:()=>Pot,SphereGeometry:()=>nft,Spherical:()=>vgt,SphericalHarmonics3:()=>vpt,SplineCurve:()=>odt,SpotLight:()=>spt,SpotLightHelper:()=>Mgt,Sprite:()=>Vut,SpriteMaterial:()=>Aut,SrcAlphaFactor:()=>xet,SrcAlphaSaturateFactor:()=>Cet,SrcColorFactor:()=>bet,StaticCopyUsage:()=>crt,StaticDrawUsage:()=>irt,StaticReadUsage:()=>art,StereoCamera:()=>Npt,StreamCopyUsage:()=>hrt,StreamDrawUsage:()=>ort,StreamReadUsage:()=>lrt,StringKeyframeTrack:()=>zft,SubtractEquation:()=>fet,SubtractiveBlending:()=>cet,TOUCH:()=>qtt,TangentSpaceNormalMap:()=>kit,TetrahedronGeometry:()=>ift,Texture:()=>tot,TextureLoader:()=>$ft,TorusGeometry:()=>rft,TorusKnotGeometry:()=>oft,Triangle:()=>wat,TriangleFanDrawMode:()=>wit,TriangleStripDrawMode:()=>xit,TrianglesDrawMode:()=>_it,TubeGeometry:()=>aft,TwoPassDoubleSide:()=>ret,UVMapping:()=>qet,Uint16BufferAttribute:()=>Gat,Uint32BufferAttribute:()=>qat,Uint8BufferAttribute:()=>jat,Uint8ClampedBufferAttribute:()=>Hat,Uniform:()=>cgt,UniformsGroup:()=>hgt,UniformsLib:()=>qst,UniformsUtils:()=>kst,UnsignedByteType:()=>hnt,UnsignedInt248Type:()=>xnt,UnsignedIntType:()=>mnt,UnsignedShort4444Type:()=>bnt,UnsignedShort5551Type:()=>_nt,UnsignedShortType:()=>pnt,VSMShadowMap:()=>tet,Vector2:()=>Rrt,Vector3:()=>cot,Vector4:()=>eot,VectorKeyframeTrack:()=>Fft,VideoTexture:()=>Nht,WebGL1Renderer:()=>wut,WebGL3DRenderTarget:()=>aot,WebGLArrayRenderTarget:()=>rot,WebGLCoordinateSystem:()=>grt,WebGLCubeRenderTarget:()=>Dst,WebGLMultipleRenderTargets:()=>sot,WebGLRenderTarget:()=>not,WebGLRenderer:()=>xut,WebGLUtils:()=>hut,WebGPUCoordinateSystem:()=>mrt,WireframeGeometry:()=>sft,WrapAroundEnding:()=>vit,ZeroCurvatureEnding:()=>git,ZeroFactor:()=>vet,ZeroSlopeEnding:()=>mit,ZeroStencilOp:()=>Lit,_SRGBAFormat:()=>prt,sRGBEncoding:()=>Eit});var e=n(5043),i=n.t(e,2),r=n(4391);n.p;var o,a=n(579);function s(){return(0,a.jsx)("div",{children:(0,a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:(0,a.jsxs)("div",{className:"container-fluid",children:[(0,a.jsxs)("a",{className:"navbar-brand d-flex",href:"#",style:{gap:"1em"},children:[(0,a.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/256/957/957642.png",alt:"",style:{width:"1.7em"}}),(0,a.jsxs)("h4",{children:["R",(0,a.jsx)("sup",{children:"4"})," LitGraphs : Retrieve Readable and Relevant Graphs For Roadmapping Literature Review "]})]}),(0,a.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,a.jsx)("span",{className:"navbar-toggler-icon"})})]})})})}function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},l.apply(this,arguments)}!function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"}(o||(o={}));const c="popstate";function u(t,e){if(!1===t||null===t||"undefined"===typeof t)throw new Error(e)}function h(t,e){if(!t){"undefined"!==typeof console&&console.warn(e);try{throw new Error(e)}catch(n){}}}function d(t,e){return{usr:t.state,key:t.key,idx:e}}function f(t,e,n,i){return void 0===n&&(n=null),l({pathname:"string"===typeof t?t:t.pathname,search:"",hash:""},"string"===typeof e?g(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function p(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function g(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function m(t,e,n,i){void 0===i&&(i={});let{window:r=document.defaultView,v5Compat:a=!1}=i,s=r.history,h=o.Pop,g=null,m=v();function v(){return(s.state||{idx:null}).idx}function y(){h=o.Pop;let t=v(),e=null==t?null:t-m;m=t,g&&g({action:h,location:_.location,delta:e})}function b(t){let e="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof t?t:p(t);return n=n.replace(/ $/,"%20"),u(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}null==m&&(m=0,s.replaceState(l({},s.state,{idx:m}),""));let _={get action(){return h},get location(){return t(r,s)},listen(t){if(g)throw new Error("A history only accepts one active listener");return r.addEventListener(c,y),g=t,()=>{r.removeEventListener(c,y),g=null}},createHref:t=>e(r,t),createURL:b,encodeLocation(t){let e=b(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:function(t,e){h=o.Push;let i=f(_.location,t,e);n&&n(i,t),m=v()+1;let l=d(i,m),c=_.createHref(i);try{s.pushState(l,"",c)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;r.location.assign(c)}a&&g&&g({action:h,location:_.location,delta:1})},replace:function(t,e){h=o.Replace;let i=f(_.location,t,e);n&&n(i,t),m=v();let r=d(i,m),l=_.createHref(i);s.replaceState(r,"",l),a&&g&&g({action:h,location:_.location,delta:0})},go:t=>s.go(t)};return _}var v;!function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(t,e,n){void 0===n&&(n="/");let i=R(("string"===typeof e?g(e):e).pathname||"/",n);if(null==i)return null;let r=b(t);!function(t){t.sort(((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every(((t,n)=>t===e[n]));return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((t=>t.childrenIndex)),e.routesMeta.map((t=>t.childrenIndex)))))}(r);let o=null;for(let a=0;null==o&&a<r.length;++a){let t=O(i);o=A(r[a],t)}return o}function b(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(t,r,o)=>{let a={relativePath:void 0===o?t.path||"":o,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(i.length));let s=z([i,a.relativePath]),l=n.concat(a);t.children&&t.children.length>0&&(u(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),b(t.children,e,l,s)),(null!=t.path||t.index)&&e.push({path:s,score:C(s,t.index),routesMeta:l})};return t.forEach(((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of _(t.path))r(t,e,i);else r(t,e)})),e}function _(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return r?[o,""]:[o];let a=_(i.join("/")),s=[];return s.push(...a.map((t=>""===t?o:[o,t].join("/")))),r&&s.push(...a),s.map((e=>t.startsWith("/")&&""===e?"/":e))}const x=/^:[\w-]+$/,w=3,S=2,E=1,M=10,T=-2,k=t=>"*"===t;function C(t,e){let n=t.split("/"),i=n.length;return n.some(k)&&(i+=T),e&&(i+=S),n.filter((t=>!k(t))).reduce(((t,e)=>t+(x.test(e)?w:""===e?E:M)),i)}function A(t,e){let{routesMeta:n}=t,i={},r="/",o=[];for(let a=0;a<n.length;++a){let t=n[a],s=a===n.length-1,l="/"===r?e:e.slice(r.length)||"/",c=P({path:t.relativePath,caseSensitive:t.caseSensitive,end:s},l);if(!c)return null;Object.assign(i,c.params);let u=t.route;o.push({params:i,pathname:z([r,c.pathname]),pathnameBase:F(z([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=z([r,c.pathnameBase]))}return o}function P(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);h("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let o=new RegExp(r,e?void 0:"i");return[o,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),s=r.slice(1),l=i.reduce(((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=s[n]||"";a=o.slice(0,o.length-t.length).replace(/(.)\/+$/,"$1")}const l=s[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t}),{});return{params:l,pathname:o,pathnameBase:a,pattern:t}}function O(t){try{return t.split("/").map((t=>decodeURIComponent(t).replace(/\//g,"%2F"))).join("/")}catch(e){return h(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function R(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function L(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(t){return t.filter(((t,e)=>0===e||t.route.path&&t.route.path.length>0))}function I(t,e){let n=D(t);return e?n.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)):n.map((t=>t.pathnameBase))}function N(t,e,n,i){let r;void 0===i&&(i=!1),"string"===typeof t?r=g(t):(r=l({},t),u(!r.pathname||!r.pathname.includes("?"),L("?","pathname","search",r)),u(!r.pathname||!r.pathname.includes("#"),L("#","pathname","hash",r)),u(!r.search||!r.search.includes("#"),L("#","search","hash",r)));let o,a=""===t||""===r.pathname,s=a?"/":r.pathname;if(null==s)o=n;else{let t=e.length-1;if(!i&&s.startsWith("..")){let e=s.split("/");for(;".."===e[0];)e.shift(),t-=1;r.pathname=e.join("/")}o=t>=0?e[t]:"/"}let c=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof t?g(t):t,o=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:o,search:U(i),hash:B(r)}}(r,o),h=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const z=t=>t.join("/").replace(/\/\/+/g,"/"),F=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),U=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",B=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";Error;function j(t){return null!=t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"boolean"===typeof t.internal&&"data"in t}const H=["post","put","patch","delete"],V=(new Set(H),["get",...H]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},G.apply(this,arguments)}const W=e.createContext(null);const q=e.createContext(null);const X=e.createContext(null);const Y=e.createContext(null);const K=e.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=e.createContext(null);function Q(){return null!=e.useContext(Y)}function J(){return Q()||u(!1),e.useContext(Y).location}function $(t){e.useContext(X).static||e.useLayoutEffect(t)}function tt(){let{isDataRoute:t}=e.useContext(K);return t?function(){let{router:t}=ut(lt.UseNavigateStable),n=dt(ct.UseNavigateStable),i=e.useRef(!1);$((()=>{i.current=!0}));let r=e.useCallback((function(e,r){void 0===r&&(r={}),i.current&&("number"===typeof e?t.navigate(e):t.navigate(e,G({fromRouteId:n},r)))}),[t,n]);return r}():function(){Q()||u(!1);let t=e.useContext(W),{basename:n,future:i,navigator:r}=e.useContext(X),{matches:o}=e.useContext(K),{pathname:a}=J(),s=JSON.stringify(I(o,i.v7_relativeSplatPath)),l=e.useRef(!1);$((()=>{l.current=!0}));let c=e.useCallback((function(e,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof e)return void r.go(e);let o=N(e,JSON.parse(s),a,"path"===i.relative);null==t&&"/"!==n&&(o.pathname="/"===o.pathname?n:z([n,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)}),[n,r,s,a,t]);return c}()}function et(){let{matches:t}=e.useContext(K),n=t[t.length-1];return n?n.params:{}}function nt(t,n,i,r){Q()||u(!1);let{navigator:a}=e.useContext(X),{matches:s}=e.useContext(K),l=s[s.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=J();if(n){var p;let t="string"===typeof n?g(n):n;"/"===h||(null==(p=t.pathname)?void 0:p.startsWith(h))||u(!1),d=t}else d=f;let m=d.pathname||"/",v=m;if("/"!==h){let t=h.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(t.length).join("/")}let b=y(t,{pathname:v});let _=st(b&&b.map((t=>Object.assign({},t,{params:Object.assign({},c,t.params),pathname:z([h,a.encodeLocation?a.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?h:z([h,a.encodeLocation?a.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),s,i,r);return n&&_?e.createElement(Y.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:o.Pop}},_):_}function it(){let t=function(){var t;let n=e.useContext(Z),i=ht(ct.UseRouteError),r=dt(ct.UseRouteError);if(void 0!==n)return n;return null==(t=i.errors)?void 0:t[r]}(),n=j(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:o},i):null,null)}const rt=e.createElement(it,null);class ot extends e.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?e.createElement(K.Provider,{value:this.props.routeContext},e.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function at(t){let{routeContext:n,match:i,children:r}=t,o=e.useContext(W);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(K.Provider,{value:n},r)}function st(t,n,i,r){var o;if(void 0===n&&(n=[]),void 0===i&&(i=null),void 0===r&&(r=null),null==t){var a;if(null==(a=i)||!a.errors)return null;t=i.matches}let s=t,l=null==(o=i)?void 0:o.errors;if(null!=l){let t=s.findIndex((t=>t.route.id&&(null==l?void 0:l[t.route.id])));t>=0||u(!1),s=s.slice(0,Math.min(s.length,t+1))}let c=!1,h=-1;if(i&&r&&r.v7_partialHydration)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(h=e),t.route.id){let{loaderData:e,errors:n}=i,r=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||r){c=!0,s=h>=0?s.slice(0,h+1):[s[0]];break}}}return s.reduceRight(((t,r,o)=>{let a,u=!1,d=null,f=null;var p;i&&(a=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||rt,c&&(h<0&&0===o?(p="route-fallback",!1||ft[p]||(ft[p]=!0),u=!0,f=null):h===o&&(u=!0,f=r.route.hydrateFallbackElement||null)));let g=n.concat(s.slice(0,o+1)),m=()=>{let n;return n=a?d:u?f:r.route.Component?e.createElement(r.route.Component,null):r.route.element?r.route.element:t,e.createElement(at,{match:r,routeContext:{outlet:t,matches:g,isDataRoute:null!=i},children:n})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?e.createElement(ot,{location:i.location,revalidation:i.revalidation,component:d,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var lt=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lt||{}),ct=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ct||{});function ut(t){let n=e.useContext(W);return n||u(!1),n}function ht(t){let n=e.useContext(q);return n||u(!1),n}function dt(t){let n=function(t){let n=e.useContext(K);return n||u(!1),n}(),i=n.matches[n.matches.length-1];return i.route.id||u(!1),i.route.id}const ft={};i.startTransition;function pt(t){u(!1)}function gt(t){let{basename:n="/",children:i=null,location:r,navigationType:a=o.Pop,navigator:s,static:l=!1,future:c}=t;Q()&&u(!1);let h=n.replace(/^\/*/,"/"),d=e.useMemo((()=>({basename:h,navigator:s,static:l,future:G({v7_relativeSplatPath:!1},c)})),[h,c,s,l]);"string"===typeof r&&(r=g(r));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:y="default"}=r,b=e.useMemo((()=>{let t=R(f,h);return null==t?null:{location:{pathname:t,search:p,hash:m,state:v,key:y},navigationType:a}}),[h,f,p,m,v,y,a]);return null==b?null:e.createElement(X.Provider,{value:d},e.createElement(Y.Provider,{children:i,value:b}))}function mt(t){let{children:e,location:n}=t;return nt(vt(e),n)}new Promise((()=>{}));e.Component;function vt(t,n){void 0===n&&(n=[]);let i=[];return e.Children.forEach(t,((t,r)=>{if(!e.isValidElement(t))return;let o=[...n,r];if(t.type===e.Fragment)return void i.push.apply(i,vt(t.props.children,o));t.type!==pt&&u(!1),t.props.index&&t.props.children&&u(!1);let a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=vt(t.props.children,o)),i.push(a)})),i}function yt(){const[t,n]=(0,e.useState)(""),i=tt(),r=t=>{fetch("".concat("https://papercitation-backend4.onrender.com","/api/search_results?query=").concat(encodeURIComponent(t)),{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>{if(!t.ok)throw new Error("Network response not found");return t.json()})).then((e=>{i("/searchresults/".concat(encodeURIComponent(t)))})).catch((t=>{console.error("There is a problem:",t)}))};return(0,a.jsxs)("div",{style:{gap:"2.5em",display:"flex",flexDirection:"column",marginTop:"5em"},children:[(0,a.jsx)("div",{className:"fs-3 ",style:{textAlign:"center",paddingTop:"0em",justifyContent:"center",fontWeight:"400"},children:"Explore relevant papers connected in a visual graph"}),(0,a.jsx)("div",{className:"fs-5 text-success",style:{textAlign:"center",paddingTop:"0em",justifyContent:"center"},children:"To start enter a paper title"}),(0,a.jsx)("div",{className:"searchclass",style:{display:"flex",justifyContent:"center"},children:(0,a.jsxs)("form",{className:"d-flex",role:"search",id:"searchForm",children:[(0,a.jsx)("input",{className:"form-control me-2",type:"search",id:"searchInput",placeholder:"Search by title of any paper","aria-label":"Search",style:{width:"40em"},onChange:t=>n(t.target.value)}),(0,a.jsx)("button",{className:"btn btn-success",type:"submit",onClick:e=>{e.preventDefault(),localStorage.setItem("query",t),r(t)},children:"Build a graph"})]})})]})}const bt=()=>(0,a.jsx)("div",{style:{padding:"10em 0em 0em 42em"},children:(0,a.jsx)("div",{style:{backgroundColor:"white",minHeight:"70vh",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)("img",{src:"https://superstorefinder.net/support/wp-content/uploads/2018/01/4colors.gif",alt:"",style:{width:"10em"}})})});function _t(){const t="https://papercitation-backend4.onrender.com",{query:n}=et(),[i,r]=(0,e.useState)([]),o=tt(),[s,l]=(0,e.useState)(!0);(0,e.useEffect)((()=>{c()}),[n]);const c=()=>{l(!0),fetch("".concat(t,"/api/search_results?query=").concat(encodeURIComponent(n))).then((t=>{if(!t.ok)throw new Error("Network response not ok");return t.json()})).then((t=>{r(t.data_list)})).catch((t=>console.error("Error:",t))).finally((()=>{setTimeout((()=>{l(!1)}),200)}))},u=e=>{fetch("".concat(t,"/api/paper?query=").concat(encodeURIComponent(e)),{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>{if(!t.ok)throw new Error("Network response not found");return t.json()})).then((t=>{o("/paper/".concat(encodeURIComponent(e)))})).catch((t=>{console.error("There is a problem:",t)}))};return(0,a.jsx)("div",{children:s?(0,a.jsx)(bt,{}):(0,a.jsx)("div",{children:i.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fs-4",style:{fontWeight:500,marginTop:"1em",marginLeft:"5.5em"},children:"Choose a paper to build a graph :"}),(0,a.jsx)("div",{className:"card-container",style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"1em"},children:i.map(((t,e)=>(0,a.jsx)("div",{className:"card mb-3",style:{minWidth:"80em",cursor:"pointer",border:"white"},onClick:e=>((t,e)=>{e.preventDefault(),u(t)})(t.pid,e),children:(0,a.jsxs)("div",{className:"card-body",style:{boxShadow:"rgba(0, 0, 0, 0.2) 0px 2px 4px"},children:[(0,a.jsx)("h5",{className:"card-title",children:t.title}),(0,a.jsx)("p",{className:"card-text",children:t.authors})]})},e)))})]}):(0,a.jsx)("div",{className:"container",style:{margin:"4em 0em 0em 35em"},children:(0,a.jsx)("h4",{children:"No search results found"})})})})}function xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var wt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function St(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Et={exports:{}},Mt=function(t){return t&&t.Math===Math&&t},Tt=Mt("object"==typeof globalThis&&globalThis)||Mt("object"==typeof window&&window)||Mt("object"==typeof self&&self)||Mt("object"==typeof wt&&wt)||function(){return this}()||wt||Function("return this")(),kt=function(t){try{return!!t()}catch(e){return!0}},Ct=!kt((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),At=Ct,Pt=Function.prototype,Ot=Pt.apply,Rt=Pt.call,Lt="object"==typeof Reflect&&Reflect.apply||(At?Rt.bind(Ot):function(){return Rt.apply(Ot,arguments)}),Dt=Ct,It=Function.prototype,Nt=It.call,zt=Dt&&It.bind.bind(Nt,Nt),Ft=Dt?zt:function(t){return function(){return Nt.apply(t,arguments)}},Ut=Ft,Bt=Ut({}.toString),jt=Ut("".slice),Ht=function(t){return jt(Bt(t),8,-1)},Vt=Ht,Gt=Ft,Wt=function(t){if("Function"===Vt(t))return Gt(t)},qt="object"==typeof document&&document.all,Xt={all:qt,IS_HTMLDDA:"undefined"==typeof qt&&void 0!==qt},Yt=Xt.all,Kt=Xt.IS_HTMLDDA?function(t){return"function"==typeof t||t===Yt}:function(t){return"function"==typeof t},Zt={},Qt=!kt((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),Jt=Ct,$t=Function.prototype.call,te=Jt?$t.bind($t):function(){return $t.apply($t,arguments)},ee={},ne={}.propertyIsEnumerable,ie=Object.getOwnPropertyDescriptor,re=ie&&!ne.call({1:2},1);ee.f=re?function(t){var e=ie(this,t);return!!e&&e.enumerable}:ne;var oe,ae,se=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},le=kt,ce=Ht,ue=Object,he=Ft("".split),de=le((function(){return!ue("z").propertyIsEnumerable(0)}))?function(t){return"String"===ce(t)?he(t,""):ue(t)}:ue,fe=function(t){return null===t||void 0===t},pe=fe,ge=TypeError,me=function(t){if(pe(t))throw new ge("Can't call method on "+t);return t},ve=de,ye=me,be=function(t){return ve(ye(t))},_e=Kt,xe=Xt.all,we=Xt.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:_e(t)||t===xe}:function(t){return"object"==typeof t?null!==t:_e(t)},Se={},Ee=Se,Me=Tt,Te=Kt,ke=function(t){return Te(t)?t:void 0},Ce=function(t,e){return arguments.length<2?ke(Ee[t])||ke(Me[t]):Ee[t]&&Ee[t][e]||Me[t]&&Me[t][e]},Ae=Ft({}.isPrototypeOf),Pe="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Oe=Tt,Re=Pe,Le=Oe.process,De=Oe.Deno,Ie=Le&&Le.versions||De&&De.version,Ne=Ie&&Ie.v8;Ne&&(ae=(oe=Ne.split("."))[0]>0&&oe[0]<4?1:+(oe[0]+oe[1])),!ae&&Re&&(!(oe=Re.match(/Edge\/(\d+)/))||oe[1]>=74)&&(oe=Re.match(/Chrome\/(\d+)/))&&(ae=+oe[1]);var ze=ae,Fe=ze,Ue=kt,Be=Tt.String,je=!!Object.getOwnPropertySymbols&&!Ue((function(){var t=Symbol("symbol detection");return!Be(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Fe&&Fe<41})),He=je&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ve=Ce,Ge=Kt,We=Ae,qe=Object,Xe=He?function(t){return"symbol"==typeof t}:function(t){var e=Ve("Symbol");return Ge(e)&&We(e.prototype,qe(t))},Ye=String,Ke=function(t){try{return Ye(t)}catch(e){return"Object"}},Ze=Kt,Qe=Ke,Je=TypeError,$e=function(t){if(Ze(t))return t;throw new Je(Qe(t)+" is not a function")},tn=$e,en=fe,nn=function(t,e){var n=t[e];return en(n)?void 0:tn(n)},rn=te,on=Kt,an=we,sn=TypeError,ln={exports:{}},cn=Tt,un=Object.defineProperty,hn=function(t,e){try{un(cn,t,{value:e,configurable:!0,writable:!0})}catch(n){cn[t]=e}return e},dn="__core-js_shared__",fn=Tt[dn]||hn(dn,{}),pn=fn;(ln.exports=function(t,e){return pn[t]||(pn[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.2",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"});var gn=ln.exports,mn=me,vn=Object,yn=function(t){return vn(mn(t))},bn=yn,_n=Ft({}.hasOwnProperty),xn=Object.hasOwn||function(t,e){return _n(bn(t),e)},wn=Ft,Sn=0,En=Math.random(),Mn=wn(1..toString),Tn=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Mn(++Sn+En,36)},kn=gn,Cn=xn,An=Tn,Pn=je,On=He,Rn=Tt.Symbol,Ln=kn("wks"),Dn=On?Rn.for||Rn:Rn&&Rn.withoutSetter||An,In=function(t){return Cn(Ln,t)||(Ln[t]=Pn&&Cn(Rn,t)?Rn[t]:Dn("Symbol."+t)),Ln[t]},Nn=te,zn=we,Fn=Xe,Un=nn,Bn=function(t,e){var n,i;if("string"===e&&on(n=t.toString)&&!an(i=rn(n,t)))return i;if(on(n=t.valueOf)&&!an(i=rn(n,t)))return i;if("string"!==e&&on(n=t.toString)&&!an(i=rn(n,t)))return i;throw new sn("Can't convert object to primitive value")},jn=TypeError,Hn=In("toPrimitive"),Vn=function(t,e){if(!zn(t)||Fn(t))return t;var n,i=Un(t,Hn);if(i){if(void 0===e&&(e="default"),n=Nn(i,t,e),!zn(n)||Fn(n))return n;throw new jn("Can't convert object to primitive value")}return void 0===e&&(e="number"),Bn(t,e)},Gn=Xe,Wn=function(t){var e=Vn(t,"string");return Gn(e)?e:e+""},qn=we,Xn=Tt.document,Yn=qn(Xn)&&qn(Xn.createElement),Kn=function(t){return Yn?Xn.createElement(t):{}},Zn=Kn,Qn=!Qt&&!kt((function(){return 7!==Object.defineProperty(Zn("div"),"a",{get:function(){return 7}}).a})),Jn=Qt,$n=te,ti=ee,ei=se,ni=be,ii=Wn,ri=xn,oi=Qn,ai=Object.getOwnPropertyDescriptor;Zt.f=Jn?ai:function(t,e){if(t=ni(t),e=ii(e),oi)try{return ai(t,e)}catch(n){}if(ri(t,e))return ei(!$n(ti.f,t,e),t[e])};var si=kt,li=Kt,ci=/#|\.prototype\./,ui=function(t,e){var n=di[hi(t)];return n===pi||n!==fi&&(li(e)?si(e):!!e)},hi=ui.normalize=function(t){return String(t).replace(ci,".").toLowerCase()},di=ui.data={},fi=ui.NATIVE="N",pi=ui.POLYFILL="P",gi=ui,mi=$e,vi=Ct,yi=Wt(Wt.bind),bi=function(t,e){return mi(t),void 0===e?t:vi?yi(t,e):function(){return t.apply(e,arguments)}},_i={},xi=Qt&&kt((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),wi=we,Si=String,Ei=TypeError,Mi=function(t){if(wi(t))return t;throw new Ei(Si(t)+" is not an object")},Ti=Qt,ki=Qn,Ci=xi,Ai=Mi,Pi=Wn,Oi=TypeError,Ri=Object.defineProperty,Li=Object.getOwnPropertyDescriptor,Di="enumerable",Ii="configurable",Ni="writable";_i.f=Ti?Ci?function(t,e,n){if(Ai(t),e=Pi(e),Ai(n),"function"===typeof t&&"prototype"===e&&"value"in n&&Ni in n&&!n[Ni]){var i=Li(t,e);i&&i[Ni]&&(t[e]=n.value,n={configurable:Ii in n?n[Ii]:i[Ii],enumerable:Di in n?n[Di]:i[Di],writable:!1})}return Ri(t,e,n)}:Ri:function(t,e,n){if(Ai(t),e=Pi(e),Ai(n),ki)try{return Ri(t,e,n)}catch(i){}if("get"in n||"set"in n)throw new Oi("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var zi=_i,Fi=se,Ui=Qt?function(t,e,n){return zi.f(t,e,Fi(1,n))}:function(t,e,n){return t[e]=n,t},Bi=Tt,ji=Lt,Hi=Wt,Vi=Kt,Gi=Zt.f,Wi=gi,qi=Se,Xi=bi,Yi=Ui,Ki=xn,Zi=function(t){var e=function(n,i,r){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,i)}return new t(n,i,r)}return ji(t,this,arguments)};return e.prototype=t.prototype,e},Qi=function(t,e){var n,i,r,o,a,s,l,c,u,h=t.target,d=t.global,f=t.stat,p=t.proto,g=d?Bi:f?Bi[h]:(Bi[h]||{}).prototype,m=d?qi:qi[h]||Yi(qi,h,{})[h],v=m.prototype;for(o in e)i=!(n=Wi(d?o:h+(f?".":"#")+o,t.forced))&&g&&Ki(g,o),s=m[o],i&&(l=t.dontCallGetSet?(u=Gi(g,o))&&u.value:g[o]),a=i&&l?l:e[o],i&&typeof s==typeof a||(c=t.bind&&i?Xi(a,Bi):t.wrap&&i?Zi(a):p&&Vi(a)?Hi(a):a,(t.sham||a&&a.sham||s&&s.sham)&&Yi(c,"sham",!0),Yi(m,o,c),p&&(Ki(qi,r=h+"Prototype")||Yi(qi,r,{}),Yi(qi[r],o,a),t.real&&v&&(n||!v[o])&&Yi(v,o,a)))},Ji=Qi,$i=Qt,tr=_i.f;Ji({target:"Object",stat:!0,forced:Object.defineProperty!==tr,sham:!$i},{defineProperty:tr});var er=Se.Object,nr=Et.exports=function(t,e,n){return er.defineProperty(t,e,n)};er.defineProperty.sham&&(nr.sham=!0);var ir=Et.exports,rr=ir,or=St(rr),ar=Ht,sr=Array.isArray||function(t){return"Array"===ar(t)},lr=Math.ceil,cr=Math.floor,ur=Math.trunc||function(t){var e=+t;return(e>0?cr:lr)(e)},hr=ur,dr=function(t){var e=+t;return e!==e||0===e?0:hr(e)},fr=dr,pr=Math.min,gr=function(t){return t>0?pr(fr(t),9007199254740991):0},mr=function(t){return gr(t.length)},vr=TypeError,yr=function(t){if(t>9007199254740991)throw vr("Maximum allowed index exceeded");return t},br=Wn,_r=_i,xr=se,wr=function(t,e,n){var i=br(e);i in t?_r.f(t,i,xr(0,n)):t[i]=n},Sr={};Sr[In("toStringTag")]="z";var Er="[object z]"===String(Sr),Mr=Er,Tr=Kt,kr=Ht,Cr=In("toStringTag"),Ar=Object,Pr="Arguments"===kr(function(){return arguments}()),Or=Mr?kr:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Ar(t),Cr))?n:Pr?kr(e):"Object"===(i=kr(e))&&Tr(e.callee)?"Arguments":i},Rr=Kt,Lr=fn,Dr=Ft(Function.toString);Rr(Lr.inspectSource)||(Lr.inspectSource=function(t){return Dr(t)});var Ir=Lr.inspectSource,Nr=Ft,zr=kt,Fr=Kt,Ur=Or,Br=Ir,jr=function(){},Hr=[],Vr=Ce("Reflect","construct"),Gr=/^\s*(?:class|function)\b/,Wr=Nr(Gr.exec),qr=!Gr.test(jr),Xr=function(t){if(!Fr(t))return!1;try{return Vr(jr,Hr,t),!0}catch(e){return!1}},Yr=function(t){if(!Fr(t))return!1;switch(Ur(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return qr||!!Wr(Gr,Br(t))}catch(e){return!0}};Yr.sham=!0;var Kr=!Vr||zr((function(){var t;return Xr(Xr.call)||!Xr(Object)||!Xr((function(){t=!0}))||t}))?Yr:Xr,Zr=sr,Qr=Kr,Jr=we,$r=In("species"),to=Array,eo=function(t){var e;return Zr(t)&&(e=t.constructor,(Qr(e)&&(e===to||Zr(e.prototype))||Jr(e)&&null===(e=e[$r]))&&(e=void 0)),void 0===e?to:e},no=function(t,e){return new(eo(t))(0===e?0:e)},io=kt,ro=ze,oo=In("species"),ao=function(t){return ro>=51||!io((function(){var e=[];return(e.constructor={})[oo]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},so=Qi,lo=kt,co=sr,uo=we,ho=yn,fo=mr,po=yr,go=wr,mo=no,vo=ao,yo=ze,bo=In("isConcatSpreadable"),_o=yo>=51||!lo((function(){var t=[];return t[bo]=!1,t.concat()[0]!==t})),xo=function(t){if(!uo(t))return!1;var e=t[bo];return void 0!==e?!!e:co(t)};so({target:"Array",proto:!0,arity:1,forced:!_o||!vo("concat")},{concat:function(t){var e,n,i,r,o,a=ho(this),s=mo(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(xo(o=-1===e?a:arguments[e]))for(r=fo(o),po(l+r),n=0;n<r;n++,l++)n in o&&go(s,l,o[n]);else po(l+1),go(s,l++,o);return s.length=l,s}});var wo=Or,So=String,Eo=function(t){if("Symbol"===wo(t))throw new TypeError("Cannot convert a Symbol value to a string");return So(t)},Mo={},To=dr,ko=Math.max,Co=Math.min,Ao=function(t,e){var n=To(t);return n<0?ko(n+e,0):Co(n,e)},Po=be,Oo=Ao,Ro=mr,Lo=function(t){return function(e,n,i){var r,o=Po(e),a=Ro(o),s=Oo(i,a);if(t&&n!==n){for(;a>s;)if((r=o[s++])!==r)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Do={includes:Lo(!0),indexOf:Lo(!1)},Io={},No=xn,zo=be,Fo=Do.indexOf,Uo=Io,Bo=Ft([].push),jo=function(t,e){var n,i=zo(t),r=0,o=[];for(n in i)!No(Uo,n)&&No(i,n)&&Bo(o,n);for(;e.length>r;)No(i,n=e[r++])&&(~Fo(o,n)||Bo(o,n));return o},Ho=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Vo=jo,Go=Ho,Wo=Object.keys||function(t){return Vo(t,Go)},qo=Qt,Xo=xi,Yo=_i,Ko=Mi,Zo=be,Qo=Wo;Mo.f=qo&&!Xo?Object.defineProperties:function(t,e){Ko(t);for(var n,i=Zo(e),r=Qo(e),o=r.length,a=0;o>a;)Yo.f(t,n=r[a++],i[n]);return t};var Jo,$o=Ce("document","documentElement"),ta=Tn,ea=gn("keys"),na=function(t){return ea[t]||(ea[t]=ta(t))},ia=Mi,ra=Mo,oa=Ho,aa=Io,sa=$o,la=Kn,ca="prototype",ua="script",ha=na("IE_PROTO"),da=function(){},fa=function(t){return"<"+ua+">"+t+"</"+ua+">"},pa=function(t){t.write(fa("")),t.close();var e=t.parentWindow.Object;return t=null,e},ga=function(){try{Jo=new ActiveXObject("htmlfile")}catch(e){}ga="undefined"!=typeof document?document.domain&&Jo?pa(Jo):function(){var t,e=la("iframe"),n="java"+ua+":";return e.style.display="none",sa.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(fa("document.F=Object")),t.close(),t.F}():pa(Jo);for(var t=oa.length;t--;)delete ga[ca][oa[t]];return ga()};aa[ha]=!0;var ma=Object.create||function(t,e){var n;return null!==t?(da[ca]=ia(t),n=new da,da[ca]=null,n[ha]=t):n=ga(),void 0===e?n:ra.f(n,e)},va={},ya=jo,ba=Ho.concat("length","prototype");va.f=Object.getOwnPropertyNames||function(t){return ya(t,ba)};var _a={},xa=Ao,wa=mr,Sa=wr,Ea=Array,Ma=Math.max,Ta=function(t,e,n){for(var i=wa(t),r=xa(e,i),o=xa(void 0===n?i:n,i),a=Ea(Ma(o-r,0)),s=0;r<o;r++,s++)Sa(a,s,t[r]);return a.length=s,a},ka=Ht,Ca=be,Aa=va.f,Pa=Ta,Oa="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];_a.f=function(t){return Oa&&"Window"===ka(t)?function(t){try{return Aa(t)}catch(e){return Pa(Oa)}}(t):Aa(Ca(t))};var Ra={};Ra.f=Object.getOwnPropertySymbols;var La=Ui,Da=function(t,e,n,i){return i&&i.enumerable?t[e]=n:La(t,e,n),t},Ia=_i,Na=function(t,e,n){return Ia.f(t,e,n)},za={},Fa=In;za.f=Fa;var Ua,Ba,ja,Ha=Se,Va=xn,Ga=za,Wa=_i.f,qa=function(t){var e=Ha.Symbol||(Ha.Symbol={});Va(e,t)||Wa(e,t,{value:Ga.f(t)})},Xa=te,Ya=Ce,Ka=In,Za=Da,Qa=function(){var t=Ya("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,i=Ka("toPrimitive");e&&!e[i]&&Za(e,i,(function(t){return Xa(n,this)}),{arity:1})},Ja=Or,$a=Er?{}.toString:function(){return"[object "+Ja(this)+"]"},ts=Er,es=_i.f,ns=Ui,is=xn,rs=$a,os=In("toStringTag"),as=function(t,e,n,i){if(t){var r=n?t:t.prototype;is(r,os)||es(r,os,{configurable:!0,value:e}),i&&!ts&&ns(r,"toString",rs)}},ss=Kt,ls=Tt.WeakMap,cs=ss(ls)&&/native code/.test(String(ls)),us=Tt,hs=we,ds=Ui,fs=xn,ps=fn,gs=na,ms=Io,vs="Object already initialized",ys=us.TypeError,bs=us.WeakMap;if(cs||ps.state){var _s=ps.state||(ps.state=new bs);_s.get=_s.get,_s.has=_s.has,_s.set=_s.set,Ua=function(t,e){if(_s.has(t))throw new ys(vs);return e.facade=t,_s.set(t,e),e},Ba=function(t){return _s.get(t)||{}},ja=function(t){return _s.has(t)}}else{var xs=gs("state");ms[xs]=!0,Ua=function(t,e){if(fs(t,xs))throw new ys(vs);return e.facade=t,ds(t,xs,e),e},Ba=function(t){return fs(t,xs)?t[xs]:{}},ja=function(t){return fs(t,xs)}}var ws={set:Ua,get:Ba,has:ja,enforce:function(t){return ja(t)?Ba(t):Ua(t,{})},getterFor:function(t){return function(e){var n;if(!hs(e)||(n=Ba(e)).type!==t)throw new ys("Incompatible receiver, "+t+" required");return n}}},Ss=bi,Es=de,Ms=yn,Ts=mr,ks=no,Cs=Ft([].push),As=function(t){var e=1===t,n=2===t,i=3===t,r=4===t,o=6===t,a=7===t,s=5===t||o;return function(l,c,u,h){for(var d,f,p=Ms(l),g=Es(p),m=Ss(c,u),v=Ts(g),y=0,b=h||ks,_=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in g)&&(f=m(d=g[y],y,p),t))if(e)_[y]=f;else if(f)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:Cs(_,d)}else switch(t){case 4:return!1;case 7:Cs(_,d)}return o?-1:i||r?r:_}},Ps={forEach:As(0),map:As(1),filter:As(2),some:As(3),every:As(4),find:As(5),findIndex:As(6),filterReject:As(7)},Os=Qi,Rs=Tt,Ls=te,Ds=Ft,Is=Qt,Ns=je,zs=kt,Fs=xn,Us=Ae,Bs=Mi,js=be,Hs=Wn,Vs=Eo,Gs=se,Ws=ma,qs=Wo,Xs=va,Ys=_a,Ks=Ra,Zs=Zt,Qs=_i,Js=Mo,$s=ee,tl=Da,el=Na,nl=gn,il=Io,rl=Tn,ol=In,al=za,sl=qa,ll=Qa,cl=as,ul=ws,hl=Ps.forEach,dl=na("hidden"),fl="Symbol",pl="prototype",gl=ul.set,ml=ul.getterFor(fl),vl=Object[pl],yl=Rs.Symbol,bl=yl&&yl[pl],_l=Rs.RangeError,xl=Rs.TypeError,wl=Rs.QObject,Sl=Zs.f,El=Qs.f,Ml=Ys.f,Tl=$s.f,kl=Ds([].push),Cl=nl("symbols"),Al=nl("op-symbols"),Pl=nl("wks"),Ol=!wl||!wl[pl]||!wl[pl].findChild,Rl=function(t,e,n){var i=Sl(vl,e);i&&delete vl[e],El(t,e,n),i&&t!==vl&&El(vl,e,i)},Ll=Is&&zs((function(){return 7!==Ws(El({},"a",{get:function(){return El(this,"a",{value:7}).a}})).a}))?Rl:El,Dl=function(t,e){var n=Cl[t]=Ws(bl);return gl(n,{type:fl,tag:t,description:e}),Is||(n.description=e),n},Il=function(t,e,n){t===vl&&Il(Al,e,n),Bs(t);var i=Hs(e);return Bs(n),Fs(Cl,i)?(n.enumerable?(Fs(t,dl)&&t[dl][i]&&(t[dl][i]=!1),n=Ws(n,{enumerable:Gs(0,!1)})):(Fs(t,dl)||El(t,dl,Gs(1,{})),t[dl][i]=!0),Ll(t,i,n)):El(t,i,n)},Nl=function(t,e){Bs(t);var n=js(e),i=qs(n).concat(Bl(n));return hl(i,(function(e){Is&&!Ls(zl,n,e)||Il(t,e,n[e])})),t},zl=function(t){var e=Hs(t),n=Ls(Tl,this,e);return!(this===vl&&Fs(Cl,e)&&!Fs(Al,e))&&(!(n||!Fs(this,e)||!Fs(Cl,e)||Fs(this,dl)&&this[dl][e])||n)},Fl=function(t,e){var n=js(t),i=Hs(e);if(n!==vl||!Fs(Cl,i)||Fs(Al,i)){var r=Sl(n,i);return!r||!Fs(Cl,i)||Fs(n,dl)&&n[dl][i]||(r.enumerable=!0),r}},Ul=function(t){var e=Ml(js(t)),n=[];return hl(e,(function(t){Fs(Cl,t)||Fs(il,t)||kl(n,t)})),n},Bl=function(t){var e=t===vl,n=Ml(e?Al:js(t)),i=[];return hl(n,(function(t){!Fs(Cl,t)||e&&!Fs(vl,t)||kl(i,Cl[t])})),i};Ns||(yl=function(){if(Us(bl,this))throw new xl("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?Vs(arguments[0]):void 0,e=rl(t),n=function(t){var i=void 0===this?Rs:this;i===vl&&Ls(n,Al,t),Fs(i,dl)&&Fs(i[dl],e)&&(i[dl][e]=!1);var r=Gs(1,t);try{Ll(i,e,r)}catch(o){if(!(o instanceof _l))throw o;Rl(i,e,r)}};return Is&&Ol&&Ll(vl,e,{configurable:!0,set:n}),Dl(e,t)},tl(bl=yl[pl],"toString",(function(){return ml(this).tag})),tl(yl,"withoutSetter",(function(t){return Dl(rl(t),t)})),$s.f=zl,Qs.f=Il,Js.f=Nl,Zs.f=Fl,Xs.f=Ys.f=Ul,Ks.f=Bl,al.f=function(t){return Dl(ol(t),t)},Is&&el(bl,"description",{configurable:!0,get:function(){return ml(this).description}})),Os({global:!0,constructor:!0,wrap:!0,forced:!Ns,sham:!Ns},{Symbol:yl}),hl(qs(Pl),(function(t){sl(t)})),Os({target:fl,stat:!0,forced:!Ns},{useSetter:function(){Ol=!0},useSimple:function(){Ol=!1}}),Os({target:"Object",stat:!0,forced:!Ns,sham:!Is},{create:function(t,e){return void 0===e?Ws(t):Nl(Ws(t),e)},defineProperty:Il,defineProperties:Nl,getOwnPropertyDescriptor:Fl}),Os({target:"Object",stat:!0,forced:!Ns},{getOwnPropertyNames:Ul}),ll(),cl(yl,fl),il[dl]=!0;var jl=je&&!!Symbol.for&&!!Symbol.keyFor,Hl=Qi,Vl=Ce,Gl=xn,Wl=Eo,ql=gn,Xl=jl,Yl=ql("string-to-symbol-registry"),Kl=ql("symbol-to-string-registry");Hl({target:"Symbol",stat:!0,forced:!Xl},{for:function(t){var e=Wl(t);if(Gl(Yl,e))return Yl[e];var n=Vl("Symbol")(e);return Yl[e]=n,Kl[n]=e,n}});var Zl=Qi,Ql=xn,Jl=Xe,$l=Ke,tc=jl,ec=gn("symbol-to-string-registry");Zl({target:"Symbol",stat:!0,forced:!tc},{keyFor:function(t){if(!Jl(t))throw new TypeError($l(t)+" is not a symbol");if(Ql(ec,t))return ec[t]}});var nc=Ft([].slice),ic=sr,rc=Kt,oc=Ht,ac=Eo,sc=Ft([].push),lc=Qi,cc=Ce,uc=Lt,hc=te,dc=Ft,fc=kt,pc=Kt,gc=Xe,mc=nc,vc=function(t){if(rc(t))return t;if(ic(t)){for(var e=t.length,n=[],i=0;i<e;i++){var r=t[i];"string"==typeof r?sc(n,r):"number"!=typeof r&&"Number"!==oc(r)&&"String"!==oc(r)||sc(n,ac(r))}var o=n.length,a=!0;return function(t,e){if(a)return a=!1,e;if(ic(this))return e;for(var i=0;i<o;i++)if(n[i]===t)return e}}},yc=je,bc=String,_c=cc("JSON","stringify"),xc=dc(/./.exec),wc=dc("".charAt),Sc=dc("".charCodeAt),Ec=dc("".replace),Mc=dc(1..toString),Tc=/[\uD800-\uDFFF]/g,kc=/^[\uD800-\uDBFF]$/,Cc=/^[\uDC00-\uDFFF]$/,Ac=!yc||fc((function(){var t=cc("Symbol")("stringify detection");return"[null]"!==_c([t])||"{}"!==_c({a:t})||"{}"!==_c(Object(t))})),Pc=fc((function(){return'"\\udf06\\ud834"'!==_c("\udf06\ud834")||'"\\udead"'!==_c("\udead")})),Oc=function(t,e){var n=mc(arguments),i=vc(e);if(pc(i)||void 0!==t&&!gc(t))return n[1]=function(t,e){if(pc(i)&&(e=hc(i,this,bc(t),e)),!gc(e))return e},uc(_c,null,n)},Rc=function(t,e,n){var i=wc(n,e-1),r=wc(n,e+1);return xc(kc,t)&&!xc(Cc,r)||xc(Cc,t)&&!xc(kc,i)?"\\u"+Mc(Sc(t,0),16):t};_c&&lc({target:"JSON",stat:!0,arity:3,forced:Ac||Pc},{stringify:function(t,e,n){var i=mc(arguments),r=uc(Ac?Oc:_c,null,i);return Pc&&"string"==typeof r?Ec(r,Tc,Rc):r}});var Lc=Ra,Dc=yn;Qi({target:"Object",stat:!0,forced:!je||kt((function(){Lc.f(1)}))},{getOwnPropertySymbols:function(t){var e=Lc.f;return e?e(Dc(t)):[]}}),qa("asyncIterator"),qa("hasInstance"),qa("isConcatSpreadable"),qa("iterator"),qa("match"),qa("matchAll"),qa("replace"),qa("search"),qa("species"),qa("split");var Ic=Qa;qa("toPrimitive"),Ic();var Nc=Ce,zc=as;qa("toStringTag"),zc(Nc("Symbol"),"Symbol"),qa("unscopables"),as(Tt.JSON,"JSON",!0);var Fc,Uc,Bc,jc=Se.Symbol,Hc={},Vc=Qt,Gc=xn,Wc=Function.prototype,qc=Vc&&Object.getOwnPropertyDescriptor,Xc=Gc(Wc,"name"),Yc={EXISTS:Xc,PROPER:Xc&&"something"===function(){}.name,CONFIGURABLE:Xc&&(!Vc||Vc&&qc(Wc,"name").configurable)},Kc=!kt((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Zc=xn,Qc=Kt,Jc=yn,$c=Kc,tu=na("IE_PROTO"),eu=Object,nu=eu.prototype,iu=$c?eu.getPrototypeOf:function(t){var e=Jc(t);if(Zc(e,tu))return e[tu];var n=e.constructor;return Qc(n)&&e instanceof n?n.prototype:e instanceof eu?nu:null},ru=kt,ou=Kt,au=we,su=ma,lu=iu,cu=Da,uu=In("iterator"),hu=!1;[].keys&&("next"in(Bc=[].keys())?(Uc=lu(lu(Bc)))!==Object.prototype&&(Fc=Uc):hu=!0);var du=!au(Fc)||ru((function(){var t={};return Fc[uu].call(t)!==t}));ou((Fc=du?{}:su(Fc))[uu])||cu(Fc,uu,(function(){return this}));var fu={IteratorPrototype:Fc,BUGGY_SAFARI_ITERATORS:hu},pu=fu.IteratorPrototype,gu=ma,mu=se,vu=as,yu=Hc,bu=function(){return this},_u=Ft,xu=$e,wu=Kt,Su=String,Eu=TypeError,Mu=function(t,e,n){try{return _u(xu(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(i){}},Tu=Mi,ku=function(t){if("object"==typeof t||wu(t))return t;throw new Eu("Can't set "+Su(t)+" as a prototype")},Cu=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Mu(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(i){}return function(n,i){return Tu(n),ku(i),e?t(n,i):n.__proto__=i,n}}():void 0),Au=Qi,Pu=te,Ou=Yc,Ru=function(t,e,n,i){var r=e+" Iterator";return t.prototype=gu(pu,{next:mu(+!i,n)}),vu(t,r,!1,!0),yu[r]=bu,t},Lu=iu,Du=as,Iu=Da,Nu=Hc,zu=fu,Fu=Ou.PROPER,Uu=zu.BUGGY_SAFARI_ITERATORS,Bu=In("iterator"),ju="keys",Hu="values",Vu="entries",Gu=function(){return this},Wu=function(t,e,n,i,r,o,a){Ru(n,e,i);var s,l,c,u=function(t){if(t===r&&g)return g;if(!Uu&&t&&t in f)return f[t];switch(t){case ju:case Hu:case Vu:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,f=t.prototype,p=f[Bu]||f["@@iterator"]||r&&f[r],g=!Uu&&p||u(r),m="Array"===e&&f.entries||p;if(m&&(s=Lu(m.call(new t)))!==Object.prototype&&s.next&&(Du(s,h,!0,!0),Nu[h]=Gu),Fu&&r===Hu&&p&&p.name!==Hu&&(d=!0,g=function(){return Pu(p,this)}),r)if(l={values:u(Hu),keys:o?g:u(ju),entries:u(Vu)},a)for(c in l)(Uu||d||!(c in f))&&Iu(f,c,l[c]);else Au({target:e,proto:!0,forced:Uu||d},l);return a&&f[Bu]!==g&&Iu(f,Bu,g,{name:r}),Nu[e]=g,l},qu=function(t,e){return{value:t,done:e}},Xu=be,Yu=Hc,Ku=ws;_i.f;var Zu=Wu,Qu=qu,Ju="Array Iterator",$u=Ku.set,th=Ku.getterFor(Ju);Zu(Array,"Array",(function(t,e){$u(this,{type:Ju,target:Xu(t),index:0,kind:e})}),(function(){var t=th(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,Qu(void 0,!0);switch(t.kind){case"keys":return Qu(n,!1);case"values":return Qu(e[n],!1)}return Qu([n,e[n]],!1)}),"values"),Yu.Arguments=Yu.Array;var eh={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},nh=Tt,ih=Or,rh=Ui,oh=Hc,ah=In("toStringTag");for(var sh in eh){var lh=nh[sh],ch=lh&&lh.prototype;ch&&ih(ch)!==ah&&rh(ch,ah,sh),oh[sh]=oh.Array}var uh=jc,hh=In,dh=_i.f,fh=hh("metadata"),ph=Function.prototype;void 0===ph[fh]&&dh(ph,fh,{value:null}),qa("asyncDispose"),qa("dispose"),qa("metadata");var gh=uh,mh=Ft,vh=Ce("Symbol"),yh=vh.keyFor,bh=mh(vh.prototype.valueOf),_h=vh.isRegisteredSymbol||function(t){try{return void 0!==yh(bh(t))}catch(e){return!1}};Qi({target:"Symbol",stat:!0},{isRegisteredSymbol:_h});for(var xh=gn,wh=Ce,Sh=Ft,Eh=Xe,Mh=In,Th=wh("Symbol"),kh=Th.isWellKnownSymbol,Ch=wh("Object","getOwnPropertyNames"),Ah=Sh(Th.prototype.valueOf),Ph=xh("wks"),Oh=0,Rh=Ch(Th),Lh=Rh.length;Oh<Lh;Oh++)try{var Dh=Rh[Oh];Eh(Th[Dh])&&Mh(Dh)}catch(ROt){}var Ih=function(t){if(kh&&kh(t))return!0;try{for(var e=Ah(t),n=0,i=Ch(Ph),r=i.length;n<r;n++)if(Ph[i[n]]==e)return!0}catch(ROt){}return!1};Qi({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Ih}),qa("matcher"),qa("observable"),Qi({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:_h}),Qi({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Ih}),qa("metadataKey"),qa("patternMatch"),qa("replaceAll");var Nh=gh,zh=St(Nh),Fh=Ft,Uh=dr,Bh=Eo,jh=me,Hh=Fh("".charAt),Vh=Fh("".charCodeAt),Gh=Fh("".slice),Wh=function(t){return function(e,n){var i,r,o=Bh(jh(e)),a=Uh(n),s=o.length;return a<0||a>=s?t?"":void 0:(i=Vh(o,a))<55296||i>56319||a+1===s||(r=Vh(o,a+1))<56320||r>57343?t?Hh(o,a):i:t?Gh(o,a,a+2):r-56320+(i-55296<<10)+65536}},qh={codeAt:Wh(!1),charAt:Wh(!0)}.charAt,Xh=Eo,Yh=ws,Kh=Wu,Zh=qu,Qh="String Iterator",Jh=Yh.set,$h=Yh.getterFor(Qh);Kh(String,"String",(function(t){Jh(this,{type:Qh,string:Xh(t),index:0})}),(function(){var t,e=$h(this),n=e.string,i=e.index;return i>=n.length?Zh(void 0,!0):(t=qh(n,i),e.index+=t.length,Zh(t,!1))}));var td=za.f("iterator"),ed=td,nd=St(ed);function id(t){return id="function"==typeof zh&&"symbol"==typeof nd?function(t){return typeof t}:function(t){return t&&"function"==typeof zh&&t.constructor===zh&&t!==zh.prototype?"symbol":typeof t},id(t)}var rd=St(za.f("toPrimitive"));function od(t){var e=function(t,e){if("object"!==id(t)||null===t)return t;var n=t[rd];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==id(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===id(e)?e:String(e)}function ad(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),or(t,od(i.key),i)}}function sd(t,e,n){return e&&ad(t.prototype,e),n&&ad(t,n),or(t,"prototype",{writable:!1}),t}function ld(t,e,n){return(e=od(e))in t?or(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cd=Ft,ud=$e,hd=we,dd=xn,fd=nc,pd=Ct,gd=Function,md=cd([].concat),vd=cd([].join),yd={},bd=pd?gd.bind:function(t){var e=ud(this),n=e.prototype,i=fd(arguments,1),r=function(){var n=md(i,fd(arguments));return this instanceof r?function(t,e,n){if(!dd(yd,e)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";yd[e]=gd("C,a","return new C("+vd(i,",")+")")}return yd[e](t,n)}(e,n.length,n):e.apply(t,n)};return hd(n)&&(r.prototype=n),r},_d=bd;Qi({target:"Function",proto:!0,forced:Function.bind!==_d},{bind:_d});var xd=Tt,wd=Se,Sd=function(t,e){var n=wd[t+"Prototype"],i=n&&n[e];if(i)return i;var r=xd[t],o=r&&r.prototype;return o&&o[e]},Ed=Sd("Function","bind"),Md=Ae,Td=Ed,kd=Function.prototype,Cd=function(t){var e=t.bind;return t===kd||Md(kd,t)&&e===kd.bind?Td:e},Ad=Cd,Pd=St(Ad),Od=$e,Rd=yn,Ld=de,Dd=mr,Id=TypeError,Nd=function(t){return function(e,n,i,r){Od(n);var o=Rd(e),a=Ld(o),s=Dd(o),l=t?s-1:0,c=t?-1:1;if(i<2)for(;;){if(l in a){r=a[l],l+=c;break}if(l+=c,t?l<0:s<=l)throw new Id("Reduce of empty array with no initial value")}for(;t?l>=0:s>l;l+=c)l in a&&(r=n(r,a[l],l,o));return r}},zd={left:Nd(!1),right:Nd(!0)},Fd=kt,Ud=function(t,e){var n=[][t];return!!n&&Fd((function(){n.call(null,e||function(){return 1},1)}))},Bd="process"===Ht(Tt.process),jd=zd.left;Qi({target:"Array",proto:!0,forced:!Bd&&ze>79&&ze<83||!Ud("reduce")},{reduce:function(t){var e=arguments.length;return jd(this,t,e,e>1?arguments[1]:void 0)}});var Hd=Sd("Array","reduce"),Vd=Ae,Gd=Hd,Wd=Array.prototype,qd=function(t){var e=t.reduce;return t===Wd||Vd(Wd,t)&&e===Wd.reduce?Gd:e},Xd=St(qd),Yd=Ps.filter;Qi({target:"Array",proto:!0,forced:!ao("filter")},{filter:function(t){return Yd(this,t,arguments.length>1?arguments[1]:void 0)}});var Kd=Sd("Array","filter"),Zd=Ae,Qd=Kd,Jd=Array.prototype,$d=function(t){var e=t.filter;return t===Jd||Zd(Jd,t)&&e===Jd.filter?Qd:e},tf=St($d),ef=Ps.map;Qi({target:"Array",proto:!0,forced:!ao("map")},{map:function(t){return ef(this,t,arguments.length>1?arguments[1]:void 0)}});var nf=Sd("Array","map"),rf=Ae,of=nf,af=Array.prototype,sf=function(t){var e=t.map;return t===af||rf(af,t)&&e===af.map?of:e},lf=St(sf),cf=sr,uf=mr,hf=yr,df=bi,ff=function(t,e,n,i,r,o,a,s){for(var l,c,u=r,h=0,d=!!a&&df(a,s);h<i;)h in n&&(l=d?d(n[h],h,e):n[h],o>0&&cf(l)?(c=uf(l),u=ff(t,e,l,c,u,o-1)-1):(hf(u+1),t[u]=l),u++),h++;return u},pf=ff,gf=$e,mf=yn,vf=mr,yf=no;Qi({target:"Array",proto:!0},{flatMap:function(t){var e,n=mf(this),i=vf(n);return gf(t),(e=yf(n,0)).length=pf(e,n,n,i,0,1,t,arguments.length>1?arguments[1]:void 0),e}});Sd("Array","flatMap"),Array.prototype;var bf=te,_f=Mi,xf=nn,wf=function(t,e,n){var i,r;_f(t);try{if(!(i=xf(t,"return"))){if("throw"===e)throw n;return n}i=bf(i,t)}catch(ROt){r=!0,i=ROt}if("throw"===e)throw n;if(r)throw i;return _f(i),n},Sf=Mi,Ef=wf,Mf=Hc,Tf=In("iterator"),kf=Array.prototype,Cf=function(t){return void 0!==t&&(Mf.Array===t||kf[Tf]===t)},Af=Or,Pf=nn,Of=fe,Rf=Hc,Lf=In("iterator"),Df=function(t){if(!Of(t))return Pf(t,Lf)||Pf(t,"@@iterator")||Rf[Af(t)]},If=te,Nf=$e,zf=Mi,Ff=Ke,Uf=Df,Bf=TypeError,jf=function(t,e){var n=arguments.length<2?Uf(t):e;if(Nf(n))return zf(If(n,t));throw new Bf(Ff(t)+" is not iterable")},Hf=bi,Vf=te,Gf=yn,Wf=function(t,e,n,i){try{return i?e(Sf(n)[0],n[1]):e(n)}catch(ROt){Ef(t,"throw",ROt)}},qf=Cf,Xf=Kr,Yf=mr,Kf=wr,Zf=jf,Qf=Df,Jf=Array,$f=In("iterator"),tp=!1;try{var ep=0,np={next:function(){return{done:!!ep++}},return:function(){tp=!0}};np[$f]=function(){return this},Array.from(np,(function(){throw 2}))}catch(ROt){}var ip=function(t,e){try{if(!e&&!tp)return!1}catch(ROt){return!1}var n=!1;try{var i={};i[$f]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(ROt){}return n},rp=function(t){var e=Gf(t),n=Xf(this),i=arguments.length,r=i>1?arguments[1]:void 0,o=void 0!==r;o&&(r=Hf(r,i>2?arguments[2]:void 0));var a,s,l,c,u,h,d=Qf(e),f=0;if(!d||this===Jf&&qf(d))for(a=Yf(e),s=n?new this(a):Jf(a);a>f;f++)h=o?r(e[f],f):e[f],Kf(s,f,h);else for(u=(c=Zf(e,d)).next,s=n?new this:[];!(l=Vf(u,c)).done;f++)h=o?Wf(c,r,[l.value,f],!0):l.value,Kf(s,f,h);return s.length=f,s};Qi({target:"Array",stat:!0,forced:!ip((function(t){Array.from(t)}))},{from:rp});var op=Se.Array.from,ap=St(op),sp=Df,lp=St(sp),cp=St(sp);Qi({target:"Array",stat:!0},{isArray:sr});var up=Se.Array.isArray,hp=St(up);var dp=Qt,fp=sr,pp=TypeError,gp=Object.getOwnPropertyDescriptor,mp=dp&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(ROt){return ROt instanceof TypeError}}()?function(t,e){if(fp(t)&&!gp(t,"length").writable)throw new pp("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},vp=yn,yp=mr,bp=mp,_p=yr;Qi({target:"Array",proto:!0,arity:1,forced:kt((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(ROt){return ROt instanceof TypeError}}()},{push:function(t){var e=vp(this),n=yp(e),i=arguments.length;_p(n+i);for(var r=0;r<i;r++)e[n]=arguments[r],n++;return bp(e,n),n}});var xp=Sd("Array","push"),wp=Ae,Sp=xp,Ep=Array.prototype,Mp=function(t){var e=t.push;return t===Ep||wp(Ep,t)&&e===Ep.push?Sp:e},Tp=Mp,kp=St(Tp);var Cp=Qi,Ap=sr,Pp=Kr,Op=we,Rp=Ao,Lp=mr,Dp=be,Ip=wr,Np=In,zp=nc,Fp=ao("slice"),Up=Np("species"),Bp=Array,jp=Math.max;Cp({target:"Array",proto:!0,forced:!Fp},{slice:function(t,e){var n,i,r,o=Dp(this),a=Lp(o),s=Rp(t,a),l=Rp(void 0===e?a:e,a);if(Ap(o)&&(n=o.constructor,(Pp(n)&&(n===Bp||Ap(n.prototype))||Op(n)&&null===(n=n[Up]))&&(n=void 0),n===Bp||void 0===n))return zp(o,s,l);for(i=new(void 0===n?Bp:n)(jp(l-s,0)),r=0;s<l;s++,r++)s in o&&Ip(i,r,o[s]);return i.length=r,i}});var Hp=Sd("Array","slice"),Vp=Ae,Gp=Hp,Wp=Array.prototype,qp=function(t){var e=t.slice;return t===Wp||Vp(Wp,t)&&e===Wp.slice?Gp:e},Xp=qp,Yp=Xp,Kp=St(Yp),Zp=St(op);function Qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Jp(t,e){var n;if(t){if("string"===typeof t)return Qp(t,e);var i=Kp(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Zp(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qp(t,e):void 0}}function $p(t,e){return function(t){if(hp(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof zh&&lp(t)||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(kp(s).call(s,i.value),s.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(t,e)||Jp(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tg(t){return function(t){if(hp(t))return Qp(t)}(t)||function(t){if("undefined"!==typeof zh&&null!=lp(t)||null!=t["@@iterator"])return Zp(t)}(t)||Jp(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var eg=St(uh),ng=Sd("Array","concat"),ig=Ae,rg=ng,og=Array.prototype,ag=function(t){var e=t.concat;return t===og||ig(og,t)&&e===og.concat?rg:e},sg=St(ag),lg=St(Xp),cg=Ce,ug=va,hg=Ra,dg=Mi,fg=Ft([].concat),pg=cg("Reflect","ownKeys")||function(t){var e=ug.f(dg(t)),n=hg.f;return n?fg(e,n(t)):e};Qi({target:"Reflect",stat:!0},{ownKeys:pg});var gg=St(Se.Reflect.ownKeys),mg=St(up),vg=yn,yg=Wo;Qi({target:"Object",stat:!0,forced:kt((function(){yg(1)}))},{keys:function(t){return yg(vg(t))}});var bg=St(Se.Object.keys),_g=Ps.forEach,xg=Ud("forEach")?[].forEach:function(t){return _g(this,t,arguments.length>1?arguments[1]:void 0)};Qi({target:"Array",proto:!0,forced:[].forEach!==xg},{forEach:xg});var wg=Sd("Array","forEach"),Sg=Or,Eg=xn,Mg=Ae,Tg=wg,kg=Array.prototype,Cg={DOMTokenList:!0,NodeList:!0},Ag=function(t){var e=t.forEach;return t===kg||Mg(kg,t)&&e===kg.forEach||Eg(Cg,Sg(t))?Tg:e},Pg=St(Ag),Og=Qi,Rg=sr,Lg=Ft([].reverse),Dg=[1,2];Og({target:"Array",proto:!0,forced:String(Dg)===String(Dg.reverse())},{reverse:function(){return Rg(this)&&(this.length=this.length),Lg(this)}});var Ig=Sd("Array","reverse"),Ng=Ae,zg=Ig,Fg=Array.prototype,Ug=function(t){var e=t.reverse;return t===Fg||Ng(Fg,t)&&e===Fg.reverse?zg:e},Bg=Ug,jg=St(Bg),Hg=Ke,Vg=TypeError,Gg=function(t,e){if(!delete t[e])throw new Vg("Cannot delete property "+Hg(e)+" of "+Hg(t))},Wg=Qi,qg=yn,Xg=Ao,Yg=dr,Kg=mr,Zg=mp,Qg=yr,Jg=no,$g=wr,tm=Gg,em=ao("splice"),nm=Math.max,im=Math.min;Wg({target:"Array",proto:!0,forced:!em},{splice:function(t,e){var n,i,r,o,a,s,l=qg(this),c=Kg(l),u=Xg(t,c),h=arguments.length;for(0===h?n=i=0:1===h?(n=0,i=c-u):(n=h-2,i=im(nm(Yg(e),0),c-u)),Qg(c+n-i),r=Jg(l,i),o=0;o<i;o++)(a=u+o)in l&&$g(r,o,l[a]);if(r.length=i,n<i){for(o=u;o<c-i;o++)s=o+n,(a=o+i)in l?l[s]=l[a]:tm(l,s);for(o=c;o>c-i+n;o--)tm(l,o-1)}else if(n>i)for(o=c-i;o>u;o--)s=o+n-1,(a=o+i-1)in l?l[s]=l[a]:tm(l,s);for(o=0;o<n;o++)l[o+u]=arguments[o+2];return Zg(l,c-i+n),r}});var rm=Sd("Array","splice"),om=Ae,am=rm,sm=Array.prototype,lm=function(t){var e=t.splice;return t===sm||om(sm,t)&&e===sm.splice?am:e},cm=St(lm),um=Qt,hm=Ft,dm=te,fm=kt,pm=Wo,gm=Ra,mm=ee,vm=yn,ym=de,bm=Object.assign,_m=Object.defineProperty,xm=hm([].concat),wm=!bm||fm((function(){if(um&&1!==bm({b:1},bm(_m({},"a",{enumerable:!0,get:function(){_m(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!==bm({},t)[n]||pm(bm({},e)).join("")!==i}))?function(t,e){for(var n=vm(t),i=arguments.length,r=1,o=gm.f,a=mm.f;i>r;)for(var s,l=ym(arguments[r++]),c=o?xm(pm(l),o(l)):pm(l),u=c.length,h=0;u>h;)s=c[h++],um&&!dm(a,l,s)||(n[s]=l[s]);return n}:bm,Sm=wm;Qi({target:"Object",stat:!0,arity:2,forced:Object.assign!==Sm},{assign:Sm});var Em=St(Se.Object.assign),Mm=yn,Tm=iu,km=Kc;Qi({target:"Object",stat:!0,forced:kt((function(){Tm(1)})),sham:!km},{getPrototypeOf:function(t){return Tm(Mm(t))}});var Cm=Se.Object.getPrototypeOf;Qi({target:"Object",stat:!0,sham:!Qt},{create:ma});var Am=Se.Object,Pm=function(t,e){return Am.create(t,e)},Om=St(Pm),Rm=Se,Lm=Lt;Rm.JSON||(Rm.JSON={stringify:JSON.stringify});var Dm=St((function(t,e,n){return Lm(Rm.JSON.stringify,null,arguments)})),Im="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,Nm=TypeError,zm=function(t,e){if(t<e)throw new Nm("Not enough arguments");return t},Fm=Tt,Um=Lt,Bm=Kt,jm=Im,Hm=Pe,Vm=nc,Gm=zm,Wm=Fm.Function,qm=/MSIE .\./.test(Hm)||jm&&function(){var t=Fm.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}(),Xm=function(t,e){var n=e?2:1;return qm?function(i,r){var o=Gm(arguments.length,1)>n,a=Bm(i)?i:Wm(i),s=o?Vm(arguments,n):[],l=o?function(){Um(a,this,s)}:a;return e?t(l,r):t(l)}:t},Ym=Qi,Km=Tt,Zm=Xm(Km.setInterval,!0);Ym({global:!0,bind:!0,forced:Km.setInterval!==Zm},{setInterval:Zm});var Qm=Qi,Jm=Tt,$m=Xm(Jm.setTimeout,!0);Qm({global:!0,bind:!0,forced:Jm.setTimeout!==$m},{setTimeout:$m});var tv=St(Se.setTimeout),ev={exports:{}};!function(t){function e(t){if(t)return function(t){return Object.assign(t,e.prototype),t._callbacks=new Map,t}(t);this._callbacks=new Map}e.prototype.on=function(t,e){var n;const i=null!==(n=this._callbacks.get(t))&&void 0!==n?n:[];return i.push(e),this._callbacks.set(t,i),this},e.prototype.once=function(t,e){var n=this;const i=function(){n.off(t,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];e.apply(n,o)};return i.fn=e,this.on(t,i),this},e.prototype.off=function(t,e){if(void 0===t&&void 0===e)return this._callbacks.clear(),this;if(void 0===e)return this._callbacks.delete(t),this;const n=this._callbacks.get(t);if(n){for(const[t,i]of n.entries())if(i===e||i.fn===e){n.splice(t,1);break}0===n.length?this._callbacks.delete(t):this._callbacks.set(t,n)}return this},e.prototype.emit=function(t){const e=this._callbacks.get(t);if(e){const t=[...e];for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(const e of t)e.apply(this,i)}return this},e.prototype.listeners=function(t){var e;return null!==(e=this._callbacks.get(t))&&void 0!==e?e:[]},e.prototype.listenerCount=function(t){if(t)return this.listeners(t).length;let e=0;for(const n of this._callbacks.values())e+=n.length;return e},e.prototype.hasListeners=function(t){return this.listenerCount(t)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(ev);var nv,iv=St(ev.exports);function rv(){return rv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rv.apply(this,arguments)}function ov(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function av(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}nv="function"!==typeof Object.assign?function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var sv,lv=nv,cv=["","webkit","Moz","MS","ms","o"],uv="undefined"===typeof document?{style:{}}:document.createElement("div"),hv=Math.round,dv=Math.abs,fv=Date.now;function pv(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<cv.length;){if((i=(n=cv[o])?n+r:e)in t)return i;o++}}sv="undefined"===typeof window?{}:window;var gv=pv(uv.style,"touchAction"),mv=void 0!==gv;var vv="compute",yv="auto",bv="manipulation",_v="none",xv="pan-x",wv="pan-y",Sv=function(){if(!mv)return!1;var t={},e=sv.CSS&&sv.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){return t[n]=!e||sv.CSS.supports("touch-action",n)})),t}(),Ev="ontouchstart"in sv,Mv=void 0!==pv(sv,"PointerEvent"),Tv=Ev&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),kv="touch",Cv="mouse",Av=25,Pv=1,Ov=4,Rv=8,Lv=1,Dv=2,Iv=4,Nv=8,zv=16,Fv=Dv|Iv,Uv=Nv|zv,Bv=Fv|Uv,jv=["x","y"],Hv=["clientX","clientY"];function Vv(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function Gv(t,e){return"function"===typeof t?t.apply(e&&e[0]||void 0,e):t}function Wv(t,e){return t.indexOf(e)>-1}var qv=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===vv&&(t=this.compute()),mv&&this.manager.element.style&&Sv[t]&&(this.manager.element.style[gv]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return Vv(this.manager.recognizers,(function(e){Gv(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(Wv(t,_v))return _v;var e=Wv(t,xv),n=Wv(t,wv);return e&&n?_v:e||n?e?xv:wv:Wv(t,bv)?bv:yv}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=Wv(i,_v)&&!Sv[_v],o=Wv(i,wv)&&!Sv[wv],a=Wv(i,xv)&&!Sv[xv];if(r){var s=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(s&&l&&c)return}if(!a||!o)return r||o&&n&Fv||a&&n&Uv?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function Xv(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Yv(t){var e=t.length;if(1===e)return{x:hv(t[0].clientX),y:hv(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:hv(n/e),y:hv(i/e)}}function Kv(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:hv(t.pointers[n].clientX),clientY:hv(t.pointers[n].clientY)},n++;return{timeStamp:fv(),pointers:e,center:Yv(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Zv(t,e,n){n||(n=jv);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function Qv(t,e,n){n||(n=jv);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function Jv(t,e){return t===e?Lv:dv(t)>=dv(e)?t<0?Dv:Iv:e<0?Nv:zv}function $v(t,e,n){return{x:e/t||0,y:n/t||0}}function ty(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=Kv(e)),r>1&&!n.firstMultiple?n.firstMultiple=Kv(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=e.center=Yv(i);e.timeStamp=fv(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Qv(s,l),e.distance=Zv(s,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Pv&&o.eventType!==Ov||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=Jv(e.deltaX,e.deltaY);var c=$v(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=dv(c.x)>dv(c.y)?c.x:c.y,e.scale=a?function(t,e){return Zv(e[0],e[1],Hv)/Zv(t[0],t[1],Hv)}(a.pointers,i):1,e.rotation=a?function(t,e){return Qv(e[1],e[0],Hv)+Qv(t[1],t[0],Hv)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(e.eventType!==Rv&&(s>Av||void 0===a.velocity)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,u=$v(s,l,c);i=u.x,r=u.y,n=dv(u.x)>dv(u.y)?u.x:u.y,o=Jv(l,c),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var u,h=t.element,d=e.srcEvent;Xv(u=d.composedPath?d.composedPath()[0]:d.path?d.path[0]:d.target,h)&&(h=u),e.target=h}function ey(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&Pv&&i-r===0,a=e&(Ov|Rv)&&i-r===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,ty(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function ny(t){return t.trim().split(/\s+/g)}function iy(t,e,n){Vv(ny(e),(function(e){t.addEventListener(e,n,!1)}))}function ry(t,e,n){Vv(ny(e),(function(e){t.removeEventListener(e,n,!1)}))}function oy(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var ay=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){Gv(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&iy(this.element,this.evEl,this.domHandler),this.evTarget&&iy(this.target,this.evTarget,this.domHandler),this.evWin&&iy(oy(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&ry(this.element,this.evEl,this.domHandler),this.evTarget&&ry(this.target,this.evTarget,this.domHandler),this.evWin&&ry(oy(this.element),this.evWin,this.domHandler)},t}();function sy(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}var ly={pointerdown:Pv,pointermove:2,pointerup:Ov,pointercancel:Rv,pointerout:Rv},cy={2:kv,3:"pen",4:Cv,5:"kinect"},uy="pointerdown",hy="pointermove pointerup pointercancel";sv.MSPointerEvent&&!sv.PointerEvent&&(uy="MSPointerDown",hy="MSPointerMove MSPointerUp MSPointerCancel");var dy=function(t){function e(){var n,i=e.prototype;return i.evEl=uy,i.evWin=hy,(n=t.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return ov(e,t),e.prototype.handler=function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=ly[i],o=cy[t.pointerType]||t.pointerType,a=o===kv,s=sy(e,t.pointerId,"pointerId");r&Pv&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):r&(Ov|Rv)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},e}(ay);function fy(t){return Array.prototype.slice.call(t,0)}function py(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];sy(r,a)<0&&i.push(t[o]),r[o]=a,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}var gy={touchstart:Pv,touchmove:2,touchend:Ov,touchcancel:Rv},my=function(t){function e(){var n;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).targetIds={},n}return ov(e,t),e.prototype.handler=function(t){var e=gy[t.type],n=vy.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:kv,srcEvent:t})},e}(ay);function vy(t,e){var n,i,r=fy(t.touches),o=this.targetIds;if(e&(2|Pv)&&1===r.length)return o[r[0].identifier]=!0,[r,r];var a=fy(t.changedTouches),s=[],l=this.target;if(i=r.filter((function(t){return Xv(t.target,l)})),e===Pv)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),e&(Ov|Rv)&&delete o[a[n].identifier],n++;return s.length?[py(i.concat(s),"identifier",!0),s]:void 0}var yy={mousedown:Pv,mousemove:2,mouseup:Ov},by=function(t){function e(){var n,i=e.prototype;return i.evEl="mousedown",i.evWin="mousemove mouseup",(n=t.apply(this,arguments)||this).pressed=!1,n}return ov(e,t),e.prototype.handler=function(t){var e=yy[t.type];e&Pv&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=Ov),this.pressed&&(e&Ov&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Cv,srcEvent:t}))},e}(ay),_y=2500;function xy(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},i=this.lastTouches;this.lastTouches.push(n);setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),_y)}}function wy(t,e){t&Pv?(this.primaryTouch=e.changedPointers[0].identifier,xy.call(this,e)):t&(Ov|Rv)&&xy.call(this,e)}function Sy(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}var Ey=function(){var t=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handler=function(t,e,n){var r=n.pointerType===kv,o=n.pointerType===Cv;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)wy.call(av(av(i)),e,n);else if(o&&Sy.call(av(av(i)),n))return;i.callback(t,e,n)}},i.touch=new my(i.manager,i.handler),i.mouse=new by(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return ov(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(ay);return t}();function My(t,e,n){return!!Array.isArray(t)&&(Vv(t,n[e],n),!0)}var Ty=32,ky=1;function Cy(t,e){var n=e.manager;return n?n.get(t):t}function Ay(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Py=function(){function t(t){void 0===t&&(t={}),this.options=rv({enable:!0},t),this.id=ky++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return lv(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(My(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Cy(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return My(t,"dropRecognizeWith",this)||(t=Cy(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(My(t,"requireFailure",this))return this;var e=this.requireFail;return-1===sy(e,t=Cy(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(My(t,"dropRequireFailure",this))return this;t=Cy(t,this);var e=sy(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+Ay(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+Ay(n))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Ty},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=lv({},t);if(!Gv(this.options.enable,[this,e]))return this.reset(),void(this.state=Ty);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),Oy=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,rv({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}ov(e,t);var n=e.prototype;return n.getTouchAction=function(){return[bv]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),t.eventType&Pv&&0===this.count)return this.failTimeout();if(r&&o&&i){if(t.eventType!==Ov)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||Zv(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.interval),2):8}return Ty},n.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=Ty}),this.options.interval),Ty},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Py),Ry=function(t){function e(e){return void 0===e&&(e={}),t.call(this,rv({pointers:1},e))||this}ov(e,t);var n=e.prototype;return n.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},n.process=function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(n&Rv||!r)?16|e:i||r?n&Ov?8|e:2&e?4|e:2:Ty},e}(Py);function Ly(t){return t===zv?"down":t===Nv?"up":t===Dv?"left":t===Iv?"right":""}var Dy=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,rv({event:"pan",threshold:10,pointers:1,direction:Bv},e))||this).pX=null,n.pY=null,n}ov(e,t);var n=e.prototype;return n.getTouchAction=function(){var t=this.options.direction,e=[];return t&Fv&&e.push(wv),t&Uv&&e.push(xv),e},n.directionTest=function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(e.direction&Fv?(r=0===o?Lv:o<0?Dv:Iv,n=o!==this.pX,i=Math.abs(t.deltaX)):(r=0===a?Lv:a<0?Nv:zv,n=a!==this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},n.attrTest=function(t){return Ry.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},n.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var n=Ly(e.direction);n&&(e.additionalEvent=this.options.event+n),t.prototype.emit.call(this,e)},e}(Ry),Iy=function(t){function e(e){return void 0===e&&(e={}),t.call(this,rv({event:"swipe",threshold:10,velocity:.3,direction:Fv|Uv,pointers:1},e))||this}ov(e,t);var n=e.prototype;return n.getTouchAction=function(){return Dy.prototype.getTouchAction.call(this)},n.attrTest=function(e){var n,i=this.options.direction;return i&(Fv|Uv)?n=e.overallVelocity:i&Fv?n=e.overallVelocityX:i&Uv&&(n=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&dv(n)>this.options.velocity&&e.eventType&Ov},n.emit=function(t){var e=Ly(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Ry),Ny=function(t){function e(e){return void 0===e&&(e={}),t.call(this,rv({event:"pinch",threshold:0,pointers:2},e))||this}ov(e,t);var n=e.prototype;return n.getTouchAction=function(){return[_v]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},n.emit=function(e){if(1!==e.scale){var n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}t.prototype.emit.call(this,e)},e}(Ry),zy=function(t){function e(e){return void 0===e&&(e={}),t.call(this,rv({event:"rotate",threshold:0,pointers:2},e))||this}ov(e,t);var n=e.prototype;return n.getTouchAction=function(){return[_v]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(Ry),Fy=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,rv({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,n._input=null,n}ov(e,t);var n=e.prototype;return n.getTouchAction=function(){return[yv]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!r||!i||t.eventType&(Ov|Rv)&&!o)this.reset();else if(t.eventType&Pv)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.time);else if(t.eventType&Ov)return 8;return Ty},n.reset=function(){clearTimeout(this._timer)},n.emit=function(t){8===this.state&&(t&&t.eventType&Ov?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=fv(),this.manager.emit(this.options.event,this._input)))},e}(Py),Uy={domEvents:!1,touchAction:vv,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},By=[[zy,{enable:!1}],[Ny,{enable:!1},["rotate"]],[Iy,{direction:Fv}],[Dy,{direction:Fv},["swipe"]],[Oy],[Oy,{event:"doubletap",taps:2},["tap"]],[Fy]];function jy(t,e){var n,i=t.element;i.style&&(Vv(t.options.cssProps,(function(r,o){n=pv(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}var Hy=function(){function t(t,e){var n,i=this;this.options=lv({},Uy,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(Mv?dy:Tv?my:Ev?Ey:by))(n,ey),this.touchAction=new qv(this,this.options.touchAction),jy(this,!0),Vv(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return lv(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(e.curRecognizer=n,r=n),o++}},e.get=function(t){if(t instanceof Py)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(My(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(My(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,i=sy(n,e);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return Vv(ny(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return Vv(ny(t),(function(t){e?n[t]&&n[t].splice(sy(n[t],e),1):delete n[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},e.destroy=function(){this.element&&jy(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Vy={touchstart:Pv,touchmove:2,touchend:Ov,touchcancel:Rv},Gy=function(t){function e(){var n,i=e.prototype;return i.evTarget="touchstart",i.evWin="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).started=!1,n}return ov(e,t),e.prototype.handler=function(t){var e=Vy[t.type];if(e===Pv&&(this.started=!0),this.started){var n=Wy.call(this,t,e);e&(Ov|Rv)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:kv,srcEvent:t})}},e}(ay);function Wy(t,e){var n=fy(t.touches),i=fy(t.changedTouches);return e&(Ov|Rv)&&(n=py(n.concat(i),"identifier",!0)),[n,i]}function qy(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),t.apply(this,arguments)}}var Xy=qy((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),Yy=qy((function(t,e){return Xy(t,e,!0)}),"merge","Use `assign`.");function Ky(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&lv(i,n)}function Zy(t,e){return function(){return t.apply(e,arguments)}}var Qy=function(){var t=function(t,e){return void 0===e&&(e={}),new Hy(t,rv({recognizers:By.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Bv,t.DIRECTION_DOWN=zv,t.DIRECTION_LEFT=Dv,t.DIRECTION_RIGHT=Iv,t.DIRECTION_UP=Nv,t.DIRECTION_HORIZONTAL=Fv,t.DIRECTION_VERTICAL=Uv,t.DIRECTION_NONE=Lv,t.DIRECTION_DOWN=zv,t.INPUT_START=Pv,t.INPUT_MOVE=2,t.INPUT_END=Ov,t.INPUT_CANCEL=Rv,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=Ty,t.Manager=Hy,t.Input=ay,t.TouchAction=qv,t.TouchInput=my,t.MouseInput=by,t.PointerEventInput=dy,t.TouchMouseInput=Ey,t.SingleTouchInput=Gy,t.Recognizer=Py,t.AttrRecognizer=Ry,t.Tap=Oy,t.Pan=Dy,t.Swipe=Iy,t.Pinch=Ny,t.Rotate=zy,t.Press=Fy,t.on=iy,t.off=ry,t.each=Vv,t.merge=Yy,t.extend=Xy,t.bindFn=Zy,t.assign=lv,t.inherit=Ky,t.bindFn=Zy,t.prefixed=pv,t.toArray=fy,t.inArray=sy,t.uniqueArray=py,t.splitStr=ny,t.boolOrFn=Gv,t.hasParent=Xv,t.addEventListeners=iy,t.removeEventListeners=ry,t.defaults=lv({},Uy,{preset:By}),t}(),Jy=Qy;function $y(t,e){var n="undefined"!==typeof eg&&cp(t)||t["@@iterator"];if(!n){if(mg(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return tb(t,e);var i=lg(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return ap(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tb(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function tb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var eb=eg("DELETE");function nb(){var t=ib.apply(void 0,arguments);return ob(t),t}function ib(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length<2)return e[0];var i;if(e.length>2)return ib.apply(void 0,sg(i=[nb(e[0],e[1])]).call(i,tg(lg(e).call(e,2))));var r=e[0],o=e[1];if(r instanceof Date&&o instanceof Date)return r.setTime(o.getTime()),r;var a,s=$y(gg(o));try{for(s.s();!(a=s.n()).done;){var l=a.value;Object.prototype.propertyIsEnumerable.call(o,l)&&(o[l]===eb?delete r[l]:null===r[l]||null===o[l]||"object"!==typeof r[l]||"object"!==typeof o[l]||mg(r[l])||mg(o[l])?r[l]=rb(o[l]):r[l]=ib(r[l],o[l]))}}catch(c){s.e(c)}finally{s.f()}return r}function rb(t){return mg(t)?lf(t).call(t,(function(t){return rb(t)})):"object"===typeof t&&null!==t?t instanceof Date?new Date(t.getTime()):ib({},t):t}function ob(t){for(var e=0,n=bg(t);e<n.length;e++){var i=n[e];t[i]===eb?delete t[i]:"object"===typeof t[i]&&null!==t[i]&&ob(t[i])}}var ab="undefined"!==typeof window?window.Hammer||Jy:function(){return function(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:()=>({set:t})}}()};function sb(t){var e,n=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)}));var i=ab(this._dom.overlay);i.on("tap",Pd(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){i.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Pg(r).call(r,(function(t){i.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",n._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&n.deactivate()}}iv(sb.prototype),sb.current=null,sb.prototype.destroy=function(){var t,e;this.deactivate();var n,i=$y(jg(t=cm(e=this._cleanupQueue).call(e,0)).call(t));try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(r){i.e(r)}finally{i.f()}},sb.prototype.activate=function(){sb.current&&sb.current.deactivate(),sb.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},sb.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},sb.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var lb=Kr,cb=Ke,ub=TypeError,hb=function(t){if(lb(t))return t;throw new ub(cb(t)+" is not a constructor")},db=Qi,fb=Lt,pb=bd,gb=hb,mb=Mi,vb=we,yb=ma,bb=kt,_b=Ce("Reflect","construct"),xb=Object.prototype,wb=[].push,Sb=bb((function(){function t(){}return!(_b((function(){}),[],t)instanceof t)})),Eb=!bb((function(){_b((function(){}))})),Mb=Sb||Eb;db({target:"Reflect",stat:!0,forced:Mb,sham:Mb},{construct:function(t,e){gb(t),mb(e);var n=arguments.length<3?t:gb(arguments[2]);if(Eb&&!Sb)return _b(t,e,n);if(t===n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return fb(wb,i,e),new(fb(pb,t,i))}var r=n.prototype,o=yb(vb(r)?r:xb),a=fb(t,o,e);return vb(a)?a:o}});var Tb=St(Se.Reflect.construct),kb=St(Se.Object.getOwnPropertySymbols),Cb={exports:{}},Ab=Qi,Pb=kt,Ob=be,Rb=Zt.f,Lb=Qt;Ab({target:"Object",stat:!0,forced:!Lb||Pb((function(){Rb(1)})),sham:!Lb},{getOwnPropertyDescriptor:function(t,e){return Rb(Ob(t),e)}});var Db=Se.Object,Ib=Cb.exports=function(t,e){return Db.getOwnPropertyDescriptor(t,e)};Db.getOwnPropertyDescriptor.sham&&(Ib.sham=!0);var Nb=St(Cb.exports),zb=pg,Fb=be,Ub=Zt,Bb=wr;Qi({target:"Object",stat:!0,sham:!Qt},{getOwnPropertyDescriptors:function(t){for(var e,n,i=Fb(t),r=Ub.f,o=zb(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&Bb(a,e,n);return a}});var jb=St(Se.Object.getOwnPropertyDescriptors),Hb={exports:{}},Vb=Qi,Gb=Qt,Wb=Mo.f;Vb({target:"Object",stat:!0,forced:Object.defineProperties!==Wb,sham:!Gb},{defineProperties:Wb});var qb=Se.Object,Xb=Hb.exports=function(t,e){return qb.defineProperties(t,e)};qb.defineProperties.sham&&(Xb.sham=!0);var Yb=St(Hb.exports),Kb=St(ir);function Zb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Qb=Pm,Jb=St(Qb);Qi({target:"Object",stat:!0},{setPrototypeOf:Cu});var $b=Se.Object.setPrototypeOf,t_=St($b),e_=St(Ad);function n_(t,e){var n;return n_=t_?e_(n=t_).call(n):function(t,e){return t.__proto__=e,t},n_(t,e)}function i_(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Jb(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),or(t,"prototype",{writable:!1}),e&&n_(t,e)}function r_(t,e){if(e&&("object"===id(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zb(t)}var o_=Cm,a_=St(o_);function s_(t){var e;return s_=t_?e_(e=a_).call(e):function(t){return t.__proto__||a_(t)},s_(t)}var l_={exports:{}},c_={exports:{}};!function(t){var e=Nh,n=ed;function i(r){return t.exports=i="function"==typeof e&&"symbol"==typeof n?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,i(r)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(c_);var u_=c_.exports,h_=Ag,d_=xn,f_=pg,p_=Zt,g_=_i,m_=we,v_=Ui,y_=Error,b_=Ft("".replace),__=String(new y_("zxcasd").stack),x_=/\n\s*at [^:]*:[^\n]*/,w_=x_.test(__),S_=se,E_=!kt((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",S_(1,7)),7!==t.stack)})),M_=Ui,T_=function(t,e){if(w_&&"string"==typeof t&&!y_.prepareStackTrace)for(;e--;)t=b_(t,x_,"");return t},k_=E_,C_=Error.captureStackTrace,A_=bi,P_=te,O_=Mi,R_=Ke,L_=Cf,D_=mr,I_=Ae,N_=jf,z_=Df,F_=wf,U_=TypeError,B_=function(t,e){this.stopped=t,this.result=e},j_=B_.prototype,H_=function(t,e,n){var i,r,o,a,s,l,c,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),g=A_(e,u),m=function(t){return i&&F_(i,"normal",t),new B_(!0,t)},v=function(t){return h?(O_(t),p?g(t[0],t[1],m):g(t[0],t[1])):p?g(t,m):g(t)};if(d)i=t.iterator;else if(f)i=t;else{if(!(r=z_(t)))throw new U_(R_(t)+" is not iterable");if(L_(r)){for(o=0,a=D_(t);a>o;o++)if((s=v(t[o]))&&I_(j_,s))return s;return new B_(!1)}i=N_(t,r)}for(l=d?t.next:i.next;!(c=P_(l,i)).done;){try{s=v(c.value)}catch(ROt){F_(i,"throw",ROt)}if("object"==typeof s&&s&&I_(j_,s))return s}return new B_(!1)},V_=Eo,G_=Qi,W_=Ae,q_=iu,X_=Cu,Y_=function(t,e,n){for(var i=f_(e),r=g_.f,o=p_.f,a=0;a<i.length;a++){var s=i[a];d_(t,s)||n&&d_(n,s)||r(t,s,o(e,s))}},K_=ma,Z_=Ui,Q_=se,J_=function(t,e){m_(e)&&"cause"in e&&v_(t,"cause",e.cause)},$_=function(t,e,n,i){k_&&(C_?C_(t,e):M_(t,"stack",T_(n,i)))},tx=H_,ex=function(t,e){return void 0===t?arguments.length<2?"":e:V_(t)},nx=In("toStringTag"),ix=Error,rx=[].push,ox=function(t,e){var n,i=W_(ax,this);X_?n=X_(new ix,i?q_(this):ax):(n=i?this:K_(ax),Z_(n,nx,"Error")),void 0!==e&&Z_(n,"message",ex(e)),$_(n,ox,n.stack,1),arguments.length>2&&J_(n,arguments[2]);var r=[];return tx(t,rx,{that:r}),Z_(n,"errors",r),n};X_?X_(ox,ix):Y_(ox,ix,{name:!0});var ax=ox.prototype=K_(ix.prototype,{constructor:Q_(1,ox),message:Q_(1,""),name:Q_(1,"AggregateError")});G_({global:!0,constructor:!0,arity:2},{AggregateError:ox});var sx,lx,cx,ux,hx=Ce,dx=Na,fx=Qt,px=In("species"),gx=function(t){var e=hx(t);fx&&e&&!e[px]&&dx(e,px,{configurable:!0,get:function(){return this}})},mx=Ae,vx=TypeError,yx=function(t,e){if(mx(e,t))return t;throw new vx("Incorrect invocation")},bx=Mi,_x=hb,xx=fe,wx=In("species"),Sx=function(t,e){var n,i=bx(t).constructor;return void 0===i||xx(n=bx(i)[wx])?e:_x(n)},Ex=/(?:ipad|iphone|ipod).*applewebkit/i.test(Pe),Mx=Tt,Tx=Lt,kx=bi,Cx=Kt,Ax=xn,Px=kt,Ox=$o,Rx=nc,Lx=Kn,Dx=zm,Ix=Ex,Nx=Bd,zx=Mx.setImmediate,Fx=Mx.clearImmediate,Ux=Mx.process,Bx=Mx.Dispatch,jx=Mx.Function,Hx=Mx.MessageChannel,Vx=Mx.String,Gx=0,Wx={},qx="onreadystatechange";Px((function(){sx=Mx.location}));var Xx=function(t){if(Ax(Wx,t)){var e=Wx[t];delete Wx[t],e()}},Yx=function(t){return function(){Xx(t)}},Kx=function(t){Xx(t.data)},Zx=function(t){Mx.postMessage(Vx(t),sx.protocol+"//"+sx.host)};zx&&Fx||(zx=function(t){Dx(arguments.length,1);var e=Cx(t)?t:jx(t),n=Rx(arguments,1);return Wx[++Gx]=function(){Tx(e,void 0,n)},lx(Gx),Gx},Fx=function(t){delete Wx[t]},Nx?lx=function(t){Ux.nextTick(Yx(t))}:Bx&&Bx.now?lx=function(t){Bx.now(Yx(t))}:Hx&&!Ix?(ux=(cx=new Hx).port2,cx.port1.onmessage=Kx,lx=kx(ux.postMessage,ux)):Mx.addEventListener&&Cx(Mx.postMessage)&&!Mx.importScripts&&sx&&"file:"!==sx.protocol&&!Px(Zx)?(lx=Zx,Mx.addEventListener("message",Kx,!1)):lx=qx in Lx("script")?function(t){Ox.appendChild(Lx("script"))[qx]=function(){Ox.removeChild(this),Xx(t)}}:function(t){setTimeout(Yx(t),0)});var Qx={set:zx,clear:Fx},Jx=function(){this.head=null,this.tail=null};Jx.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var $x,tw,ew,nw,iw,rw=Jx,ow=/ipad|iphone|ipod/i.test(Pe)&&"undefined"!=typeof Pebble,aw=/web0s(?!.*chrome)/i.test(Pe),sw=Tt,lw=bi,cw=Zt.f,uw=Qx.set,hw=rw,dw=Ex,fw=ow,pw=aw,gw=Bd,mw=sw.MutationObserver||sw.WebKitMutationObserver,vw=sw.document,yw=sw.process,bw=sw.Promise,_w=cw(sw,"queueMicrotask"),xw=_w&&_w.value;if(!xw){var ww=new hw,Sw=function(){var t,e;for(gw&&(t=yw.domain)&&t.exit();e=ww.get();)try{e()}catch(ROt){throw ww.head&&$x(),ROt}t&&t.enter()};dw||gw||pw||!mw||!vw?!fw&&bw&&bw.resolve?((nw=bw.resolve(void 0)).constructor=bw,iw=lw(nw.then,nw),$x=function(){iw(Sw)}):gw?$x=function(){yw.nextTick(Sw)}:(uw=lw(uw,sw),$x=function(){uw(Sw)}):(tw=!0,ew=vw.createTextNode(""),new mw(Sw).observe(ew,{characterData:!0}),$x=function(){ew.data=tw=!tw}),xw=function(t){ww.head||$x(),ww.add(t)}}var Ew=xw,Mw=function(t){try{return{error:!1,value:t()}}catch(ROt){return{error:!0,value:ROt}}},Tw=Tt.Promise,kw="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Cw=!kw&&!Bd&&"object"==typeof window&&"object"==typeof document,Aw=Tt,Pw=Tw,Ow=Kt,Rw=gi,Lw=Ir,Dw=In,Iw=Cw,Nw=kw,zw=ze,Fw=Pw&&Pw.prototype,Uw=Dw("species"),Bw=!1,jw=Ow(Aw.PromiseRejectionEvent),Hw=Rw("Promise",(function(){var t=Lw(Pw),e=t!==String(Pw);if(!e&&66===zw)return!0;if(!Fw.catch||!Fw.finally)return!0;if(!zw||zw<51||!/native code/.test(t)){var n=new Pw((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};if((n.constructor={})[Uw]=i,!(Bw=n.then((function(){}))instanceof i))return!0}return!e&&(Iw||Nw)&&!jw})),Vw={CONSTRUCTOR:Hw,REJECTION_EVENT:jw,SUBCLASSING:Bw},Gw={},Ww=$e,qw=TypeError,Xw=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw new qw("Bad Promise constructor");e=t,n=i})),this.resolve=Ww(e),this.reject=Ww(n)};Gw.f=function(t){return new Xw(t)};var Yw,Kw,Zw=Qi,Qw=Bd,Jw=Tt,$w=te,tS=Da,eS=as,nS=gx,iS=$e,rS=Kt,oS=we,aS=yx,sS=Sx,lS=Qx.set,cS=Ew,uS=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(ROt){}},hS=Mw,dS=rw,fS=ws,pS=Tw,gS=Vw,mS=Gw,vS="Promise",yS=gS.CONSTRUCTOR,bS=gS.REJECTION_EVENT,_S=fS.getterFor(vS),xS=fS.set,wS=pS&&pS.prototype,SS=pS,ES=wS,MS=Jw.TypeError,TS=Jw.document,kS=Jw.process,CS=mS.f,AS=CS,PS=!!(TS&&TS.createEvent&&Jw.dispatchEvent),OS="unhandledrejection",RS=function(t){var e;return!(!oS(t)||!rS(e=t.then))&&e},LS=function(t,e){var n,i,r,o=e.value,a=1===e.state,s=a?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(a||(2===e.rejection&&FS(e),e.rejection=1),!0===s?n=o:(u&&u.enter(),n=s(o),u&&(u.exit(),r=!0)),n===t.promise?c(new MS("Promise-chain cycle")):(i=RS(n))?$w(i,n,l,c):l(n)):c(o)}catch(ROt){u&&!r&&u.exit(),c(ROt)}},DS=function(t,e){t.notified||(t.notified=!0,cS((function(){for(var n,i=t.reactions;n=i.get();)LS(n,t);t.notified=!1,e&&!t.rejection&&NS(t)})))},IS=function(t,e,n){var i,r;PS?((i=TS.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),Jw.dispatchEvent(i)):i={promise:e,reason:n},!bS&&(r=Jw["on"+t])?r(i):t===OS&&uS("Unhandled promise rejection",n)},NS=function(t){$w(lS,Jw,(function(){var e,n=t.facade,i=t.value;if(zS(t)&&(e=hS((function(){Qw?kS.emit("unhandledRejection",i,n):IS(OS,n,i)})),t.rejection=Qw||zS(t)?2:1,e.error))throw e.value}))},zS=function(t){return 1!==t.rejection&&!t.parent},FS=function(t){$w(lS,Jw,(function(){var e=t.facade;Qw?kS.emit("rejectionHandled",e):IS("rejectionhandled",e,t.value)}))},US=function(t,e,n){return function(i){t(e,i,n)}},BS=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,DS(t,!0))},jS=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new MS("Promise can't be resolved itself");var i=RS(e);i?cS((function(){var n={done:!1};try{$w(i,e,US(jS,n,t),US(BS,n,t))}catch(ROt){BS(n,ROt,t)}})):(t.value=e,t.state=1,DS(t,!1))}catch(ROt){BS({done:!1},ROt,t)}}};yS&&(ES=(SS=function(t){aS(this,ES),iS(t),$w(Yw,this);var e=_S(this);try{t(US(jS,e),US(BS,e))}catch(ROt){BS(e,ROt)}}).prototype,(Yw=function(t){xS(this,{type:vS,done:!1,notified:!1,parent:!1,reactions:new dS,rejection:!1,state:0,value:void 0})}).prototype=tS(ES,"then",(function(t,e){var n=_S(this),i=CS(sS(this,SS));return n.parent=!0,i.ok=!rS(t)||t,i.fail=rS(e)&&e,i.domain=Qw?kS.domain:void 0,0===n.state?n.reactions.add(i):cS((function(){LS(i,n)})),i.promise})),Kw=function(){var t=new Yw,e=_S(t);this.promise=t,this.resolve=US(jS,e),this.reject=US(BS,e)},mS.f=CS=function(t){return t===SS||undefined===t?new Kw(t):AS(t)}),Zw({global:!0,constructor:!0,wrap:!0,forced:yS},{Promise:SS}),eS(SS,vS,!1,!0),nS(vS);var HS=Tw,VS=Vw.CONSTRUCTOR||!ip((function(t){HS.all(t).then(void 0,(function(){}))})),GS=te,WS=$e,qS=Gw,XS=Mw,YS=H_;Qi({target:"Promise",stat:!0,forced:VS},{all:function(t){var e=this,n=qS.f(e),i=n.resolve,r=n.reject,o=XS((function(){var n=WS(e.resolve),o=[],a=0,s=1;YS(t,(function(t){var l=a++,c=!1;s++,GS(n,e,t).then((function(t){c||(c=!0,o[l]=t,--s||i(o))}),r)})),--s||i(o)}));return o.error&&r(o.value),n.promise}});var KS=Qi,ZS=Vw.CONSTRUCTOR;Tw&&Tw.prototype,KS({target:"Promise",proto:!0,forced:ZS,real:!0},{catch:function(t){return this.then(void 0,t)}});var QS=te,JS=$e,$S=Gw,tE=Mw,eE=H_;Qi({target:"Promise",stat:!0,forced:VS},{race:function(t){var e=this,n=$S.f(e),i=n.reject,r=tE((function(){var r=JS(e.resolve);eE(t,(function(t){QS(r,e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var nE=te,iE=Gw;Qi({target:"Promise",stat:!0,forced:Vw.CONSTRUCTOR},{reject:function(t){var e=iE.f(this);return nE(e.reject,void 0,t),e.promise}});var rE=Mi,oE=we,aE=Gw,sE=function(t,e){if(rE(t),oE(e)&&e.constructor===t)return e;var n=aE.f(t);return(0,n.resolve)(e),n.promise},lE=Qi,cE=Tw,uE=Vw.CONSTRUCTOR,hE=sE,dE=Ce("Promise"),fE=!uE;lE({target:"Promise",stat:!0,forced:true},{resolve:function(t){return hE(fE&&this===dE?cE:this,t)}});var pE=te,gE=$e,mE=Gw,vE=Mw,yE=H_;Qi({target:"Promise",stat:!0,forced:VS},{allSettled:function(t){var e=this,n=mE.f(e),i=n.resolve,r=n.reject,o=vE((function(){var n=gE(e.resolve),r=[],o=0,a=1;yE(t,(function(t){var s=o++,l=!1;a++,pE(n,e,t).then((function(t){l||(l=!0,r[s]={status:"fulfilled",value:t},--a||i(r))}),(function(t){l||(l=!0,r[s]={status:"rejected",reason:t},--a||i(r))}))})),--a||i(r)}));return o.error&&r(o.value),n.promise}});var bE=te,_E=$e,xE=Ce,wE=Gw,SE=Mw,EE=H_,ME="No one promise resolved";Qi({target:"Promise",stat:!0,forced:VS},{any:function(t){var e=this,n=xE("AggregateError"),i=wE.f(e),r=i.resolve,o=i.reject,a=SE((function(){var i=_E(e.resolve),a=[],s=0,l=1,c=!1;EE(t,(function(t){var u=s++,h=!1;l++,bE(i,e,t).then((function(t){h||c||(c=!0,r(t))}),(function(t){h||c||(h=!0,a[u]=t,--l||o(new n(a,ME)))}))})),--l||o(new n(a,ME))}));return a.error&&o(a.value),i.promise}});var TE=Qi,kE=Tw,CE=kt,AE=Ce,PE=Kt,OE=Sx,RE=sE,LE=kE&&kE.prototype;TE({target:"Promise",proto:!0,real:!0,forced:!!kE&&CE((function(){LE.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=OE(this,AE("Promise")),n=PE(t);return this.then(n?function(n){return RE(e,t()).then((function(){return n}))}:t,n?function(n){return RE(e,t()).then((function(){throw n}))}:t)}});var DE=Se.Promise,IE=Gw;Qi({target:"Promise",stat:!0},{withResolvers:function(){var t=IE.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});var NE=DE,zE=Gw,FE=Mw;Qi({target:"Promise",stat:!0,forced:!0},{try:function(t){var e=zE.f(this),n=FE(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var UE=NE,BE=Bg;!function(t){var e=u_.default,n=rr,i=Nh,r=Qb,o=o_,a=h_,s=Tp,l=$b,c=UE,u=BE,h=Yp;function d(){t.exports=d=function(){return p},t.exports.__esModule=!0,t.exports.default=t.exports;var f,p={},g=Object.prototype,m=g.hasOwnProperty,v=n||function(t,e,n){t[e]=n.value},y="function"==typeof i?i:{},b=y.iterator||"@@iterator",_=y.asyncIterator||"@@asyncIterator",x=y.toStringTag||"@@toStringTag";function w(t,e,i){return n(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{w({},"")}catch(f){w=function(t,e,n){return t[e]=n}}function S(t,e,n,i){var o=e&&e.prototype instanceof P?e:P,a=r(o.prototype),s=new H(i||[]);return v(a,"_invoke",{value:F(t,n,s)}),a}function E(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}p.wrap=S;var M="suspendedStart",T="suspendedYield",k="executing",C="completed",A={};function P(){}function O(){}function R(){}var L={};w(L,b,(function(){return this}));var D=o&&o(o(V([])));D&&D!==g&&m.call(D,b)&&(L=D);var I=R.prototype=P.prototype=r(L);function N(t){var e;a(e=["next","throw","return"]).call(e,(function(e){w(t,e,(function(t){return this._invoke(e,t)}))}))}function z(t,n){function i(r,o,a,s){var l=E(t[r],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==e(u)&&m.call(u,"__await")?n.resolve(u.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):n.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var r;v(this,"_invoke",{value:function(t,e){function o(){return new n((function(n,r){i(t,e,n,r)}))}return r=r?r.then(o,o):o()}})}function F(t,e,n){var i=M;return function(r,o){if(i===k)throw new Error("Generator is already running");if(i===C){if("throw"===r)throw o;return{value:f,done:!0}}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=U(a,n);if(s){if(s===A)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===M)throw i=C,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=k;var l=E(t,e,n);if("normal"===l.type){if(i=n.done?C:T,l.arg===A)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=C,n.method="throw",n.arg=l.arg)}}}function U(t,e){var n=e.method,i=t.iterator[n];if(i===f)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=f,U(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),A;var r=E(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,A;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=f),e.delegate=null,A):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function B(t){var e,n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),s(e=this.tryEntries).call(e,n)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function H(t){this.tryEntries=[{tryLoc:"root"}],a(t).call(t,B,this),this.reset(!0)}function V(t){if(t||""===t){var n=t[b];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(m.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=f,e.done=!0,e};return r.next=r}}throw new TypeError(e(t)+" is not iterable")}return O.prototype=R,v(I,"constructor",{value:R,configurable:!0}),v(R,"constructor",{value:O,configurable:!0}),O.displayName=w(R,x,"GeneratorFunction"),p.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===O||"GeneratorFunction"===(e.displayName||e.name))},p.mark=function(t){return l?l(t,R):(t.__proto__=R,w(t,x,"GeneratorFunction")),t.prototype=r(I),t},p.awrap=function(t){return{__await:t}},N(z.prototype),w(z.prototype,_,(function(){return this})),p.AsyncIterator=z,p.async=function(t,e,n,i,r){void 0===r&&(r=c);var o=new z(S(t,e,n,i),r);return p.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},N(I),w(I,x,"Generator"),w(I,b,(function(){return this})),w(I,"toString",(function(){return"[object Generator]"})),p.keys=function(t){var e=Object(t),n=[];for(var i in e)s(n).call(n,i);return u(n).call(n),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},p.values=V,H.prototype={constructor:H,reset:function(t){var e;if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,a(e=this.tryEntries).call(e,j),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+h(n).call(n,1))&&(this[n]=f)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return o.type="throw",o.arg=t,e.next=n,i&&(e.method="next",e.arg=f),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=m.call(r,"catchLoc"),s=m.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&m.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,A):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;j(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:V(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=f),A}},p}t.exports=d,t.exports.__esModule=!0,t.exports.default=t.exports}(l_);var jE=(0,l_.exports)(),HE=jE;try{regeneratorRuntime=jE}catch(LOt){"object"===typeof globalThis?globalThis.regeneratorRuntime=jE:Function("r","regeneratorRuntime = r")(jE)}var VE=St(HE),GE={exports:{}},WE=kt((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),qE=kt,XE=we,YE=Ht,KE=WE,ZE=Object.isExtensible,QE=qE((function(){ZE(1)}))||KE?function(t){return!!XE(t)&&((!KE||"ArrayBuffer"!==YE(t))&&(!ZE||ZE(t)))}:ZE,JE=!kt((function(){return Object.isExtensible(Object.preventExtensions({}))})),$E=Qi,tM=Ft,eM=Io,nM=we,iM=xn,rM=_i.f,oM=va,aM=_a,sM=QE,lM=JE,cM=!1,uM=Tn("meta"),hM=0,dM=function(t){rM(t,uM,{value:{objectID:"O"+hM++,weakData:{}}})},fM=GE.exports={enable:function(){fM.enable=function(){},cM=!0;var t=oM.f,e=tM([].splice),n={};n[uM]=1,t(n).length&&(oM.f=function(n){for(var i=t(n),r=0,o=i.length;r<o;r++)if(i[r]===uM){e(i,r,1);break}return i},$E({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:aM.f}))},fastKey:function(t,e){if(!nM(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!iM(t,uM)){if(!sM(t))return"F";if(!e)return"E";dM(t)}return t[uM].objectID},getWeakData:function(t,e){if(!iM(t,uM)){if(!sM(t))return!0;if(!e)return!1;dM(t)}return t[uM].weakData},onFreeze:function(t){return lM&&cM&&sM(t)&&!iM(t,uM)&&dM(t),t}};eM[uM]=!0;var pM=GE.exports,gM=Qi,mM=Tt,vM=pM,yM=kt,bM=Ui,_M=H_,xM=yx,wM=Kt,SM=we,EM=fe,MM=as,TM=_i.f,kM=Ps.forEach,CM=Qt,AM=ws.set,PM=ws.getterFor,OM=function(t,e,n){var i,r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),a=r?"set":"add",s=mM[t],l=s&&s.prototype,c={};if(CM&&wM(s)&&(o||l.forEach&&!yM((function(){(new s).entries().next()})))){var u=(i=e((function(e,n){AM(xM(e,u),{type:t,collection:new s}),EM(n)||_M(n,e[a],{that:e,AS_ENTRIES:r})}))).prototype,h=PM(t);kM(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in l)||o&&"clear"===t||bM(u,t,(function(n,i){var r=h(this).collection;if(!e&&o&&!SM(n))return"get"===t&&void 0;var a=r[t](0===n?0:n,i);return e?this:a}))})),o||TM(u,"size",{configurable:!0,get:function(){return h(this).collection.size}})}else i=n.getConstructor(e,t,r,a),vM.enable();return MM(i,t,!1,!0),c[t]=i,gM({global:!0,forced:!0},c),o||n.setStrong(i,t,r),i},RM=Da,LM=ma,DM=Na,IM=function(t,e,n){for(var i in e)n&&n.unsafe&&t[i]?t[i]=e[i]:RM(t,i,e[i],n);return t},NM=bi,zM=yx,FM=fe,UM=H_,BM=Wu,jM=qu,HM=gx,VM=Qt,GM=pM.fastKey,WM=ws.set,qM=ws.getterFor,XM={getConstructor:function(t,e,n,i){var r=t((function(t,r){zM(t,o),WM(t,{type:e,index:LM(null),first:void 0,last:void 0,size:0}),VM||(t.size=0),FM(r)||UM(r,t[i],{that:t,AS_ENTRIES:n})})),o=r.prototype,a=qM(e),s=function(t,e,n){var i,r,o=a(t),s=l(t,e);return s?s.value=n:(o.last=s={index:r=GM(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=s),i&&(i.next=s),VM?o.size++:t.size++,"F"!==r&&(o.index[r]=s)),t},l=function(t,e){var n,i=a(t),r=GM(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key===e)return n};return IM(o,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,VM?t.size=0:this.size=0},delete:function(t){var e=this,n=a(e),i=l(e,t);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first===i&&(n.first=r),n.last===i&&(n.last=o),VM?n.size--:e.size--}return!!i},forEach:function(t){for(var e,n=a(this),i=NM(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),IM(o,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),VM&&DM(o,"size",{configurable:!0,get:function(){return a(this).size}}),r},setStrong:function(t,e,n){var i=e+" Iterator",r=qM(e),o=qM(i);BM(t,e,(function(t,e){WM(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?jM("keys"===e?n.key:"values"===e?n.value:[n.key,n.value],!1):(t.target=void 0,jM(void 0,!0))}),n?"entries":"values",!n,!0),HM(e)}};OM("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),XM);var YM=St(Se.Map),KM=Ps.some;Qi({target:"Array",proto:!0,forced:!Ud("some")},{some:function(t){return KM(this,t,arguments.length>1?arguments[1]:void 0)}});var ZM=Sd("Array","some"),QM=Ae,JM=ZM,$M=Array.prototype,tT=function(t){var e=t.some;return t===$M||QM($M,t)&&e===$M.some?JM:e},eT=St(tT),nT=Sd("Array","keys"),iT=Or,rT=xn,oT=Ae,aT=nT,sT=Array.prototype,lT={DOMTokenList:!0,NodeList:!0},cT=function(t){var e=t.keys;return t===sT||oT(sT,t)&&e===sT.keys||rT(lT,iT(t))?aT:e},uT=St(cT),hT=Ta,dT=Math.floor,fT=function(t,e){var n=t.length,i=dT(n/2);return n<8?pT(t,e):gT(t,fT(hT(t,0,i),e),fT(hT(t,i),e),e)},pT=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},gT=function(t,e,n,i){for(var r=e.length,o=n.length,a=0,s=0;a<r||s<o;)t[a+s]=a<r&&s<o?i(e[a],n[s])<=0?e[a++]:n[s++]:a<r?e[a++]:n[s++];return t},mT=fT,vT=Pe.match(/firefox\/(\d+)/i),yT=!!vT&&+vT[1],bT=/MSIE|Trident/.test(Pe),_T=Pe.match(/AppleWebKit\/(\d+)\./),xT=!!_T&&+_T[1],wT=Qi,ST=Ft,ET=$e,MT=yn,TT=mr,kT=Gg,CT=Eo,AT=kt,PT=mT,OT=Ud,RT=yT,LT=bT,DT=ze,IT=xT,NT=[],zT=ST(NT.sort),FT=ST(NT.push),UT=AT((function(){NT.sort(void 0)})),BT=AT((function(){NT.sort(null)})),jT=OT("sort"),HT=!AT((function(){if(DT)return DT<70;if(!(RT&&RT>3)){if(LT)return!0;if(IT)return IT<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)NT.push({k:e+i,v:n})}for(NT.sort((function(t,e){return e.v-t.v})),i=0;i<NT.length;i++)e=NT[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));wT({target:"Array",proto:!0,forced:UT||!BT||!jT||!HT},{sort:function(t){void 0!==t&&ET(t);var e=MT(this);if(HT)return void 0===t?zT(e):zT(e,t);var n,i,r=[],o=TT(e);for(i=0;i<o;i++)i in e&&FT(r,e[i]);for(PT(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:CT(e)>CT(n)?1:-1}}(t)),n=TT(r),i=0;i<n;)e[i]=r[i++];for(;i<o;)kT(e,i++);return e}});var VT=Sd("Array","sort"),GT=Ae,WT=VT,qT=Array.prototype,XT=function(t){var e=t.sort;return t===qT||GT(qT,t)&&e===qT.sort?WT:e},YT=St(XT),KT=Sd("Array","values"),ZT=Or,QT=xn,JT=Ae,$T=KT,tk=Array.prototype,ek={DOMTokenList:!0,NodeList:!0},nk=function(t){var e=t.values;return t===tk||JT(tk,t)&&e===tk.values||QT(ek,ZT(t))?$T:e},ik=St(nk),rk=St(td),ok=Sd("Array","entries"),ak=Or,sk=xn,lk=Ae,ck=ok,uk=Array.prototype,hk={DOMTokenList:!0,NodeList:!0},dk=function(t){var e=t.entries;return t===uk||lk(uk,t)&&e===uk.entries||sk(hk,ak(t))?ck:e},fk=St(dk);let pk;const gk=new Uint8Array(16);function mk(){if(!pk&&(pk="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pk(gk)}const vk=[];for(let n=0;n<256;++n)vk.push((n+256).toString(16).slice(1));var yk={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function bk(t,e,n){if(yk.randomUUID&&!e&&!t)return yk.randomUUID();const i=(t=t||{}).random||(t.rng||mk)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return vk[t[e+0]]+vk[t[e+1]]+vk[t[e+2]]+vk[t[e+3]]+"-"+vk[t[e+4]]+vk[t[e+5]]+"-"+vk[t[e+6]]+vk[t[e+7]]+"-"+vk[t[e+8]]+vk[t[e+9]]+"-"+vk[t[e+10]]+vk[t[e+11]]+vk[t[e+12]]+vk[t[e+13]]+vk[t[e+14]]+vk[t[e+15]]}(i)}function _k(t){return"string"===typeof t||"number"===typeof t}var xk=function(){function t(e){xt(this,t),ld(this,"_queue",[]),ld(this,"_timeout",null),ld(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}return sd(t,[{key:"setOptions",value:function(t){t&&"undefined"!==typeof t.delay&&(this.delay=t.delay),t&&"undefined"!==typeof t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,n=0;n<e.length;n++){var i=e[n];i.original?t[i.name]=i.original:delete t[i.name]}this._extended=null}}},{key:"replace",value:function(t,e){var n=this,i=t[e];if(!i)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.queue({args:e,fn:i,context:this})}}},{key:"queue",value:function(t){"function"===typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"===typeof this.delay&&(this._timeout=tv((function(){t.flush()}),this.delay))}},{key:"flush",value:function(){var t,e;Pg(t=cm(e=this._queue).call(e,0)).call(t,(function(t){t.fn.apply(t.context||t.fn,t.args||[])}))}}],[{key:"extend",value:function(e,n){var i=new t(n);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){i.flush()};var r=[{name:"flush",original:void 0}];if(n&&n.replace)for(var o=0;o<n.replace.length;o++){var a=n.replace[o];r.push({name:a,original:e[a]}),i.replace(e,a)}return i._extended={object:e,methods:r},i}}]),t}(),wk=function(){function t(){xt(this,t),ld(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),ld(this,"subscribe",t.prototype.on),ld(this,"unsubscribe",t.prototype.off)}return sd(t,[{key:"_trigger",value:function(t,e,n){var i,r;if("*"===t)throw new Error("Cannot trigger event *");Pg(i=sg(r=[]).call(r,tg(this._subscribers[t]),tg(this._subscribers["*"]))).call(i,(function(i){i(t,e,null!=n?n:null)}))}},{key:"on",value:function(t,e){"function"===typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var n;this._subscribers[t]=tf(n=this._subscribers[t]).call(n,(function(t){return t!==e}))}}]),t}();OM("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),XM);var Sk=St(Se.Set),Ek=St(jf);function Mk(t,e){var n="undefined"!==typeof eg&&cp(t)||t["@@iterator"];if(!n){if(mg(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return Tk(t,e);var i=lg(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return ap(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Tk(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Tk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var kk=function(t){function e(t){xt(this,e),this._pairs=t}return sd(e,[{key:t,value:VE.mark((function t(){var e,n,i,r,o;return VE.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Mk(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=$p(n.value,2),r=i[0],o=i[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"entries",value:VE.mark((function t(){var e,n,i,r,o;return VE.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Mk(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=$p(n.value,2),r=i[0],o=i[1],t.next=7,[r,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"keys",value:VE.mark((function t(){var e,n,i,r;return VE.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Mk(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=$p(n.value,1),r=i[0],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:VE.mark((function t(){var e,n,i,r;return VE.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Mk(this._pairs),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=$p(n.value,2),r=i[1],t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var t;return lf(t=tg(this._pairs)).call(t,(function(t){return t[0]}))}},{key:"toItemArray",value:function(){var t;return lf(t=tg(this._pairs)).call(t,(function(t){return t[1]}))}},{key:"toEntryArray",value:function(){return tg(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=Om(null),n=Mk(this._pairs);try{for(n.s();!(t=n.n()).done;){var i=$p(t.value,2),r=i[0],o=i[1];e[r]=o}}catch(a){n.e(a)}finally{n.f()}return e}},{key:"toMap",value:function(){return new YM(this._pairs)}},{key:"toIdSet",value:function(){return new Sk(this.toIdArray())}},{key:"toItemSet",value:function(){return new Sk(this.toItemArray())}},{key:"cache",value:function(){return new e(tg(this._pairs))}},{key:"distinct",value:function(t){var e,n=new Sk,i=Mk(this._pairs);try{for(i.s();!(e=i.n()).done;){var r=$p(e.value,2),o=r[0],a=r[1];n.add(t(a,o))}}catch(s){i.e(s)}finally{i.f()}return n}},{key:"filter",value:function(t){var n=this._pairs;return new e({[rk]:()=>VE.mark((function e(){var i,r,o,a,s;return VE.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Mk(n),e.prev=1,i.s();case 3:if((r=i.n()).done){e.next=10;break}if(o=$p(r.value,2),a=o[0],s=o[1],!t(s,a)){e.next=8;break}return e.next=8,[a,s];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),i.e(e.t0);case 15:return e.prev=15,i.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])}))()})}},{key:"forEach",value:function(t){var e,n=Mk(this._pairs);try{for(n.s();!(e=n.n()).done;){var i=$p(e.value,2),r=i[0];t(i[1],r)}}catch(o){n.e(o)}finally{n.f()}}},{key:"map",value:function(t){var n=this._pairs;return new e({[rk]:()=>VE.mark((function e(){var i,r,o,a,s;return VE.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Mk(n),e.prev=1,i.s();case 3:if((r=i.n()).done){e.next=9;break}return o=$p(r.value,2),a=o[0],s=o[1],e.next=7,[a,t(s,a)];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i.e(e.t0);case 14:return e.prev=14,i.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))()})}},{key:"max",value:function(t){var e=Ek(this._pairs),n=e.next();if(n.done)return null;for(var i=n.value[1],r=t(n.value[1],n.value[0]);!(n=e.next()).done;){var o=$p(n.value,2),a=o[0],s=o[1],l=t(s,a);l>r&&(r=l,i=s)}return i}},{key:"min",value:function(t){var e=Ek(this._pairs),n=e.next();if(n.done)return null;for(var i=n.value[1],r=t(n.value[1],n.value[0]);!(n=e.next()).done;){var o=$p(n.value,2),a=o[0],s=o[1],l=t(s,a);l<r&&(r=l,i=s)}return i}},{key:"reduce",value:function(t,e){var n,i=Mk(this._pairs);try{for(i.s();!(n=i.n()).done;){var r=$p(n.value,2),o=r[0];e=t(e,r[1],o)}}catch(a){i.e(a)}finally{i.f()}return e}},{key:"sort",value:function(t){var n=this;return new e({[rk]:function(){var e;return Ek(YT(e=tg(n._pairs)).call(e,(function(e,n){var i=$p(e,2),r=i[0],o=i[1],a=$p(n,2),s=a[0],l=a[1];return t(o,l,r,s)})))}})}}]),e}(rk);function Ck(t,e){var n=bg(t);if(kb){var i=kb(t);e&&(i=tf(i).call(i,(function(e){return Nb(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ak(t){for(var e=1;e<arguments.length;e++){var n,i,r=null!=arguments[e]?arguments[e]:{};e%2?Pg(n=Ck(Object(r),!0)).call(n,(function(e){ld(t,e,r[e])})):jb?Yb(t,jb(r)):Pg(i=Ck(Object(r))).call(i,(function(e){Kb(t,e,Nb(r,e))}))}return t}function Pk(t,e){var n="undefined"!==typeof eg&&cp(t)||t["@@iterator"];if(!n){if(mg(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return Ok(t,e);var i=lg(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return ap(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ok(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ok(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Rk(t){var e=function(){if("undefined"===typeof Reflect||!Tb)return!1;if(Tb.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Tb(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s_(t);if(e){var r=s_(this).constructor;n=Tb(i,arguments,r)}else n=i.apply(this,arguments);return r_(this,n)}}var Lk=function(t){i_(n,t);var e=Rk(n);function n(t,i){var r;return xt(this,n),ld(Zb(r=e.call(this)),"_queue",null),t&&!mg(t)&&(i=t,t=[]),r._options=i||{},r._data=new YM,r.length=0,r._idProp=r._options.fieldId||"id",t&&t.length&&r.add(t),r.setOptions(i),r}return sd(n,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=xk.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===typeof t.queue&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var n,i=this,r=[];if(mg(t)){var o=lf(t).call(t,(function(t){return t[i._idProp]}));if(eT(o).call(o,(function(t){return i._data.has(t)})))throw new Error("A duplicate id was found in the parameter array.");for(var a=0,s=t.length;a<s;a++)n=this._addItem(t[a]),r.push(n)}else{if(!t||"object"!==typeof t)throw new Error("Unknown dataType");n=this._addItem(t),r.push(n)}return r.length&&this._trigger("add",{items:r},e),r}},{key:"update",value:function(t,e){var n=this,i=[],r=[],o=[],a=[],s=this._idProp,l=function(t){var e=t[s];if(null!=e&&n._data.has(e)){var l=t,c=Em({},n._data.get(e)),u=n._updateItem(l);r.push(u),a.push(l),o.push(c)}else{var h=n._addItem(t);i.push(h)}};if(mg(t))for(var c=0,u=t.length;c<u;c++)t[c]&&"object"===typeof t[c]?l(t[c]):console.warn("Ignoring input item, which is not an object at index "+c);else{if(!t||"object"!==typeof t)throw new Error("Unknown dataType");l(t)}if(i.length&&this._trigger("add",{items:i},e),r.length){var h={items:r,oldData:o,data:a};this._trigger("update",h,e)}return sg(i).call(i,r)}},{key:"updateOnly",value:function(t,e){var n,i=this;mg(t)||(t=[t]);var r=lf(n=lf(t).call(t,(function(t){var e=i._data.get(t[i._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}}))).call(n,(function(t){var e=t.oldData,n=t.update,r=e[i._idProp],o=function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return nb.apply(void 0,sg(e=[{},t]).call(e,i))}(e,n);return i._data.set(r,o),{id:r,oldData:e,updatedData:o}}));if(r.length){var o={items:lf(r).call(r,(function(t){return t.id})),oldData:lf(r).call(r,(function(t){return t.oldData})),data:lf(r).call(r,(function(t){return t.updatedData}))};return this._trigger("update",o,e),o.items}return[]}},{key:"get",value:function(t,e){var n=void 0,i=void 0,r=void 0;_k(t)?(n=t,r=e):mg(t)?(i=t,r=e):r=t;var o,a=r&&"Object"===r.returnType?"Object":"Array",s=r&&tf(r),l=[],c=void 0,u=void 0,h=void 0;if(null!=n)(c=this._data.get(n))&&s&&!s(c)&&(c=void 0);else if(null!=i)for(var d=0,f=i.length;d<f;d++)null==(c=this._data.get(i[d]))||s&&!s(c)||l.push(c);else for(var p,g=0,m=(u=tg(uT(p=this._data).call(p))).length;g<m;g++)h=u[g],null==(c=this._data.get(h))||s&&!s(c)||l.push(c);if(r&&r.order&&void 0==n&&this._sort(l,r.order),r&&r.fields){var v=r.fields;if(void 0!=n&&null!=c)c=this._filterFields(c,v);else for(var y=0,b=l.length;y<b;y++)l[y]=this._filterFields(l[y],v)}if("Object"==a){for(var _={},x=0,w=l.length;x<w;x++){var S=l[x];_[S[this._idProp]]=S}return _}return null!=n?null!==(o=c)&&void 0!==o?o:null:l}},{key:"getIds",value:function(t){var e=this._data,n=t&&tf(t),i=t&&t.order,r=tg(uT(e).call(e)),o=[];if(n)if(i){for(var a=[],s=0,l=r.length;s<l;s++){var c=r[s],u=this._data.get(c);null!=u&&n(u)&&a.push(u)}this._sort(a,i);for(var h=0,d=a.length;h<d;h++)o.push(a[h][this._idProp])}else for(var f=0,p=r.length;f<p;f++){var g=r[f],m=this._data.get(g);null!=m&&n(m)&&o.push(m[this._idProp])}else if(i){for(var v=[],y=0,b=r.length;y<b;y++){var _=r[y];v.push(e.get(_))}this._sort(v,i);for(var x=0,w=v.length;x<w;x++)o.push(v[x][this._idProp])}else for(var S=0,E=r.length;S<E;S++){var M=r[S],T=e.get(M);null!=T&&o.push(T[this._idProp])}return o}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var n=e&&tf(e),i=this._data,r=tg(uT(i).call(i));if(e&&e.order)for(var o=this.get(e),a=0,s=o.length;a<s;a++){var l=o[a];t(l,l[this._idProp])}else for(var c=0,u=r.length;c<u;c++){var h=r[c],d=this._data.get(h);null==d||n&&!n(d)||t(d,h)}}},{key:"map",value:function(t,e){for(var n=e&&tf(e),i=[],r=this._data,o=tg(uT(r).call(r)),a=0,s=o.length;a<s;a++){var l=o[a],c=this._data.get(l);null==c||n&&!n(c)||i.push(t(c,l))}return e&&e.order&&this._sort(i,e.order),i}},{key:"_filterFields",value:function(t,e){var n;return t?Xd(n=mg(e)?e:bg(e)).call(n,(function(e,n){return e[n]=t[n],e}),{}):t}},{key:"_sort",value:function(t,e){if("string"===typeof e){var n=e;YT(t).call(t,(function(t,e){var i=t[n],r=e[n];return i>r?1:i<r?-1:0}))}else{if("function"!==typeof e)throw new TypeError("Order must be a function or a string");YT(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var n=[],i=[],r=mg(t)?t:[t],o=0,a=r.length;o<a;o++){var s=this._remove(r[o]);if(s){var l=s[this._idProp];null!=l&&(n.push(l),i.push(s))}}return n.length&&this._trigger("remove",{items:n,oldData:i},e),n}},{key:"_remove",value:function(t){var e;if(_k(t)?e=t:t&&"object"===typeof t&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var n=this._data.get(e)||null;return this._data.delete(e),--this.length,n}return null}},{key:"clear",value:function(t){for(var e,n=tg(uT(e=this._data).call(e)),i=[],r=0,o=n.length;r<o;r++)i.push(this._data.get(n[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},t),n}},{key:"max",value:function(t){var e,n,i=null,r=null,o=Pk(ik(e=this._data).call(e));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a[t];"number"===typeof s&&(null==r||s>r)&&(i=a,r=s)}}catch(l){o.e(l)}finally{o.f()}return i||null}},{key:"min",value:function(t){var e,n,i=null,r=null,o=Pk(ik(e=this._data).call(e));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a[t];"number"===typeof s&&(null==r||s<r)&&(i=a,r=s)}}catch(l){o.e(l)}finally{o.f()}return i||null}},{key:"distinct",value:function(t){for(var e=this._data,n=tg(uT(e).call(e)),i=[],r=0,o=0,a=n.length;o<a;o++){for(var s=n[o],l=e.get(s)[t],c=!1,u=0;u<r;u++)if(i[u]==l){c=!0;break}c||void 0===l||(i[r]=l,r++)}return i}},{key:"_addItem",value:function(t){var e=function(t,e){return null==t[e]&&(t[e]=bk()),t}(t,this._idProp),n=e[this._idProp];if(this._data.has(n))throw new Error("Cannot add item: item with id "+n+" already exists");return this._data.set(n,e),++this.length,n}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+Dm(t)+")");var n=this._data.get(e);if(!n)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,Ak(Ak({},n),t)),e}},{key:"stream",value:function(t){if(t){var e=this._data;return new kk({[rk]:()=>VE.mark((function n(){var i,r,o,a;return VE.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=Pk(t),n.prev=1,i.s();case 3:if((r=i.n()).done){n.next=11;break}if(o=r.value,null==(a=e.get(o))){n.next=9;break}return n.next=9,[o,a];case 9:n.next=3;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),i.e(n.t0);case 16:return n.prev=16,i.f(),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])}))()})}var n;return new kk({[rk]:Pd(n=fk(this._data)).call(n,this._data)})}}]),n}(wk);function Dk(t,e){return"object"===typeof e&&null!==e&&t===e.idProp&&"function"===typeof Pg(e)&&"function"===typeof e.get&&"function"===typeof e.getDataSet&&"function"===typeof e.getIds&&"number"===typeof e.length&&"function"===typeof lf(e)&&"function"===typeof e.off&&"function"===typeof e.on&&"function"===typeof e.stream&&function(t,e){return"object"===typeof e&&null!==e&&t===e.idProp&&"function"===typeof e.add&&"function"===typeof e.clear&&"function"===typeof e.distinct&&"function"===typeof Pg(e)&&"function"===typeof e.get&&"function"===typeof e.getDataSet&&"function"===typeof e.getIds&&"number"===typeof e.length&&"function"===typeof lf(e)&&"function"===typeof e.max&&"function"===typeof e.min&&"function"===typeof e.off&&"function"===typeof e.on&&"function"===typeof e.remove&&"function"===typeof e.setOptions&&"function"===typeof e.stream&&"function"===typeof e.update&&"function"===typeof e.updateOnly}(t,e.getDataSet())}var Ik="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function Nk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zk=function(t){return t&&t.Math===Math&&t},Fk=zk("object"==typeof globalThis&&globalThis)||zk("object"==typeof window&&window)||zk("object"==typeof self&&self)||zk("object"==typeof Ik&&Ik)||function(){return this}()||Ik||Function("return this")(),Uk=function(t){try{return!!t()}catch(ROt){return!0}},Bk=!Uk((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),jk=Bk,Hk=Function.prototype,Vk=Hk.apply,Gk=Hk.call,Wk="object"==typeof Reflect&&Reflect.apply||(jk?Gk.bind(Vk):function(){return Gk.apply(Vk,arguments)}),qk=Bk,Xk=Function.prototype,Yk=Xk.call,Kk=qk&&Xk.bind.bind(Yk,Yk),Zk=qk?Kk:function(t){return function(){return Yk.apply(t,arguments)}},Qk=Zk,Jk=Qk({}.toString),$k=Qk("".slice),tC=function(t){return $k(Jk(t),8,-1)},eC=tC,nC=Zk,iC=function(t){if("Function"===eC(t))return nC(t)},rC="object"==typeof document&&document.all,oC={all:rC,IS_HTMLDDA:"undefined"==typeof rC&&void 0!==rC},aC=oC.all,sC=oC.IS_HTMLDDA?function(t){return"function"==typeof t||t===aC}:function(t){return"function"==typeof t},lC={},cC=!Uk((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),uC=Bk,hC=Function.prototype.call,dC=uC?hC.bind(hC):function(){return hC.apply(hC,arguments)},fC={},pC={}.propertyIsEnumerable,gC=Object.getOwnPropertyDescriptor,mC=gC&&!pC.call({1:2},1);fC.f=mC?function(t){var e=gC(this,t);return!!e&&e.enumerable}:pC;var vC,yC,bC=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},_C=Uk,xC=tC,wC=Object,SC=Zk("".split),EC=_C((function(){return!wC("z").propertyIsEnumerable(0)}))?function(t){return"String"===xC(t)?SC(t,""):wC(t)}:wC,MC=function(t){return null===t||void 0===t},TC=MC,kC=TypeError,CC=function(t){if(TC(t))throw new kC("Can't call method on "+t);return t},AC=EC,PC=CC,OC=function(t){return AC(PC(t))},RC=sC,LC=oC.all,DC=oC.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:RC(t)||t===LC}:function(t){return"object"==typeof t?null!==t:RC(t)},IC={},NC=IC,zC=Fk,FC=sC,UC=function(t){return FC(t)?t:void 0},BC=function(t,e){return arguments.length<2?UC(NC[t])||UC(zC[t]):NC[t]&&NC[t][e]||zC[t]&&zC[t][e]},jC=Zk({}.isPrototypeOf),HC="undefined"!=typeof navigator&&String(navigator.userAgent)||"",VC=Fk,GC=HC,WC=VC.process,qC=VC.Deno,XC=WC&&WC.versions||qC&&qC.version,YC=XC&&XC.v8;YC&&(yC=(vC=YC.split("."))[0]>0&&vC[0]<4?1:+(vC[0]+vC[1])),!yC&&GC&&(!(vC=GC.match(/Edge\/(\d+)/))||vC[1]>=74)&&(vC=GC.match(/Chrome\/(\d+)/))&&(yC=+vC[1]);var KC=yC,ZC=KC,QC=Uk,JC=Fk.String,$C=!!Object.getOwnPropertySymbols&&!QC((function(){var t=Symbol("symbol detection");return!JC(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ZC&&ZC<41})),tA=$C&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,eA=BC,nA=sC,iA=jC,rA=Object,oA=tA?function(t){return"symbol"==typeof t}:function(t){var e=eA("Symbol");return nA(e)&&iA(e.prototype,rA(t))},aA=String,sA=function(t){try{return aA(t)}catch(ROt){return"Object"}},lA=sC,cA=sA,uA=TypeError,hA=function(t){if(lA(t))return t;throw new uA(cA(t)+" is not a function")},dA=hA,fA=MC,pA=function(t,e){var n=t[e];return fA(n)?void 0:dA(n)},gA=dC,mA=sC,vA=DC,yA=TypeError,bA={exports:{}},_A=Fk,xA=Object.defineProperty,wA=function(t,e){try{xA(_A,t,{value:e,configurable:!0,writable:!0})}catch(ROt){_A[t]=e}return e},SA="__core-js_shared__",EA=Fk[SA]||wA(SA,{}),MA=EA;(bA.exports=function(t,e){return MA[t]||(MA[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.0",mode:"pure",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"});var TA=bA.exports,kA=CC,CA=Object,AA=function(t){return CA(kA(t))},PA=AA,OA=Zk({}.hasOwnProperty),RA=Object.hasOwn||function(t,e){return OA(PA(t),e)},LA=Zk,DA=0,IA=Math.random(),NA=LA(1..toString),zA=function(t){return"Symbol("+(void 0===t?"":t)+")_"+NA(++DA+IA,36)},FA=TA,UA=RA,BA=zA,jA=$C,HA=tA,VA=Fk.Symbol,GA=FA("wks"),WA=HA?VA.for||VA:VA&&VA.withoutSetter||BA,qA=function(t){return UA(GA,t)||(GA[t]=jA&&UA(VA,t)?VA[t]:WA("Symbol."+t)),GA[t]},XA=dC,YA=DC,KA=oA,ZA=pA,QA=function(t,e){var n,i;if("string"===e&&mA(n=t.toString)&&!vA(i=gA(n,t)))return i;if(mA(n=t.valueOf)&&!vA(i=gA(n,t)))return i;if("string"!==e&&mA(n=t.toString)&&!vA(i=gA(n,t)))return i;throw new yA("Can't convert object to primitive value")},JA=TypeError,$A=qA("toPrimitive"),tP=function(t,e){if(!YA(t)||KA(t))return t;var n,i=ZA(t,$A);if(i){if(void 0===e&&(e="default"),n=XA(i,t,e),!YA(n)||KA(n))return n;throw new JA("Can't convert object to primitive value")}return void 0===e&&(e="number"),QA(t,e)},eP=oA,nP=function(t){var e=tP(t,"string");return eP(e)?e:e+""},iP=DC,rP=Fk.document,oP=iP(rP)&&iP(rP.createElement),aP=function(t){return oP?rP.createElement(t):{}},sP=aP,lP=!cC&&!Uk((function(){return 7!==Object.defineProperty(sP("div"),"a",{get:function(){return 7}}).a})),cP=cC,uP=dC,hP=fC,dP=bC,fP=OC,pP=nP,gP=RA,mP=lP,vP=Object.getOwnPropertyDescriptor;lC.f=cP?vP:function(t,e){if(t=fP(t),e=pP(e),mP)try{return vP(t,e)}catch(ROt){}if(gP(t,e))return dP(!uP(hP.f,t,e),t[e])};var yP=Uk,bP=sC,_P=/#|\.prototype\./,xP=function(t,e){var n=SP[wP(t)];return n===MP||n!==EP&&(bP(e)?yP(e):!!e)},wP=xP.normalize=function(t){return String(t).replace(_P,".").toLowerCase()},SP=xP.data={},EP=xP.NATIVE="N",MP=xP.POLYFILL="P",TP=xP,kP=hA,CP=Bk,AP=iC(iC.bind),PP=function(t,e){return kP(t),void 0===e?t:CP?AP(t,e):function(){return t.apply(e,arguments)}},OP={},RP=cC&&Uk((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),LP=DC,DP=String,IP=TypeError,NP=function(t){if(LP(t))return t;throw new IP(DP(t)+" is not an object")},zP=cC,FP=lP,UP=RP,BP=NP,jP=nP,HP=TypeError,VP=Object.defineProperty,GP=Object.getOwnPropertyDescriptor,WP="enumerable",qP="configurable",XP="writable";OP.f=zP?UP?function(t,e,n){if(BP(t),e=jP(e),BP(n),"function"===typeof t&&"prototype"===e&&"value"in n&&XP in n&&!n[XP]){var i=GP(t,e);i&&i[XP]&&(t[e]=n.value,n={configurable:qP in n?n[qP]:i[qP],enumerable:WP in n?n[WP]:i[WP],writable:!1})}return VP(t,e,n)}:VP:function(t,e,n){if(BP(t),e=jP(e),BP(n),FP)try{return VP(t,e,n)}catch(ROt){}if("get"in n||"set"in n)throw new HP("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var YP=OP,KP=bC,ZP=cC?function(t,e,n){return YP.f(t,e,KP(1,n))}:function(t,e,n){return t[e]=n,t},QP=Fk,JP=Wk,$P=iC,tO=sC,eO=lC.f,nO=TP,iO=IC,rO=PP,oO=ZP,aO=RA,sO=function(t){var e=function(n,i,r){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,i)}return new t(n,i,r)}return JP(t,this,arguments)};return e.prototype=t.prototype,e},lO=function(t,e){var n,i,r,o,a,s,l,c,u,h=t.target,d=t.global,f=t.stat,p=t.proto,g=d?QP:f?QP[h]:(QP[h]||{}).prototype,m=d?iO:iO[h]||oO(iO,h,{})[h],v=m.prototype;for(o in e)i=!(n=nO(d?o:h+(f?".":"#")+o,t.forced))&&g&&aO(g,o),s=m[o],i&&(l=t.dontCallGetSet?(u=eO(g,o))&&u.value:g[o]),a=i&&l?l:e[o],i&&typeof s==typeof a||(c=t.bind&&i?rO(a,QP):t.wrap&&i?sO(a):p&&tO(a)?$P(a):a,(t.sham||a&&a.sham||s&&s.sham)&&oO(c,"sham",!0),oO(m,o,c),p&&(aO(iO,r=h+"Prototype")||oO(iO,r,{}),oO(iO[r],o,a),t.real&&v&&(n||!v[o])&&oO(v,o,a)))},cO=Math.ceil,uO=Math.floor,hO=Math.trunc||function(t){var e=+t;return(e>0?uO:cO)(e)},dO=hO,fO=function(t){var e=+t;return e!==e||0===e?0:dO(e)},pO=fO,gO=Math.max,mO=Math.min,vO=function(t,e){var n=pO(t);return n<0?gO(n+e,0):mO(n,e)},yO=fO,bO=Math.min,_O=function(t){return t>0?bO(yO(t),9007199254740991):0},xO=function(t){return _O(t.length)},wO=OC,SO=vO,EO=xO,MO=function(t){return function(e,n,i){var r,o=wO(e),a=EO(o),s=SO(i,a);if(t&&n!==n){for(;a>s;)if((r=o[s++])!==r)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},TO={includes:MO(!0),indexOf:MO(!1)},kO={},CO=RA,AO=OC,PO=TO.indexOf,OO=kO,RO=Zk([].push),LO=function(t,e){var n,i=AO(t),r=0,o=[];for(n in i)!CO(OO,n)&&CO(i,n)&&RO(o,n);for(;e.length>r;)CO(i,n=e[r++])&&(~PO(o,n)||RO(o,n));return o},DO=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],IO=LO,NO=DO,zO=Object.keys||function(t){return IO(t,NO)},FO={};FO.f=Object.getOwnPropertySymbols;var UO=cC,BO=Zk,jO=dC,HO=Uk,VO=zO,GO=FO,WO=fC,qO=AA,XO=EC,YO=Object.assign,KO=Object.defineProperty,ZO=BO([].concat),QO=!YO||HO((function(){if(UO&&1!==YO({b:1},YO(KO({},"a",{enumerable:!0,get:function(){KO(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!==YO({},t)[n]||VO(YO({},e)).join("")!==i}))?function(t,e){for(var n=qO(t),i=arguments.length,r=1,o=GO.f,a=WO.f;i>r;)for(var s,l=XO(arguments[r++]),c=o?ZO(VO(l),o(l)):VO(l),u=c.length,h=0;u>h;)s=c[h++],UO&&!jO(a,l,s)||(n[s]=l[s]);return n}:YO,JO=QO;lO({target:"Object",stat:!0,arity:2,forced:Object.assign!==JO},{assign:JO});var $O=Nk(IC.Object.assign),tR=Zk([].slice),eR=Zk,nR=hA,iR=DC,rR=RA,oR=tR,aR=Bk,sR=Function,lR=eR([].concat),cR=eR([].join),uR={},hR=aR?sR.bind:function(t){var e=nR(this),n=e.prototype,i=oR(arguments,1),r=function(){var n=lR(i,oR(arguments));return this instanceof r?function(t,e,n){if(!rR(uR,e)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";uR[e]=sR("C,a","return new C("+cR(i,",")+")")}return uR[e](t,n)}(e,n.length,n):e.apply(t,n)};return iR(n)&&(r.prototype=n),r},dR=hR;lO({target:"Function",proto:!0,forced:Function.bind!==dR},{bind:dR});var fR=IC,pR=function(t){return fR[t+"Prototype"]},gR=pR("Function").bind,mR=jC,vR=gR,yR=Function.prototype,bR=function(t){var e=t.bind;return t===yR||mR(yR,t)&&e===yR.bind?vR:e},_R=bR,xR=Nk(_R);function wR(t,e,n,i){t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!1),t.closePath()}function SR(t,e,n,i,r,o){var a=Math.PI/180;i-2*o<0&&(o=i/2),r-2*o<0&&(o=r/2),t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.arc(e+i-o,n+o,o,270*a,360*a,!1),t.lineTo(e+i,n+r-o),t.arc(e+i-o,n+r-o,o,0,90*a,!1),t.lineTo(e+o,n+r),t.arc(e+o,n+r-o,o,90*a,180*a,!1),t.lineTo(e,n+o),t.arc(e+o,n+o,o,180*a,270*a,!1),t.closePath()}function ER(t,e,n,i,r){var o=.5522848,a=i/2*o,s=r/2*o,l=e+i,c=n+r,u=e+i/2,h=n+r/2;t.beginPath(),t.moveTo(e,h),t.bezierCurveTo(e,h-s,u-a,n,u,n),t.bezierCurveTo(u+a,n,l,h-s,l,h),t.bezierCurveTo(l,h+s,u+a,c,u,c),t.bezierCurveTo(u-a,c,e,h+s,e,h),t.closePath()}function MR(t,e,n,i,r){var o=r*(1/3),a=.5522848,s=i/2*a,l=o/2*a,c=e+i,u=n+o,h=e+i/2,d=n+o/2,f=n+(r-o/2),p=n+r;t.beginPath(),t.moveTo(c,d),t.bezierCurveTo(c,d+l,h+s,u,h,u),t.bezierCurveTo(h-s,u,e,d+l,e,d),t.bezierCurveTo(e,d-l,h-s,n,h,n),t.bezierCurveTo(h+s,n,c,d-l,c,d),t.lineTo(c,f),t.bezierCurveTo(c,f+l,h+s,p,h,p),t.bezierCurveTo(h-s,p,e,f+l,e,f),t.lineTo(e,d)}function TR(t,e,n,i,r,o){t.beginPath(),t.moveTo(e,n);for(var a=o.length,s=i-e,l=r-n,c=l/s,u=Math.sqrt(s*s+l*l),h=0,d=!0,f=0,p=+o[0];u>=.1;)(p=+o[h++%a])>u&&(p=u),f=Math.sqrt(p*p/(1+c*c)),e+=f=s<0?-f:f,n+=c*f,!0===d?t.lineTo(e,n):t.moveTo(e,n),u-=p,d=!d}var kR={circle:wR,dashedLine:TR,database:MR,diamond:function(t,e,n,i){t.beginPath(),t.lineTo(e,n+i),t.lineTo(e+i,n),t.lineTo(e,n-i),t.lineTo(e-i,n),t.closePath()},ellipse:ER,ellipse_vis:ER,hexagon:function(t,e,n,i){t.beginPath();var r=2*Math.PI/6;t.moveTo(e+i,n);for(var o=1;o<6;o++)t.lineTo(e+i*Math.cos(r*o),n+i*Math.sin(r*o));t.closePath()},roundRect:SR,square:function(t,e,n,i){t.beginPath(),t.rect(e-i,n-i,2*i,2*i),t.closePath()},star:function(t,e,n,i){t.beginPath(),n+=.1*(i*=.82);for(var r=0;r<10;r++){var o=r%2===0?1.3*i:.5*i;t.lineTo(e+o*Math.sin(2*r*Math.PI/10),n-o*Math.cos(2*r*Math.PI/10))}t.closePath()},triangle:function(t,e,n,i){t.beginPath(),n+=.275*(i*=1.15);var r=2*i,o=r/2,a=Math.sqrt(3)/6*r,s=Math.sqrt(r*r-o*o);t.moveTo(e,n-(s-a)),t.lineTo(e+o,n+a),t.lineTo(e-o,n+a),t.lineTo(e,n-(s-a)),t.closePath()},triangleDown:function(t,e,n,i){t.beginPath(),n-=.275*(i*=1.15);var r=2*i,o=r/2,a=Math.sqrt(3)/6*r,s=Math.sqrt(r*r-o*o);t.moveTo(e,n+(s-a)),t.lineTo(e+o,n-a),t.lineTo(e-o,n-a),t.lineTo(e,n+(s-a)),t.closePath()}};var CR={exports:{}};!function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}(CR);var AR=Nk(CR.exports),PR={};PR[qA("toStringTag")]="z";var OR,RR,LR,DR="[object z]"===String(PR),IR=DR,NR=sC,zR=tC,FR=qA("toStringTag"),UR=Object,BR="Arguments"===zR(function(){return arguments}()),jR=IR?zR:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(ROt){}}(e=UR(t),FR))?n:BR?zR(e):"Object"===(i=zR(e))&&NR(e.callee)?"Arguments":i},HR=jR,VR=String,GR=function(t){if("Symbol"===HR(t))throw new TypeError("Cannot convert a Symbol value to a string");return VR(t)},WR=Zk,qR=fO,XR=GR,YR=CC,KR=WR("".charAt),ZR=WR("".charCodeAt),QR=WR("".slice),JR=function(t){return function(e,n){var i,r,o=XR(YR(e)),a=qR(n),s=o.length;return a<0||a>=s?t?"":void 0:(i=ZR(o,a))<55296||i>56319||a+1===s||(r=ZR(o,a+1))<56320||r>57343?t?KR(o,a):i:t?QR(o,a,a+2):r-56320+(i-55296<<10)+65536}},$R={codeAt:JR(!1),charAt:JR(!0)},tL=sC,eL=Fk.WeakMap,nL=tL(eL)&&/native code/.test(String(eL)),iL=zA,rL=TA("keys"),oL=function(t){return rL[t]||(rL[t]=iL(t))},aL=nL,sL=Fk,lL=DC,cL=ZP,uL=RA,hL=EA,dL=oL,fL=kO,pL="Object already initialized",gL=sL.TypeError,mL=sL.WeakMap;if(aL||hL.state){var vL=hL.state||(hL.state=new mL);vL.get=vL.get,vL.has=vL.has,vL.set=vL.set,OR=function(t,e){if(vL.has(t))throw new gL(pL);return e.facade=t,vL.set(t,e),e},RR=function(t){return vL.get(t)||{}},LR=function(t){return vL.has(t)}}else{var yL=dL("state");fL[yL]=!0,OR=function(t,e){if(uL(t,yL))throw new gL(pL);return e.facade=t,cL(t,yL,e),e},RR=function(t){return uL(t,yL)?t[yL]:{}},LR=function(t){return uL(t,yL)}}var bL={set:OR,get:RR,has:LR,enforce:function(t){return LR(t)?RR(t):OR(t,{})},getterFor:function(t){return function(e){var n;if(!lL(e)||(n=RR(e)).type!==t)throw new gL("Incompatible receiver, "+t+" required");return n}}},_L=cC,xL=RA,wL=Function.prototype,SL=_L&&Object.getOwnPropertyDescriptor,EL=xL(wL,"name"),ML={EXISTS:EL,PROPER:EL&&"something"===function(){}.name,CONFIGURABLE:EL&&(!_L||_L&&SL(wL,"name").configurable)},TL={},kL=cC,CL=RP,AL=OP,PL=NP,OL=OC,RL=zO;TL.f=kL&&!CL?Object.defineProperties:function(t,e){PL(t);for(var n,i=OL(e),r=RL(e),o=r.length,a=0;o>a;)AL.f(t,n=r[a++],i[n]);return t};var LL,DL=BC("document","documentElement"),IL=NP,NL=TL,zL=DO,FL=kO,UL=DL,BL=aP,jL="prototype",HL="script",VL=oL("IE_PROTO"),GL=function(){},WL=function(t){return"<"+HL+">"+t+"</"+HL+">"},qL=function(t){t.write(WL("")),t.close();var e=t.parentWindow.Object;return t=null,e},XL=function(){try{LL=new ActiveXObject("htmlfile")}catch(ROt){}XL="undefined"!=typeof document?document.domain&&LL?qL(LL):function(){var t,e=BL("iframe"),n="java"+HL+":";return e.style.display="none",UL.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(WL("document.F=Object")),t.close(),t.F}():qL(LL);for(var t=zL.length;t--;)delete XL[jL][zL[t]];return XL()};FL[VL]=!0;var YL,KL,ZL,QL=Object.create||function(t,e){var n;return null!==t?(GL[jL]=IL(t),n=new GL,GL[jL]=null,n[VL]=t):n=XL(),void 0===e?n:NL.f(n,e)},JL=!Uk((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),$L=RA,tD=sC,eD=AA,nD=JL,iD=oL("IE_PROTO"),rD=Object,oD=rD.prototype,aD=nD?rD.getPrototypeOf:function(t){var e=eD(t);if($L(e,iD))return e[iD];var n=e.constructor;return tD(n)&&e instanceof n?n.prototype:e instanceof rD?oD:null},sD=ZP,lD=function(t,e,n,i){return i&&i.enumerable?t[e]=n:sD(t,e,n),t},cD=Uk,uD=sC,hD=DC,dD=QL,fD=aD,pD=lD,gD=qA("iterator"),mD=!1;[].keys&&("next"in(ZL=[].keys())?(KL=fD(fD(ZL)))!==Object.prototype&&(YL=KL):mD=!0);var vD=!hD(YL)||cD((function(){var t={};return YL[gD].call(t)!==t}));uD((YL=vD?{}:dD(YL))[gD])||pD(YL,gD,(function(){return this}));var yD={IteratorPrototype:YL,BUGGY_SAFARI_ITERATORS:mD},bD=jR,_D=DR?{}.toString:function(){return"[object "+bD(this)+"]"},xD=DR,wD=OP.f,SD=ZP,ED=RA,MD=_D,TD=qA("toStringTag"),kD=function(t,e,n,i){if(t){var r=n?t:t.prototype;ED(r,TD)||wD(r,TD,{configurable:!0,value:e}),i&&!xD&&SD(r,"toString",MD)}},CD={},AD=yD.IteratorPrototype,PD=QL,OD=bC,RD=kD,LD=CD,DD=function(){return this},ID=Zk,ND=hA,zD=sC,FD=String,UD=TypeError,BD=function(t,e,n){try{return ID(ND(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(ROt){}},jD=NP,HD=function(t){if("object"==typeof t||zD(t))return t;throw new UD("Can't set "+FD(t)+" as a prototype")},VD=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=BD(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(ROt){}return function(n,i){return jD(n),HD(i),e?t(n,i):n.__proto__=i,n}}():void 0),GD=lO,WD=dC,qD=ML,XD=function(t,e,n,i){var r=e+" Iterator";return t.prototype=PD(AD,{next:OD(+!i,n)}),RD(t,r,!1,!0),LD[r]=DD,t},YD=aD,KD=kD,ZD=lD,QD=CD,JD=yD,$D=qD.PROPER,tI=JD.BUGGY_SAFARI_ITERATORS,eI=qA("iterator"),nI="keys",iI="values",rI="entries",oI=function(){return this},aI=function(t,e,n,i,r,o,a){XD(n,e,i);var s,l,c,u=function(t){if(t===r&&g)return g;if(!tI&&t&&t in f)return f[t];switch(t){case nI:case iI:case rI:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,f=t.prototype,p=f[eI]||f["@@iterator"]||r&&f[r],g=!tI&&p||u(r),m="Array"===e&&f.entries||p;if(m&&(s=YD(m.call(new t)))!==Object.prototype&&s.next&&(KD(s,h,!0,!0),QD[h]=oI),$D&&r===iI&&p&&p.name!==iI&&(d=!0,g=function(){return WD(p,this)}),r)if(l={values:u(iI),keys:o?g:u(nI),entries:u(rI)},a)for(c in l)(tI||d||!(c in f))&&ZD(f,c,l[c]);else GD({target:e,proto:!0,forced:tI||d},l);return a&&f[eI]!==g&&ZD(f,eI,g,{name:r}),QD[e]=g,l},sI=function(t,e){return{value:t,done:e}},lI=$R.charAt,cI=GR,uI=bL,hI=aI,dI=sI,fI="String Iterator",pI=uI.set,gI=uI.getterFor(fI);hI(String,"String",(function(t){pI(this,{type:fI,string:cI(t),index:0})}),(function(){var t,e=gI(this),n=e.string,i=e.index;return i>=n.length?dI(void 0,!0):(t=lI(n,i),e.index+=t.length,dI(t,!1))}));var mI=dC,vI=NP,yI=pA,bI=function(t,e,n){var i,r;vI(t);try{if(!(i=yI(t,"return"))){if("throw"===e)throw n;return n}i=mI(i,t)}catch(ROt){r=!0,i=ROt}if("throw"===e)throw n;if(r)throw i;return vI(i),n},_I=NP,xI=bI,wI=CD,SI=qA("iterator"),EI=Array.prototype,MI=function(t){return void 0!==t&&(wI.Array===t||EI[SI]===t)},TI=sC,kI=EA,CI=Zk(Function.toString);TI(kI.inspectSource)||(kI.inspectSource=function(t){return CI(t)});var AI=kI.inspectSource,PI=Zk,OI=Uk,RI=sC,LI=jR,DI=AI,II=function(){},NI=[],zI=BC("Reflect","construct"),FI=/^\s*(?:class|function)\b/,UI=PI(FI.exec),BI=!FI.test(II),jI=function(t){if(!RI(t))return!1;try{return zI(II,NI,t),!0}catch(ROt){return!1}},HI=function(t){if(!RI(t))return!1;switch(LI(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return BI||!!UI(FI,DI(t))}catch(ROt){return!0}};HI.sham=!0;var VI=!zI||OI((function(){var t;return jI(jI.call)||!jI(Object)||!jI((function(){t=!0}))||t}))?HI:jI,GI=nP,WI=OP,qI=bC,XI=function(t,e,n){var i=GI(e);i in t?WI.f(t,i,qI(0,n)):t[i]=n},YI=jR,KI=pA,ZI=MC,QI=CD,JI=qA("iterator"),$I=function(t){if(!ZI(t))return KI(t,JI)||KI(t,"@@iterator")||QI[YI(t)]},tN=dC,eN=hA,nN=NP,iN=sA,rN=$I,oN=TypeError,aN=function(t,e){var n=arguments.length<2?rN(t):e;if(eN(n))return nN(tN(n,t));throw new oN(iN(t)+" is not iterable")},sN=PP,lN=dC,cN=AA,uN=function(t,e,n,i){try{return i?e(_I(n)[0],n[1]):e(n)}catch(ROt){xI(t,"throw",ROt)}},hN=MI,dN=VI,fN=xO,pN=XI,gN=aN,mN=$I,vN=Array,yN=qA("iterator"),bN=!1;try{var _N=0,xN={next:function(){return{done:!!_N++}},return:function(){bN=!0}};xN[yN]=function(){return this},Array.from(xN,(function(){throw 2}))}catch(ROt){}var wN=function(t){var e=cN(t),n=dN(this),i=arguments.length,r=i>1?arguments[1]:void 0,o=void 0!==r;o&&(r=sN(r,i>2?arguments[2]:void 0));var a,s,l,c,u,h,d=mN(e),f=0;if(!d||this===vN&&hN(d))for(a=fN(e),s=n?new this(a):vN(a);a>f;f++)h=o?r(e[f],f):e[f],pN(s,f,h);else for(u=(c=gN(e,d)).next,s=n?new this:[];!(l=lN(u,c)).done;f++)h=o?uN(c,r,[l.value,f],!0):l.value,pN(s,f,h);return s.length=f,s},SN=function(t,e){try{if(!e&&!bN)return!1}catch(ROt){return!1}var n=!1;try{var i={};i[yN]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(ROt){}return n};lO({target:"Array",stat:!0,forced:!SN((function(t){Array.from(t)}))},{from:wN});var EN=IC.Array.from,MN=Nk(EN),TN=OC,kN=CD,CN=bL;OP.f;var AN=aI,PN=sI,ON="Array Iterator",RN=CN.set,LN=CN.getterFor(ON);AN(Array,"Array",(function(t,e){RN(this,{type:ON,target:TN(t),index:0,kind:e})}),(function(){var t=LN(this),e=t.target,n=t.kind,i=t.index++;if(!e||i>=e.length)return t.target=void 0,PN(void 0,!0);switch(n){case"keys":return PN(i,!1);case"values":return PN(e[i],!1)}return PN([i,e[i]],!1)}),"values"),kN.Arguments=kN.Array;var DN=$I,IN={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},NN=Fk,zN=jR,FN=ZP,UN=CD,BN=qA("toStringTag");for(var jN in IN){var HN=NN[jN],VN=HN&&HN.prototype;VN&&zN(VN)!==BN&&FN(VN,BN,jN),UN[jN]=UN.Array}var GN=DN,WN=Nk(GN),qN=Nk(GN);function XN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var YN={exports:{}},KN=lO,ZN=cC,QN=OP.f;KN({target:"Object",stat:!0,forced:Object.defineProperty!==QN,sham:!ZN},{defineProperty:QN});var JN=IC.Object,$N=YN.exports=function(t,e,n){return JN.defineProperty(t,e,n)};JN.defineProperty.sham&&($N.sham=!0);var tz=YN.exports,ez=Nk(tz),nz=tC,iz=Array.isArray||function(t){return"Array"===nz(t)},rz=TypeError,oz=function(t){if(t>9007199254740991)throw rz("Maximum allowed index exceeded");return t},az=iz,sz=VI,lz=DC,cz=qA("species"),uz=Array,hz=function(t){var e;return az(t)&&(e=t.constructor,(sz(e)&&(e===uz||az(e.prototype))||lz(e)&&null===(e=e[cz]))&&(e=void 0)),void 0===e?uz:e},dz=function(t,e){return new(hz(t))(0===e?0:e)},fz=Uk,pz=KC,gz=qA("species"),mz=function(t){return pz>=51||!fz((function(){var e=[];return(e.constructor={})[gz]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},vz=lO,yz=Uk,bz=iz,_z=DC,xz=AA,wz=xO,Sz=oz,Ez=XI,Mz=dz,Tz=mz,kz=KC,Cz=qA("isConcatSpreadable"),Az=kz>=51||!yz((function(){var t=[];return t[Cz]=!1,t.concat()[0]!==t})),Pz=function(t){if(!_z(t))return!1;var e=t[Cz];return void 0!==e?!!e:bz(t)};vz({target:"Array",proto:!0,arity:1,forced:!Az||!Tz("concat")},{concat:function(t){var e,n,i,r,o,a=xz(this),s=Mz(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(Pz(o=-1===e?a:arguments[e]))for(r=wz(o),Sz(l+r),n=0;n<r;n++,l++)n in o&&Ez(s,l,o[n]);else Sz(l+1),Ez(s,l++,o);return s.length=l,s}});var Oz={},Rz=LO,Lz=DO.concat("length","prototype");Oz.f=Object.getOwnPropertyNames||function(t){return Rz(t,Lz)};var Dz={},Iz=vO,Nz=xO,zz=XI,Fz=Array,Uz=Math.max,Bz=function(t,e,n){for(var i=Nz(t),r=Iz(e,i),o=Iz(void 0===n?i:n,i),a=Fz(Uz(o-r,0)),s=0;r<o;r++,s++)zz(a,s,t[r]);return a.length=s,a},jz=tC,Hz=OC,Vz=Oz.f,Gz=Bz,Wz="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Dz.f=function(t){return Wz&&"Window"===jz(t)?function(t){try{return Vz(t)}catch(ROt){return Gz(Wz)}}(t):Vz(Hz(t))};var qz=OP,Xz=function(t,e,n){return qz.f(t,e,n)},Yz={},Kz=qA;Yz.f=Kz;var Zz=IC,Qz=RA,Jz=Yz,$z=OP.f,tF=function(t){var e=Zz.Symbol||(Zz.Symbol={});Qz(e,t)||$z(e,t,{value:Jz.f(t)})},eF=dC,nF=BC,iF=qA,rF=lD,oF=function(){var t=nF("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,i=iF("toPrimitive");e&&!e[i]&&rF(e,i,(function(t){return eF(n,this)}),{arity:1})},aF=PP,sF=EC,lF=AA,cF=xO,uF=dz,hF=Zk([].push),dF=function(t){var e=1===t,n=2===t,i=3===t,r=4===t,o=6===t,a=7===t,s=5===t||o;return function(l,c,u,h){for(var d,f,p=lF(l),g=sF(p),m=aF(c,u),v=cF(g),y=0,b=h||uF,_=e?b(l,v):n||a?b(l,0):void 0;v>y;y++)if((s||y in g)&&(f=m(d=g[y],y,p),t))if(e)_[y]=f;else if(f)switch(t){case 3:return!0;case 5:return d;case 6:return y;case 2:hF(_,d)}else switch(t){case 4:return!1;case 7:hF(_,d)}return o?-1:i||r?r:_}},fF={forEach:dF(0),map:dF(1),filter:dF(2),some:dF(3),every:dF(4),find:dF(5),findIndex:dF(6),filterReject:dF(7)},pF=lO,gF=Fk,mF=dC,vF=Zk,yF=cC,bF=$C,_F=Uk,xF=RA,wF=jC,SF=NP,EF=OC,MF=nP,TF=GR,kF=bC,CF=QL,AF=zO,PF=Oz,OF=Dz,RF=FO,LF=lC,DF=OP,IF=TL,NF=fC,zF=lD,FF=Xz,UF=TA,BF=kO,jF=zA,HF=qA,VF=Yz,GF=tF,WF=oF,qF=kD,XF=bL,YF=fF.forEach,KF=oL("hidden"),ZF="Symbol",QF="prototype",JF=XF.set,$F=XF.getterFor(ZF),tU=Object[QF],eU=gF.Symbol,nU=eU&&eU[QF],iU=gF.RangeError,rU=gF.TypeError,oU=gF.QObject,aU=LF.f,sU=DF.f,lU=OF.f,cU=NF.f,uU=vF([].push),hU=UF("symbols"),dU=UF("op-symbols"),fU=UF("wks"),pU=!oU||!oU[QF]||!oU[QF].findChild,gU=function(t,e,n){var i=aU(tU,e);i&&delete tU[e],sU(t,e,n),i&&t!==tU&&sU(tU,e,i)},mU=yF&&_F((function(){return 7!==CF(sU({},"a",{get:function(){return sU(this,"a",{value:7}).a}})).a}))?gU:sU,vU=function(t,e){var n=hU[t]=CF(nU);return JF(n,{type:ZF,tag:t,description:e}),yF||(n.description=e),n},yU=function(t,e,n){t===tU&&yU(dU,e,n),SF(t);var i=MF(e);return SF(n),xF(hU,i)?(n.enumerable?(xF(t,KF)&&t[KF][i]&&(t[KF][i]=!1),n=CF(n,{enumerable:kF(0,!1)})):(xF(t,KF)||sU(t,KF,kF(1,{})),t[KF][i]=!0),mU(t,i,n)):sU(t,i,n)},bU=function(t,e){SF(t);var n=EF(e),i=AF(n).concat(SU(n));return YF(i,(function(e){yF&&!mF(_U,n,e)||yU(t,e,n[e])})),t},_U=function(t){var e=MF(t),n=mF(cU,this,e);return!(this===tU&&xF(hU,e)&&!xF(dU,e))&&(!(n||!xF(this,e)||!xF(hU,e)||xF(this,KF)&&this[KF][e])||n)},xU=function(t,e){var n=EF(t),i=MF(e);if(n!==tU||!xF(hU,i)||xF(dU,i)){var r=aU(n,i);return!r||!xF(hU,i)||xF(n,KF)&&n[KF][i]||(r.enumerable=!0),r}},wU=function(t){var e=lU(EF(t)),n=[];return YF(e,(function(t){xF(hU,t)||xF(BF,t)||uU(n,t)})),n},SU=function(t){var e=t===tU,n=lU(e?dU:EF(t)),i=[];return YF(n,(function(t){!xF(hU,t)||e&&!xF(tU,t)||uU(i,hU[t])})),i};bF||(eU=function(){if(wF(nU,this))throw new rU("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?TF(arguments[0]):void 0,e=jF(t),n=function(t){this===tU&&mF(n,dU,t),xF(this,KF)&&xF(this[KF],e)&&(this[KF][e]=!1);var i=kF(1,t);try{mU(this,e,i)}catch(ROt){if(!(ROt instanceof iU))throw ROt;gU(this,e,i)}};return yF&&pU&&mU(tU,e,{configurable:!0,set:n}),vU(e,t)},zF(nU=eU[QF],"toString",(function(){return $F(this).tag})),zF(eU,"withoutSetter",(function(t){return vU(jF(t),t)})),NF.f=_U,DF.f=yU,IF.f=bU,LF.f=xU,PF.f=OF.f=wU,RF.f=SU,VF.f=function(t){return vU(HF(t),t)},yF&&FF(nU,"description",{configurable:!0,get:function(){return $F(this).description}})),pF({global:!0,constructor:!0,wrap:!0,forced:!bF,sham:!bF},{Symbol:eU}),YF(AF(fU),(function(t){GF(t)})),pF({target:ZF,stat:!0,forced:!bF},{useSetter:function(){pU=!0},useSimple:function(){pU=!1}}),pF({target:"Object",stat:!0,forced:!bF,sham:!yF},{create:function(t,e){return void 0===e?CF(t):bU(CF(t),e)},defineProperty:yU,defineProperties:bU,getOwnPropertyDescriptor:xU}),pF({target:"Object",stat:!0,forced:!bF},{getOwnPropertyNames:wU}),WF(),qF(eU,ZF),BF[KF]=!0;var EU=$C&&!!Symbol.for&&!!Symbol.keyFor,MU=lO,TU=BC,kU=RA,CU=GR,AU=TA,PU=EU,OU=AU("string-to-symbol-registry"),RU=AU("symbol-to-string-registry");MU({target:"Symbol",stat:!0,forced:!PU},{for:function(t){var e=CU(t);if(kU(OU,e))return OU[e];var n=TU("Symbol")(e);return OU[e]=n,RU[n]=e,n}});var LU=lO,DU=RA,IU=oA,NU=sA,zU=EU,FU=TA("symbol-to-string-registry");LU({target:"Symbol",stat:!0,forced:!zU},{keyFor:function(t){if(!IU(t))throw new TypeError(NU(t)+" is not a symbol");if(DU(FU,t))return FU[t]}});var UU=iz,BU=sC,jU=tC,HU=GR,VU=Zk([].push),GU=lO,WU=BC,qU=Wk,XU=dC,YU=Zk,KU=Uk,ZU=sC,QU=oA,JU=tR,$U=function(t){if(BU(t))return t;if(UU(t)){for(var e=t.length,n=[],i=0;i<e;i++){var r=t[i];"string"==typeof r?VU(n,r):"number"!=typeof r&&"Number"!==jU(r)&&"String"!==jU(r)||VU(n,HU(r))}var o=n.length,a=!0;return function(t,e){if(a)return a=!1,e;if(UU(this))return e;for(var i=0;i<o;i++)if(n[i]===t)return e}}},tB=$C,eB=String,nB=WU("JSON","stringify"),iB=YU(/./.exec),rB=YU("".charAt),oB=YU("".charCodeAt),aB=YU("".replace),sB=YU(1..toString),lB=/[\uD800-\uDFFF]/g,cB=/^[\uD800-\uDBFF]$/,uB=/^[\uDC00-\uDFFF]$/,hB=!tB||KU((function(){var t=WU("Symbol")("stringify detection");return"[null]"!==nB([t])||"{}"!==nB({a:t})||"{}"!==nB(Object(t))})),dB=KU((function(){return'"\\udf06\\ud834"'!==nB("\udf06\ud834")||'"\\udead"'!==nB("\udead")})),fB=function(t,e){var n=JU(arguments),i=$U(e);if(ZU(i)||void 0!==t&&!QU(t))return n[1]=function(t,e){if(ZU(i)&&(e=XU(i,this,eB(t),e)),!QU(e))return e},qU(nB,null,n)},pB=function(t,e,n){var i=rB(n,e-1),r=rB(n,e+1);return iB(cB,t)&&!iB(uB,r)||iB(uB,t)&&!iB(cB,i)?"\\u"+sB(oB(t,0),16):t};nB&&GU({target:"JSON",stat:!0,arity:3,forced:hB||dB},{stringify:function(t,e,n){var i=JU(arguments),r=qU(hB?fB:nB,null,i);return dB&&"string"==typeof r?aB(r,lB,pB):r}});var gB=FO,mB=AA;lO({target:"Object",stat:!0,forced:!$C||Uk((function(){gB.f(1)}))},{getOwnPropertySymbols:function(t){var e=gB.f;return e?e(mB(t)):[]}}),tF("asyncIterator"),tF("hasInstance"),tF("isConcatSpreadable"),tF("iterator"),tF("match"),tF("matchAll"),tF("replace"),tF("search"),tF("species"),tF("split");var vB=oF;tF("toPrimitive"),vB();var yB=BC,bB=kD;tF("toStringTag"),bB(yB("Symbol"),"Symbol"),tF("unscopables"),kD(Fk.JSON,"JSON",!0);var _B=IC.Symbol,xB=qA,wB=OP.f,SB=xB("metadata"),EB=Function.prototype;void 0===EB[SB]&&wB(EB,SB,{value:null}),tF("asyncDispose"),tF("dispose"),tF("metadata");var MB=_B,TB=Zk,kB=BC("Symbol"),CB=kB.keyFor,AB=TB(kB.prototype.valueOf),PB=kB.isRegisteredSymbol||function(t){try{return void 0!==CB(AB(t))}catch(ROt){return!1}};lO({target:"Symbol",stat:!0},{isRegisteredSymbol:PB});for(var OB=TA,RB=BC,LB=Zk,DB=oA,IB=qA,NB=RB("Symbol"),zB=NB.isWellKnownSymbol,FB=RB("Object","getOwnPropertyNames"),UB=LB(NB.prototype.valueOf),BB=OB("wks"),jB=0,HB=FB(NB),VB=HB.length;jB<VB;jB++)try{var GB=HB[jB];DB(NB[GB])&&IB(GB)}catch(ROt){}var WB=function(t){if(zB&&zB(t))return!0;try{for(var e=UB(t),n=0,i=FB(BB),r=i.length;n<r;n++)if(BB[i[n]]==e)return!0}catch(ROt){}return!1};lO({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:WB}),tF("matcher"),tF("observable"),lO({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:PB}),lO({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:WB}),tF("metadataKey"),tF("patternMatch"),tF("replaceAll");var qB=Nk(MB),XB=Nk(Yz.f("iterator"));function YB(t){return YB="function"==typeof qB&&"symbol"==typeof XB?function(t){return typeof t}:function(t){return t&&"function"==typeof qB&&t.constructor===qB&&t!==qB.prototype?"symbol":typeof t},YB(t)}var KB=Nk(Yz.f("toPrimitive"));function ZB(t){var e=function(t,e){if("object"!==YB(t)||null===t)return t;var n=t[KB];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==YB(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===YB(e)?e:String(e)}function QB(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),ez(t,ZB(i.key),i)}}function JB(t,e,n){return e&&QB(t.prototype,e),n&&QB(t,n),ez(t,"prototype",{writable:!1}),t}lO({target:"Array",stat:!0},{isArray:iz});var $B=IC.Array.isArray,tj=Nk($B);var ej=cC,nj=iz,ij=TypeError,rj=Object.getOwnPropertyDescriptor,oj=ej&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(ROt){return ROt instanceof TypeError}}()?function(t,e){if(nj(t)&&!rj(t,"length").writable)throw new ij("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},aj=AA,sj=xO,lj=oj,cj=oz;lO({target:"Array",proto:!0,arity:1,forced:Uk((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(ROt){return ROt instanceof TypeError}}()},{push:function(t){var e=aj(this),n=sj(e),i=arguments.length;cj(n+i);for(var r=0;r<i;r++)e[n]=arguments[r],n++;return lj(e,n),n}});var uj=pR("Array").push,hj=jC,dj=uj,fj=Array.prototype,pj=function(t){var e=t.push;return t===fj||hj(fj,t)&&e===fj.push?dj:e},gj=Nk(pj);var mj=lO,vj=iz,yj=VI,bj=DC,_j=vO,xj=xO,wj=OC,Sj=XI,Ej=qA,Mj=tR,Tj=mz("slice"),kj=Ej("species"),Cj=Array,Aj=Math.max;mj({target:"Array",proto:!0,forced:!Tj},{slice:function(t,e){var n,i,r,o=wj(this),a=xj(o),s=_j(t,a),l=_j(void 0===e?a:e,a);if(vj(o)&&(n=o.constructor,(yj(n)&&(n===Cj||vj(n.prototype))||bj(n)&&null===(n=n[kj]))&&(n=void 0),n===Cj||void 0===n))return Mj(o,s,l);for(i=new(void 0===n?Cj:n)(Aj(l-s,0)),r=0;s<l;s++,r++)s in o&&Sj(i,r,o[s]);return i.length=r,i}});var Pj=pR("Array").slice,Oj=jC,Rj=Pj,Lj=Array.prototype,Dj=function(t){var e=t.slice;return t===Lj||Oj(Lj,t)&&e===Lj.slice?Rj:e},Ij=Dj,Nj=Nk(Ij),zj=Nk(EN);function Fj(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Uj(t,e){var n;if(t){if("string"===typeof t)return Fj(t,e);var i=Nj(n=Object.prototype.toString.call(t)).call(n,8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?zj(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Fj(t,e):void 0}}function Bj(t,e){return function(t){if(tj(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof qB&&WN(t)||t["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(gj(s).call(s,i.value),s.length!==e);l=!0);}catch(t){c=!0,r=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(t,e)||Uj(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jj(t){return function(t){if(tj(t))return Fj(t)}(t)||function(t){if("undefined"!==typeof qB&&null!=WN(t)||null!=t["@@iterator"])return zj(t)}(t)||Uj(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Hj=Nk(_B),Vj=pR("Array").concat,Gj=jC,Wj=Vj,qj=Array.prototype,Xj=function(t){var e=t.concat;return t===qj||Gj(qj,t)&&e===qj.concat?Wj:e},Yj=Nk(Xj),Kj=Nk(Ij),Zj=BC,Qj=Oz,Jj=FO,$j=NP,tH=Zk([].concat),eH=Zj("Reflect","ownKeys")||function(t){var e=Qj.f($j(t)),n=Jj.f;return n?tH(e,n(t)):e},nH=Nk($B),iH=fF.map;lO({target:"Array",proto:!0,forced:!mz("map")},{map:function(t){return iH(this,t,arguments.length>1?arguments[1]:void 0)}});var rH=pR("Array").map,oH=jC,aH=rH,sH=Array.prototype,lH=function(t){var e=t.map;return t===sH||oH(sH,t)&&e===sH.map?aH:e},cH=Nk(lH),uH=AA,hH=zO;lO({target:"Object",stat:!0,forced:Uk((function(){hH(1)}))},{keys:function(t){return hH(uH(t))}});var dH=Nk(IC.Object.keys),fH=lO,pH=Date,gH=Zk(pH.prototype.getTime);fH({target:"Date",stat:!0},{now:function(){return gH(new pH)}});var mH=Nk(IC.Date.now),vH=Uk,yH=function(t,e){var n=[][t];return!!n&&vH((function(){n.call(null,e||function(){return 1},1)}))},bH=fF.forEach,_H=yH("forEach")?[].forEach:function(t){return bH(this,t,arguments.length>1?arguments[1]:void 0)};lO({target:"Array",proto:!0,forced:[].forEach!==_H},{forEach:_H});var xH=pR("Array").forEach,wH=jR,SH=RA,EH=jC,MH=xH,TH=Array.prototype,kH={DOMTokenList:!0,NodeList:!0},CH=function(t){var e=t.forEach;return t===TH||EH(TH,t)&&e===TH.forEach||SH(kH,wH(t))?MH:e},AH=Nk(CH),PH=lO,OH=iz,RH=Zk([].reverse),LH=[1,2];PH({target:"Array",proto:!0,forced:String(LH)===String(LH.reverse())},{reverse:function(){return OH(this)&&(this.length=this.length),RH(this)}});var DH=pR("Array").reverse,IH=jC,NH=DH,zH=Array.prototype,FH=function(t){var e=t.reverse;return t===zH||IH(zH,t)&&e===zH.reverse?NH:e},UH=Nk(FH),BH=sA,jH=TypeError,HH=function(t,e){if(!delete t[e])throw new jH("Cannot delete property "+BH(e)+" of "+BH(t))},VH=lO,GH=AA,WH=vO,qH=fO,XH=xO,YH=oj,KH=oz,ZH=dz,QH=XI,JH=HH,$H=mz("splice"),tV=Math.max,eV=Math.min;VH({target:"Array",proto:!0,forced:!$H},{splice:function(t,e){var n,i,r,o,a,s,l=GH(this),c=XH(l),u=WH(t,c),h=arguments.length;for(0===h?n=i=0:1===h?(n=0,i=c-u):(n=h-2,i=eV(tV(qH(e),0),c-u)),KH(c+n-i),r=ZH(l,i),o=0;o<i;o++)(a=u+o)in l&&QH(r,o,l[a]);if(r.length=i,n<i){for(o=u;o<c-i;o++)s=o+n,(a=o+i)in l?l[s]=l[a]:JH(l,s);for(o=c;o>c-i+n;o--)JH(l,o-1)}else if(n>i)for(o=c-i;o>u;o--)s=o+n-1,(a=o+i-1)in l?l[s]=l[a]:JH(l,s);for(o=0;o<n;o++)l[o+u]=arguments[o+2];return YH(l,c-i+n),r}});var nV=pR("Array").splice,iV=jC,rV=nV,oV=Array.prototype,aV=function(t){var e=t.splice;return t===oV||iV(oV,t)&&e===oV.splice?rV:e},sV=Nk(aV),lV=TO.includes;lO({target:"Array",proto:!0,forced:Uk((function(){return!Array(1).includes()}))},{includes:function(t){return lV(this,t,arguments.length>1?arguments[1]:void 0)}});var cV=pR("Array").includes,uV=DC,hV=tC,dV=qA("match"),fV=function(t){var e;return uV(t)&&(void 0!==(e=t[dV])?!!e:"RegExp"===hV(t))},pV=TypeError,gV=qA("match"),mV=lO,vV=function(t){if(fV(t))throw new pV("The method doesn't accept regular expressions");return t},yV=CC,bV=GR,_V=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[gV]=!1,"/./"[t](e)}catch(i){}}return!1},xV=Zk("".indexOf);mV({target:"String",proto:!0,forced:!_V("includes")},{includes:function(t){return!!~xV(bV(yV(this)),bV(vV(t)),arguments.length>1?arguments[1]:void 0)}});var wV=pR("String").includes,SV=jC,EV=cV,MV=wV,TV=Array.prototype,kV=String.prototype,CV=function(t){var e=t.includes;return t===TV||SV(TV,t)&&e===TV.includes?EV:"string"==typeof t||t===kV||SV(kV,t)&&e===kV.includes?MV:e},AV=Nk(CV),PV=AA,OV=aD,RV=JL;lO({target:"Object",stat:!0,forced:Uk((function(){OV(1)})),sham:!RV},{getPrototypeOf:function(t){return OV(PV(t))}});var LV=IC.Object.getPrototypeOf,DV=Nk(LV),IV=fF.filter;lO({target:"Array",proto:!0,forced:!mz("filter")},{filter:function(t){return IV(this,t,arguments.length>1?arguments[1]:void 0)}});var NV=pR("Array").filter,zV=jC,FV=NV,UV=Array.prototype,BV=function(t){var e=t.filter;return t===UV||zV(UV,t)&&e===UV.filter?FV:e},jV=Nk(BV),HV="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",VV=CC,GV=GR,WV=HV,qV=Zk("".replace),XV=RegExp("^["+WV+"]+"),YV=RegExp("(^|[^"+WV+"])["+WV+"]+$"),KV=function(t){return function(e){var n=GV(VV(e));return 1&t&&(n=qV(n,XV,"")),2&t&&(n=qV(n,YV,"$1")),n}},ZV={start:KV(1),end:KV(2),trim:KV(3)},QV=Fk,JV=Uk,$V=Zk,tG=GR,eG=ZV.trim,nG=HV,iG=QV.parseInt,rG=QV.Symbol,oG=rG&&rG.iterator,aG=/^[+-]?0x/i,sG=$V(aG.exec),lG=8!==iG(nG+"08")||22!==iG(nG+"0x16")||oG&&!JV((function(){iG(Object(oG))}))?function(t,e){var n=eG(tG(t));return iG(n,e>>>0||(sG(aG,n)?16:10))}:iG;lO({global:!0,forced:parseInt!==lG},{parseInt:lG});var cG=Nk(IC.parseInt),uG=lO,hG=TO.indexOf,dG=yH,fG=iC([].indexOf),pG=!!fG&&1/fG([1],1,-0)<0;uG({target:"Array",proto:!0,forced:pG||!dG("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return pG?fG(this,t,e)||0:hG(this,t,e)}});var gG=pR("Array").indexOf,mG=jC,vG=gG,yG=Array.prototype,bG=function(t){var e=t.indexOf;return t===yG||mG(yG,t)&&e===yG.indexOf?vG:e},_G=Nk(bG);lO({target:"Object",stat:!0,sham:!cC},{create:QL});var xG=IC.Object,wG=function(t,e){return xG.create(t,e)},SG=Nk(wG),EG=IC,MG=Wk;EG.JSON||(EG.JSON={stringify:JSON.stringify});var TG=Nk((function(t,e,n){return MG(EG.JSON.stringify,null,arguments)})),kG="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,CG=TypeError,AG=Fk,PG=Wk,OG=sC,RG=kG,LG=HC,DG=tR,IG=function(t,e){if(t<e)throw new CG("Not enough arguments");return t},NG=AG.Function,zG=/MSIE .\./.test(LG)||RG&&function(){var t=AG.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}(),FG=function(t,e){var n=e?2:1;return zG?function(i,r){var o=IG(arguments.length,1)>n,a=OG(i)?i:NG(i),s=o?DG(arguments,n):[],l=o?function(){PG(a,this,s)}:a;return e?t(l,r):t(l)}:t},UG=lO,BG=Fk,jG=FG(BG.setInterval,!0);UG({global:!0,bind:!0,forced:BG.setInterval!==jG},{setInterval:jG});var HG=lO,VG=Fk,GG=FG(VG.setTimeout,!0);HG({global:!0,bind:!0,forced:VG.setTimeout!==GG},{setTimeout:GG});var WG=Nk(IC.setTimeout),qG=AA,XG=vO,YG=xO,KG=function(t){for(var e=qG(this),n=YG(e),i=arguments.length,r=XG(i>1?arguments[1]:void 0,n),o=i>2?arguments[2]:void 0,a=void 0===o?n:XG(o,n);a>r;)e[r++]=t;return e};lO({target:"Array",proto:!0},{fill:KG});var ZG,QG=pR("Array").fill,JG=jC,$G=QG,tW=Array.prototype,eW=function(t){var e=t.fill;return t===tW||JG(tW,t)&&e===tW.fill?$G:e},nW=Nk(eW);function iW(){return iW=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iW.apply(this,arguments)}function rW(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function oW(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}ZG="function"!==typeof Object.assign?function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var aW,sW=ZG,lW=["","webkit","Moz","MS","ms","o"],cW="undefined"===typeof document?{style:{}}:document.createElement("div"),uW=Math.round,hW=Math.abs,dW=Date.now;function fW(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<lW.length;){if((i=(n=lW[o])?n+r:e)in t)return i;o++}}aW="undefined"===typeof window?{}:window;var pW=fW(cW.style,"touchAction"),gW=void 0!==pW;var mW="compute",vW="auto",yW="manipulation",bW="none",_W="pan-x",xW="pan-y",wW=function(){if(!gW)return!1;var t={},e=aW.CSS&&aW.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){return t[n]=!e||aW.CSS.supports("touch-action",n)})),t}(),SW="ontouchstart"in aW,EW=void 0!==fW(aW,"PointerEvent"),MW=SW&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),TW="touch",kW="mouse",CW=25,AW=1,PW=4,OW=8,RW=1,LW=2,DW=4,IW=8,NW=16,zW=LW|DW,FW=IW|NW,UW=zW|FW,BW=["x","y"],jW=["clientX","clientY"];function HW(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function VW(t,e){return"function"===typeof t?t.apply(e&&e[0]||void 0,e):t}function GW(t,e){return t.indexOf(e)>-1}var WW=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===mW&&(t=this.compute()),gW&&this.manager.element.style&&wW[t]&&(this.manager.element.style[pW]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return HW(this.manager.recognizers,(function(e){VW(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(GW(t,bW))return bW;var e=GW(t,_W),n=GW(t,xW);return e&&n?bW:e||n?e?_W:xW:GW(t,yW)?yW:vW}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=GW(i,bW)&&!wW[bW],o=GW(i,xW)&&!wW[xW],a=GW(i,_W)&&!wW[_W];if(r){var s=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(s&&l&&c)return}if(!a||!o)return r||o&&n&zW||a&&n&FW?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function qW(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function XW(t){var e=t.length;if(1===e)return{x:uW(t[0].clientX),y:uW(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:uW(n/e),y:uW(i/e)}}function YW(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:uW(t.pointers[n].clientX),clientY:uW(t.pointers[n].clientY)},n++;return{timeStamp:dW(),pointers:e,center:XW(e),deltaX:t.deltaX,deltaY:t.deltaY}}function KW(t,e,n){n||(n=BW);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function ZW(t,e,n){n||(n=BW);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function QW(t,e){return t===e?RW:hW(t)>=hW(e)?t<0?LW:DW:e<0?IW:NW}function JW(t,e,n){return{x:e/t||0,y:n/t||0}}function $W(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=YW(e)),r>1&&!n.firstMultiple?n.firstMultiple=YW(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=e.center=XW(i);e.timeStamp=dW(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=ZW(s,l),e.distance=KW(s,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==AW&&o.eventType!==PW||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=QW(e.deltaX,e.deltaY);var c=JW(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=hW(c.x)>hW(c.y)?c.x:c.y,e.scale=a?function(t,e){return KW(e[0],e[1],jW)/KW(t[0],t[1],jW)}(a.pointers,i):1,e.rotation=a?function(t,e){return ZW(e[1],e[0],jW)+ZW(t[1],t[0],jW)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(e.eventType!==OW&&(s>CW||void 0===a.velocity)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,u=JW(s,l,c);i=u.x,r=u.y,n=hW(u.x)>hW(u.y)?u.x:u.y,o=QW(l,c),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var u,h=t.element,d=e.srcEvent;qW(u=d.composedPath?d.composedPath()[0]:d.path?d.path[0]:d.target,h)&&(h=u),e.target=h}function tq(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&AW&&i-r===0,a=e&(PW|OW)&&i-r===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,$W(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function eq(t){return t.trim().split(/\s+/g)}function nq(t,e,n){HW(eq(e),(function(e){t.addEventListener(e,n,!1)}))}function iq(t,e,n){HW(eq(e),(function(e){t.removeEventListener(e,n,!1)}))}function rq(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var oq=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){VW(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&nq(this.element,this.evEl,this.domHandler),this.evTarget&&nq(this.target,this.evTarget,this.domHandler),this.evWin&&nq(rq(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&iq(this.element,this.evEl,this.domHandler),this.evTarget&&iq(this.target,this.evTarget,this.domHandler),this.evWin&&iq(rq(this.element),this.evWin,this.domHandler)},t}();function aq(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}var sq={pointerdown:AW,pointermove:2,pointerup:PW,pointercancel:OW,pointerout:OW},lq={2:TW,3:"pen",4:kW,5:"kinect"},cq="pointerdown",uq="pointermove pointerup pointercancel";aW.MSPointerEvent&&!aW.PointerEvent&&(cq="MSPointerDown",uq="MSPointerMove MSPointerUp MSPointerCancel");var hq=function(t){function e(){var n,i=e.prototype;return i.evEl=cq,i.evWin=uq,(n=t.apply(this,arguments)||this).store=n.manager.session.pointerEvents=[],n}return rW(e,t),e.prototype.handler=function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=sq[i],o=lq[t.pointerType]||t.pointerType,a=o===TW,s=aq(e,t.pointerId,"pointerId");r&AW&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):r&(PW|OW)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},e}(oq);function dq(t){return Array.prototype.slice.call(t,0)}function fq(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];aq(r,a)<0&&i.push(t[o]),r[o]=a,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}var pq={touchstart:AW,touchmove:2,touchend:PW,touchcancel:OW},gq=function(t){function e(){var n;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).targetIds={},n}return rW(e,t),e.prototype.handler=function(t){var e=pq[t.type],n=mq.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:TW,srcEvent:t})},e}(oq);function mq(t,e){var n,i,r=dq(t.touches),o=this.targetIds;if(e&(2|AW)&&1===r.length)return o[r[0].identifier]=!0,[r,r];var a=dq(t.changedTouches),s=[],l=this.target;if(i=r.filter((function(t){return qW(t.target,l)})),e===AW)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),e&(PW|OW)&&delete o[a[n].identifier],n++;return s.length?[fq(i.concat(s),"identifier",!0),s]:void 0}var vq={mousedown:AW,mousemove:2,mouseup:PW},yq=function(t){function e(){var n,i=e.prototype;return i.evEl="mousedown",i.evWin="mousemove mouseup",(n=t.apply(this,arguments)||this).pressed=!1,n}return rW(e,t),e.prototype.handler=function(t){var e=vq[t.type];e&AW&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=PW),this.pressed&&(e&PW&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:kW,srcEvent:t}))},e}(oq),bq=2500;function _q(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},i=this.lastTouches;this.lastTouches.push(n);setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),bq)}}function xq(t,e){t&AW?(this.primaryTouch=e.changedPointers[0].identifier,_q.call(this,e)):t&(PW|OW)&&_q.call(this,e)}function wq(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}var Sq=function(){var t=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handler=function(t,e,n){var r=n.pointerType===TW,o=n.pointerType===kW;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)xq.call(oW(oW(i)),e,n);else if(o&&wq.call(oW(oW(i)),n))return;i.callback(t,e,n)}},i.touch=new gq(i.manager,i.handler),i.mouse=new yq(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return rW(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(oq);return t}();function Eq(t,e,n){return!!Array.isArray(t)&&(HW(t,n[e],n),!0)}var Mq=32,Tq=1;function kq(t,e){var n=e.manager;return n?n.get(t):t}function Cq(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Aq=function(){function t(t){void 0===t&&(t={}),this.options=iW({enable:!0},t),this.id=Tq++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return sW(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(Eq(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=kq(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return Eq(t,"dropRecognizeWith",this)||(t=kq(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(Eq(t,"requireFailure",this))return this;var e=this.requireFail;return-1===aq(e,t=kq(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(Eq(t,"dropRequireFailure",this))return this;t=kq(t,this);var e=aq(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+Cq(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+Cq(n))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Mq},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=sW({},t);if(!VW(this.options.enable,[this,e]))return this.reset(),void(this.state=Mq);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),Pq=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,iW({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}rW(e,t);var n=e.prototype;return n.getTouchAction=function(){return[yW]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),t.eventType&AW&&0===this.count)return this.failTimeout();if(r&&o&&i){if(t.eventType!==PW)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||KW(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.interval),2):8}return Mq},n.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=Mq}),this.options.interval),Mq},n.reset=function(){clearTimeout(this._timer)},n.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Aq),Oq=function(t){function e(e){return void 0===e&&(e={}),t.call(this,iW({pointers:1},e))||this}rW(e,t);var n=e.prototype;return n.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},n.process=function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(n&OW||!r)?16|e:i||r?n&PW?8|e:2&e?4|e:2:Mq},e}(Aq);function Rq(t){return t===NW?"down":t===IW?"up":t===LW?"left":t===DW?"right":""}var Lq=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,iW({event:"pan",threshold:10,pointers:1,direction:UW},e))||this).pX=null,n.pY=null,n}rW(e,t);var n=e.prototype;return n.getTouchAction=function(){var t=this.options.direction,e=[];return t&zW&&e.push(xW),t&FW&&e.push(_W),e},n.directionTest=function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(e.direction&zW?(r=0===o?RW:o<0?LW:DW,n=o!==this.pX,i=Math.abs(t.deltaX)):(r=0===a?RW:a<0?IW:NW,n=a!==this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},n.attrTest=function(t){return Oq.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},n.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var n=Rq(e.direction);n&&(e.additionalEvent=this.options.event+n),t.prototype.emit.call(this,e)},e}(Oq),Dq=function(t){function e(e){return void 0===e&&(e={}),t.call(this,iW({event:"swipe",threshold:10,velocity:.3,direction:zW|FW,pointers:1},e))||this}rW(e,t);var n=e.prototype;return n.getTouchAction=function(){return Lq.prototype.getTouchAction.call(this)},n.attrTest=function(e){var n,i=this.options.direction;return i&(zW|FW)?n=e.overallVelocity:i&zW?n=e.overallVelocityX:i&FW&&(n=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&hW(n)>this.options.velocity&&e.eventType&PW},n.emit=function(t){var e=Rq(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Oq),Iq=function(t){function e(e){return void 0===e&&(e={}),t.call(this,iW({event:"pinch",threshold:0,pointers:2},e))||this}rW(e,t);var n=e.prototype;return n.getTouchAction=function(){return[bW]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},n.emit=function(e){if(1!==e.scale){var n=e.scale<1?"in":"out";e.additionalEvent=this.options.event+n}t.prototype.emit.call(this,e)},e}(Oq),Nq=function(t){function e(e){return void 0===e&&(e={}),t.call(this,iW({event:"rotate",threshold:0,pointers:2},e))||this}rW(e,t);var n=e.prototype;return n.getTouchAction=function(){return[bW]},n.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(Oq),zq=function(t){function e(e){var n;return void 0===e&&(e={}),(n=t.call(this,iW({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,n._input=null,n}rW(e,t);var n=e.prototype;return n.getTouchAction=function(){return[vW]},n.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!r||!i||t.eventType&(PW|OW)&&!o)this.reset();else if(t.eventType&AW)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),n.time);else if(t.eventType&PW)return 8;return Mq},n.reset=function(){clearTimeout(this._timer)},n.emit=function(t){8===this.state&&(t&&t.eventType&PW?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=dW(),this.manager.emit(this.options.event,this._input)))},e}(Aq),Fq={domEvents:!1,touchAction:mW,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Uq=[[Nq,{enable:!1}],[Iq,{enable:!1},["rotate"]],[Dq,{direction:zW}],[Lq,{direction:zW},["swipe"]],[Pq],[Pq,{event:"doubletap",taps:2},["tap"]],[zq]];function Bq(t,e){var n,i=t.element;i.style&&(HW(t.options.cssProps,(function(r,o){n=fW(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}var jq=function(){function t(t,e){var n,i=this;this.options=sW({},Fq,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(EW?hq:MW?gq:SW?Sq:yq))(n,tq),this.touchAction=new WW(this,this.options.touchAction),Bq(this,!0),HW(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return sW(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(e.curRecognizer=null,r=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(e.curRecognizer=n,r=n),o++}},e.get=function(t){if(t instanceof Aq)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(Eq(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(Eq(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,i=aq(n,e);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return HW(eq(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return HW(eq(t),(function(t){e?n[t]&&n[t].splice(aq(n[t],e),1):delete n[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},e.destroy=function(){this.element&&Bq(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Hq={touchstart:AW,touchmove:2,touchend:PW,touchcancel:OW},Vq=function(t){function e(){var n,i=e.prototype;return i.evTarget="touchstart",i.evWin="touchstart touchmove touchend touchcancel",(n=t.apply(this,arguments)||this).started=!1,n}return rW(e,t),e.prototype.handler=function(t){var e=Hq[t.type];if(e===AW&&(this.started=!0),this.started){var n=Gq.call(this,t,e);e&(PW|OW)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:TW,srcEvent:t})}},e}(oq);function Gq(t,e){var n=dq(t.touches),i=dq(t.changedTouches);return e&(PW|OW)&&(n=fq(n.concat(i),"identifier",!0)),[n,i]}function Wq(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=window.console&&(window.console.warn||window.console.log);return r&&r.call(window.console,i,n),t.apply(this,arguments)}}var qq=Wq((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),Xq=Wq((function(t,e){return qq(t,e,!0)}),"merge","Use `assign`.");function Yq(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&sW(i,n)}function Kq(t,e){return function(){return t.apply(e,arguments)}}var Zq=function(){var t=function(t,e){return void 0===e&&(e={}),new jq(t,iW({recognizers:Uq.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=UW,t.DIRECTION_DOWN=NW,t.DIRECTION_LEFT=LW,t.DIRECTION_RIGHT=DW,t.DIRECTION_UP=IW,t.DIRECTION_HORIZONTAL=zW,t.DIRECTION_VERTICAL=FW,t.DIRECTION_NONE=RW,t.DIRECTION_DOWN=NW,t.INPUT_START=AW,t.INPUT_MOVE=2,t.INPUT_END=PW,t.INPUT_CANCEL=OW,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=Mq,t.Manager=jq,t.Input=oq,t.TouchAction=WW,t.TouchInput=gq,t.MouseInput=yq,t.PointerEventInput=hq,t.TouchMouseInput=Sq,t.SingleTouchInput=Vq,t.Recognizer=Aq,t.AttrRecognizer=Oq,t.Tap=Pq,t.Pan=Lq,t.Swipe=Dq,t.Pinch=Iq,t.Rotate=Nq,t.Press=zq,t.on=nq,t.off=iq,t.each=HW,t.merge=Xq,t.extend=qq,t.bindFn=Kq,t.assign=sW,t.inherit=Yq,t.bindFn=Kq,t.prefixed=fW,t.toArray=dq,t.inArray=aq,t.uniqueArray=fq,t.splitStr=eq,t.boolOrFn=VW,t.hasParent=qW,t.addEventListeners=nq,t.removeEventListeners=iq,t.defaults=sW({},Fq,{preset:Uq}),t}();Zq.defaults;var Qq=Zq;function Jq(t,e){var n="undefined"!==typeof Hj&&qN(t)||t["@@iterator"];if(!n){if(nH(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return $q(t,e);var i=Kj(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return MN(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $q(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function tX(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var e=function(){for(var t=function(){var t=4022871197;return function(e){for(var n=e.toString(),i=0;i<n.length;i++){var r=.02519603282416938*(t+=n.charCodeAt(i));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}(),e=t(" "),n=t(" "),i=t(" "),r=0;r<arguments.length;r++)(e-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(e+=1),(n-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(n+=1),(i-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(i+=1);return[e,n,i]}(t),n=Bj(e,3),i=n[0],r=n[1],o=n[2],a=1,s=function(){var t=2091639*i+2.3283064365386963e-10*a;return i=r,r=o,o=t-(a=0|t)};return s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.algorithm="Alea",s.seed=t,s.version="0.9",s}(e.length?e:[mH()])}Hj("DELETE");var eX="undefined"!==typeof window?window.Hammer||Qq:function(){return function(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}()};function nX(t){var e,n=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)}));var i=eX(this._dom.overlay);i.on("tap",xR(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){i.destroy()}));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];AH(r).call(r,(function(t){i.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",n._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&n.deactivate()}}AR(nX.prototype),nX.current=null,nX.prototype.destroy=function(){var t,e;this.deactivate();var n,i=Jq(UH(t=sV(e=this._cleanupQueue).call(e,0)).call(t));try{for(i.s();!(n=i.n()).done;){(0,n.value)()}}catch(r){i.e(r)}finally{i.f()}},nX.prototype.activate=function(){nX.current&&nX.current.deactivate(),nX.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},nX.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},nX.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var iX=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rX=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,oX=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,aX=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function sX(t){if(t)for(;!0===t.hasChildNodes();){var e=t.firstChild;e&&(sX(e),t.removeChild(e))}}function lX(t){return t instanceof String||"string"===typeof t}function cX(t){return"object"===YB(t)&&null!==t}function uX(t,e,n,i){var r=!1;!0===i&&(r=null===e[n]&&void 0!==t[n]),r?delete t[n]:t[n]=e[n]}function hX(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var i in t)if(void 0!==e[i])if(null===e[i]||"object"!==YB(e[i]))uX(t,e,i,n);else{var r=t[i],o=e[i];cX(r)&&cX(o)&&hX(r,o,n)}}function dX(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(nH(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0;r<t.length;r++){var o=t[r];if(Object.prototype.hasOwnProperty.call(n,o))if(n[o]&&n[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?pX(e[o],n[o],!1,i):uX(e,n,o,i);else{if(nH(n[o]))throw new TypeError("Arrays are not supported by deepExtend");uX(e,n,o,i)}}return e}function fX(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(nH(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&!AV(t).call(t,r))if(n[r]&&n[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?pX(e[r],n[r]):uX(e,n,r,i);else if(nH(n[r])){e[r]=[];for(var o=0;o<n[r].length;o++)e[r].push(n[r][o])}else uX(e,n,r,i);return e}function pX(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)||!0===n)if("object"===YB(e[r])&&null!==e[r]&&DV(e[r])===Object.prototype)void 0===t[r]?t[r]=pX({},e[r],n):"object"===YB(t[r])&&null!==t[r]&&DV(t[r])===Object.prototype?pX(t[r],e[r],n):uX(t,e,r,i);else if(nH(e[r])){var o;t[r]=Kj(o=e[r]).call(o)}else uX(t,e,r,i);return t}function gX(t,e){var n;return Yj(n=[]).call(n,jj(t),[e])}function mX(t){return t.getBoundingClientRect().top}function vX(t,e){if(nH(t))for(var n=t.length,i=0;i<n;i++)e(t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}function yX(t){var e;switch(t.length){case 3:case 4:return(e=rX.exec(t))?{r:cG(e[1]+e[1],16),g:cG(e[2]+e[2],16),b:cG(e[3]+e[3],16)}:null;case 6:case 7:return(e=iX.exec(t))?{r:cG(e[1],16),g:cG(e[2],16),b:cG(e[3],16)}:null;default:return null}}function bX(t,e){if(AV(t).call(t,"rgba"))return t;if(AV(t).call(t,"rgb")){var n=t.substr(_G(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"}var i=yX(t);return null==i?t:"rgba("+i.r+","+i.g+","+i.b+","+e+")"}function _X(t,e,n){var i;return"#"+Kj(i=((1<<24)+(t<<16)+(e<<8)+n).toString(16)).call(i,1)}function xX(t,e){if(lX(t)){var n=t;if(TX(n)){var i,r=cH(i=n.substr(4).substr(0,n.length-5).split(",")).call(i,(function(t){return cG(t)}));n=_X(r[0],r[1],r[2])}if(!0===MX(n)){var o=function(t){var e=yX(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return wX(e.r,e.g,e.b)}(n),a={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},s={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},l=EX(s.h,s.s,s.v),c=EX(a.h,a.s,a.v);return{background:n,border:l,highlight:{background:c,border:l},hover:{background:c,border:l}}}return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}return e?{background:t.background||e.background,border:t.border||e.border,highlight:lX(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:lX(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:lX(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:lX(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function wX(t,e,n){t/=255,e/=255,n/=255;var i=Math.min(t,Math.min(e,n)),r=Math.max(t,Math.max(e,n));return i===r?{h:0,s:0,v:i}:{h:60*((t===i?3:n===i?1:5)-(t===i?e-n:n===i?t-e:n-t)/(r-i))/360,s:(r-i)/r,v:r}}function SX(t,e,n){var i,r,o,a=Math.floor(6*t),s=6*t-a,l=n*(1-e),c=n*(1-s*e),u=n*(1-(1-s)*e);switch(a%6){case 0:i=n,r=u,o=l;break;case 1:i=c,r=n,o=l;break;case 2:i=l,r=n,o=u;break;case 3:i=l,r=c,o=n;break;case 4:i=u,r=l,o=n;break;case 5:i=n,r=l,o=c}return{r:Math.floor(255*i),g:Math.floor(255*r),b:Math.floor(255*o)}}function EX(t,e,n){var i=SX(t,e,n);return _X(i.r,i.g,i.b)}function MX(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function TX(t){return oX.test(t)}function kX(t){if(null===t||"object"!==YB(t))return null;if(t instanceof Element)return t;var e=SG(t);for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&"object"==YB(t[n])&&(e[n]=kX(t[n]));return e}function CX(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=function(t){return null!==t&&void 0!==t},o=function(t){return null!==t&&"object"===YB(t)};if(!o(t))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!r(n))throw new Error("Parameter option must have a value");if(!o(i))throw new Error("Parameter globalOptions must be an object");var a=e[n],s=o(i)&&!function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(i),l=s?i[n]:void 0,c=l?l.enabled:void 0;if(void 0!==a){if("boolean"===typeof a)return o(t[n])||(t[n]={}),void(t[n].enabled=a);if(null===a&&!o(t[n])){if(!r(l))return;t[n]=SG(l)}if(o(a)){var u=!0;void 0!==a.enabled?u=a.enabled:void 0!==c&&(u=l.enabled),function(t,e,n){o(t[n])||(t[n]={});var i=e[n],r=t[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}(t,e,n),t[n].enabled=u}}}var AX={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function PX(t,e){var n;nH(e)||(e=[e]);var i,r=Jq(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o){n=o[e[0]];for(var a=1;a<e.length;a++)n&&(n=n[e[a]]);if("undefined"!==typeof n)break}}}catch(s){r.e(s)}finally{r.f()}return n}var OX={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},RX=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;XN(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return JB(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!==typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!==typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"===typeof t)return OX[t]}},{key:"setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var n,i=this._isColorString(t);if(void 0!==i&&(t=i),!0===lX(t)){if(!0===TX(t)){var r=t.substr(4).substr(0,t.length-5).split(",");n={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===function(t){return aX.test(t)}(t)){var o=t.substr(5).substr(0,t.length-6).split(",");n={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(!0===MX(t)){var a=yX(t);n={r:a.r,g:a.g,b:a.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var s=void 0!==t.a?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:s}}if(void 0===n)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+TG(t));this._setColor(n,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=$O({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",WG((function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=$O({},t)),this.color=t;var e=wX(t.r,t.g,t.b),n=2*Math.PI,i=this.r*e.s,r=this.centerCoordinates.x+i*Math.sin(n*e.h),o=this.centerCoordinates.y+i*Math.cos(n*e.h);this.colorPickerSelector.style.left=r-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=wX(this.color.r,this.color.g,this.color.b);e.v=t/100;var n=SX(e.h,e.s,e.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,e=wX(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,r),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-e.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),nW(n).call(n),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,e,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var r=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(s){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(s){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var a=this;this.opacityRange.onchange=function(){a._setOpacity(this.value)},this.opacityRange.oninput=function(){a._setOpacity(this.value)},this.brightnessRange.onchange=function(){a._setBrightness(this.value)},this.brightnessRange.oninput=function(){a._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=xR(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=xR(e=this._apply).call(e,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=xR(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=xR(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new eX(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",(function(e){e.isFirst&&t._moveSelector(e)})),this.hammer.on("tap",(function(e){t._moveSelector(e)})),this.hammer.on("panstart",(function(e){t._moveSelector(e)})),this.hammer.on("panmove",(function(e){t._moveSelector(e)})),this.hammer.on("panend",(function(e){t._moveSelector(e)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e,n,i,r,o=this.colorPickerCanvas.clientWidth,a=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,o,a),this.centerCoordinates={x:.5*o,y:.5*a},this.r=.49*o;var s,l=2*Math.PI/360,c=1/this.r;for(i=0;i<360;i++)for(r=0;r<this.r;r++)e=this.centerCoordinates.x+r*Math.sin(l*i),n=this.centerCoordinates.y+r*Math.cos(l*i),s=SX(.002777777777777778*i,r*c,1),t.fillStyle="rgb("+s.r+","+s.g+","+s.b+")",t.fillRect(e-.5,n-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,o,a)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-e.left,i=t.center.y-e.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,s=i-r,l=Math.atan2(a,s),c=.98*Math.min(Math.sqrt(a*a+s*s),o),u=Math.cos(l)*c+r,h=Math.sin(l)*c+o;this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=h-.5*this.colorPickerSelector.clientWidth+"px";var d=l/(2*Math.PI);d=d<0?d+1:d;var f=c/this.r,p=wX(this.color.r,this.color.g,this.color.b);p.h=d,p.s=f;var g=SX(p.h,p.s,p.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();function LX(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length<1)throw new TypeError("Invalid arguments.");if(1===e.length)return document.createTextNode(e[0]);var i=document.createElement(e[0]);return i.appendChild(LX.apply(void 0,jj(Kj(e).call(e,1)))),i}var DX,IX=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1};XN(this,t),this.parent=e,this.changedOptions=[],this.container=n,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},$O(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new RX(r),this.wrapper=void 0}return JB(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;if("string"===typeof t)this.options.filter=t;else if(nH(t))this.options.filter=t.join();else if("object"===YB(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==jV(t)&&(this.options.filter=jV(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"===typeof t?(this.options.filter=!0,e=t):"function"===typeof t&&(this.options.filter=t,e=!0);!1===jV(this.options)&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=jV(this.options),e=0,n=!1;for(var i in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,i)&&(this.allowCreation=!1,n=!1,"function"===typeof t?n=(n=t(i,[]))||this._handleObject(this.configureOptions[i],[i],!0):!0!==t&&-1===_G(t).call(t,i)||(n=!0),!1!==n&&(this.allowCreation=!0,e>0&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),e++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,n=0;n<t.length;n++){if(void 0===e[t[n]]){e=void 0;break}e=e[t[n]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return AH(i).call(i,(function(t){e.appendChild(t)})),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerText=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=document.createElement("div");if(i.className="vis-configuration vis-config-label vis-config-s"+e.length,!0===n){for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(LX("i","b",t))}else i.innerText=t+":";return i}},{key:"_makeDropdown",value:function(t,e,n){var i=document.createElement("select");i.className="vis-configuration vis-config-select";var r=0;void 0!==e&&-1!==_G(t).call(t,e)&&(r=_G(t).call(t,e));for(var o=0;o<t.length;o++){var a=document.createElement("option");a.value=t[o],o===r&&(a.selected="selected"),a.innerText=t[o],i.appendChild(a)}var s=this;i.onchange=function(){s._update(this.value,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,i)}},{key:"_makeRange",value:function(t,e,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=r,s.max=o}catch(g){}s.step=a;var l="",c=0;if(void 0!==e){var u=1.2;e<0&&e*u<r?(s.min=Math.ceil(e*u),c=s.min,l="range increased"):e/u<r&&(s.min=Math.ceil(e/u),c=s.min,l="range increased"),e*u>o&&1!==o&&(s.max=Math.ceil(e*u),c=s.max,l="range increased"),s.value=e}else s.value=i;var h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=s.value;var d=this;s.onchange=function(){h.value=this.value,d._update(Number(this.value),n)},s.oninput=function(){h.value=this.value};var f=this._makeLabel(n[n.length-1],n),p=this._makeItem(n,f,s,h);""!==l&&this.popupHistory[p]!==c&&(this.popupHistory[p]=c,this._setupPopup(l,p))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}},{key:"_setupPopup",value:function(t,e){var n=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerText=t,i.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=WG((function(){t.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=WG((function(){t._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(t,e,n){var i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=t,void 0!==e&&(i.checked=e,e!==t&&("object"===YB(t)?e!==t.enabled&&this.changedOptions.push({path:n,value:e}):this.changedOptions.push({path:n,value:e})));var r=this;i.onchange=function(){r._update(this.checked,n)};var o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}},{key:"_makeTextInput",value:function(t,e,n){var i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",i.value=e,e!==t&&this.changedOptions.push({path:n,value:e});var r=this;i.onchange=function(){r._update(this.value,n)};var o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}},{key:"_makeColorField",value:function(t,e,n){var i=this,r=t[1],o=document.createElement("div");"none"!==(e=void 0===e?r:e)?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=e):o.className="vis-configuration vis-config-colorBlock none",e=void 0===e?r:e,o.onclick=function(){i._showColorPicker(e,o,n)};var a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,o)}},{key:"_showColorPicker",value:function(t,e,n){var i=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((function(t){var r="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=r,i._update(r,n)})),this.colorPicker.setCloseCallback((function(){e.onclick=function(){i._showColorPicker(t,e,n)}}))}},{key:"_handleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1,r=jV(this.options),o=!1;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){i=!0;var s=t[a],l=gX(e,a);if("function"===typeof r&&!1===(i=r(a,e))&&!nH(s)&&"string"!==typeof s&&"boolean"!==typeof s&&s instanceof Object&&(this.allowCreation=!1,i=this._handleObject(s,l,!0),this.allowCreation=!1===n),!1!==i){o=!0;var c=this._getValue(l);if(nH(s))this._handleArray(s,c,l);else if("string"===typeof s)this._makeTextInput(s,c,l);else if("boolean"===typeof s)this._makeCheckbox(s,c,l);else if(s instanceof Object){if(!this.hideOption(e,a,this.moduleOptions))if(void 0!==s.enabled){var u=gX(l,"enabled"),h=this._getValue(u);if(!0===h){var d=this._makeLabel(a,l,!0);this._makeItem(l,d),o=this._handleObject(s,l)||o}else this._makeCheckbox(s,h,l)}else{var f=this._makeLabel(a,l,!0);this._makeItem(l,f),o=this._handleObject(s,l)||o}}else console.error("dont know how to handle",s,a,l)}}return o}},{key:"_handleArray",value:function(t,e,n){"string"===typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,n),t[1]!==e&&this.changedOptions.push({path:n,value:e})):"string"===typeof t[0]?(this._makeDropdown(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:e})):"number"===typeof t[0]&&(this._makeRange(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:Number(e)}))}},{key:"_update",value:function(t,e){var n=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n;t="false"!==(t="true"===t||t)&&t;for(var r=0;r<e.length;r++)"global"!==e[r]&&(void 0===i[e[r]]&&(i[e[r]]={}),r!==e.length-1?i=i[e[r]]:i[e[r]]=t);return n}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(LX("pre","const options = "+TG(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}(),NX=function(){function t(e,n){XN(this,t),this.container=e,this.overflowMethod=n||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return JB(t,[{key:"setPosition",value:function(t,e){this.x=cG(t),this.y=cG(e)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=0,a=0;if("flip"==this.overflowMethod){var s=!1,l=!0;this.y-e<this.padding&&(l=!1),this.x+n>r-this.padding&&(s=!0),o=s?this.x-n:this.x,a=l?this.y-e:this.y}else(a=this.y-e)+e+this.padding>i&&(a=i-e-this.padding),a<this.padding&&(a=this.padding),(o=this.x)+n+this.padding>r&&(o=r-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),zX=!1,FX="background: #FFeeee; color: #dd0000",UX=function(){function t(){XN(this,t)}return JB(t,null,[{key:"validate",value:function(e,n,i){zX=!1,DX=n;var r=n;return void 0!==i&&(r=n[i]),t.parse(e,r,[]),zX}},{key:"parse",value:function(e,n,i){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.check(r,e,n,i)}},{key:"check",value:function(e,n,i,r){if(void 0!==i[e]||void 0!==i.__any__){var o=e,a=!0;void 0===i[e]&&void 0!==i.__any__&&(o="__any__",a="object"===t.getType(n[e]));var s=i[o];a&&void 0!==s.__type__&&(s=s.__type__),t.checkFields(e,n,i,o,s,r)}else t.getSuggestion(e,i,r)}},{key:"checkFields",value:function(e,n,i,r,o,a){var s=function(n){console.error("%c"+n+t.printLocation(a,e),FX)},l=t.getType(n[e]),c=o[l];void 0!==c?"array"===t.getType(c)&&-1===_G(c).call(c,n[e])?(s('Invalid option detected in "'+e+'". Allowed values are:'+t.print(c)+' not "'+n[e]+'". '),zX=!0):"object"===l&&"__any__"!==r&&(a=gX(a,e),t.parse(n[e],i[r],a)):void 0===o.any&&(s('Invalid type received for "'+e+'". Expected: '+t.print(dH(o))+". Received ["+l+'] "'+n[e]+'"'),zX=!0)}},{key:"getType",value:function(t){var e=YB(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":nH(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,n,i){var r,o=t.findInOptions(e,n,i,!1),a=t.findInOptions(e,DX,[],!0);r=void 0!==o.indexMatch?" in "+t.printLocation(o.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n':a.distance<=4&&o.distance>a.distance?" in "+t.printLocation(o.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(a.path,a.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+t.printLocation(o.path,e):". Did you mean one of these: "+t.print(dH(n))+t.printLocation(i,e),console.error('%cUnknown option detected: "'+e+'"'+r,FX),zX=!0}},{key:"findInOptions",value:function(e,n,i){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=1e9,s="",l=[],c=e.toLowerCase(),u=void 0;for(var h in n){var d=void 0;if(void 0!==n[h].__type__&&!0===o){var f=t.findInOptions(e,n[h],gX(i,h));a>f.distance&&(s=f.closestMatch,l=f.path,a=f.distance,u=f.indexMatch)}else{var p;-1!==_G(p=h.toLowerCase()).call(p,c)&&(u=h),a>(d=t.levenshteinDistance(e,h))&&(s=h,l=Kj(r=i).call(r),a=d)}}return{closestMatch:s,path:l,distance:a,indexMatch:u}}},{key:"printLocation",value:function(t,e){for(var n="\n\n"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options = {\n",i=0;i<t.length;i++){for(var r=0;r<i+1;r++)n+="  ";n+=t[i]+": {\n"}for(var o=0;o<t.length+1;o++)n+="  ";n+=e+"\n";for(var a=0;a<t.length+1;a++){for(var s=0;s<t.length-a;s++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return TG(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var n,i,r=[];for(n=0;n<=e.length;n++)r[n]=[n];for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)==t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}}]),t}(),BX=nX,jX=IX,HX=eX,VX=NX,GX=FX,WX=UX;function qX(t){return QX=t,function(){var t={};JX=0,void($X=QX.charAt(0)),uY(),"strict"===tY&&(t.strict=!0,uY());"graph"!==tY&&"digraph"!==tY||(t.type=tY,uY());eY===KX.IDENTIFIER&&(t.id=tY,uY());if("{"!=tY)throw mY("Angle bracket { expected");if(uY(),hY(t),"}"!=tY)throw mY("Angle bracket } expected");if(uY(),""!==tY)throw mY("End of file expected");return uY(),delete t.node,delete t.edge,delete t.graph,t}()}var XX={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},YX=SG(XX);YX.color="color.color",YX.style="dashes";var KX={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},ZX={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},QX="",JX=0,$X="",tY="",eY=KX.NULL;function nY(){JX++,$X=QX.charAt(JX)}function iY(){return QX.charAt(JX+1)}function rY(t){var e=t.charCodeAt(0);return e<47?35===e||46===e:e<59?e>47:e<91?e>64:e<96?95===e:e<123&&e>96}function oY(t,e){if(t||(t={}),e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function aY(t,e,n){for(var i=e.split("."),r=t;i.length;){var o=i.shift();i.length?(r[o]||(r[o]={}),r=r[o]):r[o]=n}}function sY(t,e){for(var n,i,r=null,o=[t],a=t;a.parent;)o.push(a.parent),a=a.parent;if(a.nodes)for(n=0,i=a.nodes.length;n<i;n++)if(e.id===a.nodes[n].id){r=a.nodes[n];break}for(r||(r={id:e.id},t.node&&(r.attr=oY(r.attr,t.node))),n=o.length-1;n>=0;n--){var s,l=o[n];l.nodes||(l.nodes=[]),-1===_G(s=l.nodes).call(s,r)&&l.nodes.push(r)}e.attr&&(r.attr=oY(r.attr,e.attr))}function lY(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var n=oY({},t.edge);e.attr=oY(n,e.attr)}}function cY(t,e,n,i,r){var o={from:e,to:n,type:i};return t.edge&&(o.attr=oY({},t.edge)),o.attr=oY(o.attr||{},r),null!=r&&r.hasOwnProperty("arrows")&&null!=r.arrows&&(o.arrows={to:{enabled:!0,type:r.arrows.type}},r.arrows=null),o}function uY(){for(eY=KX.NULL,tY="";" "===$X||"\t"===$X||"\n"===$X||"\r"===$X;)nY();do{var t=!1;if("#"===$X){for(var e=JX-1;" "===QX.charAt(e)||"\t"===QX.charAt(e);)e--;if("\n"===QX.charAt(e)||""===QX.charAt(e)){for(;""!=$X&&"\n"!=$X;)nY();t=!0}}if("/"===$X&&"/"===iY()){for(;""!=$X&&"\n"!=$X;)nY();t=!0}if("/"===$X&&"*"===iY()){for(;""!=$X;){if("*"===$X&&"/"===iY()){nY(),nY();break}nY()}t=!0}for(;" "===$X||"\t"===$X||"\n"===$X||"\r"===$X;)nY()}while(t);if(""!==$X){var n=$X+iY();if(ZX[n])return eY=KX.DELIMITER,tY=n,nY(),void nY();if(ZX[$X])return eY=KX.DELIMITER,tY=$X,void nY();if(rY($X)||"-"===$X){for(tY+=$X,nY();rY($X);)tY+=$X,nY();return"false"===tY?tY=!1:"true"===tY?tY=!0:isNaN(Number(tY))||(tY=Number(tY)),void(eY=KX.IDENTIFIER)}if('"'===$X){for(nY();""!=$X&&('"'!=$X||'"'===$X&&'"'===iY());)'"'===$X?(tY+=$X,nY()):"\\"===$X&&"n"===iY()?(tY+="\n",nY()):tY+=$X,nY();if('"'!=$X)throw mY('End of string " expected');return nY(),void(eY=KX.IDENTIFIER)}for(eY=KX.UNKNOWN;""!=$X;)tY+=$X,nY();throw new SyntaxError('Syntax error in part "'+vY(tY,30)+'"')}eY=KX.DELIMITER}function hY(t){for(;""!==tY&&"}"!=tY;)dY(t),";"===tY&&uY()}function dY(t){var e=fY(t);if(e)pY(t,e);else{var n=function(t){if("node"===tY)return uY(),t.node=gY(),"node";if("edge"===tY)return uY(),t.edge=gY(),"edge";if("graph"===tY)return uY(),t.graph=gY(),"graph";return null}(t);if(!n){if(eY!=KX.IDENTIFIER)throw mY("Identifier expected");var i=tY;if(uY(),"="===tY){if(uY(),eY!=KX.IDENTIFIER)throw mY("Identifier expected");t[i]=tY,uY()}else!function(t,e){var n={id:e},i=gY();i&&(n.attr=i);sY(t,n),pY(t,e)}(t,i)}}}function fY(t){var e=null;if("subgraph"===tY&&((e={}).type="subgraph",uY(),eY===KX.IDENTIFIER&&(e.id=tY,uY())),"{"===tY){if(uY(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,hY(e),"}"!=tY)throw mY("Angle bracket } expected");uY(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function pY(t,e){for(;"->"===tY||"--"===tY;){var n,i=tY;uY();var r=fY(t);if(r)n=r;else{if(eY!=KX.IDENTIFIER)throw mY("Identifier or subgraph expected");sY(t,{id:n=tY}),uY()}lY(t,cY(t,e,n,i,gY())),e=n}}function gY(){for(var t,e,n=null,i={dashed:!0,solid:!1,dotted:[1,5]},r={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},o=new Array,a=new Array;"["===tY;){for(uY(),n={};""!==tY&&"]"!=tY;){if(eY!=KX.IDENTIFIER)throw mY("Attribute name expected");var s=tY;if(uY(),"="!=tY)throw mY("Equal sign = expected");if(uY(),eY!=KX.IDENTIFIER)throw mY("Attribute value expected");var l=tY;"style"===s&&(l=i[l]),"arrowhead"===s&&(s="arrows",l={to:{enabled:!0,type:r[l]}}),"arrowtail"===s&&(s="arrows",l={from:{enabled:!0,type:r[l]}}),o.push({attr:n,name:s,value:l}),a.push(s),uY(),","==tY&&uY()}if("]"!=tY)throw mY("Bracket ] expected");uY()}if(AV(a).call(a,"dir")){var c={arrows:{}};for(t=0;t<o.length;t++)if("arrows"===o[t].name)if(null!=o[t].value.to)c.arrows.to=t;else{if(null==o[t].value.from)throw mY("Invalid value of arrows");c.arrows.from=t}else"dir"===o[t].name&&(c.dir=t);var u,h,d=o[c.dir].value;if(!AV(a).call(a,"arrows"))if("both"===d)o.push({attr:o[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=o.length-1,o.push({attr:o[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=o.length-1;else if("forward"===d)o.push({attr:o[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=o.length-1;else if("back"===d)o.push({attr:o[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=o.length-1;else{if("none"!==d)throw mY('Invalid dir type "'+d+'"');o.push({attr:o[c.dir].attr,name:"arrows",value:""}),c.arrows.to=o.length-1}if("both"===d)c.arrows.to&&c.arrows.from?(h=o[c.arrows.to].value.to.type,u=o[c.arrows.from].value.from.type,o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}},sV(o).call(o,c.arrows.from,1)):c.arrows.to?(h=o[c.arrows.to].value.to.type,u="arrow",o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.from&&(h="arrow",u=o[c.arrows.from].value.from.type,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}});else if("back"===d)c.arrows.to&&c.arrows.from?(h="",u=o[c.arrows.from].value.from.type,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.to?(h="",u="arrow",c.arrows.from=c.arrows.to,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.from&&(h="",u=o[c.arrows.from].value.from.type,o[c.arrows.to]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}),o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{from:{enabled:!0,type:o[c.arrows.from].value.from.type}}};else if("none"===d){var f;o[f=c.arrows.to?c.arrows.to:c.arrows.from]={attr:o[f].attr,name:o[f].name,value:""}}else{if("forward"!==d)throw mY('Invalid dir type "'+d+'"');c.arrows.to&&c.arrows.from||c.arrows.to?(h=o[c.arrows.to].value.to.type,u="",o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}):c.arrows.from&&(h="arrow",u="",c.arrows.to=c.arrows.from,o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:h},from:{enabled:!0,type:u}}}),o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:o[c.arrows.to].value.to.type}}}}sV(o).call(o,c.dir,1)}if(AV(a).call(a,"penwidth")){var p=[];for(e=o.length,t=0;t<e;t++)"width"!==o[t].name&&("penwidth"===o[t].name&&(o[t].name="width"),p.push(o[t]));o=p}for(e=o.length,t=0;t<e;t++)aY(o[t].attr,o[t].name,o[t].value);return n}function mY(t){return new SyntaxError(t+', got "'+vY(tY,30)+'" (char '+JX+")")}function vY(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function yY(t,e,n){for(var i=e.split("."),r=i.pop(),o=t,a=0;a<i.length;a++){var s=i[a];s in o||(o[s]={}),o=o[s]}return o[r]=n,t}function bY(t,e){var n={};for(var i in t)if(t.hasOwnProperty(i)){var r=e[i];nH(r)?AH(r).call(r,(function(e){yY(n,e,t[i])})):yY(n,"string"===typeof r?r:i,t[i])}return n}function _Y(t){var e,n=qX(t),i={nodes:[],edges:[],options:{}};n.nodes&&AH(e=n.nodes).call(e,(function(t){var e={id:t.id,label:String(t.label||t.id)};oY(e,bY(t.attr,XX)),e.image&&(e.shape="image"),i.nodes.push(e)}));if(n.edges){var r,o=function(t){var e={from:t.from,to:t.to};return oY(e,bY(t.attr,YX)),null==e.arrows&&"->"===t.type&&(e.arrows="to"),e};AH(r=n.edges).call(r,(function(t){var e,n,r,a,s,l,c;(e=t.from instanceof Object?t.from.nodes:{id:t.from},n=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges)&&AH(r=t.from.edges).call(r,(function(t){var e=o(t);i.edges.push(e)}));(s=n,l=function(e,n){var r=cY(i,e.id,n.id,t.type,t.attr),a=o(r);i.edges.push(a)},nH(a=e)?AH(a).call(a,(function(t){nH(s)?AH(s).call(s,(function(e){l(t,e)})):l(t,s)})):nH(s)?AH(s).call(s,(function(t){l(a,t)})):l(a,s),t.to instanceof Object&&t.to.edges)&&AH(c=t.to.edges).call(c,(function(t){var e=o(t);i.edges.push(e)}))}))}return n.attr&&(i.options=n.attr),i}function xY(t,e){var n,i={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=e&&(null!=e.fixed&&(i.nodes.fixed=e.fixed),null!=e.parseColor&&(i.nodes.parseColor=e.parseColor),null!=e.inheritColor&&(i.edges.inheritColor=e.inheritColor));var r=t.edges,o=cH(r).call(r,(function(t){var e={from:t.source,id:t.id,to:t.target};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),"Directed"===t.type&&(e.arrows="to"),t.color&&!1===i.edges.inheritColor&&(e.color=t.color),e}));return{nodes:cH(n=t.nodes).call(n,(function(t){var e={id:t.id,fixed:i.nodes.fixed&&null!=t.x&&null!=t.y};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.size&&(e.size=t.size),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),null!=t.title&&(e.title=t.title),null!=t.x&&(e.x=t.x),null!=t.y&&(e.y=t.y),null!=t.color&&(!0===i.nodes.parseColor?e.color=t.color:e.color={background:t.color,border:t.color,highlight:{background:t.color,border:t.color},hover:{background:t.color,border:t.color}}),e})),edges:o}}var wY=Object.freeze({__proto__:null,cn:{addDescription:"\u5355\u51fb\u7a7a\u767d\u5904\u653e\u7f6e\u65b0\u8282\u70b9\u3002",addEdge:"\u6dfb\u52a0\u8fde\u63a5\u7ebf",addNode:"\u6dfb\u52a0\u8282\u70b9",back:"\u8fd4\u56de",close:"\u95dc\u9589",createEdgeError:"\u65e0\u6cd5\u5c06\u8fde\u63a5\u7ebf\u8fde\u63a5\u5230\u7fa4\u96c6\u3002",del:"\u5220\u9664\u9009\u5b9a",deleteClusterError:"\u65e0\u6cd5\u5220\u9664\u7fa4\u96c6\u3002",edgeDescription:"\u5355\u51fb\u67d0\u4e2a\u8282\u70b9\u5e76\u5c06\u8be5\u8fde\u63a5\u7ebf\u62d6\u52a8\u5230\u53e6\u4e00\u4e2a\u8282\u70b9\u4ee5\u8fde\u63a5\u5b83\u4eec\u3002",edit:"\u7f16\u8f91",editClusterError:"\u65e0\u6cd5\u7f16\u8f91\u7fa4\u96c6\u3002",editEdge:"\u7f16\u8f91\u8fde\u63a5\u7ebf",editEdgeDescription:"\u5355\u51fb\u63a7\u5236\u8282\u70b9\u5e76\u5c06\u5b83\u4eec\u62d6\u5230\u8282\u70b9\u4e0a\u8fde\u63a5\u3002",editNode:"\u7f16\u8f91\u8282\u70b9"},cs:{addDescription:"Kluknut\xedm do pr\xe1zdn\xe9ho prostoru m\u016f\u017eete p\u0159idat nov\xfd vrchol.",addEdge:"P\u0159idat hranu",addNode:"P\u0159idat vrchol",back:"Zp\u011bt",close:"Zav\u0159\xedt",createEdgeError:"Nelze p\u0159ipojit hranu ke shluku.",del:"Smazat v\xfdb\u011br",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"P\u0159eta\u017een\xedm z jednoho vrcholu do druh\xe9ho m\u016f\u017eete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"P\u0159eta\u017een\xedm kontroln\xedho vrcholu hrany ji m\u016f\u017eete p\u0159ipojit k jin\xe9mu vrcholu.",editNode:"Upravit vrchol"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzuf\xfcgen",addNode:"Knoten hinzuf\xfcgen",back:"Zur\xfcck",close:"Schlie\xdfen",createEdgeError:"Es ist nicht m\xf6glich, Kanten mit Clustern zu verbinden.",del:"L\xf6sche Auswahl",deleteClusterError:"Cluster k\xf6nnen nicht gel\xf6scht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster k\xf6nnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},es:{addDescription:"Haga clic en un lugar vac\xedo para colocar un nuevo nodo.",addEdge:"A\xf1adir arista",addNode:"A\xf1adir nodo",back:"Atr\xe1s",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selecci\xf3n",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un n\u0153ud.",addEdge:"Ajouter un lien",addNode:"Ajouter un n\u0153ud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de cr\xe9er un lien vers un cluster.",del:"Effacer la s\xe9lection",deleteClusterError:"Les clusters ne peuvent pas \xeatre effac\xe9s.",edgeDescription:"Cliquez sur un n\u0153ud et glissez le lien vers un autre n\u0153ud pour les connecter.",edit:"\xc9diter",editClusterError:"Les clusters ne peuvent pas \xeatre \xe9dit\xe9s.",editEdge:"\xc9diter le lien",editEdgeDescription:"Cliquez sur les points de contr\xf4le et glissez-les pour connecter un n\u0153ud.",editNode:"\xc9diter le n\u0153ud"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espa\xe7o em branco para adicionar um novo n\xf3",addEdge:"Adicionar aresta",addNode:"Adicionar n\xf3",back:"Voltar",close:"Fechar",createEdgeError:"N\xe3o foi poss\xedvel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters n\xe3o puderam ser removidos.",edgeDescription:"Clique em um n\xf3 e arraste a aresta at\xe9 outro n\xf3 para conect\xe1-los",edit:"Editar",editClusterError:"Clusters n\xe3o puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um n\xf3 para conect\xe1-los",editNode:"Editar n\xf3"},ru:{addDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0443\u0437\u0435\u043b.",addEdge:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u0431\u0440\u043e",addNode:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0437\u0435\u043b",back:"\u041d\u0430\u0437\u0430\u0434",close:"\u0417\u0430\u043a\u0440\u044b\u0432\u0430\u0442\u044c",createEdgeError:"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0440\u0435\u0431\u0440\u0430 \u0432 \u043a\u043b\u0430\u0441\u0442\u0435\u0440.",del:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0435",deleteClusterError:"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b",edgeDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u0443\u0437\u0435\u043b \u0438 \u043f\u0440\u043e\u0442\u044f\u043d\u0438\u0442\u0435 \u0440\u0435\u0431\u0440\u043e \u043a \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u0443\u0437\u043b\u0443, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0438\u0445.",edit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",editClusterError:"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f.",editEdge:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u0435\u0431\u0440\u043e",editEdgeDescription:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438 \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u0445 \u0432 \u0443\u0437\u0435\u043b, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043d\u0435\u043c\u0443.",editNode:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0443\u0437\u0435\u043b"},uk:{addDescription:"K\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043d\u0430 \u0432\u0456\u043b\u044c\u043d\u0435 \u043c\u0456\u0441\u0446\u0435, \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438 \u043d\u043e\u0432\u0438\u0439 \u0432\u0443\u0437\u043e\u043b.",addEdge:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u0440\u0430\u0439",addNode:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0443\u0437\u043e\u043b",back:"\u041d\u0430\u0437\u0430\u0434",close:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438",createEdgeError:"\u041d\u0435 \u043c\u043e\u0436\u043b\u0438\u0432\u043e \u043e\u0431'\u0454\u0434\u043d\u0430\u0442\u0438 \u043a\u0440\u0430\u0457 \u0432 \u0433\u0440\u0443\u043f\u0443.",del:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043e\u0431\u0440\u0430\u043d\u0435",deleteClusterError:"\u0413\u0440\u0443\u043f\u0438 \u043d\u0435 \u043c\u043e\u0436\u0443\u0442\u044c \u0431\u0443\u0442\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u0456.",edgeDescription:"\u041a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043d\u0430 \u0432\u0443\u0437\u043e\u043b \u0456 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u043a\u0440\u0430\u0439 \u0434\u043e \u0456\u043d\u0448\u043e\u0433\u043e \u0432\u0443\u0437\u043b\u0430, \u0449\u043e\u0431 \u0457\u0445 \u0437'\u0454\u0434\u043d\u0430\u0442\u0438.",edit:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",editClusterError:"\u0413\u0440\u0443\u043f\u0438 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0456 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f.",editEdge:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043a\u0440\u0430\u0439",editEdgeDescription:"\u041a\u043b\u0456\u043a\u043d\u0456\u0442\u044c \u043d\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0456 \u0442\u043e\u0447\u043a\u0438 \u0456 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0456\u0442\u044c \u0457\u0445 \u0443 \u0432\u0443\u0437\u043e\u043b, \u0449\u043e\u0431 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u0438\u0441\u044f \u0434\u043e \u043d\u044c\u043e\u0433\u043e.",editNode:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0443\u0437\u043e\u043b"}});var SY=function(){function t(){XN(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return JB(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var n=Math.floor(e/2),i=Math.floor(e/4),r=Math.floor(e/8),o=Math.floor(e/16),a=Math.floor(t/2),s=Math.floor(t/4),l=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*s,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,s,i],[a,i,l,r],[5*l,i,c,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var n=1;n<this.NUM_ITERATIONS;n++){var i=this.coordinates[n-1],r=this.coordinates[n];t.drawImage(this.canvas,i[0],i[1],i[2],i[3],r[0],r[1],r[2],r[3])}}},{key:"drawImageAtPosition",value:function(t,e,n,i,r,o){if(this.initialized())if(e>2){e*=.5;for(var a=0;e>2&&a<this.NUM_ITERATIONS;)e*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);var s=this.coordinates[a];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],n,i,r,o)}else t.drawImage(this.image,n,i,r,o)}}]),t}(),EY=function(){function t(e){XN(this,t),this.images={},this.imageBroken={},this.callback=e}return JB(t,[{key:"_tryloadBrokenUrl",value:function(t,e,n){void 0!==t&&void 0!==n&&(void 0!==e?(n.image.onerror=function(){console.error("Could not load brokenImage:",e)},n.image.src=e):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var n=this,i=this.images[t];if(i)return i;var r=new SY;return this.images[t]=r,r.image.onload=function(){n._fixImageCoordinates(r.image),r.init(),n._redrawWithImage(r)},r.image.onerror=function(){console.error("Could not load image:",t),n._tryloadBrokenUrl(t,e,r)},r.image.src=t,r}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}(),MY={exports:{}},TY=Uk((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),kY=Uk,CY=DC,AY=tC,PY=TY,OY=Object.isExtensible,RY=kY((function(){OY(1)}))||PY?function(t){return!!CY(t)&&((!PY||"ArrayBuffer"!==AY(t))&&(!OY||OY(t)))}:OY,LY=!Uk((function(){return Object.isExtensible(Object.preventExtensions({}))})),DY=lO,IY=Zk,NY=kO,zY=DC,FY=RA,UY=OP.f,BY=Oz,jY=Dz,HY=RY,VY=LY,GY=!1,WY=zA("meta"),qY=0,XY=function(t){UY(t,WY,{value:{objectID:"O"+qY++,weakData:{}}})},YY=MY.exports={enable:function(){YY.enable=function(){},GY=!0;var t=BY.f,e=IY([].splice),n={};n[WY]=1,t(n).length&&(BY.f=function(n){for(var i=t(n),r=0,o=i.length;r<o;r++)if(i[r]===WY){e(i,r,1);break}return i},DY({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:jY.f}))},fastKey:function(t,e){if(!zY(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!FY(t,WY)){if(!HY(t))return"F";if(!e)return"E";XY(t)}return t[WY].objectID},getWeakData:function(t,e){if(!FY(t,WY)){if(!HY(t))return!0;if(!e)return!1;XY(t)}return t[WY].weakData},onFreeze:function(t){return VY&&GY&&HY(t)&&!FY(t,WY)&&XY(t),t}};NY[WY]=!0;var KY=MY.exports,ZY=PP,QY=dC,JY=NP,$Y=sA,tK=MI,eK=xO,nK=jC,iK=aN,rK=$I,oK=bI,aK=TypeError,sK=function(t,e){this.stopped=t,this.result=e},lK=sK.prototype,cK=function(t,e,n){var i,r,o,a,s,l,c,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),g=ZY(e,u),m=function(t){return i&&oK(i,"normal",t),new sK(!0,t)},v=function(t){return h?(JY(t),p?g(t[0],t[1],m):g(t[0],t[1])):p?g(t,m):g(t)};if(d)i=t.iterator;else if(f)i=t;else{if(!(r=rK(t)))throw new aK($Y(t)+" is not iterable");if(tK(r)){for(o=0,a=eK(t);a>o;o++)if((s=v(t[o]))&&nK(lK,s))return s;return new sK(!1)}i=iK(t,r)}for(l=d?t.next:i.next;!(c=QY(l,i)).done;){try{s=v(c.value)}catch(ROt){oK(i,"throw",ROt)}if("object"==typeof s&&s&&nK(lK,s))return s}return new sK(!1)},uK=jC,hK=TypeError,dK=function(t,e){if(uK(e,t))return t;throw new hK("Incorrect invocation")},fK=lO,pK=Fk,gK=KY,mK=Uk,vK=ZP,yK=cK,bK=dK,_K=sC,xK=DC,wK=MC,SK=kD,EK=OP.f,MK=fF.forEach,TK=cC,kK=bL.set,CK=bL.getterFor,AK=function(t,e,n){var i,r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),a=r?"set":"add",s=pK[t],l=s&&s.prototype,c={};if(TK&&_K(s)&&(o||l.forEach&&!mK((function(){(new s).entries().next()})))){var u=(i=e((function(e,n){kK(bK(e,u),{type:t,collection:new s}),wK(n)||yK(n,e[a],{that:e,AS_ENTRIES:r})}))).prototype,h=CK(t);MK(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in l)||o&&"clear"===t||vK(u,t,(function(n,i){var r=h(this).collection;if(!e&&o&&!xK(n))return"get"===t&&void 0;var a=r[t](0===n?0:n,i);return e?this:a}))})),o||EK(u,"size",{configurable:!0,get:function(){return h(this).collection.size}})}else i=n.getConstructor(e,t,r,a),gK.enable();return SK(i,t,!1,!0),c[t]=i,fK({global:!0,forced:!0},c),o||n.setStrong(i,t,r),i},PK=lD,OK=function(t,e,n){for(var i in e)n&&n.unsafe&&t[i]?t[i]=e[i]:PK(t,i,e[i],n);return t},RK=BC,LK=Xz,DK=cC,IK=qA("species"),NK=QL,zK=Xz,FK=OK,UK=PP,BK=dK,jK=MC,HK=cK,VK=aI,GK=sI,WK=function(t){var e=RK(t);DK&&e&&!e[IK]&&LK(e,IK,{configurable:!0,get:function(){return this}})},qK=cC,XK=KY.fastKey,YK=bL.set,KK=bL.getterFor,ZK={getConstructor:function(t,e,n,i){var r=t((function(t,r){BK(t,o),YK(t,{type:e,index:NK(null),first:void 0,last:void 0,size:0}),qK||(t.size=0),jK(r)||HK(r,t[i],{that:t,AS_ENTRIES:n})})),o=r.prototype,a=KK(e),s=function(t,e,n){var i,r,o=a(t),s=l(t,e);return s?s.value=n:(o.last=s={index:r=XK(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=s),i&&(i.next=s),qK?o.size++:t.size++,"F"!==r&&(o.index[r]=s)),t},l=function(t,e){var n,i=a(t),r=XK(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key===e)return n};return FK(o,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,qK?t.size=0:this.size=0},delete:function(t){var e=this,n=a(e),i=l(e,t);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first===i&&(n.first=r),n.last===i&&(n.last=o),qK?n.size--:e.size--}return!!i},forEach:function(t){for(var e,n=a(this),i=UK(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),FK(o,n?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),qK&&zK(o,"size",{configurable:!0,get:function(){return a(this).size}}),r},setStrong:function(t,e,n){var i=e+" Iterator",r=KK(e),o=KK(i);VK(t,e,(function(t,e){YK(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?GK("keys"===e?n.key:"values"===e?n.value:[n.key,n.value],!1):(t.target=void 0,GK(void 0,!0))}),n?"entries":"values",!n,!0),WK(e)}};AK("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),ZK);var QK=Nk(IC.Map),JK=function(){function t(){XN(this,t),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},$O(this.options,this.defaultOptions)}return JB(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&-1===_G(e).call(e,n)){var i=t[n];this.add(n,i)}}},{key:"clear",value:function(){this._groups=new QK,this._groupNames=[]}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._groups.get(t);if(void 0===n&&e)if(!1===this.options.useDefaultGroups&&this._groupNames.length>0){var i=this._groupIndex%this._groupNames.length;++this._groupIndex,(n={}).color=this._groups.get(this._groupNames[i]),this._groups.set(t,n)}else{var r=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,(n={}).color=this._defaultGroups[r],this._groups.set(t,n)}return n}},{key:"add",value:function(t,e){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,e),e}}]),t}();lO({target:"Number",stat:!0},{isNaN:function(t){return t!==t}});var $K=Nk(IC.Number.isNaN),tZ=Fk.isFinite,eZ=Number.isFinite||function(t){return"number"==typeof t&&tZ(t)};lO({target:"Number",stat:!0},{isFinite:eZ});var nZ=Nk(IC.Number.isFinite),iZ=fF.some;lO({target:"Array",proto:!0,forced:!yH("some")},{some:function(t){return iZ(this,t,arguments.length>1?arguments[1]:void 0)}});var rZ=pR("Array").some,oZ=jC,aZ=rZ,sZ=Array.prototype,lZ=function(t){var e=t.some;return t===sZ||oZ(sZ,t)&&e===sZ.some?aZ:e},cZ=Nk(lZ),uZ=Nk(IC.Object.getOwnPropertySymbols),hZ={exports:{}},dZ=lO,fZ=Uk,pZ=OC,gZ=lC.f,mZ=cC;dZ({target:"Object",stat:!0,forced:!mZ||fZ((function(){gZ(1)})),sham:!mZ},{getOwnPropertyDescriptor:function(t,e){return gZ(pZ(t),e)}});var vZ=IC.Object,yZ=hZ.exports=function(t,e){return vZ.getOwnPropertyDescriptor(t,e)};vZ.getOwnPropertyDescriptor.sham&&(yZ.sham=!0);var bZ=hZ.exports,_Z=Nk(bZ),xZ=eH,wZ=OC,SZ=lC,EZ=XI;lO({target:"Object",stat:!0,sham:!cC},{getOwnPropertyDescriptors:function(t){for(var e,n,i=wZ(t),r=SZ.f,o=xZ(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&EZ(a,e,n);return a}});var MZ=Nk(IC.Object.getOwnPropertyDescriptors),TZ={exports:{}},kZ=lO,CZ=cC,AZ=TL.f;kZ({target:"Object",stat:!0,forced:Object.defineProperties!==AZ,sham:!CZ},{defineProperties:AZ});var PZ=IC.Object,OZ=TZ.exports=function(t,e){return PZ.defineProperties(t,e)};PZ.defineProperties.sham&&(OZ.sham=!0);var RZ=Nk(TZ.exports),LZ=Nk(tz);function DZ(t,e,n){return(e=ZB(e))in t?ez(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var IZ=Fk,NZ=Uk,zZ=GR,FZ=ZV.trim,UZ=HV,BZ=Zk("".charAt),jZ=IZ.parseFloat,HZ=IZ.Symbol,VZ=HZ&&HZ.iterator,GZ=1/jZ(UZ+"-0")!==-1/0||VZ&&!NZ((function(){jZ(Object(VZ))}))?function(t){var e=FZ(zZ(t)),n=jZ(e);return 0===n&&"-"===BZ(e,0)?-0:n}:jZ;lO({global:!0,forced:parseFloat!==GZ},{parseFloat:GZ});var WZ=Nk(IC.parseFloat),qZ=lO,XZ=Uk,YZ=Dz.f;qZ({target:"Object",stat:!0,forced:XZ((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:YZ});var KZ=IC.Object,ZZ=function(t){return KZ.getOwnPropertyNames(t)},QZ=Nk(ZZ);function JZ(t,e){var n=["node","edge","label"],i=!0,r=PX(e,"chosen");if("boolean"===typeof r)i=r;else if("object"===YB(r)){if(-1===_G(n).call(n,t))throw new Error("choosify: subOption '"+t+"' should be one of '"+n.join("', '")+"'");var o=PX(e,["chosen",t]);"boolean"!==typeof o&&"function"!==typeof o||(i=o)}return i}function $Z(t,e,n){if(t.width<=0||t.height<=0)return!1;if(void 0!==n){var i={x:e.x-n.x,y:e.y-n.y};if(0!==n.angle){var r=-n.angle;e={x:Math.cos(r)*i.x-Math.sin(r)*i.y,y:Math.sin(r)*i.x+Math.cos(r)*i.y}}else e=i}var o=t.x+t.width,a=t.y+t.width;return t.left<e.x&&o>e.x&&t.top<e.y&&a>e.y}function tQ(t){return"string"===typeof t&&""!==t}function eQ(t,e,n,i){var r=i.x,o=i.y;if("function"===typeof i.distanceToBorder){var a=i.distanceToBorder(t,e),s=Math.sin(e)*a,l=Math.cos(e)*a;l===a?(r+=a,o=i.y):s===a?(r=i.x,o-=a):(r+=l,o-=s)}else i.shape.width>i.shape.height?(r=i.x+.5*i.shape.width,o=i.y-n):(r=i.x+n,o=i.y-.5*i.shape.height);return{x:r,y:o}}var nQ=pR("Array").values,iQ=jR,rQ=RA,oQ=jC,aQ=nQ,sQ=Array.prototype,lQ={DOMTokenList:!0,NodeList:!0},cQ=function(t){var e=t.values;return t===sQ||oQ(sQ,t)&&e===sQ.values||rQ(lQ,iQ(t))?aQ:e},uQ=Nk(cQ),hQ=function(){function t(e){XN(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return JB(t,[{key:"_add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var i=e;void 0!==e&&""!==e||(i=" ");var r=this.measureText(i,n),o=$O({},uQ(r));o.text=e,o.width=r.width,o.mod=n,void 0!==e&&""!==e||(o.width=0),this.lines[t].blocks.push(o),this.lines[t].width+=o.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],n=0;if(void 0!==e.blocks)for(var i=0;i<e.blocks.length;i++){var r=e.blocks[i];n<r.height&&(n=r.height)}e.height=n}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,n=0;n<this.lines.length;n++){var i=this.lines[n];i.width>t&&(t=i.width),e+=i.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var n=this.lines[e];if(0!==n.blocks.length&&(e!==this.lines.length-1||0!==n.width)){var i={};$O(i,n),i.blocks=[];for(var r=void 0,o=[],a=0;a<n.blocks.length;a++){var s=n.blocks[a];0!==s.width?o.push(s):void 0===r&&(r=s)}0===o.length&&void 0!==r&&o.push(r),i.blocks=o,t.push(i)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}(),dQ={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},fQ=function(){function t(e){XN(this,t),this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return JB(t,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){" "===t&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,e){return!(this.mono||this[t]||!this.match(e))&&(this.setTag(t),!0)}},{key:"match",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Bj(this.prepareRegExp(t),2),i=n[0],r=n[1],o=i.test(this.text.substr(this.position,r));return o&&e&&(this.position+=r-1),o}},{key:"parseEndTag",value:function(t,e,n){var i=this.mod()===t;return!(!(i="mono"===t?i&&this.mono:i&&!this.mono)||!this.match(e))&&(void 0!==n?(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(t):this.unsetTag(t),!0)}},{key:"replace",value:function(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(t){var e,n;if(t instanceof RegExp)n=t,e=1;else{var i=dQ[t];n=void 0!==i?i:new RegExp(t),e=t.length}return[n,e]}}]),t}(),pQ=function(){function t(e,n,i,r){var o=this;XN(this,t),this.ctx=e,this.parent=n,this.selected=i,this.hover=r;this.lines=new hQ((function(t,n){if(void 0===t)return 0;var a=o.parent.getFormattingValues(e,i,r,n),s=0;""!==t&&(s=o.ctx.measureText(t).width);return{width:s,values:a}}))}return JB(t,[{key:"process",value:function(t){if(!tQ(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var n=String(t).split("\n"),i=n.length;if(e.multi)for(var r=0;r<i;r++){var o=this.splitBlocks(n[r],e.multi);if(void 0!==o)if(0!==o.length){if(e.maxWdt>0)for(var a=0;a<o.length;a++){var s=o[a].mod,l=o[a].text;this.splitStringIntoLines(l,s,!0)}else for(var c=0;c<o.length;c++){var u=o[c].mod,h=o[c].text;this.lines.append(h,u)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(var d=0;d<i;d++)this.splitStringIntoLines(n[d]);else for(var f=0;f<i;f++)this.lines.newLine(n[f]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=new fQ(t),n=function(t){return!!/&/.test(t)&&(e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0)};e.position<e.text.length;){var i=e.text.charAt(e.position);e.parseWS(i)||/</.test(i)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||n(i)||e.add(i),e.position++}return e.emitBlock(),e.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var e=this,n=new fQ(t),i=!0,r=function(t){return!!/\\/.test(t)&&(n.position<e.text.length+1&&(n.position++,t=e.text.charAt(n.position),/ \t/.test(t)?n.spacing=!0:(n.add(t),i=!1)),!0)};n.position<n.text.length;){var o=n.text.charAt(n.position);n.parseWS(o)||r(o)||(i||n.spacing)&&(n.parseStartTag("bold","*")||n.parseStartTag("ital","_")||n.parseStartTag("mono","`"))||n.parseEndTag("bold","*","afterBold")||n.parseEndTag("ital","_","afterItal")||n.parseEndTag("mono","`","afterMono")||(n.add(o),i=!1),n.position++}return n.emitBlock(),n.blocks}},{key:"splitBlocks",value:function(t,e){var n=this.decodeMarkupSystem(e);return"none"===n?[{text:t,mod:"normal"}]:"markdown"===n?this.splitMarkdownBlocks(t):"html"===n?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",n=0;n<t.length;){var i=e+(""===e?"":" ")+t[n];if(this.overMaxWidth(i))break;e=i,n++}return n}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(Kj(t).call(t,0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e);for(var i=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");i.length>0;){var r=this.getLongestFit(i);if(0===r){var o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(Kj(o).call(o,0,a),e),i[0]=Kj(o).call(o,a)}else{var s=r;" "===i[r-1]?r--:" "===i[s]&&s++;var l=Kj(i).call(i,0,r).join("");r==i.length&&n?this.lines.append(l,e):this.lines.newLine(l,e),i=Kj(i).call(i,s)}}}}]),t}(),gQ=["bold","ital","boldital","mono"],mQ=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];XN(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(n),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=i}return JB(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),tQ(t.label)?this.labelDirty=!0:t.label=void 0,void 0!==t.font&&null!==t.font)if("string"===typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===YB(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var n=this;vX(gQ,(function(t){n.fontOptions[t]={}})),t.parseFontString(this.fontOptions,e)?this.fontOptions.vadjust=0:vX(e,(function(t,e){void 0!==t&&null!==t&&"object"!==YB(t)&&(n.fontOptions[e]=t)}))}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=PX(t,"widthConstraint");if("number"===typeof n)e.maxWdt=Number(n),e.minWdt=Number(n);else if("object"===YB(n)){var i=PX(t,["widthConstraint","maximum"]);"number"===typeof i&&(e.maxWdt=Number(i));var r=PX(t,["widthConstraint","minimum"]);"number"===typeof r&&(e.minWdt=Number(r))}var o=PX(t,"heightConstraint");if("number"===typeof o)e.minHgt=Number(o);else if("object"===YB(o)){var a=PX(t,["heightConstraint","minimum"]);"number"===typeof a&&(e.minHgt=Number(a));var s=PX(t,["heightConstraint","valign"]);"string"===typeof s&&("top"!==s&&"bottom"!==s||(e.valign=s))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),pX(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=JZ("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var n=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}},{key:"addFontOptionsToPile",value:function(t,e){for(var n=0;n<e.length;++n)this.addFontToPile(t,e[n])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var n=e.font;t.push(n)}}},{key:"getBasicOptions",value:function(e){for(var n={},i=0;i<e.length;++i){var r=e[i],o={};t.parseFontString(o,r)&&(r=o),vX(r,(function(t,e){void 0!==t&&(Object.prototype.hasOwnProperty.call(n,e)||(-1!==_G(gQ).call(gQ,e)?n[e]={}:n[e]=t))}))}return n}},{key:"getFontOption",value:function(e,n,i){for(var r,o=0;o<e.length;++o){var a=e[o];if(Object.prototype.hasOwnProperty.call(a,n)){if(void 0===(r=a[n])||null===r)continue;var s={};if(t.parseFontString(s,r)&&(r=s),Object.prototype.hasOwnProperty.call(r,i))return r[i]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,e){for(var n={},i=["color","size","face","mod","vadjust"],r=0;r<i.length;++r){var o=i[r];n[o]=this.getFontOption(t,e,o)}return n}},{key:"propagateFonts",value:function(t){var e=this,n=[];this.addFontOptionsToPile(n,t),this.fontOptions=this.getBasicOptions(n);for(var i=function(){var t=gQ[r],i=e.fontOptions[t];vX(e.getFontOptions(n,t),(function(t,e){i[e]=t})),i.size=Number(i.size),i.vadjust=Number(i.vadjust)},r=0;r<gQ.length;++r)i()}},{key:"draw",value:function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,i,r,e,n,o),this._drawBackground(t),this._drawText(t,e,this.size.yLine,o,a))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",r=arguments.length>4?arguments[4]:void 0,o=Bj(this._setAlignment(t,e,n,i),2);e=o[0],n=o[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(n-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(n+=(this.size.height-this.size.labelHeight)/2));for(var a=0;a<this.lineCount;a++){var s=this.lines[a];if(s&&s.blocks){var l=0;this.isEdgeLabel||"center"===this.fontOptions.align?l+=(this.size.width-s.width)/2:"right"===this.fontOptions.align&&(l+=this.size.width-s.width);for(var c=0;c<s.blocks.length;c++){var u=s.blocks[c];t.font=u.font;var h=Bj(this._getColor(u.color,r,u.strokeColor),2),d=h[0],f=h[1];u.strokeWidth>0&&(t.lineWidth=u.strokeWidth,t.strokeStyle=f,t.lineJoin="round"),t.fillStyle=d,u.strokeWidth>0&&t.strokeText(u.text,e+l,n+u.vadjust),t.fillText(u.text,e+l,n+u.vadjust),l+=u.width}n+=s.height}}}},{key:"_setAlignment",value:function(t,e,n,i){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf){e=0,n=0;"top"===this.fontOptions.align?(t.textBaseline="alphabetic",n-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",n+=4):t.textBaseline="middle"}else t.textBaseline=i;return[e,n]}},{key:"_getColor",value:function(t,e,n){var i=t||"#000000",r=n||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));i=bX(i,o),r=bX(r,o)}return[i,r]}},{key:"getTextSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var n=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=n,e=.5*-this.size.height;break;case"top":t=n,e=-(this.size.height+2);break;case"bottom":t=n,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,n),this.size.left=i-.5*this.size.width,this.size.top=r-.5*this.size.height,this.size.yLine=r+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,n,i){var r=function(t,e,n){return"normal"===e?"mod"===n?"":t[n]:void 0!==t[e][n]?t[e][n]:t[n]},o={color:r(this.fontOptions,i,"color"),size:r(this.fontOptions,i,"size"),face:r(this.fontOptions,i,"face"),mod:r(this.fontOptions,i,"mod"),vadjust:r(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||n)&&("normal"===i&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"===typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,e,n));var a="";return void 0!==o.mod&&""!==o.mod&&(a+=o.mod+" "),a+=o.size+"px "+o.face,t.font=a.replace(/"/g,""),o.font=t.font,o.height=o.size,o}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,n,i){return new pQ(t,this,e,n).process(i)}},{key:"_processLabel",value:function(t,e,n){if(!1!==this.labelDirty||this.differentState(e,n)){var i=this._processLabelText(t,e,n,this.elementOptions.label);this.fontOptions.minWdt>0&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,this.fontOptions.minHgt>0&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=e,this.hoverState=n,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!==typeof e)return!1;var n=e.split(" ");return t.size=+n[0].replace("px",""),t.face=n[1],t.color=n[2],!0}}]),t}(),vQ=VI,yQ=sA,bQ=TypeError,_Q=lO,xQ=Wk,wQ=hR,SQ=function(t){if(vQ(t))return t;throw new bQ(yQ(t)+" is not a constructor")},EQ=NP,MQ=DC,TQ=QL,kQ=Uk,CQ=BC("Reflect","construct"),AQ=Object.prototype,PQ=[].push,OQ=kQ((function(){function t(){}return!(CQ((function(){}),[],t)instanceof t)})),RQ=!kQ((function(){CQ((function(){}))})),LQ=OQ||RQ;_Q({target:"Reflect",stat:!0,forced:LQ,sham:LQ},{construct:function(t,e){SQ(t),EQ(e);var n=arguments.length<3?t:SQ(arguments[2]);if(RQ&&!OQ)return CQ(t,e,n);if(t===n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return xQ(PQ,i,e),new(xQ(wQ,t,i))}var r=n.prototype,o=TQ(MQ(r)?r:AQ),a=xQ(t,o,e);return MQ(a)?a:o}});var DQ=Nk(IC.Reflect.construct),IQ=Nk(wG);lO({target:"Object",stat:!0},{setPrototypeOf:VD});var NQ=Nk(IC.Object.setPrototypeOf),zQ=Nk(_R);function FQ(t,e){var n;return FQ=NQ?zQ(n=NQ).call(n):function(t,e){return t.__proto__=e,t},FQ(t,e)}function UQ(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=IQ(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ez(t,"prototype",{writable:!1}),e&&FQ(t,e)}function BQ(t,e){if(e&&("object"===YB(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var jQ=Nk(LV);function HQ(t){var e;return HQ=NQ?zQ(e=jQ).call(e):function(t){return t.__proto__||jQ(t)},HQ(t)}var VQ=function(){function t(e,n,i){XN(this,t),this.body=n,this.labelModule=i,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return JB(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==YB(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var n=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+n}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var n=e.borderDashes;!0===n&&(n=[5,15]),t.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var n=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,n),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var n=e.borderWidth/this.body.view.scale;t.save(),n>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){t.save(),t.fillStyle=e.color,this.enableShadow(t,e),nW(t).call(t),this.disableShadow(t,e),t.restore(),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,n,i,r){void 0!==n&&this.resize(n,i,r),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,n,i,r){this._updateBoundingBox(t,e,n,i,r)}},{key:"getDimensionsFromLabel",value:function(t,e,n){this.textSize=this.labelModule.getTextSize(t,e,n);var i=this.textSize.width,r=this.textSize.height;return 0===i&&(i=14,r=14),{width:i,height:r}}}]),t}();function GQ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var WQ=function(t){UQ(n,t);var e=GQ(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r))._setMargins(r),o}return JB(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this.initContextForDraw(t,o),SR(t,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(t,o),this.updateBoundingBox(e,n,t,i,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r)}},{key:"updateBoundingBox",value:function(t,e,n,i,r){this._updateBoundingBox(t,e,n,i,r);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+n}}]),n}(VQ);function qQ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var XQ=function(t){UQ(n,t);var e=qQ(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r)).labelOffset=0,o.selected=!1,o}return JB(n,[{key:"setOptions",value:function(t,e,n){this.options=t,void 0===e&&void 0===n||this.setImages(e,n)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}},{key:"_getImagePadding",value:function(){var t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var e=this.options.imagePadding;"object"==YB(e)?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),t=2*this.options.size*n,e=2*this.options.size*i}else{var r=this._getImagePadding();t=this.imageObj.width+r.left+r.right,e=this.imageObj.height+r.top+r.bottom}this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,n,i){this.initContextForDraw(t,i),wR(t,e,n,i.size),this.performFill(t,i)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=void 0!==e.opacity?e.opacity:1,this.enableShadow(t,e);var n=1;!0===this.options.shapeProperties.interpolation&&(n=this.imageObj.width/this.width/this.body.view.scale);var i=this._getImagePadding(),r=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,s=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(t,n,r,o,a,s),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,n,i,r){var o=0;if(void 0!==this.height){o=.5*this.height;var a=this.labelModule.getTextSize(t,i,r);a.lineCount>=1&&(o+=a.height/2)}var s=n+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(t,e,s,i,r,"hanging")}}]),n}(VQ);function YQ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var KQ=function(t){UQ(n,t);var e=YQ(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r))._setMargins(r),o}return JB(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n),r=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=r/2,this.width=r,this.height=r,this.radius=this.width/2}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this._drawRawCircle(t,e,n,o),this.updateBoundingBox(e,n),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,n,i,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),n}(XQ);function ZQ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var QQ=function(t){UQ(n,t);var e=ZQ(n);function n(t,i,r,o,a){var s;return XN(this,n),(s=e.call(this,t,i,r)).setImages(o,a),s}return JB(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var i=2*this.options.size;return this.width=i,this.height=i,void(this.radius=.5*this.width)}this.needsRefresh(e,n)&&this._resizeImage()}},{key:"draw",value:function(t,e,n,i,r,o){this.switchImages(i),this.resize();var a=e,s=n;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=n,a+=this.width/2,s+=this.height/2):(this.left=e-this.width/2,this.top=n-this.height/2),this._drawRawCircle(t,a,s,o),t.save(),t.clip(),this._drawImageAtPosition(t,o),t.restore(),this._drawImageLabel(t,a,s,i,r),this.updateBoundingBox(e,n)}},{key:"updateBoundingBox",value:function(t,e){"top-left"===this.options.shapeProperties.coordinateOrigin?(this.boundingBox.top=e,this.boundingBox.left=t,this.boundingBox.right=t+2*this.options.size,this.boundingBox.bottom=e+2*this.options.size):(this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),n}(XQ);function JQ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var $Q=function(t){UQ(n,t);var e=JQ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,n)){var r,o;this.labelModule.getTextSize(t,e,n);var a=2*i.size;this.width=null!==(r=this.customSizeWidth)&&void 0!==r?r:a,this.height=null!==(o=this.customSizeHeight)&&void 0!==o?o:a,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,n,i,r,o,a,s){var l,c=this;return this.resize(t,o,a,s),this.left=i-this.width/2,this.top=r-this.height/2,this.initContextForDraw(t,s),(l=e,Object.prototype.hasOwnProperty.call(kR,l)?kR[l]:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[l].call(t,n)})(t,i,r,s.size),this.performFill(t,s),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(t.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,i,r)),{drawExternalLabel:function(){if(void 0!==c.options.label){c.labelModule.calculateLabelSize(t,o,a,i,r,"hanging");var e=r+.5*c.height+.5*c.labelModule.size.height;c.labelModule.draw(t,i,e,o,a,"hanging")}c.updateBoundingBox(i,r)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),n}(VQ);function tJ(t,e){var n=dH(t);if(uZ){var i=uZ(t);e&&(i=jV(i).call(i,(function(e){return _Z(t,e).enumerable}))),n.push.apply(n,i)}return n}function eJ(t){for(var e=1;e<arguments.length;e++){var n,i,r=null!=arguments[e]?arguments[e]:{};e%2?AH(n=tJ(Object(r),!0)).call(n,(function(e){DZ(t,e,r[e])})):MZ?RZ(t,MZ(r)):AH(i=tJ(Object(r))).call(i,(function(e){LZ(t,e,_Z(r,e))}))}return t}function nJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var iJ=function(t){UQ(n,t);var e=nJ(n);function n(t,i,r,o){var a;return XN(this,n),(a=e.call(this,t,i,r,o)).ctxRenderer=o,a}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r,o),this.left=e-this.width/2,this.top=n-this.height/2,t.save();var a=this.ctxRenderer({ctx:t,id:this.options.id,x:e,y:n,state:{selected:i,hover:r},style:eJ({},o),label:this.options.label});if(null!=a.drawNode&&a.drawNode(),t.restore(),a.drawExternalLabel){var s=a.drawExternalLabel;a.drawExternalLabel=function(){t.save(),s(),t.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}($Q);function rJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var oJ=function(t){UQ(n,t);var e=rJ(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r))._setMargins(r),o}return JB(n,[{key:"resize",value:function(t,e,n){if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n).width+this.margin.right+this.margin.left;this.width=i,this.height=i,this.radius=this.width/2}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this.initContextForDraw(t,o),MR(t,e-this.width/2,n-this.height/2,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,n,t,i,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(VQ);function aJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var sJ=function(t){UQ(n,t);var e=aJ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){return this._drawShape(t,"diamond",4,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}($Q);function lJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var cJ=function(t){UQ(n,t);var e=lJ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){return this._drawShape(t,"circle",2,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),this.options.size}}]),n}($Q);function uJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var hJ=function(t){UQ(n,t);var e=uJ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n);this.height=2*i.height,this.width=i.width+i.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-.5*this.width,this.top=n-.5*this.height,this.initContextForDraw(t,o),ER(t,this.left,this.top,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,n,t,i,r),this.labelModule.draw(t,e,n,i,r)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var n=.5*this.width,i=.5*this.height,r=Math.sin(e)*n,o=Math.cos(e)*i;return n*i/Math.sqrt(r*r+o*o)}}]),n}(VQ);function dJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var fJ=function(t){UQ(n,t);var e=dJ(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r))._setMargins(r),o}return JB(n,[{key:"resize",value:function(t,e,n){this.needsRefresh(e,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,n,i,r,o){var a=this;return this.resize(t,i,r),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=n-this.height/2,this._icon(t,e,n,i,r,o),{drawExternalLabel:function(){if(void 0!==a.options.label){a.labelModule.draw(t,a.left+a.iconSize.width/2+a.margin.left,n+a.height/2+5,i)}a.updateBoundingBox(e,n)}}}},{key:"updateBoundingBox",value:function(t,e){if(this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5)}}},{key:"_icon",value:function(t,e,n,i,r,o){var a=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=[null!=this.options.icon.weight?this.options.icon.weight:i?"bold":"",(null!=this.options.icon.weight&&i?5:0)+a+"px",this.options.icon.face].join(" "),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,o),t.fillText(this.options.icon.code,e,n),this.disableShadow(t,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(VQ);function pJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var gJ=function(t){UQ(n,t);var e=pJ(n);function n(t,i,r,o,a){var s;return XN(this,n),(s=e.call(this,t,i,r)).setImages(o,a),s}return JB(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var i=2*this.options.size;return this.width=i,void(this.height=i)}this.needsRefresh(e,n)&&this._resizeImage()}},{key:"draw",value:function(t,e,n,i,r,o){t.save(),this.switchImages(i),this.resize();var a=e,s=n;if("top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=n,a+=this.width/2,s+=this.height/2):(this.left=e-this.width/2,this.top=n-this.height/2),!0===this.options.shapeProperties.useBorderWithImage){var l=this.options.borderWidth,c=this.options.borderWidthSelected||2*this.options.borderWidth,u=(i?c:l)/this.body.view.scale;t.lineWidth=Math.min(this.width,u),t.beginPath();var h=i?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,d=i?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background;void 0!==o.opacity&&(h=bX(h,o.opacity),d=bX(d,o.opacity)),t.strokeStyle=h,t.fillStyle=d,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),nW(t).call(t),this.performStroke(t,o),t.closePath()}this._drawImageAtPosition(t,o),this._drawImageLabel(t,a,s,i,r),this.updateBoundingBox(e,n),t.restore()}},{key:"updateBoundingBox",value:function(t,e){this.resize(),"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=t,this.top=e):(this.left=t-this.width/2,this.top=e-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(XQ);function mJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var vJ=function(t){UQ(n,t);var e=mJ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){return this._drawShape(t,"square",2,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}($Q);function yJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var bJ=function(t){UQ(n,t);var e=yJ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){return this._drawShape(t,"hexagon",4,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}($Q);function _J(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var xJ=function(t){UQ(n,t);var e=_J(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){return this._drawShape(t,"star",4,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}($Q);function wJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var SJ=function(t){UQ(n,t);var e=wJ(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r))._setMargins(r),o}return JB(n,[{key:"resize",value:function(t,e,n){this.needsRefresh(e,n)&&(this.textSize=this.labelModule.getTextSize(t,e,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this.enableShadow(t,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r),this.disableShadow(t,o),this.updateBoundingBox(e,n,t,i,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(VQ);function EJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var MJ=function(t){UQ(n,t);var e=EJ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){return this._drawShape(t,"triangle",3,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}($Q);function TJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var kJ=function(t){UQ(n,t);var e=TJ(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"draw",value:function(t,e,n,i,r,o){return this._drawShape(t,"triangleDown",3,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}($Q);function CJ(t,e){var n=dH(t);if(uZ){var i=uZ(t);e&&(i=jV(i).call(i,(function(e){return _Z(t,e).enumerable}))),n.push.apply(n,i)}return n}function AJ(t){for(var e=1;e<arguments.length;e++){var n,i,r=null!=arguments[e]?arguments[e]:{};e%2?AH(n=CJ(Object(r),!0)).call(n,(function(e){DZ(t,e,r[e])})):MZ?RZ(t,MZ(r)):AH(i=CJ(Object(r))).call(i,(function(e){LZ(t,e,_Z(r,e))}))}return t}var PJ=function(){function t(e,n,i,r,o,a){XN(this,t),this.options=kX(o),this.globalOptions=o,this.defaultOptions=a,this.body=n,this.edges=[],this.id=void 0,this.imagelist=i,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new mQ(this.body,this.options,!1),this.setOptions(e)}return JB(t,[{key:"attachEdge",value:function(t){var e;-1===_G(e=this.edges).call(e,t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e,n,i=_G(e=this.edges).call(e,t);-1!=i&&sV(n=this.edges).call(n,i,1)}},{key:"setOptions",value:function(e){var n=this.options.shape;if(e){if("undefined"!==typeof e.color&&(this._localColor=e.color),void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=cG(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=cG(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=WZ(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var i=[e,this.options,this.defaultOptions];return this.chooser=JZ("node",i),this._load_images(),this.updateLabelModule(e),void 0!==e.opacity&&t.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(n),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"===typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?!0===this.chooser?this.selected?(null!=this.options.borderWidthSelected?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"===typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,void 0!==this.options.opacity){var e=this.options.opacity;t.borderColor=bX(t.borderColor,e),t.color=bX(t.color,e),t.shadowColor=bX(t.shadowColor,e)}return t}},{key:"updateLabelModule",value:function(e){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),t.updateGroupOptions(this.options,AJ(AJ({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);var n=this.grouplist.get(this.options.group,!1),i=[e,this.options,n,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new WQ(this.options,this.body,this.labelModule);break;case"circle":this.shape=new KQ(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new QQ(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new iJ(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new oJ(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new sJ(this.options,this.body,this.labelModule);break;case"dot":this.shape=new cJ(this.options,this.body,this.labelModule);break;case"ellipse":default:this.shape=new hJ(this.options,this.body,this.labelModule);break;case"icon":this.shape=new fJ(this.options,this.body,this.labelModule);break;case"image":this.shape=new gJ(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new vJ(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new bJ(this.options,this.body,this.labelModule);break;case"star":this.shape=new xJ(this.options,this.body,this.labelModule);break;case"text":this.shape=new SJ(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new MJ(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new kJ(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,n){if(void 0!==this.options.value){var i=this.options.scaling.customScalingFunction(t,e,n,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*r}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&$Z(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),$Z(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return void 0===t||"center"===t||"top-left"===t}},{key:"updateGroupOptions",value:function(e,n,i){var r;if(void 0!==i){var o=e.group;if(void 0!==n&&void 0!==n.group&&o!==n.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"===typeof o||"string"===typeof o&&""!=o){var a=i.get(o);void 0!==a.opacity&&void 0===n.opacity&&(t.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));var s=jV(r=QZ(n)).call(r,(function(t){return null!=n[t]}));s.push("font"),fX(s,e,a),e.color=xX(e.color)}}}},{key:"parseOptions",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;if(fX(["color","fixed","shadow"],e,n,i),t.checkMass(n),void 0!==e.opacity&&(t.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),void 0!==n.opacity&&(t.checkOpacity(n.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+n.opacity),n.opacity=void 0)),n.shapeProperties&&!t.checkCoordinateOrigin(n.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+n.shapeProperties.coordinateOrigin),CX(e,n,"shadow",r),void 0!==n.color&&null!==n.color){var a=xX(n.color);hX(e.color,a)}else!0===i&&null===n.color&&(e.color=kX(r.color));void 0!==n.fixed&&null!==n.fixed&&("boolean"===typeof n.fixed?(e.fixed.x=n.fixed,e.fixed.y=n.fixed):(void 0!==n.fixed.x&&"boolean"===typeof n.fixed.x&&(e.fixed.x=n.fixed.x),void 0!==n.fixed.y&&"boolean"===typeof n.fixed.y&&(e.fixed.y=n.fixed.y))),!0===i&&null===n.font&&(e.font=kX(r.font)),t.updateGroupOptions(e,n,o),void 0!==n.scaling&&CX(e.scaling,n.scaling,"label",r.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var n="";void 0!==e&&(n=" in node id: "+e),console.error("%cNegative or zero mass disallowed"+n+", setting mass to 1.",GX),t.mass=1}}}]),t}();function OJ(t,e){var n="undefined"!==typeof Hj&&qN(t)||t["@@iterator"];if(!n){if(nH(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return RJ(t,e);var i=Kj(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return MN(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return RJ(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function RJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var LJ=function(){function t(e,n,i,r){var o,a=this;if(XN(this,t),this.body=e,this.images=n,this.groups=i,this.layoutEngine=r,this.body.functions.createNode=xR(o=this.create).call(o,this),this.nodesListeners={add:function(t,e){a.add(e.items)},update:function(t,e){a.update(e.items,e.data,e.oldData)},remove:function(t,e){a.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,n,i){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(i-t)*r)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=kX(this.defaultOptions),this.bindEventListeners()}return JB(t,[{key:"bindEventListeners",value:function(){var t,e,n=this;this.body.emitter.on("refreshNodes",xR(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",xR(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){vX(n.nodesListeners,(function(t,e){n.body.data.nodes&&n.body.data.nodes.off(e,t)})),delete n.body.functions.createNode,delete n.nodesListeners.add,delete n.nodesListeners.update,delete n.nodesListeners.remove,delete n.nodesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){if(PJ.parseOptions(this.options,t),void 0!==t.opacity&&($K(t.opacity)||!nZ(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),void 0!==t.shape)for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].updateShape();if("undefined"!==typeof t.font||"undefined"!==typeof t.widthConstraint||"undefined"!==typeof t.heightConstraint)for(var n=0,i=dH(this.body.nodes);n<i.length;n++){var r=i[n];this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh()}if(void 0!==t.size)for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.body.nodes[o].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.nodes;if(Dk("id",t))this.body.data.nodes=t;else if(nH(t))this.body.data.nodes=new Lk,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new Lk}if(n&&vX(this.nodesListeners,(function(t,e){n.off(e,t)})),this.body.nodes={},this.body.data.nodes){var i=this;vX(this.nodesListeners,(function(t,e){i.body.data.nodes.on(e,t)}));var r=this.body.data.nodes.getIds();this.add(r,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],r=0;r<t.length;r++){e=t[r];var o=this.body.data.nodes.get(e),a=this.create(o);i.push(a),this.body.nodes[e]=a}this.layoutEngine.positionInitially(i),!1===n&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,n){for(var i=this.body.nodes,r=!1,o=0;o<t.length;o++){var a=t[o],s=i[a],l=e[o];void 0!==s?s.setOptions(l)&&(r=!0):(r=!0,s=this.create(l),i[a]=s)}r||void 0===n||(r=cZ(e).call(e,(function(t,e){var i=n[e];return i&&i.level!==t.level}))),!0===r?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,n=0;n<t.length;n++){delete e[t[n]]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:PJ)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];vX(this.body.nodes,(function(n,i){var r=t.body.data.nodes.get(i);void 0!==r&&(!0===e&&n.setOptions({x:null,y:null}),n.setOptions({fixed:!1}),n.setOptions(r))}))}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===nH(t)){for(var n=0;n<t.length;n++)if(void 0!==this.body.nodes[t[n]]){var i=this.body.nodes[t[n]];e[t[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(void 0!==this.body.nodes[t]){var r=this.body.nodes[t];e[t]={x:Math.round(r.x),y:Math.round(r.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];e[this.body.nodeIndices[o]]={x:Math.round(a.x),y:Math.round(a.y)}}return e}},{key:"getPosition",value:function(t){if(void 0==t)throw new TypeError("No id was specified for getPosition method.");if(void 0==this.body.nodes[t])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t,e=[],n=this.body.data.nodes.getDataSet(),i=OJ(n.get());try{for(i.s();!(t=i.n()).done;){var r=t.value,o=r.id,a=this.body.nodes[o],s=Math.round(a.x),l=Math.round(a.y);r.x===s&&r.y===l||e.push({id:o,x:s,y:l})}}catch(c){i.e(c)}finally{i.f()}n.update(e)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var n=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],r={},o=0;o<i.edges.length;o++){var a=i.edges[o];"to"!==e&&a.toId==i.id?void 0===r[a.fromId]&&(n.push(a.fromId),r[a.fromId]=!0):"from"!==e&&a.fromId==i.id&&void 0===r[a.toId]&&(n.push(a.toId),r[a.toId]=!0)}return n}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var n=this.body.nodes[t],i=0;i<n.edges.length;i++)e.push(n.edges[i].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,n){var i=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(n),WG((function(){i.body.emitter.emit("startSimulation")}),0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}(),DJ=RA,IJ=dC,NJ=DC,zJ=NP,FJ=function(t){return void 0!==t&&(DJ(t,"value")||DJ(t,"writable"))},UJ=lC,BJ=aD;lO({target:"Reflect",stat:!0},{get:function t(e,n){var i,r,o=arguments.length<3?e:arguments[2];return zJ(e)===o?e[n]:(i=UJ.f(e,n))?FJ(i)?i.value:void 0===i.get?void 0:IJ(i.get,o):NJ(r=BJ(e))?t(r,n,o):void 0}});var jJ=Nk(IC.Reflect.get),HJ=Nk(bZ);function VJ(){var t;"undefined"!==typeof Reflect&&jJ?VJ=zQ(t=jJ).call(t):VJ=function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HQ(t)););return t}(t,e);if(i){var r=HJ(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}};return VJ.apply(this,arguments)}var GJ=lO,WJ=Math.hypot,qJ=Math.abs,XJ=Math.sqrt;GJ({target:"Math",stat:!0,arity:2,forced:!!WJ&&WJ(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,i,r=0,o=0,a=arguments.length,s=0;o<a;)s<(n=qJ(arguments[o++]))?(r=r*(i=s/n)*i+1,s=n):r+=n>0?(i=n/s)*i:n;return s===1/0?1/0:s*XJ(r)}});var YJ=Nk(IC.Math.hypot);function KJ(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var ZJ=function(){function t(){XN(this,t)}return JB(t,null,[{key:"transform",value:function(t,e){nH(t)||(t=[t]);for(var n=e.point.x,i=e.point.y,r=e.angle,o=e.length,a=0;a<t.length;++a){var s=t[a],l=s.x*Math.cos(r)-s.y*Math.sin(r),c=s.x*Math.sin(r)+s.y*Math.cos(r);s.x=n+o*l,s.y=i+o*c}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;++n)t.lineTo(e[n].x,e[n].y);t.closePath()}}]),t}(),QJ=function(t){UQ(n,t);var e=KJ(n);function n(){return XN(this,n),e.apply(this,arguments)}return JB(n,null,[{key:"draw",value:function(t,e){if(e.image){t.save(),t.translate(e.point.x,e.point.y),t.rotate(Math.PI/2+e.angle);var n=null!=e.imageWidth?e.imageWidth:e.image.width,i=null!=e.imageHeight?e.imageHeight:e.image.height;e.image.drawImageAtPosition(t,1,-n/2,0,n,i),t.restore()}return!1}}]),n}(ZJ),JJ=function(t){UQ(n,t);var e=KJ(n);function n(){return XN(this,n),e.apply(this,arguments)}return JB(n,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),n}(ZJ),$J=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),t}(),t$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n={x:-.4,y:0};ZJ.transform(n,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var i=Math.PI,r=e.angle-i/2,o=e.angle+i/2;return t.beginPath(),t.arc(n.x,n.y,.4*e.length,r,o,!1),t.stroke(),!0}}]),t}(),e$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n={x:-.3,y:0};ZJ.transform(n,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var i=Math.PI,r=e.angle+i/2,o=e.angle+3*i/2;return t.beginPath(),t.arc(n.x,n.y,.4*e.length,r,o,!1),t.stroke(),!0}}]),t}(),n$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),t}(),i$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),t}(),r$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n={x:-.4,y:0};return ZJ.transform(n,e),wR(t,n.x,n.y,.4*e.length),!0}}]),t}(),o$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),t}(),a$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),t}(),s$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),t}(),l$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return ZJ.transform(n,e),ZJ.drawPath(t,n),!0}}]),t}(),c$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"draw",value:function(t,e){var n;switch(e.type&&(n=e.type.toLowerCase()),n){case"image":return QJ.draw(t,e);case"circle":return r$.draw(t,e);case"box":return a$.draw(t,e);case"crow":return $J.draw(t,e);case"curve":return t$.draw(t,e);case"diamond":return s$.draw(t,e);case"inv_curve":return e$.draw(t,e);case"triangle":return n$.draw(t,e);case"inv_triangle":return i$.draw(t,e);case"bar":return o$.draw(t,e);case"vee":return l$.draw(t,e);default:return JJ.draw(t,e)}}}]),t}();function u$(t,e){var n=dH(t);if(uZ){var i=uZ(t);e&&(i=jV(i).call(i,(function(e){return _Z(t,e).enumerable}))),n.push.apply(n,i)}return n}function h$(t){for(var e=1;e<arguments.length;e++){var n,i,r=null!=arguments[e]?arguments[e]:{};e%2?AH(n=u$(Object(r),!0)).call(n,(function(e){DZ(t,e,r[e])})):MZ?RZ(t,MZ(r)):AH(i=u$(Object(r))).call(i,(function(e){LZ(t,e,_Z(r,e))}))}return t}var d$=function(){function t(e,n,i){XN(this,t),this._body=n,this._labelModule=i,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}return JB(t,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,r):this._drawLine(t,e,r)}},{key:"_drawLine",value:function(t,e,n,i,r){if(this.from!=this.to)this._line(t,e,n,i,r);else{var o=Bj(this._getCircleData(t),3),a=o[0],s=o[1],l=o[2];this._circle(t,e,a,s,l)}}},{key:"_drawDashedLine",value:function(t,e,n,i,r){t.lineCap="round";var o=nH(e.dashes)?e.dashes:[5,5];if(void 0!==t.setLineDash){if(t.save(),t.setLineDash(o),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,n);else{var a=Bj(this._getCircleData(t),3),s=a[0],l=a[1],c=a[2];this._circle(t,e,s,l,c)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)TR(t,this.from.x,this.from.y,this.to.x,this.to.y,o);else{var u=Bj(this._getCircleData(t),3),h=u[0],d=u[1],f=u[2];this._circle(t,e,h,d,f)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,n){return this.from!=this.to?this._findBorderPosition(t,e,n):this._findBorderPositionCircle(t,e,n)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var e,n=Bj(Kj(e=this._getCircleData(t)).call(e,0,2),2),i=n[0],r=n[1];return{from:this._findBorderPositionCircle(this.from,t,{x:i,y:r,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:i,y:r,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var e=this.options.selfReference.size;void 0!==t&&void 0===this.from.shape.width&&this.from.shape.resize(t);var n=eQ(t,this.options.selfReference.angle,e,this.from);return[n.x,n.y,e]}},{key:"_pointOnCircle",value:function(t,e,n,i){var r=2*i*Math.PI;return{x:t+n*Math.cos(r),y:e-n*Math.sin(r)}}},{key:"_findBorderPositionCircle",value:function(t,e,n){var i,r=n.x,o=n.y,a=n.low,s=n.high,l=n.direction,c=this.options.selfReference.size,u=.5*(a+s),h=0;!0===this.options.arrowStrikethrough&&(-1===l?h=this.options.endPointOffset.from:1===l&&(h=this.options.endPointOffset.to));var d=0;do{u=.5*(a+s),i=this._pointOnCircle(r,o,c,u);var f=Math.atan2(t.y-i.y,t.x-i.x),p=t.distanceToBorder(e,f)+h-Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2));if(Math.abs(p)<.05)break;p>0?l>0?a=u:s=u:l>0?s=u:a=u,++d}while(a<=s&&d<10);return h$(h$({},i),{},{t:u})}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,e){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var n=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),i=this.from.options.color.highlight.border,r=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(i=bX(this.from.options.color.border,e.opacity),r=bX(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?r=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,r),n}return"to"===e.inheritsColor?bX(this.to.options.color.border,e.opacity):bX(this.from.options.color.border,e.opacity)}return bX(e.color,e.opacity)}},{key:"_circle",value:function(t,e,n,i,r){this.enableShadow(t,e);var o=0,a=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var s=this.options.selfReference.angle,l=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:n,y:i,low:s,high:l,direction:-1}),u=this._findBorderPositionCircle(this.from,t,{x:n,y:i,low:s,high:l,direction:1});o=Math.atan2(c.y-i,c.x-n),a=Math.atan2(u.y-i,u.x-n)}t.beginPath(),t.arc(n,i,r,o,a,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,n,i,r,o){if(this.from!=this.to)return this._getDistanceToEdge(t,e,n,i,r,o);var a=Bj(this._getCircleData(void 0),3),s=a[0],l=a[1],c=a[2],u=s-r,h=l-o;return Math.abs(Math.sqrt(u*u+h*h)-c)}},{key:"_getDistanceToLine",value:function(t,e,n,i,r,o){var a=n-t,s=i-e,l=((r-t)*a+(o-e)*s)/(a*a+s*s);l>1?l=1:l<0&&(l=0);var c=t+l*a-r,u=e+l*s-o;return Math.sqrt(c*c+u*u)}},{key:"getArrowData",value:function(t,e,n,i,r,o){var a,s,l,c,u,h,d,f=o.width;"from"===e?(l=this.from,c=this.to,u=o.fromArrowScale<0,h=Math.abs(o.fromArrowScale),d=o.fromArrowType):"to"===e?(l=this.to,c=this.from,u=o.toArrowScale<0,h=Math.abs(o.toArrowScale),d=o.toArrowType):(l=this.to,c=this.from,u=o.middleArrowScale<0,h=Math.abs(o.middleArrowScale),d=o.middleArrowType);var p=15*h+3*f;if(l!=c){var g=p/YJ(l.x-c.x,l.y-c.y);if("middle"!==e)if(!0===this.options.smooth.enabled){var m=this._findBorderPosition(l,t,{via:n}),v=this.getPoint(m.t+g*("from"===e?1:-1),n);a=Math.atan2(m.y-v.y,m.x-v.x),s=m}else a=Math.atan2(l.y-c.y,l.x-c.x),s=this._findBorderPosition(l,t);else{var y=(u?-g:g)/2,b=this.getPoint(.5+y,n),_=this.getPoint(.5-y,n);a=Math.atan2(b.y-_.y,b.x-_.x),s=this.getPoint(.5,n)}}else{var x=Bj(this._getCircleData(t),3),w=x[0],S=x[1],E=x[2];if("from"===e){var M=this.options.selfReference.angle,T=this.options.selfReference.angle+Math.PI,k=this._findBorderPositionCircle(this.from,t,{x:w,y:S,low:M,high:T,direction:-1});a=-2*k.t*Math.PI+1.5*Math.PI+.1*Math.PI,s=k}else if("to"===e){var C=this.options.selfReference.angle,A=this.options.selfReference.angle+Math.PI,P=this._findBorderPositionCircle(this.from,t,{x:w,y:S,low:C,high:A,direction:1});a=-2*P.t*Math.PI+1.5*Math.PI-1.1*Math.PI,s=P}else{var O=this.options.selfReference.angle/(2*Math.PI);s=this._pointOnCircle(w,S,E,O),a=-2*O*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:s,core:{x:s.x-.9*p*Math.cos(a),y:s.y-.9*p*Math.sin(a)},angle:a,length:p,type:d}}},{key:"drawArrowHead",value:function(t,e,n,i,r){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,c$.draw(t,r)&&(this.enableShadow(t,e),nW(t).call(t),this.disableShadow(t,e))}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,e){if(!1!==e.background){var n={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=n.strokeStyle,t.lineWidth=n.lineWidth,t.dashes=n.dashes,this.setStrokeDashed(t,e.dashes)}}},{key:"setStrokeDashed",value:function(t,e){if(!1!==e)if(void 0!==t.setLineDash){var n=nH(e)?e:[5,5];t.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==t.setLineDash?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),t}();function f$(t,e){var n=dH(t);if(uZ){var i=uZ(t);e&&(i=jV(i).call(i,(function(e){return _Z(t,e).enumerable}))),n.push.apply(n,i)}return n}function p$(t){for(var e=1;e<arguments.length;e++){var n,i,r=null!=arguments[e]?arguments[e]:{};e%2?AH(n=f$(Object(r),!0)).call(n,(function(e){DZ(t,e,r[e])})):MZ?RZ(t,MZ(r)):AH(i=f$(Object(r))).call(i,(function(e){LZ(t,e,_Z(r,e))}))}return t}function g$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var m$=function(t){UQ(n,t);var e=g$(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"_findBorderPositionBezier",value:function(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),o=!1,a=1,s=0,l=this.to,c=this.options.endPointOffset?this.options.endPointOffset.to:0;t.id===this.from.id&&(l=this.from,o=!0,c=this.options.endPointOffset?this.options.endPointOffset.from:0),!1===this.options.arrowStrikethrough&&(c=0);var u=0;do{i=.5*(s+a),n=this.getPoint(i,r);var h=Math.atan2(l.y-n.y,l.x-n.x),d=l.distanceToBorder(e,h)+c-Math.sqrt(Math.pow(n.x-l.x,2)+Math.pow(n.y-l.y,2));if(Math.abs(d)<.2)break;d<0?!1===o?s=i:a=i:!1===o?a=i:s=i,++u}while(s<=a&&u<10);return p$(p$({},n),{},{t:i})}},{key:"_getDistanceToBezierEdge",value:function(t,e,n,i,r,o,a){var s,l,c,u,h,d=1e9,f=t,p=e;for(l=1;l<10;l++)c=.1*l,u=Math.pow(1-c,2)*t+2*c*(1-c)*a.x+Math.pow(c,2)*n,h=Math.pow(1-c,2)*e+2*c*(1-c)*a.y+Math.pow(c,2)*i,l>0&&(d=(s=this._getDistanceToLine(f,p,u,h,r,o))<d?s:d),f=u,p=h;return d}},{key:"_bezierCurve",value:function(t,e,n,i){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),null!=n&&null!=n.x?null!=i&&null!=i.x?t.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),n}(d$);function v$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var y$=function(t){UQ(n,t);var e=v$(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r)).via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return JB(n,[{key:"setOptions",value:function(t){VJ(HQ(n.prototype),"setOptions",this).call(this,t);var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,n){this._bezierCurve(t,e,n)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var n=Bj(this._getCircleData(),3),i=n[0],r=n[1],o=n[2],a=2*Math.PI*(1-t);return{x:i+o*Math.sin(a),y:r+o-o*(1-Math.cos(a))}}return{x:Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+Math.pow(t,2)*this.toPoint.x,y:Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+Math.pow(t,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){return this._getDistanceToBezierEdge(t,e,n,i,r,o,this.via)}}]),n}(m$);function b$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var _$=function(t){UQ(n,t);var e=b$(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"_line",value:function(t,e,n){this._bezierCurve(t,e,n)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t,e,n=this.options.smooth.roundness,i=this.options.smooth.type,r=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===i||"diagonalCross"===i){var a,s;a=s=r<=o?n*o:n*r,this.from.x>this.to.x&&(a=-a),this.from.y>=this.to.y&&(s=-s);var l=this.from.x+a,c=this.from.y+s;return"discrete"===i&&(r<=o?l=r<n*o?this.from.x:l:c=o<n*r?this.from.y:c),{x:l,y:c}}if("straightCross"===i){var u=(1-n)*r,h=(1-n)*o;return r<=o?(u=0,this.from.y<this.to.y&&(h=-h)):(this.from.x<this.to.x&&(u=-u),h=0),{x:this.to.x+u,y:this.to.y+h}}if("horizontal"===i){var d=(1-n)*r;return this.from.x<this.to.x&&(d=-d),{x:this.to.x+d,y:this.from.y}}if("vertical"===i){var f=(1-n)*o;return this.from.y<this.to.y&&(f=-f),{x:this.from.x,y:this.to.y+f}}if("curvedCW"===i){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var p=Math.sqrt(r*r+o*o),g=Math.PI,m=(Math.atan2(o,r)+(.5*n+.5)*g)%(2*g);return{x:this.from.x+(.5*n+.5)*p*Math.sin(m),y:this.from.y+(.5*n+.5)*p*Math.cos(m)}}if("curvedCCW"===i){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var v=Math.sqrt(r*r+o*o),y=Math.PI,b=(Math.atan2(o,r)+(.5*-n+.5)*y)%(2*y);return{x:this.from.x+(.5*n+.5)*v*Math.sin(b),y:this.from.y+(.5*n+.5)*v*Math.cos(b)}}t=e=r<=o?n*o:n*r,this.from.x>this.to.x&&(t=-t),this.from.y>=this.to.y&&(e=-e);var _=this.from.x+t,x=this.from.y+e;return r<=o?_=this.from.x<=this.to.x?this.to.x<_?this.to.x:_:this.to.x>_?this.to.x:_:x=this.from.y>=this.to.y?this.to.y>x?this.to.y:x:this.to.y<x?this.to.y:x,{x:_,y:x}}},{key:"_findBorderPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,n.via)}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,n,i,r,o,a)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),n=t;return{x:Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*e.x+Math.pow(n,2)*this.toPoint.x,y:Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*e.y+Math.pow(n,2)*this.toPoint.y}}}]),n}(m$);function x$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var w$=function(t){UQ(n,t);var e=x$(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"_getDistanceToBezierEdge2",value:function(t,e,n,i,r,o,a,s){for(var l=1e9,c=t,u=e,h=[0,0,0,0],d=1;d<10;d++){var f=.1*d;h[0]=Math.pow(1-f,3),h[1]=3*f*Math.pow(1-f,2),h[2]=3*Math.pow(f,2)*(1-f),h[3]=Math.pow(f,3);var p=h[0]*t+h[1]*a.x+h[2]*s.x+h[3]*n,g=h[0]*e+h[1]*a.y+h[2]*s.y+h[3]*i;if(d>0){var m=this._getDistanceToLine(c,u,p,g,r,o);l=m<l?m:l}c=p,u=g}return l}}]),n}(m$);function S$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var E$=function(t){UQ(n,t);var e=S$(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"_line",value:function(t,e,n){var i=n[0],r=n[1];this._bezierCurve(t,e,i,r)}},{key:"_getViaCoordinates",value:function(){var t,e,n,i,r=this.from.x-this.to.x,o=this.from.y-this.to.y,a=this.options.smooth.roundness;return(Math.abs(r)>Math.abs(o)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(e=this.from.y,i=this.to.y,t=this.from.x-a*r,n=this.to.x+a*r):(e=this.from.y-a*o,i=this.to.y+a*o,t=this.from.x,n=this.to.x),[{x:t,y:e},{x:n,y:i}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){var a=Bj(arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),2),s=a[0],l=a[1];return this._getDistanceToBezierEdge2(t,e,n,i,r,o,s,l)}},{key:"getPoint",value:function(t){var e=Bj(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),2),n=e[0],i=e[1],r=t,o=[Math.pow(1-r,3),3*r*Math.pow(1-r,2),3*Math.pow(r,2)*(1-r),Math.pow(r,3)];return{x:o[0]*this.fromPoint.x+o[1]*n.x+o[2]*i.x+o[3]*this.toPoint.x,y:o[0]*this.fromPoint.y+o[1]*n.y+o[2]*i.y+o[3]*this.toPoint.y}}}]),n}(w$);function M$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var T$=function(t){UQ(n,t);var e=M$(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var n=this.to,i=this.from;t.id===this.from.id&&(n=this.from,i=this.to);var r=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,s=Math.sqrt(o*o+a*a),l=(s-t.distanceToBorder(e,r))/s;return{x:(1-l)*i.x+l*n.x,y:(1-l)*i.y+l*n.y,t:0}}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){return this._getDistanceToLine(t,e,n,i,r,o)}}]),n}(d$),k$=function(){function t(e,n,i,r,o){if(XN(this,t),void 0===n)throw new Error("No body provided");this.options=kX(r),this.globalOptions=r,this.defaultOptions=o,this.body=n,this.imagelist=i,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new mQ(this.body,this.options,!0),this.setOptions(e)}return JB(t,[{key:"setOptions",value:function(e){if(e){var n="undefined"!==typeof e.physics&&this.options.physics!==e.physics||"undefined"!==typeof e.hidden&&(this.options.hidden||!1)!==(e.hidden||!1)||"undefined"!==typeof e.from&&this.options.from!==e.from||"undefined"!==typeof e.to&&this.options.to!==e.to;t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=WZ(e.value));var i=[e,this.options,this.defaultOptions];return this.chooser=JZ("edge",i),this.updateLabelModule(e),n=this.updateEdgeType()||n,this._setInteractionWidths(),this.connect(),n}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,n=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,i=this.options.color.inherit,r={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var o=this.options.selectionWidth;"function"===typeof o?r.width=o(r.width):"number"===typeof o&&(r.width+=o),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.highlight,r.shadow=this.options.shadow.enabled}else if(this.hover){var a=this.options.hoverWidth;"function"===typeof a?r.width=a(r.width):"number"===typeof a&&(r.width+=a),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.hover,r.shadow=this.options.shadow.enabled}}else"function"===typeof this.chooser&&(this.chooser(r,this.options.id,this.selected,this.hover),void 0!==r.color&&(r.inheritsColor=!1),!1===r.shadow&&(r.shadowColor===this.options.shadow.color&&r.shadowSize===this.options.shadow.size&&r.shadowX===this.options.shadow.x&&r.shadowY===this.options.shadow.y||(r.shadow=!0)));else r.shadow=this.options.shadow.enabled,r.width=Math.max(r.width,.3/this.body.view.scale);return r}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,n=!0;return void 0!==this.edgeType&&((this.edgeType instanceof y$&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof E$&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof _$&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof T$&&!1===t.type.enabled)&&(n=!1),!0===n&&(e=this.cleanup())),!0===n?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new y$(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new E$(this.options,this.body,this.labelModule):this.edgeType=new _$(this.options,this.body,this.labelModule):this.edgeType=new T$(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,n){if(void 0!==this.options.value){var i=this.options.scaling.customScalingFunction(t,e,n,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*r}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"===typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"===typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var n=this.edgeType.getViaNode();this.edgeType.drawLine(t,e,this.selected,this.hover,n),this.drawLabel(t,n)}}},{key:"drawArrows",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(i.from=this.edgeType.getArrowData(t,"from",n,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=i.from.core),e.fromArrowSrc&&(i.from.image=this.imagelist.load(e.fromArrowSrc)),e.fromArrowImageWidth&&(i.from.imageWidth=e.fromArrowImageWidth),e.fromArrowImageHeight&&(i.from.imageHeight=e.fromArrowImageHeight)),e.toArrow&&(i.to=this.edgeType.getArrowData(t,"to",n,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=i.to.core),e.toArrowSrc&&(i.to.image=this.imagelist.load(e.toArrowSrc)),e.toArrowImageWidth&&(i.to.imageWidth=e.toArrowImageWidth),e.toArrowImageHeight&&(i.to.imageHeight=e.toArrowImageHeight)),e.middleArrow&&(i.middle=this.edgeType.getArrowData(t,"middle",n,this.selected,this.hover,e),e.middleArrowSrc&&(i.middle.image=this.imagelist.load(e.middleArrowSrc)),e.middleArrowImageWidth&&(i.middle.imageWidth=e.middleArrowImageWidth),e.middleArrowImageHeight&&(i.middle.imageHeight=e.middleArrowImageHeight)),e.fromArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,i.from),e.middleArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,i.middle),e.toArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,i.to)}}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var n,i=this.from,r=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),i.id!=r.id){this.labelModule.pointToSelf=!1,n=this.edgeType.getPoint(.5,e),t.save();var o=this._getRotation(t);0!=o.angle&&(t.translate(o.x,o.y),t.rotate(o.angle)),this.labelModule.draw(t,n.x,n.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var a=eQ(t,this.options.selfReference.angle,this.options.selfReference.size,i);n=this._pointOnCircle(a.x,a.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,n.x,n.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var n=this._getRotation();$Z(this.labelModule.getSize(),t,n)&&e.push({edgeId:this.id,labelId:0})}var i={left:t.x,top:t.y};return this.isOverlappingWith(i)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,n=this.from.y,i=this.to.x,r=this.to.y,o=t.left,a=t.top;return this.edgeType.getDistanceToEdge(e,n,i,r,o,a)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,n.x,n.y);var i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return i;if("horizontal"===this.options.font.align)return i;var r=this.from.y-this.to.y,o=this.from.x-this.to.x,a=Math.atan2(r,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),i.angle=a,i}},{key:"_pointOnCircle",value:function(t,e,n,i){return{x:t+n*Math.cos(i),y:e-n*Math.sin(i)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(dX(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],t,e,n),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.from&&(nZ(e.endPointOffset.from)?t.endPointOffset.from=e.endPointOffset.from:(t.endPointOffset.from=void 0!==i.endPointOffset.from?i.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.to&&(nZ(e.endPointOffset.to)?t.endPointOffset.to=e.endPointOffset.to:(t.endPointOffset.to=void 0!==i.endPointOffset.to?i.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),tQ(e.label)?t.label=e.label:tQ(t.label)||(t.label=void 0),CX(t,e,"smooth",i),CX(t,e,"shadow",i),CX(t,e,"background",i),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===n&&null===e.dashes&&(t.dashes=SG(i.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),CX(t.scaling,e.scaling,"label",i.scaling)):!0===n&&null===e.scaling&&(t.scaling=SG(i.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"===typeof e.arrows){var o=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=_G(o).call(o,"to"),t.arrows.middle.enabled=-1!=_G(o).call(o,"middle"),t.arrows.from.enabled=-1!=_G(o).call(o,"from")}else{if("object"!==YB(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+TG(e.arrows));CX(t.arrows,e.arrows,"to",i.arrows),CX(t.arrows,e.arrows,"middle",i.arrows),CX(t.arrows,e.arrows,"from",i.arrows)}else!0===n&&null===e.arrows&&(t.arrows=SG(i.arrows));if(void 0!==e.color&&null!==e.color){var a=lX(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,s=t.color;if(r)pX(s,i.color,!1,n);else for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&delete s[l];if(lX(s))s.color=s,s.highlight=s,s.hover=s,s.inherit=!1,void 0===a.opacity&&(s.opacity=1);else{var c=!1;void 0!==a.color&&(s.color=a.color,c=!0),void 0!==a.highlight&&(s.highlight=a.highlight,c=!0),void 0!==a.hover&&(s.hover=a.hover,c=!0),void 0!==a.inherit&&(s.inherit=a.inherit),void 0!==a.opacity&&(s.opacity=Math.min(1,Math.max(0,a.opacity))),!0===c?s.inherit=!1:void 0===s.inherit&&(s.inherit="from")}}else!0===n&&null===e.color&&(t.color=kX(i.color));!0===n&&null===e.font&&(t.font=kX(i.font)),Object.prototype.hasOwnProperty.call(e,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=e.selfReferenceSize)}}]),t}(),C$=function(){function t(e,n,i){var r,o=this;XN(this,t),this.body=e,this.images=n,this.groups=i,this.body.functions.createEdge=xR(r=this.create).call(r,this),this.edgesListeners={add:function(t,e){o.add(e.items)},update:function(t,e){o.update(e.items)},remove:function(t,e){o.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,n,i){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(i-t)*r)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},pX(this.options,this.defaultOptions),this.bindEventListeners()}return JB(t,[{key:"bindEventListeners",value:function(){var t,e,n=this;this.body.emitter.on("_forceDisableDynamicCurves",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===t&&(t="continuous");var i=!1;for(var r in n.body.edges)if(Object.prototype.hasOwnProperty.call(n.body.edges,r)){var o=n.body.edges[r],a=n.body.data.edges.get(r);if(null!=a){var s=a.smooth;void 0!==s&&!0===s.enabled&&"dynamic"===s.type&&(void 0===t?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:t}}),i=!0)}}!0===e&&!0===i&&n.body.emitter.emit("_dataChanged")})),this.body.emitter.on("_dataUpdated",(function(){n.reconnectEdges()})),this.body.emitter.on("refreshEdges",xR(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",xR(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){vX(n.edgesListeners,(function(t,e){n.body.data.edges&&n.body.data.edges.off(e,t)})),delete n.body.functions.createEdge,delete n.edgesListeners.add,delete n.edgesListeners.update,delete n.edgesListeners.remove,delete n.edgesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){k$.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&(e=this.body.edges[n].updateEdgeType()||e);if(void 0!==t.font)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&this.body.edges[i].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.data.edges;if(Dk("id",t))this.body.data.edges=t;else if(nH(t))this.body.data.edges=new Lk,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new Lk}if(i&&vX(this.edgesListeners,(function(t,e){i.off(e,t)})),this.body.edges={},this.body.data.edges){vX(this.edgesListeners,(function(t,n){e.body.data.edges.on(n,t)}));var r=this.body.data.edges.getIds();this.add(r,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===n&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.edges,i=this.body.data.edges,r=0;r<t.length;r++){var o=t[r],a=n[o];a&&a.disconnect();var s=i.get(o,{showInternalIds:!0});n[o]=this.create(s)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,n=this.body.data.edges,i=!1,r=0;r<t.length;r++){var o=t[r],a=n.get(o),s=e[o];void 0!==s?(s.disconnect(),i=s.setOptions(a)||i,s.connect()):(this.body.edges[o]=this.create(a),i=!0)}!0===i?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var n=this.body.edges;vX(t,(function(t){var e=n[t];void 0!==e&&e.remove()})),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;vX(this.body.edges,(function(e,n){var i=t.body.data.edges.get(n);void 0!==i&&e.setOptions(i)}))}},{key:"create",value:function(t){return new k$(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,n=this.body.edges;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].edges=[]);for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var i=n[t];i.from=null,i.to=null,i.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var n=this.body.edges[t];void 0!==n.fromId&&e.push(n.fromId),void 0!==n.toId&&e.push(n.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];vX(this.body.edges,(function(n,i){var r=t.body.nodes[n.toId],o=t.body.nodes[n.fromId];void 0!==r&&!0===r.isCluster||void 0!==o&&!0===o.isCluster||void 0!==r&&void 0!==o||e.push(i)})),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(void 0!==t&&null!==t){var e=this.body.edges,n=[];AH(t).call(t,(function(t,i){void 0===e[i]&&n.push(i)})),this.add(n,!0)}}}]),t}(),A$=function(){function t(e,n,i){XN(this,t),this.body=e,this.physicsBody=n,this.barnesHutTree,this.setOptions(i),this._rng=tX("BARNES HUT SOLVER")}return JB(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t,e=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,r=this._formBarnesHutTree(e,n);this.barnesHutTree=r;for(var o=0;o<i;o++)(t=e[n[o]]).options.mass>0&&this._getForceContributions(r.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){if(t.childrenCount>0){var n=t.centerOfMass.x-e.x,i=t.centerOfMass.y-e.y,r=Math.sqrt(n*n+i*i);r*t.calcSize>this.thetaInversed?this._calculateForces(r,n,i,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(r,n,i,e,t)}}},{key:"_calculateForces",value:function(t,e,n,i,r){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&i.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,t-i.shape.radius));var o=this.options.gravitationalConstant*r.mass*i.options.mass/Math.pow(t,3),a=e*o,s=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=s}},{key:"_formBarnesHutTree",value:function(t,e){for(var n,i=e.length,r=t[e[0]].x,o=t[e[0]].y,a=t[e[0]].x,s=t[e[0]].y,l=1;l<i;l++){var c=t[e[l]],u=c.x,h=c.y;c.options.mass>0&&(u<r&&(r=u),u>a&&(a=u),h<o&&(o=h),h>s&&(s=h))}var d=Math.abs(a-r)-Math.abs(s-o);d>0?(o-=.5*d,s+=.5*d):(r+=.5*d,a-=.5*d);var f=Math.max(1e-5,Math.abs(a-r)),p=.5*f,g=.5*(r+a),m=.5*(o+s),v={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:g-p,maxX:g+p,minY:m-p,maxY:m+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(v.root);for(var y=0;y<i;y++)(n=t[e[y]]).options.mass>0&&this._placeInTree(v.root,n);return v}},{key:"_updateBranchMass",value:function(t,e){var n=t.centerOfMass,i=t.mass+e.options.mass,r=1/i;n.x=n.x*t.mass+e.x*e.options.mass,n.x*=r,n.y=n.y*t.mass+e.y*e.options.mass,n.y*=r,t.mass=i;var o=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<o?o:t.maxWidth}},{key:"_placeInTree",value:function(t,e,n){1==n&&void 0!==n||this._updateBranchMass(t,e);var i,r=t.children.NW.range;i=r.maxX>e.x?r.maxY>e.y?"NW":"SW":r.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,i)}},{key:"_placeInRegion",value:function(t,e,n){var i=t.children[n];switch(i.childrenCount){case 0:i.children.data=e,i.childrenCount=1,this._updateBranchMass(i,e);break;case 1:i.children.data.x===e.x&&i.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,e));break;case 4:this._placeInTree(i,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var n,i,r,o,a=.5*t.size;switch(e){case"NW":n=t.range.minX,i=t.range.minX+a,r=t.range.minY,o=t.range.minY+a;break;case"NE":n=t.range.minX+a,i=t.range.maxX,r=t.range.minY,o=t.range.minY+a;break;case"SW":n=t.range.minX,i=t.range.minX+a,r=t.range.minY+a,o=t.range.maxY;break;case"SE":n=t.range.minX+a,i=t.range.maxX,r=t.range.minY+a,o=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:r,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,n){void 0===n&&(n="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=n,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}(),P$=function(){function t(e,n,i){XN(this,t),this._rng=tX("REPULSION SOLVER"),this.body=e,this.physicsBody=n,this.setOptions(i)}return JB(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r,o,a,s,l=this.body.nodes,c=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,h=this.options.nodeDistance,d=-2/3/h,f=0;f<c.length-1;f++){a=l[c[f]];for(var p=f+1;p<c.length;p++)t=(s=l[c[p]]).x-a.x,e=s.y-a.y,0===(n=Math.sqrt(t*t+e*e))&&(t=n=.1*this._rng()),n<2*h&&(o=n<.5*h?1:d*n+1.3333333333333333,i=t*(o/=n),r=e*o,u[a.id].x-=i,u[a.id].y-=r,u[s.id].x+=i,u[s.id].y+=r)}}}]),t}(),O$=function(){function t(e,n,i){XN(this,t),this.body=e,this.physicsBody=n,this.setOptions(i)}return JB(t,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,e=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance,r=0;r<e.length-1;r++)for(var o=t[e[r]],a=r+1;a<e.length;a++){var s=t[e[a]];if(o.level===s.level){var l=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(s.shape.radius||0)/2),c=s.x-o.x,u=s.y-o.y,h=Math.sqrt(c*c+u*u),d=void 0;d=h<l?-Math.pow(.05*h,2)+Math.pow(.05*l,2):0,0!==h&&(d/=h);var f=c*d,p=u*d;n[o.id].x-=f,n[o.id].y-=p,n[s.id].x+=f,n[s.id].y+=p}}}}]),t}(),R$=function(){function t(e,n,i){XN(this,t),this.body=e,this.physicsBody=n,this.setOptions(i)}return JB(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r,o=this.physicsBody.physicsEdgeIndices,a=this.body.edges,s=0;s<o.length;s++)!0===(e=a[o[s]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,n=e.to,i=e.edgeType.via,r=e.from,this._calculateSpringForce(n,i,.5*t),this._calculateSpringForce(i,r,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.max(Math.sqrt(i*i+r*r),.01),a=this.options.springConstant*(n-o)/o,s=i*a,l=r*a;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=s,this.physicsBody.forces[t.id].y+=l),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=s,this.physicsBody.forces[e.id].y-=l)}}]),t}(),L$=function(){function t(e,n,i){XN(this,t),this.body=e,this.physicsBody=n,this.setOptions(i)}return JB(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r,o,a,s,l,c,u=this.body.edges,h=.5,d=this.physicsBody.physicsEdgeIndices,f=this.physicsBody.physicsNodeIndices,p=this.physicsBody.forces,g=0;g<f.length;g++){var m=f[g];p[m].springFx=0,p[m].springFy=0}for(var v=0;v<d.length;v++)!0===(e=u[d[v]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,n=e.from.x-e.to.x,i=e.from.y-e.to.y,s=0===(s=Math.sqrt(n*n+i*i))?.01:s,r=n*(a=this.options.springConstant*(t-s)/s),o=i*a,e.to.level!=e.from.level?(void 0!==p[e.toId]&&(p[e.toId].springFx-=r,p[e.toId].springFy-=o),void 0!==p[e.fromId]&&(p[e.fromId].springFx+=r,p[e.fromId].springFy+=o)):(void 0!==p[e.toId]&&(p[e.toId].x-=h*r,p[e.toId].y-=h*o),void 0!==p[e.fromId]&&(p[e.fromId].x+=h*r,p[e.fromId].y+=h*o)));a=1;for(var y=0;y<f.length;y++){var b=f[y];l=Math.min(a,Math.max(-a,p[b].springFx)),c=Math.min(a,Math.max(-a,p[b].springFy)),p[b].x+=l,p[b].y+=c}for(var _=0,x=0,w=0;w<f.length;w++){var S=f[w];_+=p[S].x,x+=p[S].y}for(var E=_/f.length,M=x/f.length,T=0;T<f.length;T++){var k=f[T];p[k].x-=E,p[k].y-=M}}}]),t}(),D$=function(){function t(e,n,i){XN(this,t),this.body=e,this.physicsBody=n,this.setOptions(i)}return JB(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces,s=0;s<o.length;s++){t=-(i=r[o[s]]).x,e=-i.y,n=Math.sqrt(t*t+e*e),this._calculateForces(n,t,e,a,i)}}},{key:"_calculateForces",value:function(t,e,n,i,r){var o=0===t?0:this.options.centralGravity/t;i[r.id].x=e*o,i[r.id].y=n*o}}]),t}();function I$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var N$=function(t){UQ(n,t);var e=I$(n);function n(t,i,r){var o;return XN(this,n),(o=e.call(this,t,i,r))._rng=tX("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return JB(n,[{key:"_calculateForces",value:function(t,e,n,i,r){0===t&&(e=t=.1*this._rng()),this.overlapAvoidanceFactor<1&&i.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,t-i.shape.radius));var o=i.edges.length+1,a=this.options.gravitationalConstant*r.mass*i.options.mass*o/Math.pow(t,2),s=e*a,l=n*a;this.physicsBody.forces[i.id].x+=s,this.physicsBody.forces[i.id].y+=l}}]),n}(A$);function z$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var F$=function(t){UQ(n,t);var e=z$(n);function n(t,i,r){return XN(this,n),e.call(this,t,i,r)}return JB(n,[{key:"_calculateForces",value:function(t,e,n,i,r){if(t>0){var o=r.edges.length+1,a=this.options.centralGravity*o*r.options.mass;i[r.id].x=e*a,i[r.id].y=n*a}}}]),n}(D$),U$=function(){function t(e){XN(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},$O(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return JB(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",(function(){t.initPhysics()})),this.body.emitter.on("_layoutFailed",(function(){t.layoutFailed=!0})),this.body.emitter.on("resetPhysics",(function(){t.stopSimulation(),t.ready=!1})),this.body.emitter.on("disablePhysics",(function(){t.physicsEnabled=!1,t.stopSimulation()})),this.body.emitter.on("restorePhysics",(function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()})),this.body.emitter.on("startSimulation",(function(){!0===t.ready&&t.startSimulation()})),this.body.emitter.on("stopSimulation",(function(){t.stopSimulation()})),this.body.emitter.on("destroy",(function(){t.stopSimulation(!1),t.body.emitter.off()})),this.body.emitter.on("_dataChanged",(function(){t.updatePhysicsData()}))}},{key:"setOptions",value:function(t){if(void 0!==t)if(!1===t)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===t)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,fX(["stabilization"],this.options,t),CX(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var e=this.options.wind;e&&(("number"!==typeof e.x||$K(e.x))&&(e.x=0),("number"!==typeof e.y||$K(e.y))&&(e.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new N$(this.body,this.physicsBody,t),this.edgesSolver=new R$(this.body,this.physicsBody,t),this.gravitySolver=new F$(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new P$(this.body,this.physicsBody,t),this.edgesSolver=new R$(this.body,this.physicsBody,t),this.gravitySolver=new D$(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new O$(this.body,this.physicsBody,t),this.edgesSolver=new L$(this.body,this.physicsBody,t),this.gravitySolver=new D$(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new A$(this.body,this.physicsBody,t),this.edgesSolver=new R$(this.body,this.physicsBody,t),this.gravitySolver=new D$(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var t;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=xR(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=mH();this.physicsTick(),(mH()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&WG((function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0}),0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),!0!==this.stabilized){if(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled)this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1;else this.timestep=this.options.timestep,this.physicsStep();!0===this.stabilized&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&!0===t[n].options.physics&&this.physicsBody.physicsNodeIndices.push(t[n].id);for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&!0===e[i].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[i].id);for(var r=0;r<this.physicsBody.physicsNodeIndices.length;r++){var o=this.physicsBody.physicsNodeIndices[r];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var a in this.physicsBody.velocities)void 0===t[a]&&delete this.physicsBody.velocities[a]}},{key:"revert",value:function(){var t=dH(this.previousStates),e=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(var i=0;i<t.length;i++){var r=t[i];void 0!==e[r]?!0===e[r].options.physics&&(this.referenceState[r]={positions:{x:e[r].x,y:e[r].y}},n[r].x=this.previousStates[r].vx,n[r].y=this.previousStates[r].vy,e[r].x=this.previousStates[r].x,e[r].y=this.previousStates[r].y):delete this.previousStates[r]}}},{key:"_evaluateStepQuality",value:function(){var t,e,n=this.body.nodes,i=this.referenceState;for(var r in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,r)&&void 0!==n[r]&&(t=n[r].x-i[r].positions.x,e=n[r].y-i[r].positions.y,Math.sqrt(Math.pow(t,2)+Math.pow(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,n=0,i=0;i<t.length;i++){var r=t[i],o=this._performStep(r);e=Math.max(e,o),n+=o}this.adaptiveTimestepEnabled=n/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,n){t+=(e-this.modelOptions.damping*t)/n*this.timestep;var i=this.options.maxVelocity||1e9;return Math.abs(t)>i&&(t=t>0?i:-i),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],n=this.physicsBody.forces[t];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);var i=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:i.x,vy:i.y},!1===e.options.fixed.x?(i.x=this.calculateComponentVelocity(i.x,n.x,e.options.mass),e.x+=i.x*this.timestep):(n.x=0,i.x=0),!1===e.options.fixed.y?(i.y=this.calculateComponentVelocity(i.y,n.y,e.options.mass),e.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].x&&t[e].y){var n=t[e].options.fixed;this.freezeCache[e]={x:n.x,y:n.y},n.x=!0,n.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!==typeof e&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,WG((function(){return t._stabilizationBatch()}),0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},n=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&n();for(var i,r=0;e()&&r<this.options.stabilization.updateInterval;)this.physicsTick(),r++;(n(),e())?WG(xR(i=this._stabilizationBatch).call(i,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var n=this.physicsBody.physicsNodeIndices[e],i=this.body.nodes[n],r=this.physicsBody.forces[n],o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.x,2)),a=Math.min(Math.max(5,o),15),s=3*a,l=EX((180-180*Math.min(1,Math.max(0,.03*o)))/360,1,1),c={x:i.x+20*r.x,y:i.y+20*r.y};t.lineWidth=a,t.strokeStyle=l,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(c.x,c.y),t.stroke();var u=Math.atan2(r.y,r.x);t.fillStyle=l,c$.draw(t,{type:"arrow",point:c,angle:u,length:s}),nW(t).call(t)}}}]),t}();let B$;const j$=new Uint8Array(16);function H$(){if(!B$&&(B$="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!B$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B$(j$)}const V$=[];for(let n=0;n<256;++n)V$.push((n+256).toString(16).slice(1));var G$={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function W$(t,e,n){if(G$.randomUUID&&!e&&!t)return G$.randomUUID();const i=(t=t||{}).random||(t.rng||H$)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return V$[t[e+0]]+V$[t[e+1]]+V$[t[e+2]]+V$[t[e+3]]+"-"+V$[t[e+4]]+V$[t[e+5]]+"-"+V$[t[e+6]]+V$[t[e+7]]+"-"+V$[t[e+8]]+V$[t[e+9]]+"-"+V$[t[e+10]]+V$[t[e+11]]+V$[t[e+12]]+V$[t[e+13]]+V$[t[e+14]]+V$[t[e+15]]}(i)}var q$=function(){function t(){XN(this,t)}return JB(t,null,[{key:"getRange",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=1e9,r=-1e9,o=1e9,a=-1e9;if(n.length>0)for(var s=0;s<n.length;s++)o>(e=t[n[s]]).shape.boundingBox.left&&(o=e.shape.boundingBox.left),a<e.shape.boundingBox.right&&(a=e.shape.boundingBox.right),i>e.shape.boundingBox.top&&(i=e.shape.boundingBox.top),r<e.shape.boundingBox.bottom&&(r=e.shape.boundingBox.bottom);return 1e9===o&&-1e9===a&&1e9===i&&-1e9===r&&(i=0,r=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:r}}},{key:"getRangeCore",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=1e9,r=-1e9,o=1e9,a=-1e9;if(n.length>0)for(var s=0;s<n.length;s++)o>(e=t[n[s]]).x&&(o=e.x),a<e.x&&(a=e.x),i>e.y&&(i=e.y),r<e.y&&(r=e.y);return 1e9===o&&-1e9===a&&1e9===i&&-1e9===r&&(i=0,r=0,o=0,a=0),{minX:o,maxX:a,minY:i,maxY:r}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var n={};return void 0===e||"node"===e?(pX(n,t.options,!0),n.x=t.x,n.y=t.y,n.amountOfConnections=t.edges.length):pX(n,t.options,!0),n}}]),t}();function X$(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var Y$=function(t){UQ(n,t);var e=X$(n);function n(t,i,r,o,a,s){var l;return XN(this,n),(l=e.call(this,t,i,r,o,a,s)).isCluster=!0,l.containedNodes={},l.containedEdges={},l}return JB(n,[{key:"_openChildCluster",value:function(t){var e=this,n=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!n.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],vX(n.edges,(function(t){delete e.containedEdges[t.id]})),vX(n.containedNodes,(function(t,n){e.containedNodes[n]=t})),n.containedNodes={},vX(n.containedEdges,(function(t,n){e.containedEdges[n]=t})),n.containedEdges={},vX(n.edges,(function(t){vX(e.edges,(function(n){var i,r,o=_G(i=n.clusteringEdgeReplacingIds).call(i,t.id);-1!==o&&(vX(t.clusteringEdgeReplacingIds,(function(t){n.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=n.id})),sV(r=n.clusteringEdgeReplacingIds).call(r,o,1))}))})),n.edges=[]}}]),n}(PJ),K$=function(){function t(e){var n=this;XN(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},$O(this.options,this.defaultOptions),this.body.emitter.on("_resetData",(function(){n.clusteredNodes={},n.clusteredEdges={}}))}return JB(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===YB(t)&&(e=this._checkOptions(t),t=this._getHubSize());for(var n=[],i=0;i<this.body.nodeIndices.length;i++){var r=this.body.nodes[this.body.nodeIndices[i]];r.edges.length>=t&&n.push(r.id)}for(var o=0;o<n.length;o++)this.clusterByConnection(n[o],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var i={},r={};vX(this.body.nodes,(function(n,o){n.options&&!0===e.joinCondition(n.options)&&(i[o]=n,vX(n.edges,(function(e){void 0===t.clusteredEdges[e.id]&&(r[e.id]=e)})))})),this._cluster(i,r,e,n)}},{key:"clusterByEdgeCount",value:function(t,e){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var r,o,a,s=[],l={},c=function(){var i={},c={},h=n.body.nodeIndices[u],d=n.body.nodes[h];if(void 0===l[h]){a=0,o=[];for(var f=0;f<d.edges.length;f++)r=d.edges[f],void 0===n.clusteredEdges[r.id]&&(r.toId!==r.fromId&&a++,o.push(r));if(a===t){for(var p=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var n=q$.cloneOptions(t);return e.joinCondition(n)},g=!0,m=0;m<o.length;m++){r=o[m];var v=n._getConnectedId(r,h);if(!p(d)){g=!1;break}c[r.id]=r,i[h]=d,i[v]=n.body.nodes[v],l[h]=!0}if(dH(i).length>0&&dH(c).length>0&&!0===g){var y=function(){for(var t=0;t<s.length;++t)for(var e in i)if(void 0!==s[t].nodes[e])return s[t]}();if(void 0!==y){for(var b in i)void 0===y.nodes[b]&&(y.nodes[b]=i[b]);for(var _ in c)void 0===y.edges[_]&&(y.edges[_]=c[_])}else s.push({nodes:i,edges:c})}}}},u=0;u<this.body.nodeIndices.length;u++)c();for(var h=0;h<s.length;h++)this._cluster(s[h].nodes,s[h].edges,e,!1);!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var r=this.body.nodes[t];void 0===(e=this._checkOptions(e,r)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=r.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=r.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=r.options.fixed.x,e.clusterNodeProperties.fixed.y=r.options.fixed.y);var o={},a={},s=r.id,l=q$.cloneOptions(r);o[s]=r;for(var c=0;c<r.edges.length;c++){var u=r.edges[c];if(void 0===this.clusteredEdges[u.id]){var h=this._getConnectedId(u,s);if(void 0===this.clusteredNodes[h])if(h!==s)if(void 0===e.joinCondition)a[u.id]=u,o[h]=this.body.nodes[h];else{var d=q$.cloneOptions(this.body.nodes[h]);!0===e.joinCondition(l,d)&&(a[u.id]=u,o[h]=this.body.nodes[h])}else a[u.id]=u}}var f=cH(n=dH(o)).call(n,(function(t){return o[t].id}));for(var p in o)if(Object.prototype.hasOwnProperty.call(o,p))for(var g=o[p],m=0;m<g.edges.length;m++){var v=g.edges[m];_G(f).call(f,this._getConnectedId(v,g.id))>-1&&(a[v.id]=v)}this._cluster(o,a,e,i)}},{key:"_createClusterEdges",value:function(t,e,n,i){for(var r,o,a,s,l,c,u=dH(t),h=[],d=0;d<u.length;d++){a=t[o=u[d]];for(var f=0;f<a.edges.length;f++)r=a.edges[f],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?e[r.id]=r:r.toId==o?(s=n.id,c=l=r.fromId):(s=r.toId,l=n.id,c=s),void 0===t[c]&&h.push({edge:r,fromId:l,toId:s}))}for(var p=[],g=function(t){for(var e=0;e<p.length;e++){var n=p[e],i=t.fromId===n.fromId&&t.toId===n.toId,r=t.fromId===n.toId&&t.toId===n.fromId;if(i||r)return n}return null},m=0;m<h.length;m++){var v=h[m],y=v.edge,b=g(v);null===b?(b=this._createClusteredEdge(v.fromId,v.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&void 0!==this.clusteredNodes[o]&&r.push(o);for(var a=0;a<r.length;++a)delete t[r[a]];if(0!=dH(t).length&&(1!=dH(t).length||1==n.clusterNodeProperties.allowSingleNodeCluster)){var s=pX({},n.clusterNodeProperties);if(void 0!==n.processProperties){var l=[];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var u=q$.cloneOptions(t[c]);l.push(u)}var h=[];for(var d in e)if(Object.prototype.hasOwnProperty.call(e,d)&&"clusterEdge:"!==d.substr(0,12)){var f=q$.cloneOptions(e[d],"edge");h.push(f)}if(!(s=n.processProperties(s,l,h)))throw new Error("The processProperties function does not return properties!")}void 0===s.id&&(s.id="cluster:"+W$());var p=s.id;void 0===s.label&&(s.label="cluster");var g=void 0;void 0===s.x&&(g=this._getClusterPosition(t),s.x=g.x),void 0===s.y&&(void 0===g&&(g=this._getClusterPosition(t)),s.y=g.y),s.id=p;var m=this.body.functions.createNode(s,Y$);m.containedNodes=t,m.containedEdges=e,m.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[s.id]=m,this._clusterEdges(t,e,s,n.clusterEdgeProperties),s.id=void 0,!0===i&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e,n=dH(t),i=t[n[0]].x,r=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,s=1;s<n.length;s++)i=(e=t[n[s]]).x<i?e.x:i,r=e.x>r?e.x:r,o=e.y<o?e.y:o,a=e.y>a?e.y:a;return{x:.5*(i+r),y:.5*(o+a)}}},{key:"openCluster",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var i=this.body.nodes[t];if(void 0===i)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==i.isCluster||void 0===i.containedNodes||void 0===i.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var r=this.findNode(t),o=_G(r).call(r,t)-1;if(o>=0){var a=r[o];return this.body.nodes[a]._openChildCluster(t),delete this.body.nodes[t],void(!0===n&&this.body.emitter.emit("_dataChanged"))}var s=i.containedNodes,l=i.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"===typeof e.releaseFunction){var c={},u={x:i.x,y:i.y};for(var h in s)if(Object.prototype.hasOwnProperty.call(s,h)){var d=this.body.nodes[h];c[h]={x:d.x,y:d.y}}var f=e.releaseFunction(u,c);for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)){var g=this.body.nodes[p];void 0!==f[p]&&(g.x=void 0===f[p].x?i.x:f[p].x,g.y=void 0===f[p].y?i.y:f[p].y)}}else vX(s,(function(t){!1===t.options.fixed.x&&(t.x=i.x),!1===t.options.fixed.y&&(t.y=i.y)}));for(var m in s)if(Object.prototype.hasOwnProperty.call(s,m)){var v=this.body.nodes[m];v.vx=i.vx,v.vy=i.vy,v.setOptions({physics:!0}),delete this.clusteredNodes[m]}for(var y=[],b=0;b<i.edges.length;b++)y.push(i.edges[b]);for(var _=0;_<y.length;_++){for(var x=y[_],w=this._getConnectedId(x,t),S=this.clusteredNodes[w],E=0;E<x.clusteringEdgeReplacingIds.length;E++){var M=x.clusteringEdgeReplacingIds[E],T=this.body.edges[M];if(void 0!==T)if(void 0!==S){var k=this.body.nodes[S.clusterId];k.containedEdges[T.id]=T,delete l[T.id];var C=T.fromId,A=T.toId;T.toId==w?A=S.clusterId:C=S.clusterId,this._createClusteredEdge(C,A,T,k.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(T)}x.remove()}for(var P in l)Object.prototype.hasOwnProperty.call(l,P)&&this._restoreEdge(l[P]);delete this.body.nodes[t],!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var n=this.body.nodes[t].containedNodes;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.push(this.body.nodes[i].id)}return e}},{key:"findNode",value:function(t){for(var e,n=[],i=0;void 0!==this.clusteredNodes[t]&&i<100;){if(void 0===(e=this.body.nodes[t]))return[];n.push(e.id),t=this.clusteredNodes[t].clusterId,i++}return void 0===(e=this.body.nodes[t])?[]:(n.push(e.id),UH(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var n=this.getClusteredEdges(t),i=0;i<n.length;i++){this.body.edges[n[i]].setOptions(e)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],n=0;void 0!==t&&void 0!==this.body.edges[t]&&n<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,n++;return UH(e).call(e),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],n=[],i=[],r=0;e.length>0&&r<100;){var o=e.pop();if(void 0!==o){var a=this.body.edges[o];if(void 0!==a){r++;var s=a.clusteringEdgeReplacingIds;if(void 0===s)i.push(o);else for(var l=0;l<s.length;++l){var c=s[l];-1===_G(e).call(e,s)&&-1===_G(n).call(n,s)&&e.push(c)}n.push(o)}}}return i}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,n=0,i=0,r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodes[this.body.nodeIndices[r]];o.edges.length>i&&(i=o.edges.length),t+=o.edges.length,e+=Math.pow(o.edges.length,2),n+=1}t/=n;var a=(e/=n)-Math.pow(t,2),s=Math.sqrt(a),l=Math.floor(t+2*s);return l>i&&(l=i),l}},{key:"_createClusteredEdge",value:function(t,e,n,i,r){var o=q$.cloneOptions(n,"edge");pX(o,i),o.from=t,o.to=e,o.id="clusterEdge:"+W$(),void 0!==r&&pX(o,r);var a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a,a}},{key:"_clusterEdges",value:function(t,e,n,i){if(e instanceof k$){var r=e,o={};o[r.id]=r,e=o}if(t instanceof PJ){var a=t,s={};s[a.id]=a,t=s}if(void 0===n||null===n)throw new Error("_clusterEdges: parameter clusterNode required");for(var l in void 0===i&&(i=n.clusterEdgeProperties),this._createClusterEdges(t,e,n,i),e)if(Object.prototype.hasOwnProperty.call(e,l)&&void 0!==this.body.edges[l]){var c=this.body.edges[l];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(this.clusteredNodes[u]={clusterId:n.id,node:this.body.nodes[u]},this.body.nodes[u].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var n=e.clusterId;if(void 0!==n)return this.body.nodes[n]}}}},{key:"_filter",value:function(t,e){var n=[];return vX(t,(function(t){e(t)&&n.push(t)})),n}},{key:"_updateState",value:function(){var t,e=this,n=[],i={},r=function(t){vX(e.body.nodes,(function(e){!0===e.isCluster&&t(e)}))};for(t in this.clusteredNodes){if(Object.prototype.hasOwnProperty.call(this.clusteredNodes,t))void 0===this.body.nodes[t]&&n.push(t)}r((function(t){for(var e=0;e<n.length;e++)delete t.containedNodes[n[e]]}));for(var o=0;o<n.length;o++)delete this.clusteredNodes[n[o]];vX(this.clusteredEdges,(function(t){var n=e.body.edges[t];void 0!==n&&n.endPointsValid()||(i[t]=t)})),r((function(t){vX(t.containedEdges,(function(t,e){t.endPointsValid()||i[e]||(i[e]=e)}))})),vX(this.body.edges,(function(t,n){var r=!0,o=t.clusteringEdgeReplacingIds;if(void 0!==o){var a=0;vX(o,(function(t){var n=e.body.edges[t];void 0!==n&&n.endPointsValid()&&(a+=1)})),r=a>0}t.endPointsValid()&&r||(i[n]=n)})),r((function(t){vX(i,(function(n){delete t.containedEdges[n],vX(t.edges,(function(r,o){r.id!==n?r.clusteringEdgeReplacingIds=e._filter(r.clusteringEdgeReplacingIds,(function(t){return!i[t]})):t.edges[o]=null})),t.edges=e._filter(t.edges,(function(t){return null!==t}))}))})),vX(i,(function(t){delete e.clusteredEdges[t]})),vX(i,(function(t){delete e.body.edges[t]})),vX(dH(this.body.edges),(function(t){var n=e.body.edges[t],i=e._isClusteredNode(n.fromId)||e._isClusteredNode(n.toId);if(i!==e._isClusteredEdge(n.id))if(i){var r=e._getClusterNodeForNode(n.fromId);void 0!==r&&e._clusterEdges(e.body.nodes[n.fromId],n,r);var o=e._getClusterNodeForNode(n.toId);void 0!==o&&e._clusterEdges(e.body.nodes[n.toId],n,o)}else delete e._clusterEdges[t],e._restoreEdge(n)}));for(var a=!1,s=!0,l=function(){var t=[];r((function(e){var n=dH(e.containedNodes).length,i=!0===e.options.allowSingleNodeCluster;(i&&n<1||!i&&n<2)&&t.push(e.id)}));for(var n=0;n<t.length;++n)e.openCluster(t[n],{},!1);s=t.length>0,a=a||s};s;)l();a&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}();var Z$=function(){function t(e,n){XN(this,t),function(){var t;void 0!==window&&(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===t?function(t){t()}:t}(),this.body=e,this.canvas=n,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},$O(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return JB(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.on("dragStart",(function(){e.dragging=!0})),this.body.emitter.on("dragEnd",(function(){e.dragging=!1})),this.body.emitter.on("zoom",(function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=WG((function(){var t;e.zooming=!1,xR(t=e._requestRedraw).call(t,e)()}),250)})),this.body.emitter.on("_resizeNodes",(function(){e._resizeNodes()})),this.body.emitter.on("_redraw",(function(){!1===e.renderingActive&&e._redraw()})),this.body.emitter.on("_blockRedraw",(function(){e.allowRedraw=!1})),this.body.emitter.on("_allowRedraw",(function(){e.allowRedraw=!0,e.redrawRequested=!1})),this.body.emitter.on("_requestRedraw",xR(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",(function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()})),this.body.emitter.on("_stopRendering",(function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0})),this.body.emitter.on("destroy",(function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,!0===e.requiresTimeout?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()}))}},{key:"setOptions",value:function(t){if(void 0!==t){dX(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!==typeof window){var n,i=window;return!0===this.requiresTimeout?n=WG(t,e):i.requestAnimationFrame&&(n=i.requestAnimationFrame(t)),n}}},{key:"_startRendering",value:function(){var t;!0===this.renderingActive&&(void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(xR(t=this._renderStep).call(t,this),this.simulationInterval)))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame((function(){t._redraw(!1)}),0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var e={drawExternalLabels:null};0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var n=this.canvas.getContext(),i=this.canvas.frame.canvas.clientWidth,r=this.canvas.frame.canvas.clientHeight;if(n.clearRect(0,0,i,r),0===this.canvas.frame.clientWidth)return;if(n.save(),n.translate(this.body.view.translation.x,this.body.view.translation.y),n.scale(this.body.view.scale,this.body.view.scale),n.beginPath(),this.body.emitter.emit("beforeDrawing",n),n.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(n),!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag){var o=this._drawNodes(n,t).drawExternalLabels;e.drawExternalLabels=o}!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawArrows(n),null!=e.drawExternalLabels&&e.drawExternalLabels(),!1===t&&this._drawSelectionBox(n),n.beginPath(),this.body.emitter.emit("afterDrawing",n),n.closePath(),n.restore(),!0===t&&n.clearRect(0,0,i,r)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e,n=this.body.nodes;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&((e=n[i]).resize(t),e.updateBoundingBox(t,e.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.nodes,o=this.body.nodeIndices,a=[],s=[],l=this.canvas.DOMtoCanvas({x:-20,y:-20}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),u={top:l.y,left:l.x,bottom:c.y,right:c.x},h=[],d=0;d<o.length;d++)if((e=r[o[d]]).hover)s.push(o[d]);else if(e.isSelected())a.push(o[d]);else if(!0===i){var f=e.draw(t);null!=f.drawExternalLabel&&h.push(f.drawExternalLabel)}else if(!0===e.isBoundingBoxOverlappingWith(u)){var p=e.draw(t);null!=p.drawExternalLabel&&h.push(p.drawExternalLabel)}else e.updateBoundingBox(t,e.selected);var g=a.length,m=s.length;for(n=0;n<g;n++){var v=(e=r[a[n]]).draw(t);null!=v.drawExternalLabel&&h.push(v.drawExternalLabel)}for(n=0;n<m;n++){var y=(e=r[s[n]]).draw(t);null!=y.drawExternalLabel&&h.push(y.drawExternalLabel)}return{drawExternalLabels:function(){for(var t=0,e=h;t<e.length;t++){(0,e[t])()}}}}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,n=this.body.edgeIndices,i=0;i<n.length;i++){var r=e[n[i]];!0===r.connected&&r.draw(t)}}},{key:"_drawArrows",value:function(t){for(var e=this.body.edges,n=this.body.edgeIndices,i=0;i<n.length;i++){var r=e[n[i]];!0===r.connected&&r.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!==typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=_G(t).call(t,"msie 9.0")||-1!=_G(t).call(t,"safari")&&_G(t).call(t,"chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var e=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,n=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,n),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,n),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),t}(),Q$=Nk(IC.setInterval);function J$(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)}function $$(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)}var t0=function(){function t(e){XN(this,t),this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},$O(this.options,this.defaultOptions),this.bindEventListeners()}return JB(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.once("resize",(function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)})),this.body.emitter.on("setSize",xR(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",(function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()}))}},{key:"setOptions",value:function(t){var e=this;if(void 0!==t){dX(["width","height","autoResize"],this.options,t)}if(this._cleanUp(),!0===this.options.autoResize){var n;if(window.ResizeObserver){var i=new ResizeObserver((function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")})),r=this.frame;i.observe(r),this._cleanupCallbacks.push((function(){i.unobserve(r)}))}else{var o=Q$((function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")}),1e3);this._cleanupCallbacks.push((function(){clearInterval(o)}))}var a=xR(n=this._onResize).call(n,this);window.addEventListener("resize",a),this._cleanupCallbacks.push((function(){window.removeEventListener("resize",a)}))}}},{key:"_cleanUp",value:function(){var t,e,n;AH(t=UH(e=sV(n=this._cleanupCallbacks).call(n,0)).call(e)).call(t,(function(t){try{t()}catch(ROt){console.error(ROt)}}))}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,n=this.cameraState.scale;1!=t&&1!=e?n=.5*this.cameraState.scale*(t+e):1!=t?n=this.cameraState.scale*t:1!=e&&(n=this.cameraState.scale*e),this.body.view.scale=n;var i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),r={x:i.x-this.cameraState.position.x,y:i.y-this.cameraState.position.y};this.body.view.translation.x+=r.x*this.body.view.scale,this.body.view.translation.y+=r.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"===typeof t)return t+"px";if("string"===typeof t){if(-1!==_G(t).call(t,"%")||-1!==_G(t).call(t,"px"))return t;if(-1===_G(t).call(t,"%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new HX(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:HX.DIRECTION_ALL}),J$(this.hammer,(function(e){t.body.eventListeners.onTouch(e)})),this.hammer.on("tap",(function(e){t.body.eventListeners.onTap(e)})),this.hammer.on("doubletap",(function(e){t.body.eventListeners.onDoubleTap(e)})),this.hammer.on("press",(function(e){t.body.eventListeners.onHold(e)})),this.hammer.on("panstart",(function(e){t.body.eventListeners.onDragStart(e)})),this.hammer.on("panmove",(function(e){t.body.eventListeners.onDrag(e)})),this.hammer.on("panend",(function(e){t.body.eventListeners.onDragEnd(e)})),this.hammer.on("pinch",(function(e){t.body.eventListeners.onPinch(e)})),this.frame.canvas.addEventListener("wheel",(function(e){t.body.eventListeners.onMouseWheel(e)})),this.frame.canvas.addEventListener("mousemove",(function(e){t.body.eventListeners.onMouseMove(e)})),this.frame.canvas.addEventListener("contextmenu",(function(e){t.body.eventListeners.onContext(e)})),this.hammerFrame=new HX(this.frame),$$(this.hammerFrame,(function(e){t.body.eventListeners.onRelease(e)}))}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var n=!1,i=this.frame.canvas.width,r=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(o),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{var a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),s=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===a&&this.frame.canvas.height===s||this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==s&&(this.frame.canvas.height=s,n=!0)}return!0===n&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(r/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!==typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}();var e0=function(){function t(e,n){var i,r,o=this;XN(this,t),this.body=e,this.canvas=n,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",xR(i=this.fit).call(i,this)),this.body.emitter.on("animationFinished",(function(){o.body.emitter.emit("_stopRendering")})),this.body.emitter.on("unlockNode",xR(r=this.releaseNode).call(r,this))}return JB(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=function(t,e){var n=$O({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},null!==t&&void 0!==t?t:{});if(!nH(n.nodes))throw new TypeError("Nodes has to be an array of ids.");if(0===n.nodes.length&&(n.nodes=e),!("number"===typeof n.minZoomLevel&&n.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!("number"===typeof n.maxZoomLevel&&n.minZoomLevel<=n.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return n}(t,this.body.nodeIndices);var n,i,r=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(0===r||0===o)i=1,n=q$.getRange(this.body.nodes,t.nodes);else if(!0===e){var a=0;for(var s in this.body.nodes){if(Object.prototype.hasOwnProperty.call(this.body.nodes,s))!0===this.body.nodes[s].predefinedPosition&&(a+=1)}if(a>.5*this.body.nodeIndices.length)return void this.fit(t,!1);n=q$.getRange(this.body.nodes,t.nodes),i=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,i*=Math.min(r/600,o/600)}else{this.body.emitter.emit("_resizeNodes"),n=q$.getRange(this.body.nodes,t.nodes);var l=r/(1.1*Math.abs(n.maxX-n.minX)),c=o/(1.1*Math.abs(n.maxY-n.minY));i=l<=c?l:c}i>t.maxZoomLevel?i=t.maxZoomLevel:i<t.minZoomLevel&&(i=t.minZoomLevel);var u={position:q$.findCenter(n),scale:i,animation:t.animation};this.moveTo(u)}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var n={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=n,e.lockedOnNode=t,this.moveTo(e)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(void 0!==t){if(null!=t.offset){if(null!=t.offset.x){if(t.offset.x=+t.offset.x,!nZ(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(null!=t.offset.y){if(t.offset.y=+t.offset.y,!nZ(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(null!=t.position){if(null!=t.position.x){if(t.position.x=+t.position.x,!nZ(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(null!=t.position.y){if(t.position.y=+t.position.y,!nZ(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(null!=t.scale){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}else t={}}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e,n,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),r=i.x-t.position.x,o=i.y-t.position.y;if(this.targetTranslation={x:this.sourceTranslation.x+r*this.targetScale+t.offset.x,y:this.sourceTranslation.y+o*this.targetScale+t.offset.y},0===t.animation.duration)if(void 0!=this.lockedOnNodeId)this.viewFunction=xR(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction);else this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw");else this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=xR(n=this._transitionRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering")}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=n.x-t,r=n.y-e,o=this.body.view.translation,a={x:o.x+i*this.body.view.scale+this.lockedOnNodeOffset.x,y:o.y+r*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=a}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e=AX[this.animationEasingFunction](this.easingTime);if(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*e,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*e,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*e},this.easingTime>=1){var n;if(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,void 0!=this.lockedOnNodeId)this.viewFunction=xR(n=this._lockedRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction);this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();function n0(t){var e,n=t&&t.preventDefault||!1,i=t&&t.container||window,r={},o={keydown:{},keyup:{}},a={};for(e=97;e<=122;e++)a[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)a[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)a[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)a["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)a["num"+e]={code:96+e,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(t){c(t,"keydown")},l=function(t){c(t,"keyup")},c=function(t,e){if(void 0!==o[e][t.keyCode]){for(var i=o[e][t.keyCode],r=0;r<i.length;r++)(void 0===i[r].shift||1==i[r].shift&&1==t.shiftKey||0==i[r].shift&&0==t.shiftKey)&&i[r].fn(t);1==n&&t.preventDefault()}};return r.bind=function(t,e,n){if(void 0===n&&(n="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);void 0===o[n][a[t].code]&&(o[n][a[t].code]=[]),o[n][a[t].code].push({fn:e,shift:a[t].shift})},r.bindAll=function(t,e){for(var n in void 0===e&&(e="keydown"),a)a.hasOwnProperty(n)&&r.bind(n,t,e)},r.getKey=function(t){for(var e in a)if(a.hasOwnProperty(e)){if(1==t.shiftKey&&1==a[e].shift&&t.keyCode==a[e].code)return e;if(0==t.shiftKey&&0==a[e].shift&&t.keyCode==a[e].code)return e;if(t.keyCode==a[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},r.unbind=function(t,e,n){if(void 0===n&&(n="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);if(void 0!==e){var i=[],r=o[n][a[t].code];if(void 0!==r)for(var s=0;s<r.length;s++)r[s].fn==e&&r[s].shift==a[t].shift||i.push(o[n][a[t].code][s]);o[n][a[t].code]=i}else o[n][a[t].code]=[]},r.reset=function(){o={keydown:{},keyup:{}}},r.destroy=function(){o={keydown:{},keyup:{}},i.removeEventListener("keydown",s,!0),i.removeEventListener("keyup",l,!0)},i.addEventListener("keydown",s,!0),i.addEventListener("keyup",l,!0),r}var i0=function(){function t(e,n){var i=this;XN(this,t),this.body=e,this.canvas=n,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",(function(){i.activated=!0,i.configureKeyboardBindings()})),this.body.emitter.on("deactivate",(function(){i.activated=!1,i.configureKeyboardBindings()})),this.body.emitter.on("destroy",(function(){void 0!==i.keycharm&&i.keycharm.destroy()})),this.options={}}return JB(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],n=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var i=0;i<e.length;i++){this.navigationDOM[e[i]]=document.createElement("div"),this.navigationDOM[e[i]].className="vis-button vis-"+e[i],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[i]]);var r,o,a=new HX(this.navigationDOM[e[i]]);if("_fit"===n[i])J$(a,xR(r=this._fit).call(r,this));else J$(a,xR(o=this.bindToRedraw).call(o,this,n[i]));this.navigationHammers.push(a)}var s=new HX(this.canvas.frame);$$(s,(function(){t._stopMovement()})),this.navigationHammers.push(s),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){var e;void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=xR(e=this[t]).call(e,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=e/t,r=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=e/t,r=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t,e,n,i,r,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,_,x,w,S,E=this;(void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled)&&(!0===this.options.keyboard.bindToWindow?this.keycharm=n0({container:window,preventDefault:!0}):this.keycharm=n0({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(xR(t=this.keycharm).call(t,"up",(function(){E.bindToRedraw("_moveUp")}),"keydown"),xR(e=this.keycharm).call(e,"down",(function(){E.bindToRedraw("_moveDown")}),"keydown"),xR(n=this.keycharm).call(n,"left",(function(){E.bindToRedraw("_moveLeft")}),"keydown"),xR(i=this.keycharm).call(i,"right",(function(){E.bindToRedraw("_moveRight")}),"keydown"),xR(r=this.keycharm).call(r,"=",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),xR(o=this.keycharm).call(o,"num+",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),xR(a=this.keycharm).call(a,"num-",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),xR(s=this.keycharm).call(s,"-",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),xR(l=this.keycharm).call(l,"[",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),xR(c=this.keycharm).call(c,"]",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),xR(u=this.keycharm).call(u,"pageup",(function(){E.bindToRedraw("_zoomIn")}),"keydown"),xR(h=this.keycharm).call(h,"pagedown",(function(){E.bindToRedraw("_zoomOut")}),"keydown"),xR(d=this.keycharm).call(d,"up",(function(){E.unbindFromRedraw("_moveUp")}),"keyup"),xR(f=this.keycharm).call(f,"down",(function(){E.unbindFromRedraw("_moveDown")}),"keyup"),xR(p=this.keycharm).call(p,"left",(function(){E.unbindFromRedraw("_moveLeft")}),"keyup"),xR(g=this.keycharm).call(g,"right",(function(){E.unbindFromRedraw("_moveRight")}),"keyup"),xR(m=this.keycharm).call(m,"=",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),xR(v=this.keycharm).call(v,"num+",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),xR(y=this.keycharm).call(y,"num-",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup"),xR(b=this.keycharm).call(b,"-",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup"),xR(_=this.keycharm).call(_,"[",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup"),xR(x=this.keycharm).call(x,"]",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),xR(w=this.keycharm).call(w,"pageup",(function(){E.unbindFromRedraw("_zoomIn")}),"keyup"),xR(S=this.keycharm).call(S,"pagedown",(function(){E.unbindFromRedraw("_zoomOut")}),"keyup")))}}]),t}();function r0(t,e){var n="undefined"!==typeof Hj&&qN(t)||t["@@iterator"];if(!n){if(nH(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return o0(t,e);var i=Kj(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return MN(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o0(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function o0(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var a0=function(){function t(e,n,i){var r,o,a,s,l,c,u,h,d,f,p,g,m;XN(this,t),this.body=e,this.canvas=n,this.selectionHandler=i,this.navigationHandler=new i0(e,n),this.body.eventListeners.onTap=xR(r=this.onTap).call(r,this),this.body.eventListeners.onTouch=xR(o=this.onTouch).call(o,this),this.body.eventListeners.onDoubleTap=xR(a=this.onDoubleTap).call(a,this),this.body.eventListeners.onHold=xR(s=this.onHold).call(s,this),this.body.eventListeners.onDragStart=xR(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=xR(c=this.onDrag).call(c,this),this.body.eventListeners.onDragEnd=xR(u=this.onDragEnd).call(u,this),this.body.eventListeners.onMouseWheel=xR(h=this.onMouseWheel).call(h,this),this.body.eventListeners.onPinch=xR(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=xR(f=this.onMouseMove).call(f,this),this.body.eventListeners.onRelease=xR(p=this.onRelease).call(p,this),this.body.eventListeners.onContext=xR(g=this.onContext).call(g,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=xR(m=this.getPointer).call(m,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},$O(this.options,this.defaultOptions),this.bindEventListeners()}return JB(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",(function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer}))}},{key:"setOptions",value:function(t){if(void 0!==t){fX(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),CX(this.options,t,"keyboard"),t.tooltip&&($O(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=xX(t.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-(e=this.canvas.frame.canvas,e.getBoundingClientRect().left),y:t.y-mX(this.canvas.frame.canvas)};var e}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),n=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,n),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,n),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e),this.selectionHandler.generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,e){var n=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];-1===_G(e).call(e,r)&&n.push(r)}return n};return{nodes:n(t.nodes,e.nodes),edges:n(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=$O({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var n=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)}}else if(void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&this.selectionHandler.setSelection({nodes:[e.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var i,r=r0(this.selectionHandler.getSelectedNodes());try{for(r.s();!(i=r.n()).done;){var o=i.value,a={id:o.id,node:o,x:o.x,y:o.y,xFixed:o.options.fixed.x,yFixed:o.options.fixed.y};o.options.fixed.x=!0,o.options.fixed.y=!0,this.drag.selection.push(a)}}catch(s){r.e(s)}finally{r.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var n=this.getPointer(t.center),i=this.drag.selection;if(i&&i.length&&!0===this.options.dragNodes){this.selectionHandler.generateClickEvent("dragging",t,n);var r=n.x-this.drag.pointer.x,o=n.y-this.drag.pointer.y;AH(i).call(i,(function(t){var n=t.node;!1===t.xFixed&&(n.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+r)),!1===t.yFixed&&(n.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+o))})),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,n,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(n.x),y:this.canvas._YconvertDOMtoCanvas(n.y)},this.body.emitter.emit("_requestRedraw")}if(!0===this.options.dragView&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,n,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var a=n.x-this.drag.pointer.x,s=n.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+a,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var e=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var n;this.body.selectionBox.show=!1;var i=this.body.selectionBox.position,r={minX:Math.min(i.start.x,i.end.x),minY:Math.min(i.start.y,i.end.y),maxX:Math.max(i.start.x,i.end.x),maxY:Math.max(i.start.y,i.end.y)},o=jV(n=this.body.nodeIndices).call(n,(function(t){var n=e.body.nodes[t];return n.x>=r.minX&&n.x<=r.maxX&&n.y>=r.minY&&n.y<=r.maxY}));AH(o).call(o,(function(t){return e.selectionHandler.selectObject(e.body.nodes[t])}));var a=this.getPointer(t.center);this.selectionHandler.commitAndEmit(a,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var s=this.drag.selection;s&&s.length?(AH(s).call(s,(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed})),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var n=this.pinch.scale*t.scale;this.zoom(n,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var n=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var i=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));var r=this.body.view.translation,o=t/n,a=(1-o)*e.x+r.x*o,s=(1-o)*e.y+r.y*o;if(this.body.view.scale=t,this.body.view.translation={x:a,y:s},void 0!=i){var l=this.canvas.canvasToDOM(i);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),n<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){if(0!==t.deltaY){var e=this.body.view.scale;e*=1+(t.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var n=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(e,n)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,n=this.getPointer({x:t.clientX,y:t.clientY}),i=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(n),!1===this.popup.hidden&&(i=!0,this.popup.setPosition(n.x+3,n.y-5),this.popup.show())),this.options.keyboard.autoFocus&&!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===i&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=WG((function(){return e._checkShowPopup(n)}),this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,n)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),n=this.canvas._YconvertDOMtoCanvas(t.y),i={left:e,top:n,right:e,bottom:n},r=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,a="node";if(void 0===this.popupObj){for(var s,l=this.body.nodeIndices,c=this.body.nodes,u=[],h=0;h<l.length;h++)!0===(s=c[l[h]]).isOverlappingWith(i)&&(o=!0,void 0!==s.getTitle()&&u.push(l[h]));u.length>0&&(this.popupObj=c[u[u.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var d,f=this.body.edgeIndices,p=this.body.edges,g=[],m=0;m<f.length;m++)!0===(d=p[f[m]]).isOverlappingWith(i)&&!0===d.connected&&void 0!==d.getTitle()&&g.push(f[m]);g.length>0&&(this.popupObj=p[g[g.length-1]],a="edge")}void 0!==this.popupObj?this.popupObj.id!==r&&(void 0===this.popup&&(this.popup=new VX(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),n=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var i=this.selectionHandler.getNodeAt(t);n=void 0!==i&&i.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===n&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}();AK("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),ZK);var s0=Nk(IC.Set),l0=Zk,c0=OK,u0=KY.getWeakData,h0=dK,d0=NP,f0=MC,p0=DC,g0=cK,m0=RA,v0=bL.set,y0=bL.getterFor,b0=fF.find,_0=fF.findIndex,x0=l0([].splice),w0=0,S0=function(t){return t.frozen||(t.frozen=new E0)},E0=function(){this.entries=[]},M0=function(t,e){return b0(t.entries,(function(t){return t[0]===e}))};E0.prototype={get:function(t){var e=M0(this,t);if(e)return e[1]},has:function(t){return!!M0(this,t)},set:function(t,e){var n=M0(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=_0(this.entries,(function(e){return e[0]===t}));return~e&&x0(this.entries,e,1),!!~e}};var T0,k0={getConstructor:function(t,e,n,i){var r=t((function(t,r){h0(t,o),v0(t,{type:e,id:w0++,frozen:void 0}),f0(r)||g0(r,t[i],{that:t,AS_ENTRIES:n})})),o=r.prototype,a=y0(e),s=function(t,e,n){var i=a(t),r=u0(d0(e),!0);return!0===r?S0(i).set(e,n):r[i.id]=n,t};return c0(o,{delete:function(t){var e=a(this);if(!p0(t))return!1;var n=u0(t);return!0===n?S0(e).delete(t):n&&m0(n,e.id)&&delete n[e.id]},has:function(t){var e=a(this);if(!p0(t))return!1;var n=u0(t);return!0===n?S0(e).has(t):n&&m0(n,e.id)}}),c0(o,n?{get:function(t){var e=a(this);if(p0(t)){var n=u0(t);return!0===n?S0(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return s(this,t,e)}}:{add:function(t){return s(this,t,!0)}}),r}},C0=LY,A0=Fk,P0=Zk,O0=OK,R0=KY,L0=AK,D0=k0,I0=DC,N0=bL.enforce,z0=Uk,F0=nL,U0=Object,B0=Array.isArray,j0=U0.isExtensible,H0=U0.isFrozen,V0=U0.isSealed,G0=U0.freeze,W0=U0.seal,q0={},X0={},Y0=!A0.ActiveXObject&&"ActiveXObject"in A0,K0=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Z0=L0("WeakMap",K0,D0),Q0=Z0.prototype,J0=P0(Q0.set);if(F0)if(Y0){T0=D0.getConstructor(K0,"WeakMap",!0),R0.enable();var $0=P0(Q0.delete),t1=P0(Q0.has),e1=P0(Q0.get);O0(Q0,{delete:function(t){if(I0(t)&&!j0(t)){var e=N0(this);return e.frozen||(e.frozen=new T0),$0(this,t)||e.frozen.delete(t)}return $0(this,t)},has:function(t){if(I0(t)&&!j0(t)){var e=N0(this);return e.frozen||(e.frozen=new T0),t1(this,t)||e.frozen.has(t)}return t1(this,t)},get:function(t){if(I0(t)&&!j0(t)){var e=N0(this);return e.frozen||(e.frozen=new T0),t1(this,t)?e1(this,t):e.frozen.get(t)}return e1(this,t)},set:function(t,e){if(I0(t)&&!j0(t)){var n=N0(this);n.frozen||(n.frozen=new T0),t1(this,t)?J0(this,t,e):n.frozen.set(t,e)}else J0(this,t,e);return this}})}else C0&&z0((function(){var t=G0([]);return J0(new Z0,t,1),!H0(t)}))&&O0(Q0,{set:function(t,e){var n;return B0(t)&&(H0(t)?n=q0:V0(t)&&(n=X0)),J0(this,t,e),n===q0&&G0(t),n===X0&&W0(t),this}});var n1,i1,r1,o1,a1,s1=Nk(IC.WeakMap);function l1(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function c1(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n}function u1(t,e){var n="undefined"!==typeof Hj&&qN(t)||t["@@iterator"];if(!n){if(nH(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return h1(t,e);var i=Kj(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return MN(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h1(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h1(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d1(t,e){var n,i=new s0,r=u1(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.has(o)||i.add(o)}}catch(a){r.e(a)}finally{r.f()}return i}"function"===typeof SuppressedError&&SuppressedError;var f1=function(){function t(){XN(this,t),n1.set(this,new s0),i1.set(this,new s0)}return JB(t,[{key:"size",get:function(){return l1(this,i1,"f").size}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];l1(this,i1,"f").add(o)}}},{key:"delete",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];l1(this,i1,"f").delete(o)}}},{key:"clear",value:function(){l1(this,i1,"f").clear()}},{key:"getSelection",value:function(){return jj(l1(this,i1,"f"))}},{key:"getChanges",value:function(){return{added:jj(d1(l1(this,n1,"f"),l1(this,i1,"f"))),deleted:jj(d1(l1(this,i1,"f"),l1(this,n1,"f"))),previous:jj(new s0(l1(this,n1,"f"))),current:jj(new s0(l1(this,i1,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();c1(this,n1,l1(this,i1,"f"),"f"),c1(this,i1,new s0(l1(this,n1,"f")),"f");var e,n=u1(t.added);try{for(n.s();!(e=n.n()).done;){e.value.select()}}catch(o){n.e(o)}finally{n.f()}var i,r=u1(t.deleted);try{for(r.s();!(i=r.n()).done;){i.value.unselect()}}catch(o){r.e(o)}finally{r.f()}return t}}]),t}();n1=new s1,i1=new s1;var p1=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};XN(this,t),r1.set(this,new f1),o1.set(this,new f1),a1.set(this,void 0),c1(this,a1,e,"f")}return JB(t,[{key:"sizeNodes",get:function(){return l1(this,r1,"f").size}},{key:"sizeEdges",get:function(){return l1(this,o1,"f").size}},{key:"getNodes",value:function(){return l1(this,r1,"f").getSelection()}},{key:"getEdges",value:function(){return l1(this,o1,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=l1(this,r1,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=l1(this,o1,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){l1(this,r1,"f").delete(t)}},{key:"deleteEdges",value:function(t){l1(this,o1,"f").delete(t)}},{key:"clear",value:function(){l1(this,r1,"f").clear(),l1(this,o1,"f").clear()}},{key:"commit",value:function(){for(var t,e,n={nodes:l1(this,r1,"f").commit(),edges:l1(this,o1,"f").commit()},i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(t=l1(this,a1,"f")).call.apply(t,Yj(e=[this,n]).call(e,r)),n}}]),t}();function g1(t,e){var n="undefined"!==typeof Hj&&qN(t)||t["@@iterator"];if(!n){if(nH(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return m1(t,e);var i=Kj(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return MN(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m1(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function m1(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}r1=new s1,o1=new s1,a1=new s1;var v1=function(){function t(e,n){var i=this;XN(this,t),this.body=e,this.canvas=n,this._selectionAccumulator=new p1,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},$O(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",(function(){i.updateSelection()}))}return JB(t,[{key:"setOptions",value:function(t){if(void 0!==t){dX(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var n=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==n&&(e=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var n=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==n&&(e=!0,!0===n.isSelected()?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var n={};return n.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},n.event=t,n}},{key:"generateClickEvent",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this._initBaseEvent(e,n);if(!0===r)o.nodes=[],o.edges=[];else{var a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}void 0!==i&&(o.previousSelection=i),"click"==t&&(o.items=this.getClickedItems(n)),void 0!==e.controlEdge&&(o.controlEdge=e.controlEdge),this.body.emitter.emit(t,o)}},{key:"selectObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;if(void 0!==t){if(t instanceof PJ){var n;if(!0===e)(n=this._selectionAccumulator).addEdges.apply(n,jj(t.edges));this._selectionAccumulator.addNodes(t)}else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],n=this.body.nodes,i=0;i<this.body.nodeIndices.length;i++){var r=this.body.nodeIndices[i];n[r].isOverlappingWith(t)&&e.push(r)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._pointerToPositionObject(t),i=this._getAllNodesOverlappingWith(n);return i.length>0?!0===e?this.body.nodes[i[i.length-1]]:i[i.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var n=this.body.edges,i=0;i<this.body.edgeIndices.length;i++){var r=this.body.edgeIndices[i];n[r].isOverlappingWith(t)&&e.push(r)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.canvas.DOMtoCanvas(t),i=10,r=null,o=this.body.edges,a=0;a<this.body.edgeIndices.length;a++){var s=this.body.edgeIndices[a],l=o[s];if(l.connected){var c=l.from.x,u=l.from.y,h=l.to.x,d=l.to.y,f=l.edgeType.getDistanceToEdge(c,u,h,d,n.x,n.y);f<i&&(r=s,i=f)}}return null!==r?!0===e?this.body.edges[r]:r:void 0}},{key:"_addToHover",value:function(t){t instanceof PJ?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){var e;t instanceof PJ?(this._selectionAccumulator.deleteNodes(t),(e=this._selectionAccumulator).deleteEdges.apply(e,jj(t.edges))):this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var n=t.edges[e];n.hover=!0,this._addToHover(n)}}},{key:"emitBlurEvent",value:function(t,e,n){var i=this._initBaseEvent(t,e);!0===n.hover&&(n.hover=!1,n instanceof PJ?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}},{key:"emitHoverEvent",value:function(t,e,n){var i=this._initBaseEvent(t,e),r=!1;return!1===n.hover&&(n.hover=!0,this._addToHover(n),r=!0,n instanceof PJ?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),r}},{key:"hoverObject",value:function(t,e){var n=this.getNodeAt(e);void 0===n&&(n=this.getEdgeAt(e));var i=!1;for(var r in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,r)&&(void 0===n||n instanceof PJ&&n.id!=r||n instanceof k$)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[r]),delete this.hoverObj.nodes[r],i=!0);for(var o in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,o)&&(!0===i?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===n||n instanceof k$&&n.id!=o||n instanceof PJ&&!n.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],i=!0));if(void 0!==n){var a=dH(this.hoverObj.edges).length,s=dH(this.hoverObj.nodes).length;(i||n instanceof k$&&0===a&&0===s||n instanceof PJ&&0===a&&0===s)&&(i=this.emitHoverEvent(t,e,n)),n instanceof PJ&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(n)}!0===i&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,e){var n=!1,i=this._selectionAccumulator.commit(),r={nodes:i.nodes.previous,edges:i.edges.previous};i.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",e,t,r),n=!0),i.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",e,t,r),n=!0),i.nodes.added.length>0&&(this.generateClickEvent("selectNode",e,t),n=!0),i.edges.added.length>0&&(this.generateClickEvent("selectEdge",e,t),n=!0),!0===n&&this.generateClickEvent("select",e,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return cH(t=this._selectionAccumulator.getNodes()).call(t,(function(t){return t.id}))}},{key:"getSelectedEdgeIds",value:function(){var t;return cH(t=this._selectionAccumulator.getEdges()).call(t,(function(t){return t.id}))}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes){var n,i=g1(t.nodes);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=this.body.nodes[r];if(!o)throw new RangeError('Node with id "'+r+'" not found');this.selectObject(o,e.highlightEdges)}}catch(u){i.e(u)}finally{i.f()}}if(t.edges){var a,s=g1(t.edges);try{for(s.s();!(a=s.n()).done;){var l=a.value,c=this.body.edges[l];if(!c)throw new RangeError('Edge with id "'+l+'" not found');this.selectObject(c)}}catch(u){s.e(u)}finally{s.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),n=[],i=this.body.nodeIndices,r=this.body.nodes,o=i.length-1;o>=0;o--){var a=r[i[o]].getItemsOnPoint(e);n.push.apply(n,a)}for(var s=this.body.edgeIndices,l=this.body.edges,c=s.length-1;c>=0;c--){var u=l[s[c]].getItemsOnPoint(e);n.push.apply(n,u)}return n}}]),t}(),y1=Bz,b1=Math.floor,_1=function(t,e){var n=t.length,i=b1(n/2);return n<8?x1(t,e):w1(t,_1(y1(t,0,i),e),_1(y1(t,i),e),e)},x1=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},w1=function(t,e,n,i){for(var r=e.length,o=n.length,a=0,s=0;a<r||s<o;)t[a+s]=a<r&&s<o?i(e[a],n[s])<=0?e[a++]:n[s++]:a<r?e[a++]:n[s++];return t},S1=_1,E1=HC.match(/firefox\/(\d+)/i),M1=!!E1&&+E1[1],T1=/MSIE|Trident/.test(HC),k1=HC.match(/AppleWebKit\/(\d+)\./),C1=!!k1&&+k1[1],A1=lO,P1=Zk,O1=hA,R1=AA,L1=xO,D1=HH,I1=GR,N1=Uk,z1=S1,F1=yH,U1=M1,B1=T1,j1=KC,H1=C1,V1=[],G1=P1(V1.sort),W1=P1(V1.push),q1=N1((function(){V1.sort(void 0)})),X1=N1((function(){V1.sort(null)})),Y1=F1("sort"),K1=!N1((function(){if(j1)return j1<70;if(!(U1&&U1>3)){if(B1)return!0;if(H1)return H1<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)V1.push({k:e+i,v:n})}for(V1.sort((function(t,e){return e.v-t.v})),i=0;i<V1.length;i++)e=V1[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));A1({target:"Array",proto:!0,forced:q1||!X1||!Y1||!K1},{sort:function(t){void 0!==t&&O1(t);var e=R1(this);if(K1)return void 0===t?G1(e):G1(e,t);var n,i,r=[],o=L1(e);for(i=0;i<o;i++)i in e&&W1(r,e[i]);for(z1(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:I1(e)>I1(n)?1:-1}}(t)),n=L1(r),i=0;i<n;)e[i]=r[i++];for(;i<o;)D1(e,i++);return e}});var Z1=pR("Array").sort,Q1=jC,J1=Z1,$1=Array.prototype,t2=function(t){var e=t.sort;return t===$1||Q1($1,t)&&e===$1.sort?J1:e},e2=Nk(t2),n2=hA,i2=AA,r2=EC,o2=xO,a2=TypeError,s2=function(t){return function(e,n,i,r){n2(n);var o=i2(e),a=r2(o),s=o2(o),l=t?s-1:0,c=t?-1:1;if(i<2)for(;;){if(l in a){r=a[l],l+=c;break}if(l+=c,t?l<0:s<=l)throw new a2("Reduce of empty array with no initial value")}for(;t?l>=0:s>l;l+=c)l in a&&(r=n(r,a[l],l,o));return r}},l2={left:s2(!1),right:s2(!0)},c2="process"===tC(Fk.process),u2=l2.left;lO({target:"Array",proto:!0,forced:!c2&&KC>79&&KC<83||!yH("reduce")},{reduce:function(t){var e=arguments.length;return u2(this,t,e,e>1?arguments[1]:void 0)}});var h2=pR("Array").reduce,d2=jC,f2=h2,p2=Array.prototype,g2=function(t){var e=t.reduce;return t===p2||d2(p2,t)&&e===p2.reduce?f2:e},m2=Nk(g2);function v2(t){var e=function(){if("undefined"===typeof Reflect||!DQ)return!1;if(DQ.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(DQ(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=HQ(t);if(e){var r=HQ(this).constructor;n=DQ(i,arguments,r)}else n=i.apply(this,arguments);return BQ(this,n)}}var y2=function(){function t(){XN(this,t)}return JB(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,n),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),b2=function(t){UQ(n,t);var e=v2(n);function n(t){var i;return XN(this,n),(i=e.call(this)).layout=t,i}return JB(n,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(t,n),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){e2(t).call(t,(function(t,e){return t.x-e.x}))}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),n}(y2),_2=function(t){UQ(n,t);var e=v2(n);function n(t){var i;return XN(this,n),(i=e.call(this)).layout=t,i}return JB(n,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(t,n),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){e2(t).call(t,(function(t,e){return t.y-e.y}))}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),n}(y2),x2=fF.every;lO({target:"Array",proto:!0,forced:!yH("every")},{every:function(t){return x2(this,t,arguments.length>1?arguments[1]:void 0)}});var w2=pR("Array").every,S2=jC,E2=w2,M2=Array.prototype,T2=function(t){var e=t.every;return t===M2||S2(M2,t)&&e===M2.every?E2:e},k2=Nk(T2);function C2(t,e){var n="undefined"!==typeof Hj&&qN(t)||t["@@iterator"];if(!n){if(nH(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return A2(t,e);var i=Kj(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return MN(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return A2(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function P2(t,e){var n=new s0;return AH(t).call(t,(function(t){var e;AH(e=t.edges).call(e,(function(t){t.connected&&n.add(t)}))})),AH(n).call(n,(function(t){var n=t.from.id,i=t.to.id;null==e[n]&&(e[n]=0),(null==e[i]||e[n]>=e[i])&&(e[i]=e[n]+1)})),e}function O2(t,e,n,i){var r,o,a=SG(null),s=m2(r=jj(uQ(i).call(i))).call(r,(function(t,e){return t+1+e.edges.length}),0),l=n+"Id",c="to"===n?1:-1,u=C2(i);try{var h,d=function(){var r=Bj(o.value,2),u=r[0],h=r[1];if(!i.has(u)||!t(h))return 0;a[u]=0;for(var d,f,p=[h],g=0,m=function(){var t,r;if(!i.has(u))return 0;var o=a[d.id]+c;if(AH(t=jV(r=d.edges).call(r,(function(t){return t.connected&&t.to!==t.from&&t[n]!==d&&i.has(t.toId)&&i.has(t.fromId)}))).call(t,(function(t){var i=t[l],r=a[i];(null==r||e(o,r))&&(a[i]=o,p.push(t[n]))})),g>s)return{v:{v:P2(i,a)}};++g};d=p.pop();)if(0!==(f=m())&&f)return f.v};for(u.s();!(o=u.n()).done;)if(0!==(h=d())&&h)return h.v}catch(f){u.e(f)}finally{u.f()}return a}var R2=function(){function t(){XN(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return JB(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var e=this,n={};return function t(i){if(void 0!==n[i])return n[i];var r=e.levels[i];if(e.childrenReference[i]){var o=e.childrenReference[i];if(o.length>0)for(var a=0;a<o.length;a++)r=Math.max(r,t(o[a]))}return n[i]=r,r}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&void 0!==this.levels[n]&&(e=Math.min(this.levels[n],e));for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&void 0!==this.levels[i]&&(this.levels[i]-=e)}},{key:"getTreeSize",value:function(t,e){var n=1e9,i=-1e9,r=1e9,o=-1e9;for(var a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===e){var s=t[a];n=Math.min(s.x,n),i=Math.max(s.x,i),r=Math.min(s.y,r),o=Math.max(s.y,o)}return{min_x:n,max_x:i,min_y:r,max_y:o}}},{key:"hasSameParent",value:function(t,e){var n=this.parentReference[t.id],i=this.parentReference[e.id];if(void 0===n||void 0===i)return!1;for(var r=0;r<n.length;r++)for(var o=0;o<i.length;o++)if(n[r]==i[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return dH(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var n=!1,i=this.distributionOrdering[e];for(var r in i)if(i[r]===t){n=!0;break}n||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),L2=function(){function t(e){XN(this,t),this.body=e,this._resetRNG(Math.random()+":"+mH()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},$O(this.options,this.defaultOptions),this.bindEventListeners()}return JB(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_dataLoaded",(function(){t.layoutNetwork()})),this.body.emitter.on("_resetHierarchicalLayout",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",(function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}}))}},{key:"setOptions",value:function(t,e){if(void 0!==t){var n=this.options.hierarchical,i=n.enabled;if(dX(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),CX(this.options,t,"hierarchical"),void 0!==t.randomSeed&&this._resetRNG(t.randomSeed),!0===n.enabled)return!0===i&&this.body.emitter.emit("refresh",!0),"RL"===n.direction||"DU"===n.direction?n.levelSeparation>0&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===i)return this.body.emitter.emit("refresh"),pX(e,this.optionsBackup)}return e}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=tX(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===YB(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var n=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"===typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:n};else{var i=t.edges.smooth;void 0!==i.type&&"dynamic"!==i.type&&(n=i.type),this.optionsBackup.edges={smooth:{enabled:void 0===i.enabled||i.enabled,type:void 0===i.type?"dynamic":i.type,roundness:void 0===i.roundness?.5:i.roundness,forceDirection:void 0!==i.forceDirection&&i.forceDirection}},t.edges.smooth={enabled:void 0===i.enabled||i.enabled,type:n,roundness:void 0===i.roundness?.5:i.roundness,forceDirection:void 0!==i.forceDirection&&i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return t}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var e=t.length+50,n=0;n<t.length;n++){var i=t[n],r=2*Math.PI*this._rng();void 0===i.x&&(i.x=e*Math.cos(r)),void 0===i.y&&(i.y=e*Math.sin(r))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,n=0;n<t.length;n++){!0===this.body.nodes[t[n]].predefinedPosition&&(e+=1)}if(e<.5*t.length){var i=0,r=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>r){for(var a=t.length;t.length>r&&i<=10;){i+=1;var s=t.length;if(i%3===0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),s==t.length&&i%3!==0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*a)})}i>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var l=0;l<t.length;l++){var c=this.body.nodes[t[l]];!1===c.predefinedPosition&&(c.x+=70*(.5-this._rng()),c.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=q$.getRangeCore(this.body.nodes,this.body.nodeIndices),e=q$.findCenter(t),n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodes[this.body.nodeIndices[n]];i.x-=e.x,i.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var t,e,n=!1,i=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new R2,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&(void 0!==(t=this.body.nodes[e]).options.level?(n=!0,this.hierarchical.levels[e]=t.options.level):i=!0);if(!0===i&&!0===n)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===i){var r=this.options.hierarchical.sortMethod;"hubsize"===r?this._determineLevelsByHubsize():"directed"===r?this._determineLevelsDirected():"custom"===r&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);var a=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(a),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,n={},i=function(e,n){var i=t.hierarchical.trees;for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&i[r]===e&&t.direction.shift(r,n)},r=function(){for(var e=[],n=0;n<t.hierarchical.numTrees();n++)e.push(t.direction.getTreeSize(n));return e},o=function e(n,i){if(!i[n.id]&&(i[n.id]=!0,t.hierarchical.childrenReference[n.id])){var r=t.hierarchical.childrenReference[n.id];if(r.length>0)for(var o=0;o<r.length;o++)e(t.body.nodes[r[o]],i)}},a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,i=1e9,r=1e9,o=1e9,a=-1e9;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=t.body.nodes[s],c=t.hierarchical.levels[l.id],u=t.direction.getPosition(l),h=Bj(t._getSpaceAroundNode(l,e),2),d=h[0],f=h[1];i=Math.min(d,i),r=Math.min(f,r),c<=n&&(o=Math.min(u,o),a=Math.max(u,a))}return[o,a,i,r]},s=function(e,n,i){for(var r=t.hierarchical,o=0;o<n.length;o++){var a=n[o],s=r.distributionOrdering[a];if(s.length>1)for(var l=0;l<s.length-1;l++){var c=s[l],u=s[l+1];r.hasSameParent(c,u)&&r.inSameSubNetwork(c,u)&&e(c,u,i)}}},l=function(n,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=t.direction.getPosition(n),l=t.direction.getPosition(i),c=Math.abs(l-s),u=t.options.hierarchical.nodeSpacing;if(c>u){var h={},d={};o(n,h),o(i,d);var f=function(e,n){var i=t.hierarchical.getMaxLevel(e.id),r=t.hierarchical.getMaxLevel(n.id);return Math.min(i,r)}(n,i),p=a(h,f),g=a(d,f),m=p[1],v=g[0],y=g[2];if(Math.abs(m-v)>u){var b=m-v+u;b<-y+u&&(b=-y+u),b<0&&(t._shiftBlock(i.id,b),e=!0,!0===r&&t._centerParent(i))}}},c=function(i,r){for(var s=r.id,l=r.edges,c=t.hierarchical.levels[r.id],u=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,h={},d=[],f=0;f<l.length;f++){var p=l[f];if(p.toId!=p.fromId){var g=p.toId==s?p.from:p.to;h[l[f].id]=g,t.hierarchical.levels[g.id]<c&&d.push(p)}}var m=function(e,n){for(var i=0,r=0;r<n.length;r++)if(void 0!==h[n[r].id]){var o=t.direction.getPosition(h[n[r].id])-e;i+=o/Math.sqrt(o*o+u)}return i},v=function(e,n){for(var i=0,r=0;r<n.length;r++)if(void 0!==h[n[r].id]){var o=t.direction.getPosition(h[n[r].id])-e;i-=u*Math.pow(o*o+u,-1.5)}return i},y=function(e,n){for(var i=t.direction.getPosition(r),o={},a=0;a<e;a++){var s=m(i,n),l=v(i,n);if(void 0!==o[i-=Math.max(-40,Math.min(40,Math.round(s/l)))])break;o[i]=a}return i},b=y(i,d);!function(i){var s=t.direction.getPosition(r);if(void 0===n[r.id]){var l={};o(r,l),n[r.id]=l}var c=a(n[r.id]),u=c[2],h=c[3],d=i-s,f=0;d>0?f=Math.min(d,h-t.options.hierarchical.nodeSpacing):d<0&&(f=-Math.min(-d,u-t.options.hierarchical.nodeSpacing)),0!=f&&(t._shiftBlock(r.id,f),e=!0)}(b),function(n){var i=t.direction.getPosition(r),o=Bj(t._getSpaceAroundNode(r),2),a=o[0],s=o[1],l=n-i,c=i;l>0?c=Math.min(i+(s-t.options.hierarchical.nodeSpacing),n):l<0&&(c=Math.max(i-(a-t.options.hierarchical.nodeSpacing),n)),c!==i&&(t.direction.setPosition(r,c),e=!0)}(b=y(i,l))};!0===this.options.hierarchical.blockShifting&&(function(n){var i=t.hierarchical.getLevels();i=UH(i).call(i);for(var r=0;r<n&&(e=!1,s(l,i,!0),!0===e);r++);}(5),function(){for(var e in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(n){var i=t.hierarchical.getLevels();i=UH(i).call(i);for(var r=0;r<n;r++){e=!1;for(var o=0;o<i.length;o++)for(var a=i[o],s=t.hierarchical.distributionOrdering[a],l=0;l<s.length;l++)c(1e3,s[l]);if(!0!==e)break}}(20),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=UH(e).call(e);for(var n=0;n<e.length;n++)for(var i=e[n],r=t.hierarchical.distributionOrdering[i],o=0;o<r.length;o++)t._centerParent(r[o])}(),function(){for(var e=r(),n=0,o=0;o<e.length-1;o++){n+=e[o].max-e[o+1].min+t.options.hierarchical.treeSpacing,i(o+1,n)}}()}},{key:"_getSpaceAroundNode",value:function(t,e){var n=!0;void 0===e&&(n=!1);var i=this.hierarchical.levels[t.id];if(void 0!==i){var r=this.hierarchical.distributionIndex[t.id],o=this.direction.getPosition(t),a=this.hierarchical.distributionOrdering[i],s=1e9,l=1e9;if(0!==r){var c=a[r-1];if(!0===n&&void 0===e[c.id]||!1===n)s=o-this.direction.getPosition(c)}if(r!=a.length-1){var u=a[r+1];if(!0===n&&void 0===e[u.id]||!1===n){var h=this.direction.getPosition(u);l=Math.min(l,h-o)}}return[s,l]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],n=0;n<e.length;n++){var i=e[n],r=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(void 0!==o){var a=this._getCenterPosition(o),s=this.direction.getPosition(r),l=Bj(this._getSpaceAroundNode(r),2),c=l[0],u=l[1],h=s-a;(h<0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(r,a)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(Object.prototype.hasOwnProperty.call(t,e)){var n,i=dH(t[e]);i=this._indexArrayToNodes(i),e2(n=this.direction).call(n,i);for(var r=0,o=0;o<i.length;o++){var a=i[o];if(void 0===this.positionedNodes[a.id]){var s=this.options.hierarchical.nodeSpacing,l=s*r;r>0&&(l=this.direction.getPosition(i[o-1])+s),this.direction.setPosition(a,l,e),this._validatePositionAndContinue(a,e,l),r++}}}}},{key:"_placeBranchNodes",value:function(t,e){var n,i=this.hierarchical.childrenReference[t];if(void 0!==i){for(var r=[],o=0;o<i.length;o++)r.push(this.body.nodes[i[o]]);e2(n=this.direction).call(n,r);for(var a=0;a<r.length;a++){var s=r[a],l=this.hierarchical.levels[s.id];if(!(l>e&&void 0===this.positionedNodes[s.id]))return;var c=this.options.hierarchical.nodeSpacing,u=void 0;u=0===a?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(r[a-1])+c,this.direction.setPosition(s,u,l),this._validatePositionAndContinue(s,l,u)}var h=this._getCenterPosition(r);this.direction.setPosition(this.body.nodes[t],h,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,n){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(n-i<this.options.hierarchical.nodeSpacing){var r=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.body.nodes[t[n]]);return e}},{key:"_getDistribution",value:function(){var t,e,n={};for(t in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,t)){e=this.body.nodes[t];var i=void 0===this.hierarchical.levels[t]?0:this.hierarchical.levels[t];this.direction.fix(e,i),void 0===n[i]&&(n[i]={}),n[i][t]=e}return n}},{key:"_getActiveEdges",value:function(t){var e=this,n=[];return vX(t.edges,(function(t){var i;-1!==_G(i=e.body.edgeIndices).call(i,t.id)&&n.push(t)})),n}},{key:"_getHubSizes",value:function(){var t=this,e={};vX(this.body.nodeIndices,(function(n){var i=t.body.nodes[n],r=t._getActiveEdges(i).length;e[r]=!0}));var n=[];return vX(e,(function(t){n.push(Number(t))})),e2(n).call(n,(function(t,e){return e-t})),n}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,n){t.hierarchical.levelDownstream(e,n)},n=this._getHubSizes(),i=function(){var i=n[r];if(0===i)return 1;vX(t.body.nodeIndices,(function(n){var r=t.body.nodes[n];i===t._getActiveEdges(r).length&&t._crawlNetwork(e,n)}))},r=0;r<n.length&&!i();++r);}},{key:"_determineLevelsCustomCallback",value:function(){var t=this;this._crawlNetwork((function(e,n,i){var r=t.hierarchical.levels[e.id];void 0===r&&(r=t.hierarchical.levels[e.id]=1e5);var o=(q$.cloneOptions(e,"node"),q$.cloneOptions(n,"node"),void q$.cloneOptions(i,"edge"));t.hierarchical.levels[n.id]=r+o})),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,e=this,n=m2(t=this.body.nodeIndices).call(t,(function(t,n){return t.set(n,e.body.nodes[n]),t}),new QK);"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=function(t){return O2((function(e){var n,i;return k2(n=jV(i=e.edges).call(i,(function(e){return t.has(e.toId)}))).call(n,(function(t){return t.from===e}))}),(function(t,e){return e<t}),"to",t)}(n):this.hierarchical.levels=function(t){return O2((function(e){var n,i;return k2(n=jV(i=e.edges).call(i,(function(e){return t.has(e.toId)}))).call(n,(function(t){return t.to===e}))}),(function(t,e){return e>t}),"from",t)}(n),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this;this._crawlNetwork((function(e,n){t.hierarchical.levels[n.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,n.id)})),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1?arguments[1]:void 0,i={},r=function n(r,o){if(void 0===i[r.id]){var a;t.hierarchical.setTreeIndex(r,o),i[r.id]=!0;for(var s=t._getActiveEdges(r),l=0;l<s.length;l++){var c=s[l];!0===c.connected&&(a=c.toId==r.id?c.from:c.to,r.id!=a.id&&(e(r,a,c),n(a,o)))}}};if(void 0===n)for(var o=0,a=0;a<this.body.nodeIndices.length;a++){var s=this.body.nodeIndices[a];if(void 0===i[s])r(this.body.nodes[s],o),o+=1}else{var l=this.body.nodes[n];if(void 0===l)return void console.error("Node not found:",n);r(l)}}},{key:"_shiftBlock",value:function(t,e){var n=this,i={};!function t(r){if(!i[r]){i[r]=!0,n.direction.shift(r,e);var o=n.hierarchical.childrenReference[r];if(void 0!==o)for(var a=0;a<o.length;a++)t(o[a])}}(t)}},{key:"_findCommonParent",value:function(t,e){var n=this,i={};return function t(e,i){var r=n.hierarchical.parentReference[i];if(void 0!==r)for(var o=0;o<r.length;o++){var a=r[o];e[a]=!0,t(e,a)}}(i,t),function t(e,i){var r=n.hierarchical.parentReference[i];if(void 0!==r)for(var o=0;o<r.length;o++){var a=r[o];if(void 0!==e[a])return{foundParent:a,withChild:i};var s=t(e,a);if(null!==s.foundParent)return s}return{foundParent:null,withChild:i}}(i,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new b2(this):new _2(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,n=-1e9,i=0;i<t.length;i++){var r=void 0;if(void 0!==t[i].id)r=t[i];else{var o=t[i];r=this.body.nodes[o]}var a=this.direction.getPosition(r);e=Math.min(e,a),n=Math.max(n,a)}return.5*(e+n)}}]),t}();function D2(t,e){var n="undefined"!==typeof Hj&&qN(t)||t["@@iterator"];if(!n){if(nH(t)||(n=function(t,e){var n;if(!t)return;if("string"===typeof t)return I2(t,e);var i=Kj(n=Object.prototype.toString.call(t)).call(n,8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return MN(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I2(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function I2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var N2=function(){function t(e,n,i,r){var o,a,s=this;XN(this,t),this.body=e,this.canvas=n,this.selectionHandler=i,this.interactionHandler=r,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},$O(this.options,this.defaultOptions),this.body.emitter.on("destroy",(function(){s._clean()})),this.body.emitter.on("_dataChanged",xR(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",xR(a=this._restore).call(a,this))}return JB(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,n){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=n.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=n.locales),void 0!==t&&("boolean"===typeof t?this.options.enabled=t:(this.options.enabled=!0,pX(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var t,e;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var n=this.selectionHandler.getSelectedNodeCount(),i=this.selectionHandler.getSelectedEdgeCount(),r=n+i,o=this.options.locales[this.options.locale],a=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),a=!0),!1!==this.options.addEdge&&(!0===a?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),1===n&&"function"===typeof this.options.editNode?(!0===a?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):1===i&&0===n&&!1!==this.options.editEdge&&(!0===a?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),0!==r&&(n>0&&!1!==this.options.deleteNode||0===n&&!1!==this.options.deleteEdge)&&(!0===a&&this._createSeperator(4),this._createDeleteButton(o)),this._bindElementEvents(this.closeDiv,xR(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",xR(e=this.showManipulatorToolbar).call(e,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e,n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,xR(e=this.toggleEditMode).call(e,this))}this._temporaryBindEvent("click",xR(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler.getSelectedNodes()[0];if(void 0!==e){if(this.inMode="editNode","function"!==typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var n=pX({},e.options,!1);if(n.x=e.x,n.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(n,(function(e){null!==e&&void 0!==e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()}))}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,e,n,i,r;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var o,a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,xR(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",xR(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",xR(e=this._finishConnect).call(e,this)),this._temporaryBindUI("onDrag",xR(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",xR(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",xR(r=this._dragStartEdge).call(r,this)),this._temporaryBindUI("onHold",(function(){}))}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==YB(this.options.editEdge)||"function"!==typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t,e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,xR(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0!==this.edgeBeingEditedId){var n,i,r,o,a=this.body.edges[this.edgeBeingEditedId],s=this._getNewTargetNode(a.from.x,a.from.y),l=this._getNewTargetNode(a.to.x,a.to.y);this.temporaryIds.nodes.push(s.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",xR(n=this._controlNodeTouch).call(n,this)),this._temporaryBindUI("onTap",(function(){})),this._temporaryBindUI("onHold",(function(){})),this._temporaryBindUI("onDragStart",xR(i=this._controlNodeDragStart).call(i,this)),this._temporaryBindUI("onDrag",xR(r=this._controlNodeDrag).call(r,this)),this._temporaryBindUI("onDragEnd",xR(o=this._controlNodeDragEnd).call(o,this)),this._temporaryBindUI("onMouseMove",(function(){})),this._temporaryBindEvent("beforeDrawing",(function(t){var e=a.edgeType.findBorderPositions(t);!1===s.selected&&(s.x=e.from.x,s.y=e.from.y),!1===l.selected&&(l.x=e.to.x,l.y=e.to.y)})),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var c=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(c.from.id,c.to.id)}}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodeIds(),n=this.selectionHandler.getSelectedEdgeIds(),i=void 0;if(e.length>0){for(var r=0;r<e.length;r++)if(!0===this.body.nodes[e[r]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"===typeof this.options.deleteNode&&(i=this.options.deleteNode)}else n.length>0&&"function"===typeof this.options.deleteEdge&&(i=this.options.deleteEdge);if("function"===typeof i){var o={nodes:e,edges:n};if(2!==i.length)throw new Error("The function for delete does not support two arguments (data, callback)");i(o,(function(e){null!==e&&void 0!==e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().remove(n),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){var t,e;(void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv)&&(this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",null!==(t=null===(e=this.options.locales[this.options.locale])||void 0===e?void 0:e.close)&&void 0!==t?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var n=pX({},this.options.controlNodeStyle);n.id="targetNode"+W$(),n.hidden=!1,n.physics=!1,n.x=t,n.y=e;var i=this.body.functions.createNode(n);return i.shape.boundingBox={left:t,right:t,top:e,bottom:e},i}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},sX(this.editModeDiv);var e=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindElementEvents(n,xR(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(sX(this.editModeDiv),sX(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,e,n=D2(sV(t=this._domEventListenerCleanupQueue).call(t,0));try{for(n.s();!(e=n.n()).done;){(0,e.value)()}}catch(i){n.e(i)}finally{n.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),sX(this.manipulationDiv),sX(this.editModeDiv),sX(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e,n=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,xR(e=this.addNodeMode).call(e,this))}},{key:"_createAddEdgeButton",value:function(t){var e,n=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,xR(e=this.addEdgeMode).call(e,this))}},{key:"_createEditNodeButton",value:function(t){var e,n=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,xR(e=this.editNode).call(e,this))}},{key:"_createEditEdgeButton",value:function(t){var e,n=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,xR(e=this.editEdgeMode).call(e,this))}},{key:"_createDeleteButton",value:function(t){var e,n;n=this.options.rtl?"vis-delete-rtl":"vis-delete";var i=this._createButton("delete",n,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,xR(e=this.deleteSelected).call(e,this))}},{key:"_createBackButton",value:function(t){var e,n=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindElementEvents(n,xR(e=this.showManipulatorToolbar).call(e,this))}},{key:"_createButton",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=i,this.manipulationDOM[t+"Label"].innerText=n,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+TG(dH(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,n=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,n)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,e){var n=new HX(t,{});J$(n,e),this._domEventListenerCleanupQueue.push((function(){n.destroy()}));var i=function(t){var n=t.keyCode,i=t.key;"Enter"!==i&&" "!==i&&13!==n&&32!==n||e()};t.addEventListener("keyup",i,!1),this._domEventListenerCleanupQueue.push((function(){t.removeEventListener("keyup",i,!1)}))}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var e;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var n,i=_G(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[t]);if(-1!==i)sV(n=this.body.edgeIndices).call(n,i,1)}for(var r=0;r<this.temporaryIds.nodes.length;r++){var o;delete this.body.nodes[this.temporaryIds.nodes[r]];var a,s=_G(o=this.body.nodeIndices).call(o,this.temporaryIds.nodes[r]);if(-1!==s)sV(a=this.body.nodeIndices).call(a,s,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=$O({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),n=this.body.nodes[this.temporaryIds.nodes[0]],i=this.body.nodes[this.temporaryIds.nodes[1]],r=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var o=n.isOverlappingWith(e),a=i.isOverlappingWith(e);!0===o?(this.selectedControlNode=n,r.edgeType.from=n):!0===a&&(this.selectedControlNode=i,r.edgeType.to=i),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),n=this.canvas.DOMtoCanvas(e);void 0!==this.selectedControlNode?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),n=this.selectionHandler._pointerToPositionObject(e),i=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,a=r.length-1;a>=0;a--)if(r[a]!==this.selectedControlNode.id){o=this.body.nodes[r[a]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===s.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=$O({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var e=this.lastTouch,n=this.selectionHandler.getNodeAt(e);if(void 0!==n)if(!0===n.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);var r=this.body.functions.createEdge({id:"connectionEdge"+W$(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[r.id]=r,this.body.edgeIndices.push(r.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(r.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center),n=this.selectionHandler._pointerToPositionObject(e),i=void 0;void 0!==this.temporaryIds.edges[0]&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,a=r.length-1;a>=0;a--){var s;if(-1===_G(s=this.temporaryIds.nodes).call(s,r[a])){o=this.body.nodes[r[a]];break}}if(t.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,e),void 0!==this.temporaryIds.nodes[0]){var l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(e.x),l.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),n=this.selectionHandler._pointerToPositionObject(e),i=void 0;void 0!==this.temporaryIds.edges[0]&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,a=r.length-1;a>=0;a--){var s;if(-1===_G(s=this.temporaryIds.nodes).call(s,r[a])){o=this.body.nodes[r[a]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[i]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(i,o.id)),t.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,n={id:W$(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"===typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(n,(function(t){null!==t&&void 0!==t&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar()}))}else this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var n=this,i={from:t,to:e};if("function"===typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(i,(function(t){null!==t&&void 0!==t&&"addEdge"===n.inMode&&(n.body.data.edges.getDataSet().add(t),n.selectionHandler.unselectAll(),n.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var n=this,i={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label},r=this.options.editEdge;if("object"===YB(r)&&(r=r.editWithoutDrag),"function"===typeof r){if(2!==r.length)throw new Error("The function for edit does not support two arguments (data, callback)");r(i,(function(t){null===t||void 0===t||"editEdge"!==n.inMode?(n.body.edges[i.id].updateEdgeType(),n.body.emitter.emit("_redraw"),n.showManipulatorToolbar()):(n.body.data.edges.getDataSet().update(t),n.selectionHandler.unselectAll(),n.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().update(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}(),z2="string",F2="boolean",U2="number",B2="array",j2="object",H2=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],V2={borderWidth:{number:U2},borderWidthSelected:{number:U2,undefined:"undefined"},brokenImage:{string:z2,undefined:"undefined"},chosen:{label:{boolean:F2,function:"function"},node:{boolean:F2,function:"function"},__type__:{object:j2,boolean:F2}},color:{border:{string:z2},background:{string:z2},highlight:{border:{string:z2},background:{string:z2},__type__:{object:j2,string:z2}},hover:{border:{string:z2},background:{string:z2},__type__:{object:j2,string:z2}},__type__:{object:j2,string:z2}},opacity:{number:U2,undefined:"undefined"},fixed:{x:{boolean:F2},y:{boolean:F2},__type__:{object:j2,boolean:F2}},font:{align:{string:z2},color:{string:z2},size:{number:U2},face:{string:z2},background:{string:z2},strokeWidth:{number:U2},strokeColor:{string:z2},vadjust:{number:U2},multi:{boolean:F2,string:z2},bold:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},boldital:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},ital:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},mono:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},__type__:{object:j2,string:z2}},group:{string:z2,number:U2,undefined:"undefined"},heightConstraint:{minimum:{number:U2},valign:{string:z2},__type__:{object:j2,boolean:F2,number:U2}},hidden:{boolean:F2},icon:{face:{string:z2},code:{string:z2},size:{number:U2},color:{string:z2},weight:{string:z2,number:U2},__type__:{object:j2}},id:{string:z2,number:U2},image:{selected:{string:z2,undefined:"undefined"},unselected:{string:z2,undefined:"undefined"},__type__:{object:j2,string:z2}},imagePadding:{top:{number:U2},right:{number:U2},bottom:{number:U2},left:{number:U2},__type__:{object:j2,number:U2}},label:{string:z2,undefined:"undefined"},labelHighlightBold:{boolean:F2},level:{number:U2,undefined:"undefined"},margin:{top:{number:U2},right:{number:U2},bottom:{number:U2},left:{number:U2},__type__:{object:j2,number:U2}},mass:{number:U2},physics:{boolean:F2},scaling:{min:{number:U2},max:{number:U2},label:{enabled:{boolean:F2},min:{number:U2},max:{number:U2},maxVisible:{number:U2},drawThreshold:{number:U2},__type__:{object:j2,boolean:F2}},customScalingFunction:{function:"function"},__type__:{object:j2}},shadow:{enabled:{boolean:F2},color:{string:z2},size:{number:U2},x:{number:U2},y:{number:U2},__type__:{object:j2,boolean:F2}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:F2,array:B2},borderRadius:{number:U2},interpolation:{boolean:F2},useImageSize:{boolean:F2},useBorderWithImage:{boolean:F2},coordinateOrigin:{string:["center","top-left"]},__type__:{object:j2}},size:{number:U2},title:{string:z2,dom:"dom",undefined:"undefined"},value:{number:U2,undefined:"undefined"},widthConstraint:{minimum:{number:U2},maximum:{number:U2},__type__:{object:j2,boolean:F2,number:U2}},x:{number:U2},y:{number:U2},__type__:{object:j2}},G2={configure:{enabled:{boolean:F2},filter:{boolean:F2,string:z2,array:B2,function:"function"},container:{dom:"dom"},showButton:{boolean:F2},__type__:{object:j2,boolean:F2,string:z2,array:B2,function:"function"}},edges:{arrows:{to:{enabled:{boolean:F2},scaleFactor:{number:U2},type:{string:H2},imageHeight:{number:U2},imageWidth:{number:U2},src:{string:z2},__type__:{object:j2,boolean:F2}},middle:{enabled:{boolean:F2},scaleFactor:{number:U2},type:{string:H2},imageWidth:{number:U2},imageHeight:{number:U2},src:{string:z2},__type__:{object:j2,boolean:F2}},from:{enabled:{boolean:F2},scaleFactor:{number:U2},type:{string:H2},imageWidth:{number:U2},imageHeight:{number:U2},src:{string:z2},__type__:{object:j2,boolean:F2}},__type__:{string:["from","to","middle"],object:j2}},endPointOffset:{from:{number:U2},to:{number:U2},__type__:{object:j2,number:U2}},arrowStrikethrough:{boolean:F2},background:{enabled:{boolean:F2},color:{string:z2},size:{number:U2},dashes:{boolean:F2,array:B2},__type__:{object:j2,boolean:F2}},chosen:{label:{boolean:F2,function:"function"},edge:{boolean:F2,function:"function"},__type__:{object:j2,boolean:F2}},color:{color:{string:z2},highlight:{string:z2},hover:{string:z2},inherit:{string:["from","to","both"],boolean:F2},opacity:{number:U2},__type__:{object:j2,string:z2}},dashes:{boolean:F2,array:B2},font:{color:{string:z2},size:{number:U2},face:{string:z2},background:{string:z2},strokeWidth:{number:U2},strokeColor:{string:z2},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:U2},multi:{boolean:F2,string:z2},bold:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},boldital:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},ital:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},mono:{color:{string:z2},size:{number:U2},face:{string:z2},mod:{string:z2},vadjust:{number:U2},__type__:{object:j2,string:z2}},__type__:{object:j2,string:z2}},hidden:{boolean:F2},hoverWidth:{function:"function",number:U2},label:{string:z2,undefined:"undefined"},labelHighlightBold:{boolean:F2},length:{number:U2,undefined:"undefined"},physics:{boolean:F2},scaling:{min:{number:U2},max:{number:U2},label:{enabled:{boolean:F2},min:{number:U2},max:{number:U2},maxVisible:{number:U2},drawThreshold:{number:U2},__type__:{object:j2,boolean:F2}},customScalingFunction:{function:"function"},__type__:{object:j2}},selectionWidth:{function:"function",number:U2},selfReferenceSize:{number:U2},selfReference:{size:{number:U2},angle:{number:U2},renderBehindTheNode:{boolean:F2},__type__:{object:j2}},shadow:{enabled:{boolean:F2},color:{string:z2},size:{number:U2},x:{number:U2},y:{number:U2},__type__:{object:j2,boolean:F2}},smooth:{enabled:{boolean:F2},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:U2},forceDirection:{string:["horizontal","vertical","none"],boolean:F2},__type__:{object:j2,boolean:F2}},title:{string:z2,undefined:"undefined"},width:{number:U2},widthConstraint:{maximum:{number:U2},__type__:{object:j2,boolean:F2,number:U2}},value:{number:U2,undefined:"undefined"},__type__:{object:j2}},groups:{useDefaultGroups:{boolean:F2},__any__:V2,__type__:{object:j2}},interaction:{dragNodes:{boolean:F2},dragView:{boolean:F2},hideEdgesOnDrag:{boolean:F2},hideEdgesOnZoom:{boolean:F2},hideNodesOnDrag:{boolean:F2},hover:{boolean:F2},keyboard:{enabled:{boolean:F2},speed:{x:{number:U2},y:{number:U2},zoom:{number:U2},__type__:{object:j2}},bindToWindow:{boolean:F2},autoFocus:{boolean:F2},__type__:{object:j2,boolean:F2}},multiselect:{boolean:F2},navigationButtons:{boolean:F2},selectable:{boolean:F2},selectConnectedEdges:{boolean:F2},hoverConnectedEdges:{boolean:F2},tooltipDelay:{number:U2},zoomView:{boolean:F2},zoomSpeed:{number:U2},__type__:{object:j2}},layout:{randomSeed:{undefined:"undefined",number:U2,string:z2},improvedLayout:{boolean:F2},clusterThreshold:{number:U2},hierarchical:{enabled:{boolean:F2},levelSeparation:{number:U2},nodeSpacing:{number:U2},treeSpacing:{number:U2},blockShifting:{boolean:F2},edgeMinimization:{boolean:F2},parentCentralization:{boolean:F2},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:j2,boolean:F2}},__type__:{object:j2}},manipulation:{enabled:{boolean:F2},initiallyActive:{boolean:F2},addNode:{boolean:F2,function:"function"},addEdge:{boolean:F2,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:j2,boolean:F2,function:"function"}},deleteNode:{boolean:F2,function:"function"},deleteEdge:{boolean:F2,function:"function"},controlNodeStyle:V2,__type__:{object:j2,boolean:F2}},nodes:V2,physics:{enabled:{boolean:F2},barnesHut:{theta:{number:U2},gravitationalConstant:{number:U2},centralGravity:{number:U2},springLength:{number:U2},springConstant:{number:U2},damping:{number:U2},avoidOverlap:{number:U2},__type__:{object:j2}},forceAtlas2Based:{theta:{number:U2},gravitationalConstant:{number:U2},centralGravity:{number:U2},springLength:{number:U2},springConstant:{number:U2},damping:{number:U2},avoidOverlap:{number:U2},__type__:{object:j2}},repulsion:{centralGravity:{number:U2},springLength:{number:U2},springConstant:{number:U2},nodeDistance:{number:U2},damping:{number:U2},__type__:{object:j2}},hierarchicalRepulsion:{centralGravity:{number:U2},springLength:{number:U2},springConstant:{number:U2},nodeDistance:{number:U2},damping:{number:U2},avoidOverlap:{number:U2},__type__:{object:j2}},maxVelocity:{number:U2},minVelocity:{number:U2},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:F2},iterations:{number:U2},updateInterval:{number:U2},onlyDynamicEdges:{boolean:F2},fit:{boolean:F2},__type__:{object:j2,boolean:F2}},timestep:{number:U2},adaptiveTimestep:{boolean:F2},wind:{x:{number:U2},y:{number:U2},__type__:{object:j2}},__type__:{object:j2,boolean:F2}},autoResize:{boolean:F2},clickToUse:{boolean:F2},locale:{string:z2},locales:{__any__:{any:"any"},__type__:{object:j2}},height:{string:z2},width:{string:z2},__type__:{object:j2}},W2={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},q2=function(t,e,n){var i;return!(!AV(t).call(t,"physics")||!AV(i=W2.physics.solver).call(i,e)||n.physics.solver===e||"wind"===e)},X2=function(){function t(){XN(this,t)}return JB(t,[{key:"getDistances",value:function(t,e,n){for(var i={},r=t.edges,o=0;o<e.length;o++){var a={};i[e[o]]=a;for(var s=0;s<e.length;s++)a[e[s]]=o==s?0:1e9}for(var l=0;l<n.length;l++){var c=r[n[l]];!0===c.connected&&void 0!==i[c.fromId]&&void 0!==i[c.toId]&&(i[c.fromId][c.toId]=1,i[c.toId][c.fromId]=1)}for(var u=e.length,h=0;h<u;h++)for(var d=e[h],f=i[d],p=0;p<u-1;p++)for(var g=e[p],m=i[g],v=p+1;v<u;v++){var y=e[v],b=i[y],_=Math.min(m[y],m[d]+f[y]);m[y]=_,b[g]=_}return i}}]),t}(),Y2=function(){function t(e,n,i){XN(this,t),this.body=e,this.springLength=n,this.springConstant=i,this.distanceSolver=new X2}return JB(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();for(var r=0,o=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),a=1e9,s=0,l=0,c=0,u=0,h=0;a>.01&&r<o;){r+=1;var d=Bj(this._getHighestEnergyNode(n),4);for(s=d[0],a=d[1],l=d[2],c=d[3],u=a,h=0;u>1&&h<5;){h+=1,this._moveNode(s,l,c);var f=Bj(this._getEnergy(s),3);u=f[0],l=f[1],c=f[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,n=this.body.nodes,i=0,r=e[0],o=0,a=0,s=0;s<e.length;s++){var l=e[s];if(!0!==n[l].predefinedPosition||!0===n[l].isCluster&&!0===t||!0!==n[l].options.fixed.x||!0!==n[l].options.fixed.y){var c=Bj(this._getEnergy(l),3),u=c[0],h=c[1],d=c[2];i<u&&(i=u,r=l,o=h,a=d)}}return[r,i,o,a]}},{key:"_getEnergy",value:function(t){var e=Bj(this.E_sums[t],2),n=e[0],i=e[1];return[Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),n,i]}},{key:"_moveNode",value:function(t,e,n){for(var i=this.body.nodeIndices,r=this.body.nodes,o=0,a=0,s=0,l=r[t].x,c=r[t].y,u=this.K_matrix[t],h=this.L_matrix[t],d=0;d<i.length;d++){var f=i[d];if(f!==t){var p=r[f].x,g=r[f].y,m=u[f],v=h[f],y=1/Math.pow(Math.pow(l-p,2)+Math.pow(c-g,2),1.5);o+=m*(1-v*Math.pow(c-g,2)*y),a+=m*(v*(l-p)*(c-g)*y),s+=m*(1-v*Math.pow(l-p,2)*y)}}var b=(e/o+n/a)/(a/o-s/a),_=-(a*b+e)/o;r[t].x+=_,r[t].y+=b,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(var i=0;i<e.length;i++){this.L_matrix[e[i]]={};for(var r=0;r<e.length;r++)this.L_matrix[e[i]][e[r]]=n*t[e[i]][e[r]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(var i=0;i<e.length;i++){this.K_matrix[e[i]]={};for(var r=0;r<e.length;r++)this.K_matrix[e[i]][e[r]]=n*Math.pow(t[e[i]][e[r]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var n=0;n<t.length;n++)this.E_matrix[t[n]]=[];for(var i=0;i<t.length;i++){for(var r=t[i],o=e[r].x,a=e[r].y,s=0,l=0,c=i;c<t.length;c++){var u=t[c];if(u!==r){var h=e[u].x,d=e[u].y,f=1/Math.sqrt(Math.pow(o-h,2)+Math.pow(a-d,2));this.E_matrix[r][c]=[this.K_matrix[r][u]*(o-h-this.L_matrix[r][u]*(o-h)*f),this.K_matrix[r][u]*(a-d-this.L_matrix[r][u]*(a-d)*f)],this.E_matrix[u][i]=this.E_matrix[r][c],s+=this.E_matrix[r][c][0],l+=this.E_matrix[r][c][1]}}this.E_sums[r]=[s,l]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[t],r=this.K_matrix[t],o=this.L_matrix[t],a=n[t].x,s=n[t].y,l=0,c=0,u=0;u<e.length;u++){var h=e[u];if(h!==t){var d=i[u],f=d[0],p=d[1],g=n[h].x,m=n[h].y,v=1/Math.sqrt(Math.pow(a-g,2)+Math.pow(s-m,2)),y=r[h]*(a-g-o[h]*(a-g)*v),b=r[h]*(s-m-o[h]*(s-m)*v);i[u]=[y,b],l+=y,c+=b;var _=this.E_sums[h];_[0]+=y-f,_[1]+=b-p}}this.E_sums[t]=[l,c]}}]),t}();function K2(t,e,n){var i,r,o,a,s=this;if(!(this instanceof K2))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:wY,clickToUse:!1},$O(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:xR(i=this.on).call(i,this),off:xR(r=this.off).call(r,this),emit:xR(o=this.emit).call(o,this),once:xR(a=this.once).call(a,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new EY((function(){return s.body.emitter.emit("_requestRedraw")})),this.groups=new JK,this.canvas=new t0(this.body),this.selectionHandler=new v1(this.body,this.canvas),this.interactionHandler=new a0(this.body,this.canvas,this.selectionHandler),this.view=new e0(this.body,this.canvas),this.renderer=new Z$(this.body,this.canvas),this.physics=new U$(this.body),this.layoutEngine=new L2(this.body),this.clustering=new K$(this.body),this.manipulation=new N2(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new LJ(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new C$(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new Y2(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(n),this.setData(e)}AR(K2.prototype),K2.prototype.setOptions=function(t){var e=this;if(null===t&&(t=void 0),void 0!==t){!0===WX.validate(t,G2)&&console.error("%cErrors have been found in the supplied options object.",GX);if(dX(["locale","locales","clickToUse"],this.options,t),void 0!==t.locale&&(t.locale=function(t,e){try{var n=Bj(e.split(/[-_ /]/,2),2),i=n[0],r=n[1],o=null!=i?i.toLowerCase():null,a=null!=r?r.toUpperCase():null;if(o&&a){var s,l=o+"-"+a;if(Object.prototype.hasOwnProperty.call(t,l))return l;console.warn(Yj(s="Unknown variant ".concat(a," of language ")).call(s,o,"."))}if(o){var c=o;if(Object.prototype.hasOwnProperty.call(t,c))return c;console.warn("Unknown language ".concat(o))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(ROt){return console.error(ROt),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new jX(this,this.body.container,W2,this.canvas.pixelRatio,q2)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};pX(n.nodes,this.nodesHandler.options),pX(n.edges,this.edgesHandler.options),pX(n.layout,this.layoutEngine.options),pX(n.interaction,this.selectionHandler.options),pX(n.interaction,this.renderer.options),pX(n.interaction,this.interactionHandler.options),pX(n.manipulation,this.manipulation.options),pX(n.physics,this.physics.options),pX(n.global,this.canvas.options),pX(n.global,this.options),this.configurator.setModuleOptions(n)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new BX(this.canvas.frame),this.activator.on("change",(function(){e.body.emitter.emit("activate")}))):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},K2.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var n in this.body.nodeIndices=[],this.body.edgeIndices=[],t)Object.prototype.hasOwnProperty.call(t,n)&&(this.clustering._isClusteredNode(n)||!1!==t[n].options.hidden||this.body.nodeIndices.push(t[n].id));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i],o=t[r.fromId],a=t[r.toId],s=void 0!==o&&void 0!==a;!this.clustering._isClusteredEdge(i)&&!1===r.options.hidden&&s&&!1===o.options.hidden&&!1===a.options.hidden&&this.body.edgeIndices.push(r.id)}},K2.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")})),this.body.emitter.on("_dataUpdated",(function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")}))},K2.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=_Y(t.dot);this.setData(e)}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var n=xY(t.gephi);this.setData(n)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},K2.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(var e in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,e)&&delete this.body.edges[e];sX(this.body.container)},K2.prototype._updateValueRange=function(t){var e,n=void 0,i=void 0,r=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var o=t[e].getValue();void 0!==o&&(n=void 0===n?o:Math.min(o,n),i=void 0===i?o:Math.max(o,i),r+=o)}if(void 0!==n&&void 0!==i)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(n,i,r)},K2.prototype.isActive=function(){return!this.activator||this.activator.active},K2.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},K2.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},K2.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},K2.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},K2.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},K2.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},K2.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},K2.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},K2.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},K2.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},K2.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},K2.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},K2.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},K2.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},K2.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},K2.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},K2.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},K2.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},K2.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},K2.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},K2.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},K2.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},K2.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},K2.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},K2.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},K2.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},K2.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},K2.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},K2.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},K2.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},K2.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},K2.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},K2.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},K2.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},K2.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},K2.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},K2.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},K2.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)},K2.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)},K2.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},K2.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},K2.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},K2.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},K2.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()},K2.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},K2.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},K2.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},K2.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},K2.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},K2.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},K2.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},K2.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};function Z2(t){return Z2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z2(t)}function Q2(t){var e=function(t,e){if("object"!=Z2(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=Z2(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z2(e)?e:String(e)}function J2(t,e,n){return(e=Q2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $2(t){return t+.5|0}const t3=(t,e,n)=>Math.max(Math.min(t,n),e);function e3(t){return t3($2(2.55*t),0,255)}function n3(t){return t3($2(255*t),0,255)}function i3(t){return t3($2(t/2.55)/100,0,1)}function r3(t){return t3($2(100*t),0,100)}const o3={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},a3=[..."0123456789ABCDEF"],s3=t=>a3[15&t],l3=t=>a3[(240&t)>>4]+a3[15&t],c3=t=>(240&t)>>4===(15&t);function u3(t){var e=(t=>c3(t.r)&&c3(t.g)&&c3(t.b)&&c3(t.a))(t)?s3:l3;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const h3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function d3(t,e,n){const i=e*Math.min(n,1-n),r=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function f3(t,e,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+t/60)%6;return n-n*e*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function p3(t,e,n){const i=d3(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function g3(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),a=(r+o)/2;let s,l,c;return r!==o&&(c=r-o,l=a>.5?c/(2-r-o):c/(r+o),s=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,r),s=60*s+.5),[0|s,l||0,a]}function m3(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(n3)}function v3(t,e,n){return m3(d3,t,e,n)}function y3(t){return(t%360+360)%360}function b3(t){const e=h3.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?e3(+e[5]):n3(+e[5]));const r=y3(+e[2]),o=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return m3(p3,t,e,n)}(r,o,a):"hsv"===e[1]?function(t,e,n){return m3(f3,t,e,n)}(r,o,a):v3(r,o,a),{r:n[0],g:n[1],b:n[2],a:i}}const _3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},x3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let w3;function S3(t){w3||(w3=function(){const t={},e=Object.keys(x3),n=Object.keys(_3);let i,r,o,a,s;for(i=0;i<e.length;i++){for(a=s=e[i],r=0;r<n.length;r++)o=n[r],s=s.replace(o,_3[o]);o=parseInt(x3[a],16),t[s]=[o>>16&255,o>>8&255,255&o]}return t}(),w3.transparent=[0,0,0,0]);const e=w3[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const E3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const M3=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,T3=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function k3(t,e,n){if(t){let i=g3(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=v3(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function C3(t,e){return t?Object.assign(e||{},t):t}function A3(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=n3(t[3]))):(e=C3(t,{r:0,g:0,b:0,a:1})).a=n3(e.a),e}function P3(t){return"r"===t.charAt(0)?function(t){const e=E3.exec(t);let n,i,r,o=255;if(e){if(e[7]!==n){const t=+e[7];o=e[8]?e3(t):t3(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?e3(n):t3(n,0,255)),i=255&(e[4]?e3(i):t3(i,0,255)),r=255&(e[6]?e3(r):t3(r,0,255)),{r:n,g:i,b:r,a:o}}}(t):b3(t)}class O3{constructor(t){if(t instanceof O3)return t;const e=typeof t;let n;"object"===e?n=A3(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*o3[t[1]],g:255&17*o3[t[2]],b:255&17*o3[t[3]],a:5===n?17*o3[t[4]]:255}:7!==n&&9!==n||(e={r:o3[t[1]]<<4|o3[t[2]],g:o3[t[3]]<<4|o3[t[4]],b:o3[t[5]]<<4|o3[t[6]],a:9===n?o3[t[7]]<<4|o3[t[8]]:255})),e}(t)||S3(t)||P3(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=C3(this._rgb);return t&&(t.a=i3(t.a)),t}set rgb(t){this._rgb=A3(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(i3(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")):void 0;var t}hexString(){return this._valid?u3(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=g3(t),n=e[0],i=r3(e[1]),r=r3(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(i3(t.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,s=n.a-i.a,l=((a*s===-1?a:(a+s)/(1+a*s))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=T3(i3(t.r)),r=T3(i3(t.g)),o=T3(i3(t.b));return{r:n3(M3(i+n*(T3(i3(e.r))-i))),g:n3(M3(r+n*(T3(i3(e.g))-r))),b:n3(M3(o+n*(T3(i3(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new O3(this.rgb)}alpha(t){return this._rgb.a=n3(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=$2(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return k3(this._rgb,2,t),this}darken(t){return k3(this._rgb,2,-t),this}saturate(t){return k3(this._rgb,1,t),this}desaturate(t){return k3(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=g3(t);n[0]=y3(n[0]+e),n=v3(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function R3(){}const L3=(()=>{let t=0;return()=>t++})();function D3(t){return null===t||"undefined"===typeof t}function I3(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function N3(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function z3(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function F3(t,e){return z3(t)?t:e}function U3(t,e){return"undefined"===typeof t?e:t}const B3=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function j3(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function H3(t,e,n,i){let r,o,a;if(I3(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<o;r++)e.call(n,t[r],r);else if(N3(t))for(a=Object.keys(t),o=a.length,r=0;r<o;r++)e.call(n,t[a[r]],a[r])}function V3(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function G3(t){if(I3(t))return t.map(G3);if(N3(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=G3(t[n[r]]);return e}return t}function W3(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function q3(t,e,n,i){if(!W3(t))return;const r=e[t],o=n[t];N3(r)&&N3(o)?X3(r,o,i):e[t]=G3(o)}function X3(t,e,n){const i=I3(e)?e:[e],r=i.length;if(!N3(t))return t;const o=(n=n||{}).merger||q3;let a;for(let s=0;s<r;++s){if(a=i[s],!N3(a))continue;const e=Object.keys(a);for(let i=0,r=e.length;i<r;++i)o(e[i],t,a,n)}return t}function Y3(t,e){return X3(t,e,{merger:K3})}function K3(t,e,n){if(!W3(t))return;const i=e[t],r=n[t];N3(i)&&N3(r)?Y3(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=G3(r))}const Z3={"":t=>t,x:t=>t.x,y:t=>t.y};function Q3(t,e){const n=Z3[e]||(Z3[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function J3(t){return t.charAt(0).toUpperCase()+t.slice(1)}const $3=t=>"undefined"!==typeof t,t5=t=>"function"===typeof t,e5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const n5=Math.PI,i5=2*n5,r5=i5+n5,o5=Number.POSITIVE_INFINITY,a5=n5/180,s5=n5/2,l5=n5/4,c5=2*n5/3,u5=Math.log10,h5=Math.sign;function d5(t,e,n){return Math.abs(t-e)<n}function f5(t){const e=Math.round(t);t=d5(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(u5(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function p5(t){return!isNaN(parseFloat(t))&&isFinite(t)}function g5(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function m5(t){return t*(n5/180)}function v5(t){return t*(180/n5)}function y5(t){if(!z3(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function b5(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*n5&&(o+=i5),{angle:o,distance:r}}function _5(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function x5(t,e){return(t-e+r5)%i5-n5}function w5(t){return(t%i5+i5)%i5}function S5(t,e,n,i){const r=w5(t),o=w5(e),a=w5(n),s=w5(o-r),l=w5(a-r),c=w5(r-o),u=w5(r-a);return r===o||r===a||i&&o===a||s>l&&c<u}function E5(t,e,n){return Math.max(e,Math.min(n,t))}function M5(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function T5(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,o=0;for(;r-o>1;)i=o+r>>1,n(i)?o=i:r=i;return{lo:o,hi:r}}const k5=(t,e,n,i)=>T5(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),C5=(t,e,n)=>T5(t,n,(i=>t[i][e]>=n));const A5=["push","pop","shift","splice","unshift"];function P5(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(A5.forEach((e=>{delete t[e]})),delete t._chartjs)}function O5(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const R5="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function L5(t,e){let n=[],i=!1;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];n=o,i||(i=!0,R5.call(window,(()=>{i=!1,t.apply(e,n)})))}}const D5=t=>"start"===t?"left":"end"===t?"right":"center",I5=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function N5(t,e,n){const i=e.length;let r=0,o=i;if(t._sorted){const{iScale:a,_parsed:s}=t,l=a.axis,{min:c,max:u,minDefined:h,maxDefined:d}=a.getUserBounds();h&&(r=E5(Math.min(k5(s,l,c).lo,n?i:k5(e,l,a.getPixelForValue(c)).lo),0,i-1)),o=d?E5(Math.max(k5(s,a.axis,u,!0).hi+1,n?0:k5(e,l,a.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:o}}function z5(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}const F5=t=>0===t||1===t,U5=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*i5/n),B5=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*i5/n)+1,j5={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*s5),easeOutSine:t=>Math.sin(t*s5),easeInOutSine:t=>-.5*(Math.cos(n5*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>F5(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>F5(t)?t:U5(t,.075,.3),easeOutElastic:t=>F5(t)?t:B5(t,.075,.3),easeInOutElastic(t){const e=.1125;return F5(t)?t:t<.5?.5*U5(2*t,e,.45):.5+.5*B5(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-j5.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*j5.easeInBounce(2*t):.5*j5.easeOutBounce(2*t-1)+.5};function H5(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function V5(t){return H5(t)?t:new O3(t)}function G5(t){return H5(t)?t:new O3(t).saturate(.5).darken(.1).hexString()}const W5=["x","y","borderWidth","radius","tension"],q5=["color","borderColor","backgroundColor"];const X5=new Map;function Y5(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=X5.get(n);return i||(i=new Intl.NumberFormat(t,e),X5.set(n,i)),i}(e,n).format(t)}const K5={values:t=>I3(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const a=u5(Math.abs(o)),s=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),Y5(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(u5(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?K5.numeric.call(this,t,e,n):""}};var Z5={formatters:K5};const Q5=Object.create(null),J5=Object.create(null);function $5(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const e=n[i];t=t[e]||(t[e]=Object.create(null))}return t}function t4(t,e,n){return"string"===typeof e?X3($5(t,e),n):X3($5(t,""),e)}class e4{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>G5(e.backgroundColor),this.hoverBorderColor=(t,e)=>G5(e.borderColor),this.hoverColor=(t,e)=>G5(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return t4(this,t,e)}get(t){return $5(this,t)}describe(t,e){return t4(J5,t,e)}override(t,e){return t4(Q5,t,e)}route(t,e,n,i){const r=$5(this,t),o=$5(this,n),a="_"+e;Object.defineProperties(r,{[a]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[i];return N3(t)?Object.assign({},e,t):U3(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach((t=>t(this)))}}var n4=new e4({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:q5},numbers:{type:"number",properties:W5}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Z5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function i4(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function r4(t,e,n,i){let r=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let a=0;const s=n.length;let l,c,u,h,d;for(l=0;l<s;l++)if(h=n[l],void 0===h||null===h||I3(h)){if(I3(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||I3(d)||(a=i4(t,r,o,a,d))}else a=i4(t,r,o,a,h);t.restore();const f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[o[l]];o.splice(0,f)}return a}function o4(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function a4(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function s4(t,e,n,i){l4(t,e,n,i,null)}function l4(t,e,n,i,r){let o,a,s,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*a5;if(f&&"object"===typeof f&&(o=f.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,g,0,0,i5):t.arc(n,i,g,0,i5),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=c5,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=c5,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+l5)*l,h=Math.cos(m+l5)*(r?r/2-c:l),s=Math.sin(m+l5)*l,d=Math.sin(m+l5)*(r?r/2-c:l),t.arc(n-h,i-s,c,m-n5,m-s5),t.arc(n+d,i-a,c,m-s5,m),t.arc(n+h,i+s,c,m,m+s5),t.arc(n-d,i+a,c,m+s5,m+n5),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=l5;case"rectRot":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+d,i-a),t.lineTo(n+h,i+s),t.lineTo(n-d,i+a),t.closePath();break;case"crossRot":m+=l5;case"cross":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+h,i+s),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"star":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+h,i+s),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a),m+=l5,h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+h,i+s),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(m)*g,s=Math.sin(m)*g,t.moveTo(n-a,i-s),t.lineTo(n+a,i+s);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function c4(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function u4(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function h4(t){t.restore()}function d4(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!==!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function f4(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function p4(t,e,n,i,r){if(r.strikethrough||r.underline){const o=t.measureText(i),a=e-o.actualBoundingBoxLeft,s=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,u),t.lineTo(s,u),t.stroke()}}function g4(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function m4(t,e,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=I3(e)?e:[e],s=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),D3(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<a.length;++l)c=a[l],o.backdrop&&g4(t,o.backdrop),s&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),D3(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,i,o.maxWidth)),t.fillText(c,n,i,o.maxWidth),p4(t,n,i,c,o),i+=Number(r.lineHeight);t.restore()}function v4(t,e){const{x:n,y:i,w:r,h:o,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*n5,n5,!0),t.lineTo(n,i+o-a.bottomLeft),t.arc(n+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,n5,s5,!0),t.lineTo(n+r-a.bottomRight,i+o),t.arc(n+r-a.bottomRight,i+o-a.bottomRight,a.bottomRight,s5,0,!0),t.lineTo(n+r,i+a.topRight),t.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-s5,!0),t.lineTo(n+a.topLeft,i)}const y4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,b4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _4(t,e){const n=(""+t).match(y4);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const x4=t=>+t||0;function w4(t,e){const n={},i=N3(e),r=i?Object.keys(e):e,o=N3(t)?i?n=>U3(t[n],t[e[n]]):e=>t[e]:()=>t;for(const a of r)n[a]=x4(o(a));return n}function S4(t){return w4(t,{top:"y",right:"x",bottom:"y",left:"x"})}function E4(t){return w4(t,["topLeft","topRight","bottomLeft","bottomRight"])}function M4(t){const e=S4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function T4(t,e){t=t||{},e=e||n4.font;let n=U3(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let i=U3(t.style,e.style);i&&!(""+i).match(b4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:U3(t.family,e.family),lineHeight:_4(U3(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:U3(t.weight,e.weight),string:""};return r.string=function(t){return!t||D3(t.size)||D3(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function k4(t,e,n,i){let r,o,a,s=!0;for(r=0,o=t.length;r<o;++r)if(a=t[r],void 0!==a&&(void 0!==e&&"function"===typeof a&&(a=a(e),s=!1),void 0!==n&&I3(a)&&(a=a[n%a.length],s=!1),void 0!==a))return i&&!s&&(i.cacheable=!1),a}function C4(t,e){return Object.assign(Object.create(t),e)}function A4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];const r=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof n&&(n=B4("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>A4([i,...t],e,r,n)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>D4(n,i,(()=>function(t,e,n,i){let r;for(const o of e)if(r=B4(R4(o,t),n),"undefined"!==typeof r)return L4(t,r)?F4(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>j4(t).includes(e),ownKeys:t=>j4(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function P4(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:O4(t,i),setContext:e=>P4(t,e,n,i),override:r=>P4(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>D4(t,e,(()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=t;let s=i[e];t5(s)&&a.isScriptable(e)&&(s=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:a,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);let l=e(o,a||i);s.delete(t),L4(t,l)&&(l=F4(r._scopes,r,t,l));return l}(e,s,t,n));I3(s)&&s.length&&(s=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:a,_descriptors:s}=n;if("undefined"!==typeof o.index&&i(t))return e[o.index%e.length];if(N3(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const l of n){const n=F4(i,r,t,l);e.push(P4(n,o,a&&a[t],s))}}return e}(e,s,t,a.isIndexable));L4(e,s)&&(s=P4(s,r,o&&o[e],a));return s}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function O4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:t5(n)?n:()=>n,isIndexable:t5(i)?i:()=>i}}const R4=(t,e)=>t?t+J3(e):e,L4=(t,e)=>N3(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function D4(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function I4(t,e,n){return t5(t)?t(e,n):t}const N4=(t,e)=>!0===t?e:"string"===typeof t?Q3(e,t):void 0;function z4(t,e,n,i,r){for(const o of e){const e=N4(n,o);if(e){t.add(e);const o=I4(e._fallback,n,r);if("undefined"!==typeof o&&o!==n&&o!==i)return o}else if(!1===e&&"undefined"!==typeof i&&n!==i)return null}return!1}function F4(t,e,n,i){const r=e._rootScopes,o=I4(e._fallback,n,i),a=[...t,...r],s=new Set;s.add(i);let l=U4(s,a,n,o||n,i);return null!==l&&(("undefined"===typeof o||o===n||(l=U4(s,a,o,l,i),null!==l))&&A4(Array.from(s),[""],r,o,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(I3(r)&&N3(n))return n;return r||{}}(e,n,i))))}function U4(t,e,n,i,r){for(;n;)n=z4(t,e,n,i,r);return n}function B4(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function j4(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function H4(t,e,n,i){const{iScale:r}=t,{key:o="r"}=this._parsing,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=e[c],a[s]={r:r.parse(Q3(u,o),c)};return a}const V4=Number.EPSILON||1e-14,G4=(t,e)=>e<t.length&&!t[e].skip&&t[e],W4=t=>"x"===t?"y":"x";function q4(t,e,n,i){const r=t.skip?e:t,o=e,a=n.skip?e:n,s=_5(o,r),l=_5(a,o);let c=s/(s+l),u=l/(s+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:o.x-h*(a.x-r.x),y:o.y-h*(a.y-r.y)},next:{x:o.x+d*(a.x-r.x),y:o.y+d*(a.y-r.y)}}}function X4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=W4(e),i=t.length,r=Array(i).fill(0),o=Array(i);let a,s,l,c=G4(t,0);for(a=0;a<i;++a)if(s=l,l=c,c=G4(t,a+1),l){if(c){const t=c[e]-l[e];r[a]=0!==t?(c[n]-l[n])/t:0}o[a]=s?c?h5(r[a-1])!==h5(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(t,e,n){const i=t.length;let r,o,a,s,l,c=G4(t,0);for(let u=0;u<i-1;++u)l=c,c=G4(t,u+1),l&&c&&(d5(e[u],0,V4)?n[u]=n[u+1]=0:(r=n[u]/e[u],o=n[u+1]/e[u],s=Math.pow(r,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[u]=r*a*e[u],n[u+1]=o*a*e[u])))}(t,r,o),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=W4(n),r=t.length;let o,a,s,l=G4(t,0);for(let c=0;c<r;++c){if(a=s,s=l,l=G4(t,c+1),!s)continue;const r=s[n],u=s[i];a&&(o=(r-a[n])/3,s["cp1".concat(n)]=r-o,s["cp1".concat(i)]=u-o*e[c]),l&&(o=(l[n]-r)/3,s["cp2".concat(n)]=r+o,s["cp2".concat(i)]=u+o*e[c])}}(t,o,e)}function Y4(t,e,n){return Math.max(Math.min(t,n),e)}function K4(t,e,n,i,r){let o,a,s,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)X4(t,r);else{let n=i?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)s=t[o],l=q4(n,s,t[Math.min(o+1,a-(i?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}e.capBezierPoints&&function(t,e){let n,i,r,o,a,s=c4(t[0],e);for(n=0,i=t.length;n<i;++n)a=o,o=s,s=n<i-1&&c4(t[n+1],e),o&&(r=t[n],a&&(r.cp1x=Y4(r.cp1x,e.left,e.right),r.cp1y=Y4(r.cp1y,e.top,e.bottom)),s&&(r.cp2x=Y4(r.cp2x,e.left,e.right),r.cp2y=Y4(r.cp2y,e.top,e.bottom)))}(t,n)}function Z4(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Q4(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function J4(t,e,n){let i;return"string"===typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const $4=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const t6=["top","right","bottom","left"];function e6(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=t6[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const n6=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function i6(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=$4(n),o="border-box"===r.boxSizing,a=e6(r,"padding"),s=e6(r,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:o}=i;let a,s,l=!1;if(n6(r,o,t.target))a=r,s=o;else{const t=e.getBoundingClientRect();a=i.clientX-t.left,s=i.clientY-t.top,l=!0}return{x:a,y:s,box:l}}(t,n),h=a.left+(u&&s.left),d=a.top+(u&&s.top);let{width:f,height:p}=e;return o&&(f-=a.width+s.width,p-=a.height+s.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const r6=t=>Math.round(10*t)/10;function o6(t,e,n,i){const r=$4(t),o=e6(r,"margin"),a=J4(r.maxWidth,t,"clientWidth")||o5,s=J4(r.maxHeight,t,"clientHeight")||o5,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const o=Q4(t);if(o){const t=o.getBoundingClientRect(),a=$4(o),s=e6(a,"border","width"),l=e6(a,"padding");e=t.width-l.width-s.width,n=t.height-l.height-s.height,i=J4(a.maxWidth,o,"clientWidth"),r=J4(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||o5,maxHeight:r||o5}}(t,e,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const t=e6(r,"border","width"),e=e6(r,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-o.width),u=Math.max(0,i?c/i:u-o.height),c=r6(Math.min(c,a,l.maxWidth)),u=r6(Math.min(u,s,l.maxHeight)),c&&!u&&(u=r6(c/2));return(void 0!==e||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=r6(Math.floor(u*i))),{width:c,height:u}}function a6(t,e,n){const i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(t.height,"px"),a.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==i||a.height!==r||a.width!==o)&&(t.currentDevicePixelRatio=i,a.height=r,a.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0)}const s6=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Z4()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function l6(t,e){const n=function(t,e){return $4(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function c6(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function u6(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function h6(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=c6(t,r,n),s=c6(r,o,n),l=c6(o,e,n),c=c6(a,s,n),u=c6(s,l,n);return c6(c,u,n)}function d6(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function f6(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function p6(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function g6(t){return"angle"===t?{between:S5,compare:x5,normalize:w5}:{between:M5,compare:(t,e)=>t-e,normalize:t=>t}}function m6(t){let{start:e,end:n,count:i,loop:r,style:o}=t;return{start:e%i,end:n%i,loop:r&&(n-e+1)%i===0,style:o}}function v6(t,e,n){if(!n)return[t];const{property:i,start:r,end:o}=n,a=e.length,{compare:s,between:l,normalize:c}=g6(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:o}=n,{between:a,normalize:s}=g6(i),l=e.length;let c,u,{start:h,end:d,loop:f}=t;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(s(e[h%l][i]),r,o);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,v,y=!1,b=null;const _=()=>y||l(r,v,g)&&0!==s(r,v),x=()=>!y||0===s(o,g)||l(o,v,g);for(let w=u,S=u;w<=h;++w)m=e[w%a],m.skip||(g=c(m[i]),g!==v&&(y=l(g,r,o),null===b&&_()&&(b=0===s(g,r)?w:S),null!==b&&x()&&(p.push(m6({start:b,end:w,loop:d,count:a,style:f})),b=null),S=w,v=g));return null!==b&&p.push(m6({start:b,end:h,loop:d,count:a,style:f})),p}function y6(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const o=v6(i[r],t.points,e);o.length&&n.push(...o)}return n}function b6(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),o=_6(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,l=n.length,c=[];let u=o,h=e[0].start,d=h;function f(t,e,i,r){const o=s?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),u=r,h=e%l)}}for(const p of e){h=s?h:p.start;let t,e=n[h%l];for(d=h+1;d<=p.end;d++){const o=n[d%l];t=_6(i.setContext(C4(r,{type:"segment",p0:e,p1:o,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),x6(t,u)&&f(h,d-1,p.loop,u),e=o,u=t}h<d-1&&f(h,d-1,p.loop,u)}return c}(t,e,n,i):e}function _6(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function x6(t,e){if(!e)return!1;const n=[],i=function(t,e){return H5(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}class w6{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=R5.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,a=r.length-1,s=!1;for(;a>=0;--a)o=r[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),s=!0):(r[a]=r[r.length-1],r.pop());s&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var S6=new w6;const E6="transparent",M6={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=V5(t||E6),r=i.valid&&V5(e||E6);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class T6{constructor(t,e,n,i){const r=e[n];i=k4([t.to,i,r,t.from]);const o=k4([t.from,r,i]);this._active=!0,this._fn=t.fn||M6[t.type||typeof o],this._easing=j5[t.easing]||j5.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=k4([t.to,e,i,t.from]),this._from=k4([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let s;if(this._active=r!==a&&(o||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=r:(s=e/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(r,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][e]()}}class k6{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!N3(t))return;const e=Object.keys(n4.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const r=t[i];if(!N3(r))return;const o={};for(const t of e)o[t]=r[t];(I3(r.properties)&&r.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,o)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const e=t[i[r]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const l=o[s];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new T6(h,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(S6.add(this._chart,n),!0):void 0}}function C6(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:r,end:i?r:o}}function A6(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function P6(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=t.keys,o="single"===i.mode;let a,s,l,c;if(null!==e){for(a=0,s=r.length;a<s;++a){if(l=+r[a],l===n){if(i.all)continue;break}c=t.values[l],z3(c)&&(o||0===e||h5(e)===h5(c))&&(e+=c)}return e}}function O6(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function R6(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function L6(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function D6(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=i,l=o.axis,c=a.axis,u=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(o,a,i),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[l]:n,[c]:o}=t;d=(t._stacks||(t._stacks={}))[c]=R6(r,u,n),d[s]=o,d._top=L6(d,a,!0,i.type),d._bottom=L6(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[s]=o}}function I6(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function N6(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const z6=t=>"reset"===t||"none"===t,F6=(t,e)=>e?t:Object.assign({},t);class U6{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=O6(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&N6(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=U3(n.xAxisID,I6(t,"x")),o=e.yAxisID=U3(n.yAxisID,I6(t,"y")),a=e.rAxisID=U3(n.rAxisID,I6(t,"r")),s=e.indexAxis,l=e.iAxisID=i(s,r,o,a),c=e.vAxisID=i(s,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&P5(this._data,this),t._stacked&&N6(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(N3(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i],n[i]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){P5(n,this);const t=this._cachedMeta;N6(t),t._parsed=[]}e&&Object.isExtensible(e)&&function(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),A5.forEach((e=>{const n="_onData"+J3(e),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];const a=i.apply(this,r);return t._chartjs.listeners.forEach((t=>{"function"===typeof t[n]&&t[n](...r)})),a}})})))}(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=O6(e.vScale,e),e.stack!==n.stack&&(i=!0,N6(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&D6(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:o}=n,a=r.axis;let s,l,c,u=0===t&&e===i.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=I3(i[t])?this.parseArrayData(n,i,t,e):N3(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[a]||h&&l[a]<h[a];for(s=0;s<e;++s)n._parsed[s+t]=l=c[s],u&&(r()&&(u=!1),h=l);n._sorted=u}o&&D6(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,a=r.axis,s=o.axis,l=r.getLabels(),c=r===o,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[a]:c||r.parse(l[f],f),[s]:o.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=e[c],a[s]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=e[h],l[c]={x:r.parse(Q3(d,a),h),y:o.parse(Q3(d,s),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis];return P6({keys:A6(i,!0),values:e._stacks[t.axis]._visualValues},o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=null===r?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,o=P6(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,a=this._getOtherScale(t),s=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:A6(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const e=d[a.axis];return!z3(d[t.axis])||c>e||u<e}for(h=0;h<o&&(f()||(this.updateRangeFromParsed(l,t,d,s),!r));++h);if(r)for(h=o-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,t,d,s);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],z3(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return N3(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(U3(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=C6(t,n),r=C6(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,a,s),c=a;c<a+s;++c){const e=i[c];e.hidden||(e.active&&l?o.push(e):e.draw(t,r))}for(c=0;c<o.length;++c)o[c].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return C4(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return C4(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===e,r=this._cachedDataOpts,o=t+"-"+e,a=r[o],s=this.enableOptionSharing&&$3(n);if(a)return F6(a,s);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?["".concat(t,"Hover"),"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(n4.elements[t]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,e)),u);return f.$shared&&(f.$shared=s,r[o]=Object.freeze(F6(f,s))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o="animation-".concat(e),a=r[o];if(a)return a;let s;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),o=i.getOptionScopes(this.getDataset(),r);s=i.createResolver(o,this.getContext(t,n,e))}const l=new k6(i,s&&s.animations);return s&&s._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||z6(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:o}}updateElement(t,e,n,i){z6(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!z6(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,s,l]of this._syncList)this[a](s,l);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,o=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(s(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&N6(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function B6(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=O5(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,o,a,s=e._length;const l=()=>{32767!==o&&-32768!==o&&($3(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),l();return s}function j6(t,e,n,i){return I3(t)?function(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),a=Math.min(r,o),s=Math.max(r,o);let l=a,c=s;Math.abs(a)>Math.abs(s)&&(l=s,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:o,min:a,max:s}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function H6(t,e,n,i){const r=t.iScale,o=t.vScale,a=r.getLabels(),s=r===o,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=s||r.parse(a[c],c),l.push(j6(d,h,o,c));return l}function V6(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function G6(t,e,n,i){let r=e.borderSkipped;const o={};if(!r)return void(t.borderSkipped=o);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:s,reverse:l,top:c,bottom:u}=function(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(o[W6(u,a,s,l)]=!0,r=c)),o[W6(r,a,s,l)]=!0,t.borderSkipped=o}function W6(t,e,n,i){return i?(t=function(t,e,n){return t===e?n:t===n?e:t}(t,e,n),t=q6(t,n,e)):t=q6(t,e,n),t}function q6(t,e,n){return"start"===t?e:"end"===t?n:t}function X6(t,e,n){let{inflateAmount:i}=e;t.inflateAmount="auto"===i?1===n?.33:0:i}J2(U6,"defaults",{}),J2(U6,"datasetElementType",null),J2(U6,"dataElementType",null);class Y6 extends U6{parsePrimitiveData(t,e,n,i){return H6(t,e,n,i)}parseArrayData(t,e,n,i){return H6(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===r.axis?a:s,c="x"===o.axis?a:s,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(Q3(p,l),h),u.push(j6(Q3(p,c),f,o,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=V6(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:o,_cachedMeta:{vScale:a}}=this,s=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=r||D3(e[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||V6(e._custom)||o===p._top||o===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;G6(g,m,p,o),X6(g,m,c.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),r=n.options.stacked,o=[],a=t=>{const n=t.controller.getParsed(e),i=n&&n[t.vScale.axis];if(D3(i)||isNaN(i))return!0};for(const s of i)if((void 0===e||!a(s))&&((!1===r||-1===o.indexOf(s.stack)||void 0===r&&void 0===s.stack)&&o.push(s.stack),s.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||B6(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,s=this.getParsed(t),l=s._custom,c=V6(l);let u,h,d=s[e.axis],f=0,p=n?this.applyStack(e,s,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&h5(d)!==h5(l.barEnd)&&(f=0),f+=d);const g=D3(r)||c?f:r;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<o){h=function(t,e,n){return 0!==t?h5(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,a)*o,d===a&&(m-=h/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),l=Math.min(t,r),f=Math.max(t,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(s._stacks[e.axis]._visualValues[i]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=h5(h)*e.getLineWidthForValue(a)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,o=U3(i.maxBarThickness,1/0);let a,s;if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,l="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,o=r[t];let a=t>0?r[t-1]:null,s=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);const c=o-(o-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n):function(t,e,n,i){const r=n.barThickness;let o,a;return D3(r)?(o=e.min*n.categoryPercentage,a=n.barPercentage):(o=r*i,a=1),{chunk:o/i,ratio:a,start:e.pixels[t]-o/2}}(t,e,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=l.start+l.chunk*c+l.chunk/2,s=Math.min(o,l.chunk*l.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),s=Math.min(o,e.min*e.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}}J2(Y6,"id","bar"),J2(Y6,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),J2(Y6,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class K6 extends U6{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let o=0;o<r.length;o++){const t=e[n+o];r[o]._custom=U3(t[2],this.resolveDataElementOptions(o+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let o=0;o<r.length;o++){const t=e[n+o];r[o]._custom=U3(t&&t.r&&+t.r,this.resolveDataElementOptions(o+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),s=r.getLabelForValue(o.y),l=o._custom;return{label:n[t]||"",value:"("+a+", "+s+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(e,i),c=o.axis,u=a.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),p=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=s||this.resolveDataElementOptions(h,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=U3(n&&n._custom,r),i}}J2(K6,"id","bubble"),J2(K6,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),J2(K6,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Z6 extends U6{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,o,a=t=>+n[t];if(N3(n[t])){const{key:t="value"}=this._parsing;a=e=>+Q3(n[e],t)}for(r=t,o=t+e;r<o;++r)i._parsed[r]=a(r)}}_getRotation(){return m5(this.options.rotation-90)}_getCircumference(){return m5(this.options.circumference)}_getRotationExtents(){let t=i5,e=-i5;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min(((t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e)(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:c,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:f,offsetY:p}=function(t,e,n){let i=1,r=1,o=0,a=0;if(e<i5){const s=t,l=s+e,c=Math.cos(s),u=Math.sin(s),h=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>S5(t,s,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>S5(t,s,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,h),m=f(s5,u,d),v=p(n5,c,h),y=p(n5+s5,u,d);i=(g-v)/2,r=(m-y)/2,o=-(g+v)/2,a=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:a}}(u,c,s),g=(n.width-o)/h,m=(n.height-o)/d,v=Math.max(Math.min(g,m)/2,0),y=B3(this.options.radius,v),b=(y-Math.max(y*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*y,this.offsetY=p*y,i.total=this.calculateTotal(),this.outerRadius=y-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*l,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/i5)}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=o.chartArea,s=o.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&s.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,r);for(g=e;g<e+n;++g){const e=this._circumference(g,r),n=t[g],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};p&&(o.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,o,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?i5*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Y5(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,a,s;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)s=a.resolveDataElementOptions(i),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(U3(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}J2(Z6,"id","doughnut"),J2(Z6,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),J2(Z6,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),J2(Z6,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class Q6 extends U6{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:s}=N5(e,i,o);this._drawStart=a,this._drawCount=s,z5(e)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(i,a,s,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,i),h=o.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=p5(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,v=e+n,y=t.length;let b=e>0&&this.getParsed(e-1);for(let _=0;_<y;++_){const n=t[_],f=m?n:{};if(_<e||_>=v){f.skip=!0;continue}const y=this.getParsed(_),x=D3(y[d]),w=f[h]=o.getPixelForValue(y[h],_),S=f[d]=r||x?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,y,s):y[d],_);f.skip=isNaN(w)||isNaN(S)||x,f.stop=_>0&&Math.abs(y[h]-b[h])>g,p&&(f.parsed=y,f.raw=l.data[_]),u&&(f.options=c||this.resolveDataElementOptions(_,n.active?"active":i)),m||this.updateElement(n,_,f,i),b=y}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}J2(Q6,"id","line"),J2(Q6,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),J2(Q6,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class J6 extends U6{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Y5(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return H4.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=o.options.animation,s=this._cachedMeta.rScale,l=s.xCenter,c=s.yCenter,u=s.getIndexAngle(0)-.5*n5;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,i,f),g=o.getDataVisibility(h)?s.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?m5(this.resolveDataElementOptions(t,e).angle||n):0}}J2(J6,"id","polarArea"),J2(J6,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),J2(J6,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class $6 extends Z6{}J2($6,"id","pie"),J2($6,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class t8 extends U6{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return H4.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,o="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),s=r.getPointPositionForValue(a,this.getParsed(a).r),l=o?r.xCenter:s.x,c=o?r.yCenter:s.y,u={x:l,y:c,angle:s.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,u,i)}}}J2(t8,"id","radar"),J2(t8,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),J2(t8,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class e8 extends U6{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),s=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+s+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:o}=N5(e,n,i);if(this._drawStart=r,this._drawCount=o,z5(e)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:o}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=o.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=p5(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),c=v?e:{},p=D3(n[f]),_=c[d]=o.getPixelForValue(n[d],b),x=c[f]=r||p?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,n,s):n[f],b);c.skip=isNaN(_)||isNaN(x)||p,c.stop=b>0&&Math.abs(n[d]-y[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,e.active?"active":i)),v||this.updateElement(e,b,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,o)/2}}J2(e8,"id","scatter"),J2(e8,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),J2(e8,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var n8=Object.freeze({__proto__:null,BarController:Y6,BubbleController:K6,DoughnutController:Z6,LineController:Q6,PieController:$6,PolarAreaController:J6,RadarController:t8,ScatterController:e8});function i8(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class r8{static override(t){Object.assign(r8.prototype,t)}constructor(t){J2(this,"options",void 0),this.options=t||{}}init(){}formats(){return i8()}parse(){return i8()}format(){return i8()}add(){return i8()}diff(){return i8()}startOf(){return i8()}endOf(){return i8()}}var o8=r8;function a8(t,e,n,i){const{controller:r,data:o,_sorted:a}=t,s=r._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&o.length){const t=s._reversePixels?C5:k5;if(!i)return t(o,e,n);if(r._sharedOptions){const i=o[0],r="function"===typeof i.getRange&&i.getRange(e);if(r){const i=t(o,e,n-r),a=t(o,e,n+r);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function s8(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),a=n[e];for(let s=0,l=o.length;s<l;++s){const{index:t,data:n}=o[s],{lo:l,hi:c}=a8(o[s],e,a,r);for(let e=l;e<=c;++e){const r=n[e];r.skip||i(r,t,e)}}}function l8(t,e,n,i,r){const o=[];if(!r&&!t.isPointInArea(e))return o;return s8(t,n,e,(function(n,a,s){(r||c4(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&o.push({element:n,datasetIndex:a,index:s})}),!0),o}function c8(t,e,n,i,r,o){let a=[];const s=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return s8(t,n,e,(function(n,c,u){const h=n.inRange(e.x,e.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!o||t.isPointInArea(d))&&!h)return;const f=s(e,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})})),a}function u8(t,e,n,i,r,o){return o||t.isPointInArea(e)?"r"!==n||i?c8(t,e,n,i,r,o):function(t,e,n,i){let r=[];return s8(t,n,e,(function(t,n,o){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],i),{angle:l}=b5(t,{x:e.x,y:e.y});S5(l,a,s)&&r.push({element:t,datasetIndex:n,index:o})})),r}(t,e,n,r):[]}function h8(t,e,n,i,r){const o=[],a="x"===n?"inXRange":"inYRange";let s=!1;return s8(t,n,e,((t,i,l)=>{t[a](e[n],r)&&(o.push({element:t,datasetIndex:i,index:l}),s=s||t.inRange(e.x,e.y,r))})),i&&!s?[]:o}var d8={evaluateInteractionItems:s8,modes:{index(t,e,n,i){const r=i6(e,t),o=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?l8(t,r,o,i,a):u8(t,r,o,!1,i,a),l=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=s[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,n,i){const r=i6(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;let s=n.intersect?l8(t,r,o,i,a):u8(t,r,o,!1,i,a);if(s.length>0){const e=s[0].datasetIndex,n=t.getDatasetMeta(e).data;s=[];for(let t=0;t<n.length;++t)s.push({element:n[t],datasetIndex:e,index:t})}return s},point:(t,e,n,i)=>l8(t,i6(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=i6(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;return u8(t,r,o,n.intersect,i,a)},x:(t,e,n,i)=>h8(t,i6(e,t),"x",n.intersect,i),y:(t,e,n,i)=>h8(t,i6(e,t),"y",n.intersect,i)}};const f8=["left","top","right","bottom"];function p8(t,e){return t.filter((t=>t.pos===e))}function g8(t,e){return t.filter((t=>-1===f8.indexOf(t.pos)&&t.box.axis===e))}function m8(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function v8(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!f8.includes(i))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];const{fullSize:a}=s.box,l=n[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*i:a&&e.availableWidth,s.height=r):(s.width=i,s.height=c?c*r:a&&e.availableHeight)}return n}function y8(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function b8(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function _8(t,e,n,i){const{pos:r,box:o}=n,a=t.maxPadding;if(!N3(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[r]+=n.size}o.getPadding&&b8(a,o.getPadding());const s=Math.max(0,e.outerWidth-y8(a,t,"left","right")),l=Math.max(0,e.outerHeight-y8(a,t,"top","bottom")),c=s!==t.w,u=l!==t.h;return t.w=s,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function x8(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}return i(t?["left","right"]:["top","bottom"])}function w8(t,e,n,i){const r=[];let o,a,s,l,c,u;for(o=0,a=t.length,c=0;o<a;++o){s=t[o],l=s.box,l.update(s.width||e.w,s.height||e.h,x8(s.horizontal,e));const{same:a,other:h}=_8(e,n,s,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(s)}return c&&w8(r,e,n,i)||u}function S8(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function E8(t,e,n,i){const r=n.padding;let{x:o,y:a}=e;for(const s of t){const t=s.box,l=i[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const i=e.w*c,o=l.size||t.height;$3(l.start)&&(a=l.start),t.fullSize?S8(t,r.left,a,n.outerWidth-r.right-r.left,o):S8(t,e.left+l.placed,a,i,o),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*c,a=l.size||t.width;$3(l.start)&&(o=l.start),t.fullSize?S8(t,o,r.top,a,n.outerHeight-r.bottom-r.top):S8(t,o,e.top+l.placed,a,i),l.start=o,l.placed+=i,o=t.right}}e.x=o,e.y=a}var M8={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=M4(t.options.layout.padding),o=Math.max(e-r.width,0),a=Math.max(n-r.height,0),s=function(t){const e=function(t){const e=[];let n,i,r,o,a,s;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:o,options:{stack:a,stackWeight:s=1}}=r),e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&o+a,stackWeight:s});return e}(t),n=m8(e.filter((t=>t.box.fullSize)),!0),i=m8(p8(e,"left"),!0),r=m8(p8(e,"right")),o=m8(p8(e,"top"),!0),a=m8(p8(e,"bottom")),s=g8(e,"x"),l=g8(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(a).concat(s),chartArea:p8(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(a).concat(s)}}(t.boxes),l=s.vertical,c=s.horizontal;H3(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const u=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},r);b8(d,M4(i));const f=Object.assign({maxPadding:d,w:o,h:a,x:r.left,y:r.top},r),p=v8(l.concat(c),h);w8(s.fullSize,f,h,p),w8(l,f,h,p),w8(c,f,h,p)&&w8(l,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),E8(s.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,E8(s.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},H3(s.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class T8{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class k8 extends T8{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const C8="$chartjs",A8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},P8=t=>null===t||""===t;const O8=!!s6&&{passive:!0};function R8(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,O8)}function L8(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function D8(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||L8(n.addedNodes,i),e=e&&!L8(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function I8(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||L8(n.removedNodes,i),e=e&&!L8(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const N8=new Map;let z8=0;function F8(){const t=window.devicePixelRatio;t!==z8&&(z8=t,N8.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function U8(t,e,n){const i=t.canvas,r=i&&Q4(i);if(!r)return;const o=L5(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return a.observe(r),function(t,e){N8.size||window.addEventListener("resize",F8),N8.set(t,e)}(t,o),a}function B8(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){N8.delete(t),N8.size||window.removeEventListener("resize",F8)}(t)}function j8(t,e,n){const i=t.canvas,r=L5((e=>{null!==t.ctx&&n(function(t,e){const n=A8[t.type]||t.type,{x:i,y:r}=i6(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t);return function(t,e,n){t&&t.addEventListener(e,n,O8)}(i,e,r),r}class H8 extends T8{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[C8]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",P8(r)){const e=l6(t,"width");void 0!==e&&(t.width=e)}if(P8(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=l6(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[C8])return!1;const n=e[C8].initial;["height","width"].forEach((t=>{const i=n[t];D3(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e[C8],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:D8,detach:I8,resize:U8}[e]||j8;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:B8,detach:B8,resize:B8}[e]||R8)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return o6(t,e,n,i)}isAttached(t){const e=Q4(t);return!(!e||!e.isConnected)}}class V8{constructor(){J2(this,"x",void 0),J2(this,"y",void 0),J2(this,"active",!1),J2(this,"options",void 0),J2(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return p5(this.x)&&p5(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}function G8(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],a=o.length,s=o[0],l=o[a-1],c=[];if(a>r)return function(t,e,n,i){let r,o=0,a=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===a&&(e.push(t[r]),o++,a=n[o*i])}(e,c,o,a/r),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const o=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let a=0,s=o.length-1;a<s;a++){const t=o[a];if(t>r)return t}return Math.max(r,1)}(o,e,r);if(a>0){let t,n;const i=a>1?Math.round((l-s)/(a-1)):null;for(W8(e,c,u,D3(i)?0:s-i,s),t=0,n=a-1;t<n;t++)W8(e,c,u,o[t],o[t+1]);return W8(e,c,u,l,D3(i)?e.length:l+i),c}return W8(e,c,u),c}function W8(t,e,n,i,r){const o=U3(i,0),a=Math.min(U3(r,t.length),t.length);let s,l,c,u=0;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),c=o;c<0;)u++,c=Math.round(o+u*n);for(l=Math.max(o,0);l<a;l++)l===c&&(e.push(t[l]),u++,c=Math.round(o+u*n))}J2(V8,"defaults",{}),J2(V8,"defaultRoutes",void 0);const q8=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,X8=(t,e)=>Math.min(e||t,t);function Y8(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function K8(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,a=t._endPixel,s=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-o,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<o-s||c>a+s)))return c}function Z8(t){return t.drawTicks?t.tickLength:0}function Q8(t,e){if(!t.display)return 0;const n=T4(t.font,e),i=M4(t.padding);return(I3(t.text)?t.text.length:1)*n.lineHeight+i.height}function J8(t,e,n){let i=D5(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class $8 extends V8{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=F3(t,Number.POSITIVE_INFINITY),e=F3(e,Number.NEGATIVE_INFINITY),n=F3(n,Number.POSITIVE_INFINITY),i=F3(i,Number.NEGATIVE_INFINITY),{min:F3(t,n),max:F3(e,i),minDefined:z3(t),maxDefined:z3(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let s=0,l=a.length;s<l;++s)e=a[s].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),o||(i=Math.max(i,e.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:F3(n,F3(i,n)),max:F3(i,F3(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){j3(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,o=B3(e,(r-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(o)),max:a(r,o)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?Y8(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=G8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){j3(this.options.afterUpdate,[this])}beforeSetDimensions(){j3(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){j3(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),j3(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){j3(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=j3(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){j3(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){j3(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=X8(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o,a,s,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=E5(this.chart.width-u,0,this.maxWidth);o=t.offset?this.maxWidth/n:d/(n-1),u+6>o&&(o=d/(n-(t.offset?.5:1)),a=this.maxHeight-Z8(t.grid)-e.padding-Q8(t.title,this.chart.options.font),s=Math.sqrt(u*u+h*h),l=v5(Math.min(Math.asin(E5((c.highest.height+6)/o,-1,1)),Math.asin(E5(a/s,-1,1))-Math.asin(E5(h/s,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){j3(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){j3(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=Q8(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Z8(r)+o):(t.height=this.maxHeight,t.width=Z8(r)+o),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:o}=this._getLabelSizes(),s=2*n.padding,l=m5(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const e=n.mirror?0:u*r.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=n.mirror?0:c*r.width+u*o.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;s?l?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+o)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){j3(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)D3(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Y8(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],s=Math.floor(e/X8(e,n));let l,c,u,h,d,f,p,g,m,v,y,b=0,_=0;for(l=0;l<e;l+=s){if(h=t[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,D3(h)||I3(h)){if(I3(h))for(c=0,u=h.length;c<u;++c)y=h[c],D3(y)||I3(y)||(m=i4(i,p.data,p.gc,m,y),v+=g)}else m=i4(i,p.data,p.gc,m,h),v=g;o.push(m),a.push(v),b=Math.max(m,b),_=Math.max(v,_)}!function(t,e){H3(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(r,e);const x=o.indexOf(b),w=a.indexOf(_),S=t=>({width:o[t]||0,height:a[t]||0});return{first:S(0),last:S(e-1),widest:S(x),highest:S(w),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function(t){return E5(t,-32768,32767)}(this._alignToPixels?o4(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return C4(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=C4(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=m5(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,s=r?r.highest.height+o:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:o,border:a}=i,s=r.offset,l=this.isHorizontal(),c=this.ticks.length+(s?1:0),u=Z8(r),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return o4(n,t,f)};let m,v,y,b,_,x,w,S,E,M,T,k;if("top"===o)m=g(this.bottom),x=this.bottom-u,S=m-p,M=g(t.top)+p,k=t.bottom;else if("bottom"===o)m=g(this.top),M=t.top,k=g(t.bottom)-p,x=m+p,S=this.top+u;else if("left"===o)m=g(this.right),_=this.right-u,w=m-p,E=g(t.left)+p,T=t.right;else if("right"===o)m=g(this.left),E=t.left,T=g(t.right)-p,_=m+p,w=this.left+u;else if("x"===e){if("center"===o)m=g((t.top+t.bottom)/2+.5);else if(N3(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}M=t.top,k=t.bottom,x=m+p,S=x+u}else if("y"===e){if("center"===o)m=g((t.left+t.right)/2);else if(N3(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}_=m-p,w=_-u,E=t.left,T=t.right}const C=U3(i.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/C));for(v=0;v<c;v+=A){const t=this.getContext(v),e=r.setContext(t),i=a.setContext(t),o=e.lineWidth,c=e.color,u=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=K8(this,v,s),void 0!==y&&(b=o4(n,y,o),l?_=w=E=T=b:x=S=M=k=b,h.push({tx1:_,ty1:x,tx2:w,ty2:S,x1:E,y1:M,x2:T,y2:k,width:o,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:l,padding:c,mirror:u}=r,h=Z8(n.grid),d=h+c,f=u?-c:d,p=-m5(this.labelRotation),g=[];let m,v,y,b,_,x,w,S,E,M,T,k,C="middle";if("top"===i)x=this.bottom-f,w=this._getXAxisLabelAlignment();else if("bottom"===i)x=this.top+f,w=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(h);w=t.textAlign,_=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(h);w=t.textAlign,_=t.x}else if("x"===e){if("center"===i)x=(t.top+t.bottom)/2+d;else if(N3(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)+d}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)_=(t.left+t.right)/2-d;else if(N3(i)){const t=Object.keys(i)[0],e=i[t];_=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===s?C="top":"end"===s&&(C="bottom"));const A=this._getLabelSizes();for(m=0,v=a.length;m<v;++m){y=a[m],b=y.label;const t=r.setContext(this.getContext(m));S=this.getPixelForTick(m)+r.labelOffset,E=this._resolveTickFontOptions(m),M=E.lineHeight,T=I3(b)?b.length:1;const e=T/2,n=t.color,s=t.textStrokeColor,c=t.textStrokeWidth;let h,d=w;if(o?(_=S,"inner"===w&&(d=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),k="top"===i?"near"===l||0!==p?-T*M+M/2:"center"===l?-A.highest.height/2-e*M+M:-A.highest.height+M/2:"near"===l||0!==p?M/2:"center"===l?A.highest.height/2-e*M:A.highest.height-T*M,u&&(k*=-1),0===p||t.showLabelBackdrop||(_+=M/2*Math.sin(p))):(x=S,k=(1-T)*M/2),t.showLabelBackdrop){const e=M4(t.backdropPadding),n=A.heights[m],i=A.widths[m];let r=k-e.top,o=0-e.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":o-=i/2;break;case"right":o-=i;break;case"inner":m===v-1?o-=i:m>0&&(o-=i/2)}h={left:o,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:E,textOffset:k,options:{rotation:p,color:n,strokeColor:s,strokeWidth:c,textAlign:d,textBaseline:C,translation:[_,x],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-m5(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=t+r,a=this._getLabelSizes().widest.width;let s,l;return"left"===e?i?(l=this.right+r,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l+=a)):(l=this.right-o,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l-=a)):(l=this.left+o,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const t=i[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=o4(t,this.left,o)-o/2,c=o4(t,this.right,a)+a/2,u=h=s):(u=o4(t,this.top,o)-o/2,h=o4(t,this.bottom,a)+a/2,l=c=s),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&u4(e,n);const i=this.getLabelItems(t);for(const r of i){const t=r.options,n=r.font;m4(e,r.label,0,r.textOffset,n,t)}n&&h4(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=T4(n.font),o=M4(n.padding),a=n.align;let s=r.lineHeight/2;"bottom"===e||"center"===e||N3(e)?(s+=o.bottom,I3(n.text)&&(s+=r.lineHeight*(n.text.length-1))):s+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(t,e,n,i){const{top:r,left:o,bottom:a,right:s,chart:l}=t,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=a-r,m=s-o;if(t.isHorizontal()){if(d=I5(i,o,s),N3(n)){const t=Object.keys(n)[0],i=n[t];f=u[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:q8(t,n,e);h=s-o}else{if(N3(n)){const t=Object.keys(n)[0],i=n[t];d=u[t].getPixelForValue(i)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:q8(t,n,e);f=I5(i,a,r),p="left"===n?-s5:s5}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,s,e,a);m4(t,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:J8(a,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=U3(t.grid&&t.grid.z,-1),i=U3(t.border&&t.border.z,0);return this._isVisible()&&this.draw===$8.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const o=e[r];o[n]!==this.id||t&&o.type!==t||i.push(o)}return i}_resolveTickFontOptions(t){return T4(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class t7{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=X3(Object.create(null),[n?n4.get(n):{},n4.get(e),t.defaults]);n4.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),a=e[n].split("."),s=a.pop(),l=a.join(".");n4.route(o,r,l,s)}))}(e,t.defaultRoutes);t.descriptors&&n4.describe(e,t.descriptors)}(t,o,n),this.override&&n4.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in n4[i]&&(delete n4[i][n],this.override&&delete Q5[n])}}class e7{constructor(){this.controllers=new t7(U6,"datasets",!0),this.elements=new t7(V8,"elements"),this.plugins=new t7(Object,"plugins"),this.scales=new t7($8,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):H3(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=J3(t);j3(n["before"+i],[],n),e[t](n),j3(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var n7=new e7;class i7{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===j3(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){D3(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=U3(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(n7.plugins.items);for(let o=0;o<i.length;o++)n.push(n7.getPlugin(i[o]));const r=t.plugins||[];for(let o=0;o<r.length;o++){const t=r[o];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,e,n,i){let{plugins:r,localIds:o}=e;const a=[],s=t.getContext();for(const l of r){const e=l.id,r=r7(n[e],i);null!==r&&a.push({plugin:l,options:o7(t.config,{plugin:l,local:o[e]},r,s)})}return a}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function r7(t,e){return e||!1!==t?!0===t?{}:t:null}function o7(t,e,n,i){let{plugin:r,local:o}=e;const a=t.pluginScopeKeys(r),s=t.getOptionScopes(n,a);return o&&r.defaults&&s.push(r.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function a7(t,e){const n=n4.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function s7(t){if("x"===t||"y"===t||"r"===t)return t}function l7(t){if(s7(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(const o of n){const e=o.axis||("top"===(r=o.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||t.length>1&&s7(t[0].toLowerCase());if(e)return e}var r;throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function c7(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function u7(t,e){const n=Q5[t.type]||{scales:{}},i=e.scales||{},r=a7(t.type,e),o=Object.create(null);return Object.keys(i).forEach((e=>{const a=i[e];if(!N3(a))return console.error("Invalid scale configuration for scale: ".concat(e));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const s=l7(e,a,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return c7(t,"x",n[0])||c7(t,"y",n[0])}return{}}(e,t),n4.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(s,r),c=n.scales||{};o[e]=Y3(Object.create(null),[{axis:s},a,c[s],c[l]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,a=n.indexAxis||a7(r,e),s=(Q5[r]||{}).scales||{};Object.keys(s).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),r=n[e+"AxisID"]||e;o[r]=o[r]||Object.create(null),Y3(o[r],[{axis:e},i[r],s[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];Y3(e,[n4.scales[e.type],n4.scale])})),o}function h7(t){const e=t.options||(t.options={});e.plugins=U3(e.plugins,{}),e.scales=u7(t,e)}function d7(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const f7=new Map,p7=new Set;function g7(t,e){let n=f7.get(t);return n||(n=e(),f7.set(t,n),p7.add(n)),n}const m7=(t,e,n)=>{const i=Q3(e,n);void 0!==i&&t.add(i)};class v7{constructor(t){this._config=function(t){return(t=t||{}).data=d7(t.data),h7(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=d7(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),h7(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return g7(t,(()=>[["datasets.".concat(t),""]]))}datasetAnimationScopeKeys(t,e){return g7("".concat(t,".transition.").concat(e),(()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]]))}datasetElementScopeKeys(t,e){return g7("".concat(t,"-").concat(e),(()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]]))}pluginScopeKeys(t){const e=t.id,n=this.type;return g7("".concat(n,"-plugin-").concat(e),(()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>m7(s,t,e)))),e.forEach((t=>m7(s,i,t))),e.forEach((t=>m7(s,Q5[r]||{},t))),e.forEach((t=>m7(s,n4,t))),e.forEach((t=>m7(s,J5,t)))}));const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),p7.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Q5[e]||{},n4.datasets[e]||{},{type:e},n4,J5]}resolveNamedOptions(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:o,subPrefixes:a}=y7(this._resolverCache,t,i);let s=o;if(function(t,e){const{isScriptable:n,isIndexable:i}=O4(t);for(const r of e){const e=n(r),o=i(r),a=(o||e)&&t[r];if(e&&(t5(a)||b7(a))||o&&I3(a))return!0}return!1}(o,e)){r.$shared=!1;s=P4(o,n=t5(n)?n():n,this.createResolver(t,n,a))}for(const l of e)r[l]=s[l];return r}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=y7(this._resolverCache,t,n);return N3(e)?P4(r,e,void 0,i):r}}function y7(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);if(!o){o={resolver:A4(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,o)}return o}const b7=t=>N3(t)&&Object.getOwnPropertyNames(t).some((e=>t5(t[e])));const _7=["top","bottom","left","right","chartArea"];function x7(t,e){return"top"===t||"bottom"===t||-1===_7.indexOf(t)&&"x"===e}function w7(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function S7(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),j3(n&&n.onComplete,[t],e)}function E7(t){const e=t.chart,n=e.options.animation;j3(n&&n.onProgress,[t],e)}function M7(t){return Z4()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const T7={},k7=t=>{const e=M7(t);return Object.values(T7).filter((t=>t.canvas===e)).pop()};function C7(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function A7(t,e,n){return t.options.clip?t[n]:e[n]}class P7{static register(){n7.add(...arguments),O7()}static unregister(){n7.remove(...arguments),O7()}constructor(t,e){const n=this.config=new v7(e),i=M7(t),r=k7(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!Z4()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?k8:H8}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,o.aspectRatio),s=a&&a.canvas,l=s&&s.height,c=s&&s.width;this.id=L3(),this.ctx=a,this.canvas=s,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new i7,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],T7[this.id]=this,a&&s?(S6.listen(this,"complete",S7),S6.listen(this,"progress",E7),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return D3(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return n7}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():a6(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return a4(this.canvas,this.ctx),this}stop(){return S6.stop(this),this}resize(t,e){S6.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,a6(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),j3(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){H3(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=l7(t,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),H3(r,(e=>{const r=e.options,o=r.id,a=l7(o,r),s=U3(r.type,e.dtype);void 0!==r.position&&x7(r.position,a)===x7(e.dposition)||(r.position=e.dposition),i[o]=!0;let l=null;if(o in n&&n[o].type===s)l=n[o];else{l=new(n7.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)})),H3(i,((t,e)=>{t||delete n[e]})),H3(n,(t=>{M8.configure(this,t,t.options),M8.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(w7("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||a7(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=n7.getController(o),{datasetElementType:i,dataElementType:a}=n4.datasets[o];Object.assign(e,{dataElementType:n7.getElement(a),datasetElementType:i&&n7.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){H3(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!i&&-1===r.indexOf(t);t.buildOrUpdateElements(e),o=Math.max(+t.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||H3(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(w7("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){H3(this.scales,(t=>{M8.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);e5(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){C7(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let r=1;r<e;r++)if(!e5(i,n(r)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;M8.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],H3(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,t5(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(S6.has(this)?this.attached&&!S6.running(this)&&S6.start(this):(this.draw(),S7({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:A7(n,e,"left"),right:A7(n,e,"right"),top:A7(i,e,"top"),bottom:A7(i,e,"bottom")}:e}(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&u4(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&h4(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return c4(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=d8.modes[e];return"function"===typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=C4(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);$3(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),S6.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),a4(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete T7[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};H3(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){H3(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},H3(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,a,s;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((t=>{let{datasetIndex:e,index:n}=t;const i=this.getDatasetMeta(e);if(!i)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:i.data[n],index:n}}));!V3(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),a=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,n,o),s=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,s);n&&(this._lastEvent=null,j3(r.onHover,[t,a,this],this),s&&j3(r.onClick,[t,a,this],this));const c=!V3(a,i);return(c||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function O7(){return H3(P7.instances,(t=>t._plugins.invalidate()))}function R7(t,e,n,i){const r=function(t){return w4(t,["outerStart","outerEnd","innerStart","innerEnd"])}(t.options.borderRadius),o=(n-e)/2,a=Math.min(o,i*e/2),s=t=>{const e=(n-Math.min(o,t))*i/2;return E5(t,0,Math.min(o,e))};return{outerStart:s(r.outerStart),outerEnd:s(r.outerEnd),innerStart:E5(r.innerStart,0,a),innerEnd:E5(r.innerEnd,0,a)}}function L7(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function D7(t,e,n,i,r,o){const{x:a,y:s,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const t=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*h-n/n5)/h)/2,m=l+g+f,v=r-g-f,{outerStart:y,outerEnd:b,innerStart:_,innerEnd:x}=R7(e,d,h,v-m),w=h-y,S=h-b,E=m+y/w,M=v-b/S,T=d+_,k=d+x,C=m+_/T,A=v-x/k;if(t.beginPath(),o){const e=(E+M)/2;if(t.arc(a,s,h,E,e),t.arc(a,s,h,e,M),b>0){const e=L7(S,M,a,s);t.arc(e.x,e.y,b,M,v+s5)}const n=L7(k,v,a,s);if(t.lineTo(n.x,n.y),x>0){const e=L7(k,A,a,s);t.arc(e.x,e.y,x,v+s5,A+Math.PI)}const i=(v-x/d+(m+_/d))/2;if(t.arc(a,s,d,v-x/d,i,!0),t.arc(a,s,d,i,m+_/d,!0),_>0){const e=L7(T,C,a,s);t.arc(e.x,e.y,_,C+Math.PI,m-s5)}const r=L7(w,m,a,s);if(t.lineTo(r.x,r.y),y>0){const e=L7(w,E,a,s);t.arc(e.x,e.y,y,m-s5,E)}}else{t.moveTo(a,s);const e=Math.cos(E)*h+a,n=Math.sin(E)*h+s;t.lineTo(e,n);const i=Math.cos(M)*h+a,r=Math.sin(M)*h+s;t.lineTo(i,r)}t.closePath()}function I7(t,e,n,i,r){const{fullCircles:o,startAngle:a,circumference:s,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(o){D7(t,e,n,i,p,r);for(let e=0;e<o;++e)t.stroke();isNaN(s)||(p=a+(s%i5||i5))}f&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:o,y:a,outerRadius:s,innerRadius:l}=e;let c=r/s;t.beginPath(),t.arc(o,a,s,i-c,n+c),l>r?(c=r/l,t.arc(o,a,l,n+c,i-c,!0)):t.arc(o,a,r,n+s5,i-s5),t.closePath(),t.clip()}(t,e,p),o||(D7(t,e,n,i,p,r),t.stroke())}J2(P7,"defaults",n4),J2(P7,"instances",T7),J2(P7,"overrides",Q5),J2(P7,"registry",n7),J2(P7,"version","4.4.2"),J2(P7,"getChart",k7);class N7 extends V8{constructor(t){super(),J2(this,"circumference",void 0),J2(this,"endAngle",void 0),J2(this,"fullCircles",void 0),J2(this,"innerRadius",void 0),J2(this,"outerRadius",void 0),J2(this,"pixelMargin",void 0),J2(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=b5(i,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=U3(u,s-a)>=i5||S5(r,a,s),f=M5(o,l+h,c+h);return d&&f}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:l}=this.options,c=(i+r)/2,u=(o+a+l+s)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>i5?Math.floor(n/i5):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const s=i*(1-Math.sin(Math.min(n5,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:o,startAngle:a,circumference:s}=e;let l=e.endAngle;if(o){D7(t,e,n,i,l,r);for(let e=0;e<o;++e)t.fill();isNaN(s)||(l=a+(s%i5||i5))}D7(t,e,n,i,l,r),t.fill()}(t,this,s,r,o),I7(t,this,s,r,o),t.restore()}}function z7(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=U3(n.borderCapStyle,e.borderCapStyle),t.setLineDash(U3(n.borderDash,e.borderDash)),t.lineDashOffset=U3(n.borderDashOffset,e.borderDashOffset),t.lineJoin=U3(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=U3(n.borderWidth,e.borderWidth),t.strokeStyle=U3(n.borderColor,e.borderColor)}function F7(t,e,n){t.lineTo(n.x,n.y)}function U7(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.length,{start:r=0,end:o=i-1}=n,{start:a,end:s}=e,l=Math.max(r,a),c=Math.min(o,s),u=r<a&&o<a||r>s&&o>s;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function B7(t,e,n,i){const{points:r,options:o}=e,{count:a,start:s,loop:l,ilen:c}=U7(r,n,i),u=function(t){return t.stepped?d4:t.tension||"monotone"===t.cubicInterpolationMode?f4:F7}(o);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(s+(g?c-h:h))%a],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,o.stepped),f=d);return l&&(d=r[(s+(g?c:0))%a],u(t,f,d,g,o.stepped)),!!l}function j7(t,e,n,i){const r=e.points,{count:o,start:a,ilen:s}=U7(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,v=0;const y=t=>(a+(c?s-t:t))%o,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(h=r[y(0)],t.moveTo(h.x,h.y)),u=0;u<=s;++u){if(h=r[y(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),d=i,v=0,f=p=n),g=n}b()}function H7(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?j7:B7}J2(N7,"id","arc"),J2(N7,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),J2(N7,"defaultRoutes",{backgroundColor:"backgroundColor"}),J2(N7,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const V7="function"===typeof Path2D;function G7(t,e,n,i){V7&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),z7(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:o}=e,a=H7(e);for(const s of r)z7(t,o,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class W7 extends V8{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;K4(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const o=!!t._loop,{start:a,end:s}=function(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}(n,r,o,i);return b6(t,!0===i?[{start:a,end:s,loop:o}]:function(t,e,n,i){const r=t.length,o=[];let a,s=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%r];n.skip||n.stop?l.skip||(i=!1,o.push({start:e%r,end:(a-1)%r,loop:i}),e=s=n.stop?a:null):(s=a,l.skip&&(e=a)),l=n}return null!==s&&o.push({start:e%r,end:s%r,loop:i}),o}(n,a,s<a?s+r:s,!!t._fullLoop&&0===a&&s===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=y6(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],s=function(t){return t.stepped?u6:t.tension||"monotone"===t.cubicInterpolationMode?h6:c6}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const f=s(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return H7(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=H7(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),G7(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function q7(t,e,n,i){const r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}J2(W7,"id","line"),J2(W7,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),J2(W7,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),J2(W7,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class X7 extends V8{constructor(t){super(),J2(this,"parsed",void 0),J2(this,"skip",void 0),J2(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return q7(this,t,"x",e)}inYRange(t,e){return q7(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!c4(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,s4(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Y7(t,e){const{x:n,y:i,base:r,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let s,l,c,u,h;return t.horizontal?(h=a/2,s=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=o/2,s=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:s,top:c,right:l,bottom:u}}function K7(t,e,n,i){return t?0:E5(e,n,i)}function Z7(t){const e=Y7(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=S4(i);return{t:K7(r.top,o.top,0,n),r:K7(r.right,o.right,0,e),b:K7(r.bottom,o.bottom,0,n),l:K7(r.left,o.left,0,e)}}(t,n/2,i/2),o=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=E4(r),a=Math.min(e,n),s=t.borderSkipped,l=i||N3(r);return{topLeft:K7(!l||s.top||s.left,o.topLeft,0,a),topRight:K7(!l||s.top||s.right,o.topRight,0,a),bottomLeft:K7(!l||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:K7(!l||s.bottom||s.right,o.bottomRight,0,a)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Q7(t,e,n,i){const r=null===e,o=null===n,a=t&&!(r&&o)&&Y7(t,i);return a&&(r||M5(e,a.left,a.right))&&(o||M5(n,a.top,a.bottom))}function J7(t,e){t.rect(e.x,e.y,e.w,e.h)}function $7(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+a,radius:t.radius}}J2(X7,"id","point"),J2(X7,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),J2(X7,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class t9 extends V8{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=Z7(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?v4:J7;var s;t.save(),o.w===r.w&&o.h===r.h||(t.beginPath(),a(t,$7(o,e,r)),t.clip(),a(t,$7(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,$7(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Q7(this,t,e,n)}inXRange(t,e){return Q7(this,t,null,e)}inYRange(t,e){return Q7(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}J2(t9,"id","bar"),J2(t9,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),J2(t9,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var e9=Object.freeze({__proto__:null,ArcElement:N7,BarElement:t9,LineElement:W7,PointElement:X7});const n9=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],i9=n9.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function r9(t){return n9[t%n9.length]}function o9(t){return i9[t%i9.length]}function a9(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof Z6?e=function(t,e){return t.backgroundColor=t.data.map((()=>r9(e++))),e}(n,e):r instanceof J6?e=function(t,e){return t.backgroundColor=t.data.map((()=>o9(e++))),e}(n,e):r&&(e=function(t,e){return t.borderColor=r9(e),t.backgroundColor=o9(e),++e}(n,e))}}function s9(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var l9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:o}=r;if(!n.forceOverride&&(s9(i)||(a=r)&&(a.borderColor||a.backgroundColor)||o&&s9(o)))return;var a;const s=a9(t);i.forEach(s)}};function c9(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function u9(t){t.data.datasets.forEach((t=>{c9(t)}))}var h9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void u9(t);const i=t.width;t.data.datasets.forEach(((e,r)=>{const{_data:o,indexAxis:a}=e,s=t.getDatasetMeta(r),l=o||e.data;if("y"===k4([a,t.options.indexAxis]))return;if(!s.controller.supportsDecimation)return;const c=t.scales[s.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:u,count:h}=function(t,e){const n=e.length;let i,r=0;const{iScale:o}=t,{min:a,max:s,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(r=E5(k5(e,o.axis,a).lo,0,n-1)),i=c?E5(k5(e,o.axis,s).hi+1,r,n)-r:n-r,{start:r,count:i}}(s,l);if(h<=(n.threshold||4*i))return void c9(e);let d;switch(D3(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,i,r){const o=r.samples||i;if(o>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(o-2);let l=0;const c=e+n-1;let u,h,d,f,p,g=e;for(a[l++]=t[g],u=0;u<o-2;u++){let i,r=0,o=0;const c=Math.floor((u+1)*s)+1+e,m=Math.min(Math.floor((u+2)*s)+1,n)+e,v=m-c;for(i=c;i<m;i++)r+=t[i].x,o+=t[i].y;r/=v,o/=v;const y=Math.floor(u*s)+1+e,b=Math.min(Math.floor((u+1)*s)+1,n)+e,{x:_,y:x}=t[g];for(d=f=-1,i=y;i<b;i++)f=.5*Math.abs((_-r)*(t[i].y-x)-(_-t[i].x)*(o-x)),f>d&&(d=f,h=t[i],p=i);a[l++]=h,g=p}return a[l++]=t[c],a}(l,u,h,i,n);break;case"min-max":d=function(t,e,n,i){let r,o,a,s,l,c,u,h,d,f,p=0,g=0;const m=[],v=e+n-1,y=t[e].x,b=t[v].x-y;for(r=e;r<e+n;++r){o=t[r],a=(o.x-y)/b*i,s=o.y;const e=0|a;if(e===l)s<d?(d=s,c=r):s>f&&(f=s,u=r),p=(g*p+o.x)/++g;else{const n=r-1;if(!D3(c)&&!D3(u)){const e=Math.min(c,u),i=Math.max(c,u);e!==h&&e!==n&&m.push({...t[e],x:p}),i!==h&&i!==n&&m.push({...t[i],x:p})}r>0&&n!==h&&m.push(t[n]),m.push(o),l=e,g=0,d=f=s,c=u=h=r}}return m}(l,u,h,i);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}e._decimated=d}))},destroy(t){u9(t)}};function d9(t,e,n,i){if(i)return;let r=e[t],o=n[t];return"angle"===t&&(r=w5(r),o=w5(o)),{property:t,start:r,end:o}}function f9(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function p9(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function g9(t,e){let n=[],i=!1;return I3(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach((t=>{let{start:e,end:a}=t;a=f9(e,a,r);const s=r[e],l=r[a];null!==i?(o.push({x:s.x,y:i}),o.push({x:l.x,y:i})):null!==n&&(o.push({x:n,y:s.y}),o.push({x:n,y:l.y}))})),o}(t,e),n.length?new W7({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function m9(t){return t&&!1!==t.fill}function v9(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!z3(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function y9(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=U3(n&&n.target,n);void 0===i&&(i=!!e.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(t);if(N3(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return z3(r)&&Math.floor(r)===r?function(t,e,n,i){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=i)return!1;return n}(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function b9(t,e,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:a,last:s,point:l}=_9(o,e,"x");if(!(!l||a&&s))if(a)i.unshift(l);else if(t.push(l),!s)break}t.push(...i)}function _9(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],o=t.segments,a=t.points;let s=!1,l=!1;for(let c=0;c<o.length;c++){const t=o[c],e=a[t.start][n],i=a[t.end][n];if(M5(r,e,i)){s=r===e,l=r===i;break}}return{first:s,last:l,point:i}}class x9{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:i5},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function w9(t){const{chart:e,fill:n,line:i}=t;if(z3(n))return function(t,e){const n=t.getDatasetMeta(e),i=n&&t.isDatasetVisible(e);return i?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],o=i.segments,a=i.points,s=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const t=i[r];if(t.index===e)break;t.hidden||n.unshift(t.dataset)}return n}(e,n);s.push(g9({x:null,y:e.bottom},i));for(let l=0;l<o.length;l++){const t=o[l];for(let e=t.start;e<=t.end;e++)b9(r,a[e],s)}return new W7({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,o=i.reverse?e.max:e.min,a=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:N3(t)?t.value:e.getBaseValue(),i}(n,e,o),s=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,o);return new x9({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<r;++l)s.push(e.getPointPositionForValue(l,a));return s}(t);return function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:N3(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(z3(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return r instanceof x9?r:g9(r,i)}function S9(t,e,n){const i=w9(e),{line:r,scale:o,axis:a}=e,s=r.options,l=s.fill,c=s.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(u4(t,n),function(t,e){const{line:n,target:i,above:r,below:o,area:a,scale:s}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&o!==r&&(E9(t,i,a.top),M9(t,{line:n,target:i,color:r,scale:s,property:l}),t.restore(),t.save(),E9(t,i,a.bottom));M9(t,{line:n,target:i,color:o,scale:s,property:l}),t.restore()}(t,{line:r,target:i,above:u,below:h,area:n,scale:o,axis:a}),h4(t))}function E9(t,e,n){const{segments:i,points:r}=e;let o=!0,a=!1;t.beginPath();for(const s of i){const{start:i,end:l}=s,c=r[i],u=r[f9(i,l,r)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function M9(t,e){const{line:n,target:i,property:r,color:o,scale:a}=e,s=function(t,e,n){const i=t.segments,r=t.points,o=e.points,a=[];for(const s of i){let{start:t,end:i}=s;i=f9(t,i,r);const l=d9(n,r[t],r[i],s.loop);if(!e.segments){a.push({source:s,target:l,start:r[t],end:r[i]});continue}const c=y6(e,l);for(const e of c){const t=d9(n,o[e.start],o[e.end],e.loop),i=v6(s,r,t);for(const r of i)a.push({source:r,target:e,start:{[n]:p9(l,t,"start",Math.max)},end:{[n]:p9(l,t,"end",Math.min)}})}}return a}(n,i,r);for(const{source:l,target:c,start:u,end:h}of s){const{style:{backgroundColor:e=o}={}}=l,s=!0!==i;t.save(),t.fillStyle=e,T9(t,a,s&&d9(r,u,h)),t.beginPath();const d=!!n.pathSegment(t,l);let f;if(s){d?t.closePath():k9(t,i,h,r);const e=!!i.pathSegment(t,c,{move:d,reverse:!0});f=d&&e,f||k9(t,i,u,r)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function T9(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:o,start:a,end:s}=n||{};"x"===o&&(t.beginPath(),t.rect(a,i,s-a,r-i),t.clip())}function k9(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var C9={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let o,a,s,l;for(a=0;a<i;++a)o=t.getDatasetMeta(a),s=o.dataset,l=null,s&&s.options&&s instanceof W7&&(l={visible:t.isDatasetVisible(a),index:a,fill:y9(s,a,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],l&&!1!==l.fill&&(l.fill=v9(r,a,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let a=r.length-1;a>=0;--a){const e=r[a].$filler;e&&(e.line.updateControlPoints(o,e.axis),i&&e.fill&&S9(t.ctx,e,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const e=i[r].$filler;m9(e)&&S9(t.ctx,e,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;m9(i)&&"beforeDatasetDraw"===n.drawTime&&S9(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const A9=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class P9 extends V8{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=j3(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=T4(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=A9(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,r,a,s)+10):(c=this.maxHeight,l=this._fitCols(o,i,a,s)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*a>o)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),s[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+a})),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,r){const o=function(t,e,n,i){let r=t.text;r&&"string"!==typeof r&&(r=r.reduce(((t,e)=>t.length>e.length?t:e)));return e+n.size/2+i.measureText(r).width}(i,t,e,n),a=function(t,e,n){let i=t;"string"!==typeof e.text&&(i=O9(e,n));return i}(r,i,e.lineHeight);return{itemWidth:o,itemHeight:a}}(n,e,r,t,i);o>0&&d+m+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),s[o]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+a})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=d6(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=I5(n,this.left+i,this.right-this.lineWidths[r]);for(const s of e)r!==s.row&&(r=s.row,a=I5(n,this.left+i,this.right-this.lineWidths[r])),s.top+=this.top+t+i,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+i}else{let r=0,a=I5(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const s of e)s.col!==r&&(r=s.col,a=I5(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),s.top=a,s.left+=this.left+i,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;u4(t,this),this._draw(),h4(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=n4.color,s=d6(t.rtl,this.left,this.width),l=T4(o.font),{padding:c}=o,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=s.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=A9(o,u),m=this.isHorizontal(),v=this._computeTitleHeight();d=m?{x:I5(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:I5(r,this.top+v+c,this.bottom-e[0].height),line:0},f6(this.ctx,t.textDirection);const y=g+c;this.legendItems.forEach(((b,_)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const x=i.measureText(b.text).width,w=s.textAlign(b.textAlign||(b.textAlign=o.textAlign)),S=f+h+x;let E=d.x,M=d.y;s.setWidth(this.width),m?_>0&&E+S+c>this.right&&(M=d.y+=y,d.line++,E=d.x=I5(r,this.left+c,this.right-n[d.line])):_>0&&M+y>this.bottom&&(E=d.x=E+e[d.line].width+c,d.line++,M=d.y=I5(r,this.top+v+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=U3(n.lineWidth,1);if(i.fillStyle=U3(n.fillStyle,a),i.lineCap=U3(n.lineCap,"butt"),i.lineDashOffset=U3(n.lineDashOffset,0),i.lineJoin=U3(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=U3(n.strokeStyle,a),i.setLineDash(U3(n.lineDash,[])),o.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=s.xPlus(t,f/2);l4(i,a,l,e+h,o.pointStyleWidth&&f)}else{const o=e+Math.max((u-p)/2,0),a=s.leftForLtr(t,f),l=E4(n.borderRadius);i.beginPath(),Object.values(l).some((t=>0!==t))?v4(i,{x:a,y:o,w:f,h:p,radius:l}):i.rect(a,o,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(s.x(E),M,b),E=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(w,E+f+h,m?E+S:this.right,t.rtl),function(t,e,n){m4(i,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(E),M,b),m)d.x+=S+c;else if("string"!==typeof b.text){const t=l.lineHeight;d.y+=O9(b,t)+c}else d.y+=y})),p6(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=T4(e.font),i=M4(e.padding);if(!e.display)return;const r=d6(t.rtl,this.left,this.width),o=this.ctx,a=e.position,s=n.size/2,l=i.top+s;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=I5(t.align,u,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);c=l+I5(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=I5(a,u,u+h);o.textAlign=r.textAlign(D5(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,m4(o,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=T4(t.font),n=M4(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(M5(t,this.left,this.right)&&M5(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],M5(t,i.left,i.left+i.width)&&M5(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const i=this._hoveredItem,r=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(i,n);i&&!r&&j3(e.onLeave,[t,i,this],this),this._hoveredItem=n,n&&!r&&j3(e.onHover,[t,n,this],this)}else n&&j3(e.onClick,[t,n,this],this)}}function O9(t,e){return e*(t.text?t.text.length:0)}var R9={id:"legend",_element:P9,start(t,e,n){const i=t.legend=new P9({ctx:t.ctx,options:n,chart:t});M8.configure(t,i,n),M8.addBox(t,i)},stop(t){M8.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;M8.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o,useBorderRadius:a,borderRadius:s}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(n?0:void 0),c=M4(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(s||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class L9 extends V8{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=I3(n.text)?n.text.length:1;this._padding=M4(n.padding);const r=i*T4(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,a=o.align;let s,l,c,u=0;return this.isHorizontal()?(l=I5(a,n,r),c=e+t,s=r-n):("left"===o.position?(l=n+t,c=I5(a,i,e),u=-.5*n5):(l=r-t,c=I5(a,e,i),u=.5*n5),s=i-e),{titleX:l,titleY:c,maxWidth:s,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=T4(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:a,rotation:s}=this._drawArgs(i);m4(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:s,textAlign:D5(e.align),textBaseline:"middle",translation:[r,o]})}}var D9={id:"title",_element:L9,start(t,e,n){!function(t,e){const n=new L9({ctx:t.ctx,options:e,chart:t});M8.configure(t,n,e),M8.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;M8.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;M8.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const I9=new WeakMap;var N9={id:"subtitle",start(t,e,n){const i=new L9({ctx:t.ctx,options:n,chart:t});M8.configure(t,i,n),M8.addBox(t,i),I9.set(t,i)},stop(t){M8.removeBox(t,I9.get(t)),I9.delete(t)},beforeUpdate(t,e,n){const i=I9.get(t);M8.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const z9={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),r+=t.y,++o}}const a=[...i].reduce(((t,e)=>t+e))/i.size;return{x:a,y:r/o}},nearest(t,e){if(!t.length)return!1;let n,i,r,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=_5(e,i.getCenterPoint());t<s&&(s=t,r=i)}}if(r){const t=r.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function F9(t,e){return e&&(I3(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function U9(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function B9(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:a,value:s}=o.getLabelAndValue(r);return{chart:t,label:a,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:s,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function j9(t,e){const n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:a,boxHeight:s}=e,l=T4(e.bodyFont),c=T4(e.titleFont),u=T4(e.footerFont),h=o.length,d=r.length,f=i.length,p=M4(e.padding);let g=p.height,m=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){g+=f*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,H3(t.title,b),n.font=l.string,H3(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?a+2+e.boxPadding:0,H3(i,(t=>{H3(t.before,b),H3(t.lines,b),H3(t.after,b)})),y=0,n.font=u.string,H3(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function H9(t,e,n,i){const{x:r,width:o}=n,{width:a,chartArea:{left:s,right:l}}=t;let c="center";return"center"===i?c=r<=(s+l)/2?"left":"right":r<=o/2?c="left":r>=a-o/2&&(c="right"),function(t,e,n,i){const{x:r,width:o}=i,a=n.caretSize+n.caretPadding;return"left"===t&&r+o+a>e.width||"right"===t&&r-o-a<0||void 0}(c,t,e,n)&&(c="center"),c}function V9(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||H9(t,e,n,i),yAlign:i}}function G9(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:a}=t,{xAlign:s,yAlign:l}=n,c=r+o,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=E4(a);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,s);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===s?p+=c:"right"===s&&(p-=c):"left"===s?p-=Math.max(u,d)+r:"right"===s&&(p+=Math.max(h,f)+r),{x:E5(p,0,i.width-e.width),y:E5(g,0,i.height-e.height)}}function W9(t,e,n){const i=M4(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function q9(t){return F9([],U9(t))}function X9(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Y9={beforeTitle:R3,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:R3,beforeBody:R3,beforeLabel:R3,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return D3(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:R3,afterBody:R3,beforeFooter:R3,footer:R3,afterFooter:R3};function K9(t,e,n,i){const r=t[e].call(n,i);return"undefined"===typeof r?Y9[e].call(n,i):r}class Z9 extends V8{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new k6(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,C4(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=K9(n,"beforeTitle",this,t),r=K9(n,"title",this,t),o=K9(n,"afterTitle",this,t);let a=[];return a=F9(a,U9(i)),a=F9(a,U9(r)),a=F9(a,U9(o)),a}getBeforeBody(t,e){return q9(K9(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return H3(t,(t=>{const e={before:[],lines:[],after:[]},r=X9(n,t);F9(e.before,U9(K9(r,"beforeLabel",this,t))),F9(e.lines,K9(r,"label",this,t)),F9(e.after,U9(K9(r,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return q9(K9(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=K9(n,"beforeFooter",this,t),r=K9(n,"footer",this,t),o=K9(n,"afterFooter",this,t);let a=[];return a=F9(a,U9(i)),a=F9(a,U9(r)),a=F9(a,U9(o)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let a,s,l=[];for(a=0,s=e.length;a<s;++a)l.push(B9(this.chart,e[a]));return t.filter&&(l=l.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(l=l.sort(((e,i)=>t.itemSort(e,i,n)))),H3(l,(e=>{const n=X9(t.callbacks,e);i.push(K9(n,"labelColor",this,e)),r.push(K9(n,"labelPointStyle",this,e)),o.push(K9(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const t=z9[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=j9(this,n),a=Object.assign({},t,e),s=V9(this.chart,n,a),l=G9(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:l,bottomLeft:c,bottomRight:u}=E4(a),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,v,y,b,_;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-o,y=b+o,_=b-o):(g=h+f,m=g+o,y=b-o,_=b+o),v=g):(m="left"===i?h+Math.max(s,c)+o:"right"===i?h+f-Math.max(l,u)-o:this.caretX,"top"===r?(y=d,b=y-o,g=m-o,v=m+o):(y=d+p,b=y+o,g=m+o,v=m-o),_=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:_}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,a,s;if(r){const l=d6(n.rtl,this.x,this.width);for(t.x=W9(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=T4(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,s=0;s<r;++s)e.fillText(i[s],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,s+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:l}=r,c=T4(r.bodyFont),u=W9(this,"left",r),h=i.x(u),d=s<c.lineHeight?(c.lineHeight-s)/2:0,f=e.y+d;if(r.usePointStyle){const e={radius:Math.min(l,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+s/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,s4(t,e,n,c),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,s4(t,e,n,c)}else{t.lineWidth=N3(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=E4(o.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,v4(t,{x:e,y:f,w:l,h:s,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),v4(t,{x:n,y:f+1,w:l-2,h:s-2,radius:a}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,l,s),t.strokeRect(e,f,l,s),t.fillStyle=o.backgroundColor,t.fillRect(n,f+1,l-2,s-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:c}=n,u=T4(n.bodyFont);let h=u.lineHeight,d=0;const f=d6(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+r},g=f.textAlign(o);let m,v,y,b,_,x,w;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=W9(this,g,n),e.fillStyle=n.bodyColor,H3(this.beforeBody,p),d=a&&"right"!==g?"center"===o?l/2+c:l+2+c:0,b=0,x=i.length;b<x;++b){for(m=i[b],v=this.labelTextColors[b],e.fillStyle=v,H3(m.before,p),y=m.lines,a&&y.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(u.lineHeight,s)),_=0,w=y.length;_<w;++_)p(y[_]),h=u.lineHeight;H3(m.after,p)}d=0,h=u.lineHeight,H3(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,a;if(r){const s=d6(n.rtl,this.x,this.width);for(t.x=W9(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",o=T4(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],s.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:s}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=E4(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+u,s),"top"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+l-h,s),e.quadraticCurveTo(a+l,s,a+l,s+h),"center"===o&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+l,s+c-f),e.quadraticCurveTo(a+l,s+c,a+l-f,s+c),"bottom"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+d,s+c),e.quadraticCurveTo(a,s+c,a,s+c-d),"center"===o&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(a,s+u),e.quadraticCurveTo(a,s,a+u,s),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=z9[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=j9(this,t),a=Object.assign({},n,this._size),s=V9(e,t,a),l=G9(t,a,s,e);i._to===l.x&&r._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=M4(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),f6(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),p6(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((t=>{let{datasetIndex:e,index:n}=t;const i=this.chart.getDatasetMeta(e);if(!i)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:i.data[n],index:n}})),r=!V3(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),a=this._positionChanged(o,t),s=e||!V3(o,r)||a;return s&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=z9[r.position].call(this,t,e);return!1!==o&&(n!==o.x||i!==o.y)}}J2(Z9,"positioners",z9);var Q9={id:"tooltip",_element:Z9,positioners:z9,afterInit(t,e,n){n&&(t.tooltip=new Z9({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Y9},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},J9=Object.freeze({__proto__:null,Colors:l9,Decimation:h9,Filler:C9,Legend:R9,SubTitle:N9,Title:D9,Tooltip:Q9});function $9(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"===typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}function ttt(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ett extends $8{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(D3(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:E5(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:$9(n,t,U3(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)i.push({value:o});return i}getLabelForValue(t){return ttt.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function ntt(t,e){const n=[],{bounds:i,step:r,min:o,max:a,precision:s,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=t,d=r||1,f=c-1,{min:p,max:g}=e,m=!D3(o),v=!D3(a),y=!D3(l),b=(g-p)/(u+1);let _,x,w,S,E=f5((g-p)/f/d)*d;if(E<1e-14&&!m&&!v)return[{value:p},{value:g}];S=Math.ceil(g/E)-Math.floor(p/E),S>f&&(E=f5(S*E/f/d)*d),D3(s)||(_=Math.pow(10,s),E=Math.ceil(E*_)/_),"ticks"===i?(x=Math.floor(p/E)*E,w=Math.ceil(g/E)*E):(x=p,w=g),m&&v&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/r,E/1e3)?(S=Math.round(Math.min((a-o)/E,c)),E=(a-o)/S,x=o,w=a):y?(x=m?o:x,w=v?a:w,S=l-1,E=(w-x)/S):(S=(w-x)/E,S=d5(S,Math.round(S),E/1e3)?Math.round(S):Math.ceil(S));const M=Math.max(y5(E),y5(x));_=Math.pow(10,D3(s)?M:s),x=Math.round(x*_)/_,w=Math.round(w*_)/_;let T=0;for(m&&(h&&x!==o?(n.push({value:o}),x<o&&T++,d5(Math.round((x+T*E)*_)/_,o,itt(o,b,t))&&T++):x<o&&T++);T<S;++T){const t=Math.round((x+T*E)*_)/_;if(v&&t>a)break;n.push({value:t})}return v&&h&&w!==a?n.length&&d5(n[n.length-1].value,a,itt(a,b,t))?n[n.length-1].value=a:n.push({value:a}):v&&w!==a||n.push({value:w}),n}function itt(t,e,n){let{horizontal:i,minRotation:r}=n;const o=m5(r),a=(i?Math.sin(o):Math.cos(o))||.001,s=.75*e*(""+t).length;return Math.min(e/a,s)}J2(ett,"id","category"),J2(ett,"defaults",{ticks:{callback:ttt}});class rtt extends $8{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return D3(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=t=>i=e?i:t,a=t=>r=n?r:t;if(t){const t=h5(i),e=h5(r);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);a(r+e),t||o(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=ntt({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&g5(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Y5(t,this.chart.options.locale,this.options.ticks.format)}}class ott extends rtt{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=z3(t)?t:0,this.max=z3(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=m5(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}J2(ott,"id","linear"),J2(ott,"defaults",{ticks:{callback:Z5.formatters.numeric}});const att=t=>Math.floor(u5(t)),stt=(t,e)=>Math.pow(10,att(t)+e);function ltt(t){return 1===t/Math.pow(10,att(t))}function ctt(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function utt(t,e){let{min:n,max:i}=e;n=F3(t.min,n);const r=[],o=att(n);let a=function(t,e){let n=att(e-t);for(;ctt(t,e,n)>10;)n++;for(;ctt(t,e,n)<10;)n--;return Math.min(n,att(t))}(n,i),s=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=o>a?Math.pow(10,o):0,u=Math.round((n-c)*s)/s,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=F3(t.min,Math.round((c+h+d*Math.pow(10,a))*s)/s);for(;f<i;)r.push({value:f,major:ltt(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,s=a>=0?1:s),f=Math.round((c+h+d*Math.pow(10,a))*s)/s;const p=F3(t.max,f);return r.push({value:p,major:ltt(p),significand:d}),r}class htt extends $8{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=rtt.prototype.parse.apply(this,[t,e]);if(0!==n)return z3(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=z3(t)?Math.max(0,t):null,this.max=z3(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!z3(this._userMin)&&(this.min=t===stt(this.min,0)?stt(this.min,-1):stt(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,o=t=>i=e?i:t;n===i&&(n<=0?(r(1),o(10)):(r(stt(n,-1)),o(stt(i,1)))),n<=0&&r(stt(i,-1)),i<=0&&o(stt(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=utt({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&g5(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Y5(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=u5(t),this._valueRange=u5(this.max)-u5(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(u5(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function dtt(t){const e=t.ticks;if(e.display&&t.display){const t=M4(e.backdropPadding);return U3(e.font&&e.font.size,n4.font.size)+t.height}return 0}function ftt(t,e,n){return n=I3(n)?n:[n],{w:r4(t,e.string,n),h:n.length*e.lineHeight}}function ptt(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function gtt(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],o=t._pointLabels.length,a=t.options.pointLabels,s=a.centerPointLabels?n5/o:0;for(let l=0;l<o;l++){const o=a.setContext(t.getPointLabelContext(l));r[l]=o.padding;const c=t.getPointPosition(l,t.drawingArea+r[l],s),u=T4(o.font),h=ftt(t.ctx,u,t._pointLabels[l]);i[l]=h;const d=w5(t.getIndexAngle(l)+s),f=Math.round(v5(d));mtt(n,e,d,ptt(f,c.x,h.w,0,180),ptt(f,c.y,h.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,o=t.options,{centerPointLabels:a,display:s}=o.pointLabels,l={extra:dtt(o)/2,additionalAngle:a?n5/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const r=vtt(t,u,l);i.push(r),"auto"===s&&(r.visible=ytt(r,c),r.visible&&(c=r))}return i}(t,i,r)}function mtt(t,e,n,i,r){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,l=0;i.start<e.l?(s=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-s)):i.end>e.r&&(s=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),r.start<e.t?(l=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function vtt(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:o,padding:a,size:s}=n,l=t.getPointPosition(e,i+r+a,o),c=Math.round(v5(w5(l.angle+s5))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,s.h,c),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,s.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+s.w,bottom:u+s.h}}function ytt(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:o}=t;return!(c4({x:n,y:i},e)||c4({x:n,y:o},e)||c4({x:r,y:i},e)||c4({x:r,y:o},e))}function btt(t,e,n){const{left:i,top:r,right:o,bottom:a}=n,{backdropColor:s}=e;if(!D3(s)){const n=E4(e.borderRadius),l=M4(e.backdropPadding);t.fillStyle=s;const c=i-l.left,u=r-l.top,h=o-i+l.width,d=a-r+l.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),v4(t,{x:c,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,u,h,d)}}function _tt(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,i5);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=t.getPointPosition(o,e),r.lineTo(n.x,n.y)}}J2(htt,"id","logarithmic"),J2(htt,"defaults",{ticks:{callback:Z5.formatters.logarithmic,major:{enabled:!0}}});class xtt extends rtt{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=M4(dtt(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=z3(t)&&!isNaN(t)?t:0,this.max=z3(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dtt(this.options))}generateTickLabels(t){rtt.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=j3(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?gtt(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return w5(t*(i5/(this._pointLabels.length||1))+m5(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(D3(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(D3(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return C4(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(t)-s5+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),_tt(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,o=this._pointLabels.length;let a,s,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const o=i.setContext(t.getPointLabelContext(r));btt(n,o,e);const a=T4(o.font),{x:s,y:l,textAlign:c}=e;m4(n,t._pointLabels[r],s,l+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){s=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=i.setContext(n),l=r.setContext(n);!function(t,e,n,i,r){const o=t.ctx,a=e.circular,{color:s,lineWidth:l}=e;!a&&!i||!s||!l||n<0||(o.save(),o.strokeStyle=s,o.lineWidth=l,o.setLineDash(r.dash),o.lineDashOffset=r.dashOffset,o.beginPath(),_tt(t,n,a,i),o.closePath(),o.stroke(),o.restore())}(this,a,s,o,l)}})),n.display){for(t.save(),a=o-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:o}=i;o&&r&&(t.lineWidth=o,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const s=n.setContext(this.getContext(a)),l=T4(s.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=l.string,o=t.measureText(i.label).width,t.fillStyle=s.backdropColor;const e=M4(s.backdropPadding);t.fillRect(-o/2-e.left,-r-l.size/2-e.top,o+e.width,l.size+e.height)}m4(t,i.label,0,-r,l,{color:s.color,strokeColor:s.textStrokeColor,strokeWidth:s.textStrokeWidth})})),t.restore()}drawTitle(){}}J2(xtt,"id","radialLinear"),J2(xtt,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Z5.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}),J2(xtt,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),J2(xtt,"descriptors",{angleLines:{_fallback:"grid"}});const wtt={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Stt=Object.keys(wtt);function Ett(t,e){return t-e}function Mtt(t,e){if(D3(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts;let a=e;return"function"===typeof i&&(a=i(a)),z3(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!p5(o)&&!0!==o?n.startOf(a,r):n.startOf(a,"isoWeek",o)),+a)}function Ttt(t,e,n,i){const r=Stt.length;for(let o=Stt.indexOf(t);o<r-1;++o){const t=wtt[Stt[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return Stt[o]}return Stt[r-1]}function ktt(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=T5(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Ctt(t,e,n){const i=[],r={},o=e.length;let a,s;for(a=0;a<o;++a)s=e[a],r[s]=a,i.push({value:s,major:!1});return 0!==o&&n?function(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),a=e[e.length-1].value;let s,l;for(s=o;s<=a;s=+r.add(s,1,i))l=n[s],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class Att extends $8{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.time||(t.time={}),i=this._adapter=new o8(t.adapters.date);i.init(e),Y3(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Mtt(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function s(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),a||isNaN(t.max)||(r=Math.max(r,t.max))}o&&a||(s(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||s(this.getMinMax(!1))),i=z3(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=z3(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?Ttt(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let o=Stt.length-1;o>=Stt.indexOf(n);o--){const n=Stt[o];if(wtt[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return Stt[n?Stt.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Stt.indexOf(t)+1,n=Stt.length;e<n;++e)if(wtt[Stt[e]].common)return Stt[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),Ctt(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),i=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),r=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);const o=n.length<3?.5:.25;i=E5(i,0,o),r=E5(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||Ttt(r.minUnit,e,n,this._getLabelCapacity(e)),a=U3(i.ticks.stepSize,1),s="week"===o&&r.isoWeekday,l=p5(s)||!0===s,c={};let u,h,d=e;if(l&&(d=+t.startOf(d,"isoWeek",s)),d=+t.startOf(d,l?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,a,o),h++)ktt(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||ktt(c,u,f),Object.keys(c).sort(Ett).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.ticks.callback;if(o)return j3(o,[t,e,n],this);const a=r.time.displayFormats,s=this._unit,l=this._majorUnit,c=s&&a[s],u=l&&a[l],h=n[e],d=l&&u&&h&&h.major;return this._adapter.format(t,i||(d?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=m5(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Ctt(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Mtt(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return O5(t.sort(Ett))}}function Ptt(t,e,n){let i,r,o,a,s=0,l=t.length-1;n?(e>=t[s].pos&&e<=t[l].pos&&({lo:s,hi:l}=k5(t,"pos",e)),({pos:i,time:o}=t[s]),({pos:r,time:a}=t[l])):(e>=t[s].time&&e<=t[l].time&&({lo:s,hi:l}=k5(t,"time",e)),({time:i,pos:o}=t[s]),({time:r,pos:a}=t[l]));const c=r-i;return c?o+(a-o)*(e-i)/c:o}J2(Att,"id","time"),J2(Att,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Ott extends Att{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ptt(e,this.min),this._tableRange=Ptt(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)c=i[o+1],s=i[o-1],l=i[o],Math.round((c+s)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ptt(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ptt(this._table,n*this._tableRange+this._minPos,!0)}}J2(Ott,"id","timeseries"),J2(Ott,"defaults",Att.defaults);const Rtt=[n8,e9,J9,Object.freeze({__proto__:null,CategoryScale:ett,LinearScale:ott,LogarithmicScale:htt,RadialLinearScale:xtt,TimeScale:Att,TimeSeriesScale:Ott})];P7.register(...Rtt);const Ltt=P7;function Dtt(t){const{paperData:n}=t,{info:i}=t,{updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)(i),[u,h]=(0,e.useState)(100),d=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,f=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" "),r=i.join(" ");return null!=r?r:""};(0,e.useEffect)((()=>{if(n){const t=new Lk(n.reflist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid),x:0,y:0})))),e=new Lk(n.citelist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid),x:0,y:0})))),i={id:n.query.pid,label:f(n.query.pid)+" et al."+d(n.query.pid),label2:n.query.pid,year:d(n.query.pid),x:0,y:0};console.log(Array.from(t._data)),console.log(Array.from(e._data));const r=t.get();r.sort(((t,e)=>parseInt(t.year)-parseInt(e.year))),t.clear(),r.forEach((e=>t.add(e)));const o=e.get();o.sort(((t,e)=>parseInt(t.year)-parseInt(e.year))),e.clear(),o.forEach((t=>e.add(t)));const a=400,l=-400;t.forEach((t=>{t.x=Math.random()*(a-l)+l,i.year!=t.year?t.y=100*-(i.year-t.year):t.y=-50})),e.forEach((t=>{t.x=Math.random()*(a-l)+l,i.year!=t.year?t.y=100*-(i.year-t.year):t.y=50}));const c=new Lk([...t.get(),...e.get(),...i?[i]:[]]);console.log(c._data);const u=e.get().map((t=>({from:t.id,to:i.id}))),p=t.get().map((t=>({from:i.id,to:t.id}))),g=new Lk([...u,...p]);h(c.length),s({nodes:c,queryNode:i,edges:g})}}),[n]),(0,e.useEffect)((()=>{if(o&&u){const t=document.getElementById("graph-container"),e=(document.getElementById("markings-container"),{physics:{enabled:!1},layout:{randomSeed:2},nodes:{shape:"dot",shadow:!0,font:{multi:"html",color:"black"},chosen:{label:!1}}}),a=0,s=5,{nodes:l,queryNode:c,edges:h}=o,d=l.get();d.sort(((t,e)=>Math.abs(c.year-t.year)-Math.abs(c.year-e.year)));const f=d.findIndex((t=>t.id===c.id));if(-1!==f){const t=d.splice(f,1)[0];d.unshift(t)}const p=d.slice(0,Math.min(l.length,u)),g=new Lk(p);console.log(p);const m=h.get().filter((t=>p.some((e=>e.id===t.from||e.id===t.to)))),v=new Lk(m),y=new K2(t,{nodes:g,queryNode:c,edges:v},e);g.forEach((t=>{let e="red";if(null!=i&&t.id==i.pid&&(e="Turquoise"),t!=c){const n=Math.abs(c.year-t.year),i=Math.floor((n-a)/(s-a)*255);e=c.year-t.year>0?"rgba(255, ".concat(300-i,", 0, 1)"):"rgba(0, ".concat(255-i,", 0, 0.8)")}y.body.nodes[t.id].options.color={border:"#3E3D53",background:e,highlight:{border:"black"}}})),y.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=b(n.id);console.log(i),r(i)}}));const b=t=>{const e=n.reflist.find((e=>e.pid===t));if(e)return e;const i=n.citelist.find((e=>e.pid===t));return i||(n.query.pid===t?n.query:null)}}}),[o,u]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"32em",marginTop:"1em"}}),(0,a.jsxs)("div",{style:{marginTop:"0.5em",width:"100%"},children:[(0,a.jsx)("label",{htmlFor:"maxNodesSlider",children:"Max Nodes:"}),(0,a.jsx)("input",{type:"range",id:"maxNodesSlider",min:"1",max:"500",value:u,onChange:t=>{h(parseInt(t.target.value))},style:{width:"80%"}}),(0,a.jsx)("span",{children:u})]})]})}function Itt(t){const n=1992,{paperData:i,info:r,updateInfo:o}=t,[s,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),h=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,d=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" ");return i.join(" ")};(0,e.useEffect)((()=>{if(i){const t=new Lk(i.reflist.map((t=>({id:t.pid,label:d(t.authors)+" et al."+h(t.pid),label2:t.title,year:h(t.pid)})))),e=new Lk(i.citelist.map((t=>({id:t.pid,label:d(t.authors)+" et al."+h(t.pid),label2:t.title,year:h(t.pid)})))),n={id:i.query.pid,label:d(i.query.authors)+" et al."+h(i.query.pid),label2:i.query.pid,year:h(i.query.pid)},r=t.get().sort(((t,e)=>parseInt(t.year)-parseInt(e.year)));t.clear(),t.add(r);const o=e.get().sort(((t,e)=>parseInt(t.year)-parseInt(e.year)));e.clear(),e.add(o);const a=new Lk([...r,...o,n]),s=o.map((t=>({from:t.id,to:n.id}))),c=r.map((t=>({from:n.id,to:t.id}))),u=new Lk([...s,...c]);l({nodes:a,queryNode:n,edges:u})}}),[i]),(0,e.useEffect)((()=>{if(s){const t=document.getElementById("graph-container");console.log(c);const e={physics:{enabled:!0},layout:{randomSeed:2},nodes:{shape:"dot",shadow:!0,font:{color:"black"}}},{nodes:n,queryNode:a,edges:l}=s;let u=n,h=l;if(null!==c){const t=n.get().filter((t=>parseInt(t.year)===c||t.id===a.id));u=new Lk(t);const e=l.get().filter((e=>t.some((t=>t.id===e.from||t.id===e.to))));h=new Lk(e)}const d={nodes:u,queryNode:a,edges:h};console.log(d);const f=new K2(t,d,e);u.forEach((t=>{let e="red";if(null!=r&&t.id==r.pid&&(e="Turquoise"),t!=a){const n=Math.abs(a.year-t.year),i=Math.floor((n-0)/5*255);e=a.year-t.year>0?"rgba(255, ".concat(300-i,", 0, 1)"):"rgba(0, ".concat(255-i,", 0, 0.8)")}f.body.nodes[t.id].options.color={border:"#3E3D53",background:e,highlight:{border:"black"}},f.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],i=s.nodes.get(t),r=n(i.id);console.log(r),o(r)}}));const n=t=>{const e=i.reflist.find((e=>e.pid===t));if(e)return e;const n=i.citelist.find((e=>e.pid===t));return n||(i.query.pid===t?i.query:null)}}))}}),[s,r,c]),(0,e.useEffect)((()=>{s&&(f(),console.log("Pop"))}),[s]);const f=()=>{const t=document.getElementById("bar-chart");let e=null;if(t){t.chart&&t.chart.destroy();const i=Array.from({length:12},((t,e)=>n+e)),r=Array(i.length).fill(0),{nodes:o,queryNode:a}=s;o.get().forEach((t=>{const e=t.year-n;t.id!==a.id&&r[e]++}));const l=r.map(((t,e)=>{const i=n+e,r=Math.abs(a.year-i),o=Math.floor((r-0)/5*255);let s="rgba(54, 162, 235, 0.5)";return s=a.year-i>0?"rgba(255, ".concat(300-o,", 0, 1)"):"rgba(0, ".concat(255-o,", 0, 0.8)"),s}));console.log(l),e=new Ltt(t,{type:"bar",data:{labels:i,datasets:[{label:"Number of Nodes",data:r,backgroundColor:l,borderColor:"grey",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{title:{display:!0,text:"Year"}},y:{title:{display:!0,text:"Number of Nodes"},beginAtZero:!0}}}}),t.onclick=function(t){const i=e.getElementsAtEventForMode(t,"nearest",{intersect:!0},!1)[0];if(i){const t=i.index;u(n+t)}}}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"25em",marginTop:"1em"}}),(0,a.jsx)("div",{children:(0,a.jsx)("canvas",{id:"bar-chart",style:{marginTop:"1em",minHeight:"10em",cursor:"pointer"}})})]})}function Ntt(t){const{paperData:n,info:i,updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)(0),[u,h]=(0,e.useState)({}),d=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,f=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" ");return i.join(" ")};(0,e.useEffect)((()=>{if(n){let t=n.citelist.map((t=>t.pid)).join(",");t+=","+n.query.pid,t+=","+n.reflist.map((t=>t.pid)).join(","),console.log(t),(async t=>{try{const e=await fetch("".concat("https://papercitation-backend4.onrender.com","/api/getcitationno?query=").concat(encodeURIComponent(t)));if(!e.ok)throw new Error("Network response not ok");const n=await e.json();console.log(n),h(n)}catch(ROt){console.error("Error:",ROt)}})(t)}}),[n]),(0,e.useEffect)((()=>{if(u&&n){const t=new Lk(n.reflist.map((t=>({id:t.pid,label:f(t.authors)+" "+d(t.pid)+" ("+u[t.pid]+")",label2:t.title,year:d(t.pid)})))),e=new Lk(n.citelist.map((t=>({id:t.pid,label:f(t.authors)+" "+d(t.pid)+" ("+u[t.pid]+")",label2:t.title,year:d(t.pid)})))),i={id:n.query.pid,label:f(n.query.authors)+" "+d(n.query.pid)+" ("+u[n.query.pid]+")",label2:n.query.pid,year:d(n.query.pid)};let r=new Lk([...t.get(),...e.get(),...i?[i]:[]]);l>0&&(r=new Lk(r.get().filter((t=>u[t.id]>=l||t.id===i.id)))),console.log(u[i.id]);const o=new Lk(r.get().filter((t=>t.id!==i.id)).map((t=>({from:t.id,to:i.id}))));s({nodes:r,queryNode:i,edges:o})}}),[u,l]),(0,e.useEffect)((()=>{if(o){const t=new K2(document.getElementById("graph-container"),o,{physics:{enabled:!0},layout:{randomSeed:2},nodes:{shape:"dot",font:{color:"black"},shadow:!0}}),{nodes:e,queryNode:a,edges:s}=o,l=0,c=5;e.forEach((e=>{let s="red";if(null!=i&&e.id==i.pid&&(s="Turquoise"),e!=a){const t=Math.abs(a.year-e.year),n=Math.floor((t-l)/(c-l)*255);s=a.year-e.year>0?"rgba(255, ".concat(300-n,", 0, 1)"):"rgba(0, ".concat(255-n,", 0, 0.8)")}t.body.nodes[e.id].options.color={border:"#3E3D53",background:s,highlight:{border:"black"}},t.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=u(n.id);console.log(i),r(i)}}));const u=t=>{const e=n.reflist.find((e=>e.pid===t));if(e)return e;const i=n.citelist.find((e=>e.pid===t));return i||(n.query.pid===t?n.query:null)}}))}}),[o]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"32em",marginTop:"1em"}}),(0,a.jsxs)("div",{style:{marginTop:"0.5em",width:"100%"},children:[(0,a.jsx)("label",{htmlFor:"maxNodesSlider",children:"Citation Count: "}),(0,a.jsx)("input",{type:"range",id:"maxNodesSlider",min:"1",max:u.length?Math.max(...Object.values(u).map((t=>t.total))):500,value:l,onChange:t=>{c(parseInt(t.target.value))},style:{width:"75%"}}),(0,a.jsxs)("span",{children:["\xa0",l]})]})]})}function ztt(t){const{paperData:n,info:i,updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)({}),[u,h]=(0,e.useState)([]),d=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,f=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" "),r=i.join(" ");return null!=r?r:""};return(0,e.useEffect)((()=>{if(n){let t=n.citelist.map((t=>t.pid)).join(",");t+=","+n.query.pid,t+=","+n.reflist.map((t=>t.pid)).join(","),console.log(t),(async t=>{try{const e=await fetch("".concat("https://papercitation-backend4.onrender.com","/api/getcitationno?query=").concat(encodeURIComponent(t)));if(!e.ok)throw new Error("Network response not ok");const n=await e.json();console.log(n),c(n)}catch(ROt){console.error("Error:",ROt)}})(t)}}),[n]),(0,e.useEffect)((()=>{if(Object.keys(l).length>0){const t=Object.values(l).sort(((t,e)=>t-e)),e=t[Math.floor(t.length/4)],i=t[Math.floor(3*t.length/4)],r=i-e,o=e-1.5*r,a=i+1.5*r,c=Object.keys(l).filter((t=>l[t]>=o&&l[t]<=a));h(c);const p=new Lk(n.reflist.filter((t=>u.includes(t.pid))).map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid)})))),g=new Lk(n.citelist.filter((t=>u.includes(t.pid))).map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid)})))),m={id:n.query.pid,label:f(n.query.authors)+" et al."+d(n.query.pid),label2:n.query.pid,year:d(n.query.pid)};let v=new Lk([...p.get(),...g.get(),...m?[m]:[]]);const y=new Lk(v.get().filter((t=>t.id!==m.id)).map((t=>({from:t.id,to:m.id}))));s({nodes:v,queryNode:m,edges:y})}}),[l]),(0,e.useEffect)((()=>{if(o){const t=new K2(document.getElementById("graph-container"),o,{physics:{enabled:!0},layout:{randomSeed:2},nodes:{font:{color:"black"},shape:"dot",shadow:!0}}),{nodes:e,queryNode:a,edges:s}=o,l=0,c=5;e.forEach((e=>{let s="red";if(null!=i&&e.id==i.pid&&(s="Turquoise"),e!=a){const t=Math.abs(a.year-e.year),n=Math.floor((t-l)/(c-l)*255);s=a.year-e.year>0?"rgba(255, ".concat(300-n,", 0, 1)"):"rgba(0, ".concat(255-n,", 0, 0.8)")}t.body.nodes[e.id].options.color={border:"#3E3D53",background:s,highlight:{border:"black"}},t.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=u(n.id);console.log(i),r(i)}}));const u=t=>{const e=n.reflist.find((e=>e.pid===t));if(e)return e;const i=n.citelist.find((e=>e.pid===t));return i||(n.query.pid===t?n.query:null)}}))}}),[o]),(0,a.jsx)("div",{children:(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"34em",marginTop:"1em"}})})}function Ftt(t){const{paperData:n}=t,{info:i,updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)(i),[u,h]=(0,e.useState)(100),[d,f]=(0,e.useState)([]),p=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,g=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" "),r=i.join(" ");return null!=r?r:""};return(0,e.useEffect)((()=>{if(n){let t=n.citelist.map((t=>t.pid)).join(",");t+=","+n.query.pid,t+=","+n.reflist.map((t=>t.pid)).join(","),console.log(t),(async t=>{try{const e=await fetch("".concat("https://papercitation-backend4.onrender.com","/api/getmaxciteyr?query=").concat(encodeURIComponent(t)));if(!e.ok)throw new Error("Network response not ok");const n=await e.json();console.log(n),f(n)}catch(ROt){console.error("Error:",ROt)}})(t)}}),[n]),(0,e.useEffect)((()=>{if(n){const t=new Lk(n.reflist.map((t=>({id:t.pid,label:g(t.authors)+" et al."+p(t.pid),label2:t.title,year:p(t.pid),x:0,y:0})))),e=new Lk(n.citelist.map((t=>({id:t.pid,label:g(t.authors)+" et al."+p(t.pid),label2:t.title,year:p(t.pid),x:0,y:0})))),i={id:n.query.pid,label2:n.query.pid,label:g(n.query.authors)+" et al."+p(n.query.pid),year:p(n.query.pid),x:0,y:0},r=new Lk([...t.get(),...e.get(),...i?[i]:[]]),o=e.get().map((t=>({from:t.id,to:i.id}))),a=t.get().map((t=>({from:i.id,to:t.id}))),l=new Lk([...o,...a]);s({nodes:r,queryNode:i,edges:l})}}),[n]),(0,e.useEffect)((()=>{if(o){const t=document.getElementById("graph-container"),e=(document.getElementById("markings-container"),{physics:{enabled:!0},layout:{randomSeed:2},nodes:{font:{color:"black"},shape:"dot",shadow:!0,margin:5,labelHighlightBold:!1,chosen:{label:!1}}}),{nodes:a,queryNode:s,edges:l}=o,u=new K2(t,o,e);a.forEach((t=>{let e="red";null!=i&&t.id==i.pid&&(e="Turquoise"),t!=s&&(console.log(d[t.id]-t.year<=5," "),e=d[t.id]-t.year<=5?"Blue":"Green"),u.body.nodes[t.id].options.color={border:"#3E3D53",background:e,highlight:{border:"black"}},u.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=a(n.id);console.log(i),r(i)}}));const a=t=>{const e=n.reflist.find((e=>e.pid===t));if(e)return e;const i=n.citelist.find((e=>e.pid===t));return i||(n.query.pid===t?n.query:null)}})),u.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=h(n.id);console.log(i),c(i)}}));const h=t=>{const e=n.reflist.find((e=>e.pid===t));if(e)return e;const i=n.citelist.find((e=>e.pid===t));return i||(n.query.pid===t?n.query:null)}}}),[d]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"32em",marginTop:"1em"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"2em",justifyContent:"center",marginTop:"0.5em"},children:[(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)("div",{className:"card",style:{backgroundColor:"Blue",height:"1.7em",width:"2em"}}),"- Early risers"]}),(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)("div",{className:"card",style:{backgroundColor:"#028A0F",height:"1.7em",width:"2em"}}),"- Delayed risers"]})]})]})}function Utt(t){const{paperData:n}=t,{info:i,updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)(i),[u,h]=(0,e.useState)(100),d=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,f=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" "),r=i.join(" ");return null!=r?r:""};(0,e.useEffect)((()=>{if(n){const t=new Lk(n.reflist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid),x:0,y:0})))),e={id:n.query.pid,label:f(n.query.authors)+" et al."+d(n.query.pid),label2:n.query.pid,year:d(n.query.pid),x:0,y:0},i=t.get();i.sort(((t,e)=>parseInt(t.year)-parseInt(e.year))),t.clear(),i.forEach((e=>t.add(e)));const r=400,o=-400;t.forEach((t=>{t.x=Math.random()*(r-o)+o,e.year!=t.year?t.y=100*-(e.year-t.year):t.y=-50}));const a=new Lk([...t.get(),...e?[e]:[]]);console.log(a._data);const l=t.get().map((t=>({from:e.id,to:t.id}))),c=new Lk([...l]);h(a.length),s({nodes:a,queryNode:e,edges:c})}}),[n]),(0,e.useEffect)((()=>{if(o&&u){const t=document.getElementById("graph-container"),e=(document.getElementById("markings-container"),{physics:{enabled:!1},layout:{randomSeed:2},nodes:{shape:"dot",shadow:!0,font:{color:"black"},margin:5,labelHighlightBold:!1,chosen:{label:!1}}}),a=0,s=5,{nodes:l,queryNode:c,edges:h}=o,d=l.get();d.sort(((t,e)=>Math.abs(c.year-t.year)-Math.abs(c.year-e.year)));const f=d.findIndex((t=>t.id===c.id));if(-1!==f){const t=d.splice(f,1)[0];d.unshift(t)}const p=d.slice(0,Math.min(l.length,u)),g=new Lk(p);console.log(p);const m=h.get().filter((t=>p.some((e=>e.id===t.from||e.id===t.to)))),v=new Lk(m),y=new K2(t,{nodes:g,queryNode:c,edges:v},e);g.forEach((t=>{let e="red";if(null!=i&&t.id==i.pid&&(e="Turquoise"),t!=c){const n=Math.abs(c.year-t.year),i=Math.floor((n-a)/(s-a)*255);e="rgba(255, ".concat(300-i,", 0, 1)")}y.body.nodes[t.id].options.color={border:"#3E3D53",background:e,highlight:{border:"black"}}})),y.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=b(n.id);console.log(i),r(i)}}));const b=t=>{const e=n.reflist.find((e=>e.pid===t));return e||(n.query.pid===t?n.query:null)}}}),[o,u]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"32em",marginTop:"1em"}}),(0,a.jsxs)("div",{style:{marginTop:"0.5em",width:"100%"},children:[(0,a.jsx)("label",{htmlFor:"maxNodesSlider",children:"Max Nodes:"}),(0,a.jsx)("input",{type:"range",id:"maxNodesSlider",min:"1",max:"500",value:u,onChange:t=>{h(parseInt(t.target.value))},style:{width:"80%"}}),(0,a.jsx)("span",{children:u})]})]})}function Btt(t){const{paperData:n}=t,{info:i,updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)(i),[u,h]=(0,e.useState)(100),d=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,f=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" ");return i.join(" ")};(0,e.useEffect)((()=>{if(n){const t=new Lk(n.citelist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid),x:0,y:0})))),e={id:n.query.pid,label:f(n.query.authors)+" et al."+d(n.query.pid),label2:n.query.pid,year:d(n.query.pid),x:0,y:0},i=t.get();i.sort(((t,e)=>parseInt(t.year)-parseInt(e.year))),t.clear(),i.forEach((e=>t.add(e)));const r=400,o=-400;t.forEach((t=>{t.x=Math.random()*(r-o)+o,e.year!=t.year?t.y=100*-(e.year-t.year):t.y=50}));const a=new Lk([...t.get(),...e?[e]:[]]);console.log(a._data);const l=t.get().map((t=>({from:t.id,to:e.id}))),c=new Lk([...l]);h(a.length),s({nodes:a,queryNode:e,edges:c})}}),[n]),(0,e.useEffect)((()=>{if(o&&u){const t=document.getElementById("graph-container"),e=(document.getElementById("markings-container"),{physics:{enabled:!1},layout:{randomSeed:2},nodes:{shape:"dot",shadow:!0,font:{color:"black"},margin:5,labelHighlightBold:!1,chosen:{label:!1}}}),a=0,s=5,{nodes:l,queryNode:c,edges:h}=o,d=l.get();d.sort(((t,e)=>Math.abs(c.year-t.year)-Math.abs(c.year-e.year)));const f=d.findIndex((t=>t.id===c.id));if(-1!==f){const t=d.splice(f,1)[0];d.unshift(t)}const p=d.slice(0,Math.min(l.length,u)),g=new Lk(p);console.log(p);const m=h.get().filter((t=>p.some((e=>e.id===t.from||e.id===t.to)))),v=new Lk(m),y=new K2(t,{nodes:g,queryNode:c,edges:v},e);g.forEach((t=>{let e="red";if(null!=i&&t.id==i.pid&&(e="Turquoise"),t!=c){const n=Math.abs(c.year-t.year),i=Math.floor((n-a)/(s-a)*255);e="rgba(0, ".concat(255-i,", 0, 0.8)")}y.body.nodes[t.id].options.color={border:"#3E3D53",background:e,highlight:{border:"black"}}})),y.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=b(n.id);console.log(i),r(i)}}));const b=t=>{const e=n.citelist.find((e=>e.pid===t));return e||(n.query.pid===t?n.query:null)}}}),[o,u]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"32em",marginTop:"1em"}}),(0,a.jsxs)("div",{style:{marginTop:"0.5em",width:"100%"},children:[(0,a.jsx)("label",{htmlFor:"maxNodesSlider",children:"Max Nodes:"}),(0,a.jsx)("input",{type:"range",id:"maxNodesSlider",min:"1",max:"500",value:u,onChange:t=>{h(parseInt(t.target.value))},style:{width:"80%"}}),(0,a.jsx)("span",{children:u})]})]})}function jtt(t){const{paperData:n,info:i,updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)(0),[u,h]=(0,e.useState)({}),d=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,f=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" "),r=i.join(" ");return null!=r?r:""};(0,e.useEffect)((()=>{if(n){let t=n.citelist.map((t=>t.pid)).join(",");t+=","+n.query.pid,t+=","+n.reflist.map((t=>t.pid)).join(","),console.log(t),(async t=>{try{const e=await fetch("".concat("https://papercitation-backend4.onrender.com","/api/getpagerank?query=").concat(encodeURIComponent(t)));if(!e.ok)throw new Error("Network response not ok");const n=await e.json();console.log(n),h(n)}catch(ROt){console.error("Error:",ROt)}})(t)}}),[n]),(0,e.useEffect)((()=>{if(u.length||n){const t=new Lk(n.reflist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid)})))),e=new Lk(n.citelist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid)})))),i={id:n.query.pid,label:f(n.query.authors)+" et al."+d(n.query.pid),label2:n.query.pid,year:d(n.query.pid)},r=[...t.get(),...e.get(),...i?[i]:[]];r.sort(((t,e)=>u[e.id]-u[t.id]));const o=r.sort(((t,e)=>u[e.id]-u[t.id])),a=o.findIndex((t=>t.id===i.id));-1!==a&&o.splice(a,1);const c=o.slice(0,l-1);c.unshift(i);const h=new Lk(c),p=new Lk(h.get().filter((t=>t.id!==i.id)).map((t=>({from:t.id,to:i.id}))));s({nodes:h,queryNode:i,edges:p})}}),[u,l]),(0,e.useEffect)((()=>{if(o){const t=new K2(document.getElementById("graph-container"),o,{physics:{enabled:!0},layout:{randomSeed:2},nodes:{shape:"dot",shadow:!0,font:{color:"black"}}}),{nodes:e,queryNode:a,edges:s}=o,l=0,c=5;e.forEach((e=>{let s="red";if(null!=i&&e.id==i.pid&&(s="Turquoise"),e!=a){const t=Math.abs(a.year-e.year),n=Math.floor((t-l)/(c-l)*255);s=a.year-e.year>0?"rgba(255, ".concat(300-n,", 0, 1)"):"rgba(0, ".concat(255-n,", 0, 0.8)")}t.body.nodes[e.id].options.color={border:"#3E3D53",background:s,highlight:{border:"black"}},t.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=u(n.id);console.log(i),r(i)}}));const u=t=>{const e=n.reflist.find((e=>e.pid===t));if(e)return e;const i=n.citelist.find((e=>e.pid===t));return i||(n.query.pid===t?n.query:null)}}))}}),[o]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"32em",marginTop:"1em"}}),(0,a.jsxs)("div",{style:{marginTop:"0.5em",width:"100%"},children:[(0,a.jsx)("label",{htmlFor:"maxNodesSlider",children:"Age rescaled pagerank:"}),(0,a.jsx)("input",{type:"range",id:"maxNodesSlider",min:"0",max:"500",value:l,onChange:t=>{c(parseInt(t.target.value))},style:{width:"70%"}}),(0,a.jsx)("span",{children:l})]})]})}function Htt(t){const{paperData:n,info:i,updateInfo:r}=t,[o,s]=(0,e.useState)(null),[l,c]=(0,e.useState)({}),[u,h]=(0,e.useState)(0),d=t=>"9"===t[0]?"19"+t.substring(0,2):"0"===t[0]?"20"+t.substring(0,2):void 0,f=t=>{const e=function(t){let e="";for(let n=0;n<t.length&&(","!==t[n]&&" and"!==t.substring(n,n+4));n++)e+=t[n];return e.trim()}(t),[n,...i]=e.split(" "),r=i.join(" ");return null!=r?r:""};(0,e.useEffect)((()=>{if(n){let t=n.query.pid,e=n.citelist.map((t=>t.pid)).join(",");e+=","+n.reflist.map((t=>t.pid)).join(","),","===e[e.length-1]&&(e=e.slice(0,-1)),(async(t,e)=>{try{const n=await fetch("".concat("https://papercitation-backend4.onrender.com","/api/getsimilarity?seed_pid=").concat(encodeURIComponent(t),"&pids=").concat(encodeURIComponent(e)));if(!n.ok)throw new Error("Network response not ok");const i=await n.json();console.log(i),c(i)}catch(ROt){console.error("Error:",ROt)}})(t,e)}}),[n]),(0,e.useEffect)((()=>{if(n){const t=new Lk(n.reflist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid)})))),e=new Lk(n.citelist.map((t=>({id:t.pid,label:f(t.authors)+" et al."+d(t.pid),label2:t.title,year:d(t.pid)})))),i={id:n.query.pid,label:f(n.query.authors)+" et al."+d(n.query.pid),label2:n.query.pid,year:d(n.query.pid)},r=t.get().sort(((t,e)=>parseInt(t.year)-parseInt(e.year)));t.clear(),t.add(r);const o=e.get().sort(((t,e)=>parseInt(t.year)-parseInt(e.year)));e.clear(),e.add(o);const a=new Lk([...r,...o,i]),l=o.map((t=>({from:t.id,to:i.id}))),c=r.map((t=>({from:i.id,to:t.id}))),u=new Lk([...l,...c]);s({nodes:a,queryNode:i,edges:u})}}),[n]),(0,e.useEffect)((()=>{if(l&&n){const t=new Lk(n.reflist.map((t=>({id:t.pid,label:f(t.authors)+" "+d(t.pid)+" ("+parseFloat(l[t.pid]).toFixed(3).toString()+")",label2:t.title,year:d(t.pid)})))),e=new Lk(n.citelist.map((t=>({id:t.pid,label:f(t.authors)+" "+d(t.pid)+" ("+parseFloat(l[t.pid]).toFixed(3).toString()+")",label2:t.title,year:d(t.pid)})))),i={id:n.query.pid,label:f(n.query.authors)+" "+d(n.query.pid),label2:n.query.pid,year:d(n.query.pid)};let r=new Lk([...t.get(),...e.get(),...i?[i]:[]]);0!=u&&(r=new Lk(r.get().filter((t=>parseFloat(l[t.id]).toFixed(2)==u||t.id===i.id)))),console.log(r.get());const o=new Lk(r.get().filter((t=>t.id!==i.id)).map((t=>({from:t.id,to:i.id}))));s({nodes:r,queryNode:i,edges:o})}}),[l,u]),(0,e.useEffect)((()=>{if(o){const t=new K2(document.getElementById("graph-container"),o,{physics:{enabled:!0},layout:{randomSeed:2},nodes:{shape:"dot",font:{color:"black"},shadow:!0}}),{nodes:e,queryNode:a,edges:s}=o,l=0,c=5;e.forEach((e=>{let s="red";if(null!=i&&e.id==i.pid&&(s="Turquoise"),e!=a){const t=Math.abs(a.year-e.year),n=Math.floor((t-l)/(c-l)*255);s=a.year-e.year>0?"rgba(255, ".concat(300-n,", 0, 1)"):"rgba(0, ".concat(255-n,", 0, 0.8)")}t.body.nodes[e.id].options.color={border:"#3E3D53",background:s,highlight:{border:"black"}},t.on("click",(t=>{const{nodes:e}=t;if(1===e.length){const t=e[0],n=o.nodes.get(t),i=u(n.id);console.log(i),r(i)}}));const u=t=>{const e=n.reflist.find((e=>e.pid===t));if(e)return e;const i=n.citelist.find((e=>e.pid===t));return i||(n.query.pid===t?n.query:null)}}))}}),[o]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{id:"graph-container",style:{border:"1px solid black",height:"32em",marginTop:"1em"}}),(0,a.jsxs)("div",{style:{marginTop:"0.5em",width:"100%"},children:[(0,a.jsx)("label",{htmlFor:"maxNodesSlider",children:"Similarity Score:\xa0"}),(0,a.jsx)("input",{type:"range",id:"maxNodesSlider",min:"0.9",max:"0.99",step:"0.01",value:u.toFixed(2),onChange:t=>{h(parseFloat(t.target.value))},style:{width:"72%",marginTop:"0.5em"}}),(0,a.jsxs)("span",{children:["\xa0",u.toFixed(2)]})]})]})}function Vtt(){const{query:t}=et(),[n,i]=(0,e.useState)(null),[r,o]=(0,e.useState)(null),[s,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(100),[h,d]=(0,e.useState)(!0),[f,p]=(0,e.useState)("layer");const g=t=>{p(t.target.value)};(0,e.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://papercitation-backend4.onrender.com","/api/paper?query=").concat(encodeURIComponent(t)));if(!e.ok)throw new Error("Network response not ok");const n=await e.json();console.log(n),i(n),l(n.query)}catch(ROt){console.error("Error:",ROt)}finally{d(!1)}})()}),[t]);const m=t=>{l(t)};return(0,a.jsx)("div",{children:h?(0,a.jsx)(bt,{}):(0,a.jsx)("div",{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"checkbox",style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"2.25em",top:"0em",right:"10px",backgroundColor:"#fff",padding:"10px",borderRadius:"5px",boxShadow:"0px -2px 4px rgba(0,0,0,0.2), 0px 2px 4px rgba(0,0,0,0.2)"},children:[(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"graphType",id:"layerRadio",value:"layer",checked:"layer"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"layerRadio",children:"Default"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"graphType",id:"referenceRadio",value:"referencetree",checked:"referencetree"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"referenceRadio",children:"Prior works"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"graphType",id:"citationRadio",value:"citationtree",checked:"citationtree"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"citationRadio",children:"Derivative works"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"graphType",id:"yearRadio",value:"year",checked:"year"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"yearRadio",children:"Year-wise"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"heuristicType",id:"citationCountRadio",value:"citationCount",checked:"citationCount"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"citationCountRadio",children:"Citation Count"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"heuristicType",id:"rangeRadio",value:"range",checked:"range"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"rangeRadio",children:"IQR"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"heuristicType",id:"trajectoryRadio",value:"trajectory",checked:"trajectory"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"trajectoryRadio",children:"Trajectory"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"graphType",id:"pagerankRadio",value:"pagerank",checked:"pagerank"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"pagerankRadio",children:"Age-rescaled PageRank"})]}),(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"radio",name:"graphType",id:"similarityRadio",value:"similarity",checked:"similarity"===f,onChange:g}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"similarityRadio",children:"Similarity Score"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",maxHeight:"40em",gap:"1em"},children:[(0,a.jsxs)("div",{className:"leftbox",style:{flex:1.8,overflow:"auto"},children:[null!=n&&(0,a.jsxs)("div",{className:"card",style:{margin:"1em 0em 0em 1em"},children:[(0,a.jsx)("h5",{className:"card-header",children:"Origin Paper"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",style:{cursor:"pointer"},onClick:()=>m(n.query),children:[(0,a.jsx)("h6",{style:{color:"#0d0d75"},children:n.query.title.length<=35?n.query.title:n.query.title.substring(0,32)+"..."}),(0,a.jsx)("p",{style:{color:"green"},children:n.query.authors})]})})]}),(0,a.jsxs)("div",{className:"card",style:{margin:"1em 0em 0em 1em"},children:[(0,a.jsx)("h5",{className:"card-header",children:"Connected papers"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:null!=n&&n.reflist.length>0?n.reflist.map(((t,e)=>(0,a.jsxs)("li",{className:"list-group-item",style:{cursor:"pointer"},onClick:()=>m(n.reflist[e]),children:[(0,a.jsx)("h6",{style:{color:"#0d0d75"},children:t.title.length<=35?t.title:t.title.substring(0,32)+"..."}),(0,a.jsx)("p",{style:{color:"green"},children:t.authors})]},e))):(0,a.jsx)("p",{})}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:null!=n&&n.citelist.length>0?n.citelist.map(((t,e)=>(0,a.jsxs)("li",{className:"list-group-item",style:{cursor:"pointer"},onClick:()=>m(n.citelist[e]),children:[(0,a.jsx)("h6",{style:{color:"#0d0d75"},children:t.title.length<=35?t.title:t.title.substring(0,32)+"..."}),(0,a.jsx)("p",{style:{color:"green"},children:t.authors})]},e))):(0,a.jsx)("p",{})}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:null!=n&&0==n.citelist.length&&0==n.reflist.length?(0,a.jsx)("p",{children:"No connected papers"}):(0,a.jsx)("p",{})})]})]}),(0,a.jsxs)("div",{className:"graphbox",style:{flex:3,position:"relative"},children:["layer"===f&&(0,a.jsx)(Dtt,{paperData:n,info:s,updateInfo:m}),"year"===f&&(0,a.jsx)(Itt,{paperData:n,info:s,updateInfo:m,barchart1:null}),"citationCount"===f&&(0,a.jsx)(Ntt,{paperData:n,info:s,updateInfo:m,barchart2:null}),"range"===f&&(0,a.jsx)(ztt,{paperData:n,info:s,updateInfo:m}),"trajectory"===f&&(0,a.jsx)(Ftt,{paperData:n,info:s,updateInfo:m}),"referencetree"===f&&(0,a.jsx)(Utt,{paperData:n,info:s,updateInfo:m}),"citationtree"===f&&(0,a.jsx)(Btt,{paperData:n,info:s,updateInfo:m}),"pagerank"===f&&(0,a.jsx)(jtt,{paperData:n,info:s,updateInfo:m}),"similarity"===f&&(0,a.jsx)(Htt,{paperData:n,info:s,updateInfo:m})]}),(0,a.jsx)("div",{className:"infobox",style:{flex:2,display:"flex",flexDirection:"column",margin:"1em",gap:"1em"},children:(0,a.jsx)("div",{children:null!=s&&(0,a.jsxs)("div",{style:{width:"100%",marginTop:"1em"},children:[(0,a.jsx)("h5",{children:(0,a.jsx)("strong",{children:null!=s.title?s.title:" "})}),(0,a.jsx)("p",{children:null!=s.comments?s.comments:" "}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Author:"}),null!=s.authors?s.authors:" "]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Journal-ref:"}),null!=s.journal?s.journal:" "]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Info:"}),null!=s.body?s.body:" "]})]})})})]})]})})})}const Gtt="154",Wtt={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qtt={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Xtt=0,Ytt=1,Ktt=2,Ztt=3,Qtt=0,Jtt=1,$tt=2,tet=3,eet=0,net=1,iet=2,ret=2,oet=0,aet=1,set=2,cet=3,uet=4,het=5,det=100,fet=101,pet=102,get=103,met=104,vet=200,yet=201,bet=202,_et=203,xet=204,wet=205,Eet=206,Met=207,Tet=208,ket=209,Cet=210,Aet=0,Pet=1,Oet=2,Ret=3,Let=4,Det=5,Iet=6,Net=7,zet=0,Fet=1,Uet=2,Bet=0,jet=1,Het=2,Vet=3,Get=4,Wet=5,qet=300,Xet=301,Yet=302,Ket=303,Zet=304,Qet=306,Jet=1e3,$et=1001,tnt=1002,ent=1003,nnt=1004,int=1004,rnt=1005,ont=1005,ant=1006,snt=1007,lnt=1007,cnt=1008,unt=1008,hnt=1009,dnt=1010,fnt=1011,pnt=1012,gnt=1013,mnt=1014,vnt=1015,ynt=1016,bnt=1017,_nt=1018,xnt=1020,wnt=1021,Snt=1023,Ent=1024,Mnt=1025,Tnt=1026,knt=1027,Cnt=1028,Ant=1029,Pnt=1030,Ont=1031,Rnt=1033,Lnt=33776,Dnt=33777,Int=33778,Nnt=33779,znt=35840,Fnt=35841,Unt=35842,Bnt=35843,jnt=36196,Hnt=37492,Vnt=37496,Gnt=37808,Wnt=37809,qnt=37810,Xnt=37811,Ynt=37812,Knt=37813,Znt=37814,Qnt=37815,Jnt=37816,$nt=37817,tit=37818,eit=37819,nit=37820,iit=37821,rit=36492,oit=36283,ait=36284,sit=36285,lit=36286,cit=2200,uit=2201,hit=2202,dit=2300,fit=2301,pit=2302,git=2400,mit=2401,vit=2402,yit=2500,bit=2501,_it=0,xit=1,wit=2,Sit=3e3,Eit=3001,Mit=3200,Tit=3201,kit=0,Cit=1,Ait="",Pit="srgb",Oit="srgb-linear",Rit="display-p3",Lit=0,Dit=7680,Iit=7681,Nit=7682,zit=7683,Fit=34055,Uit=34056,Bit=5386,jit=512,Hit=513,Vit=514,Git=515,Wit=516,qit=517,Xit=518,Yit=519,Kit=512,Zit=513,Qit=514,Jit=515,$it=516,trt=517,ert=518,nrt=519,irt=35044,rrt=35048,ort=35040,art=35045,srt=35049,lrt=35041,crt=35046,urt=35050,hrt=35042,drt="100",frt="300 es",prt=1035,grt=2e3,mrt=2001;class vrt{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const yrt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let brt=1234567;const _rt=Math.PI/180,xrt=180/Math.PI;function wrt(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(yrt[255&t]+yrt[t>>8&255]+yrt[t>>16&255]+yrt[t>>24&255]+"-"+yrt[255&e]+yrt[e>>8&255]+"-"+yrt[e>>16&15|64]+yrt[e>>24&255]+"-"+yrt[63&n|128]+yrt[n>>8&255]+"-"+yrt[n>>16&255]+yrt[n>>24&255]+yrt[255&i]+yrt[i>>8&255]+yrt[i>>16&255]+yrt[i>>24&255]).toLowerCase()}function Srt(t,e,n){return Math.max(e,Math.min(n,t))}function Ert(t,e){return(t%e+e)%e}function Mrt(t,e,n){return(1-n)*t+n*e}function Trt(t){return 0===(t&t-1)&&0!==t}function krt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Crt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Art(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Prt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const Ort={DEG2RAD:_rt,RAD2DEG:xrt,generateUUID:wrt,clamp:Srt,euclideanModulo:Ert,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Mrt,damp:function(t,e,n,i){return Mrt(t,e,1-Math.exp(-n*i))},pingpong:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(Ert(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(brt=t);let e=brt+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function(t){return t*_rt},radToDeg:function(t){return t*xrt},isPowerOfTwo:Trt,ceilPowerOfTwo:krt,floorPowerOfTwo:Crt,setQuaternionFromProperEuler:function(t,e,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+i)/2),u=a((e+i)/2),h=o((e-i)/2),d=a((e-i)/2),f=o((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":t.set(s*u,l*h,l*d,s*c);break;case"YZY":t.set(l*d,s*u,l*h,s*c);break;case"ZXZ":t.set(l*h,l*d,s*u,s*c);break;case"XZX":t.set(s*u,l*p,l*f,s*c);break;case"YXY":t.set(l*f,s*u,l*p,s*c);break;case"ZYZ":t.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Prt,denormalize:Art};class Rrt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Rrt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Srt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lrt{constructor(t,e,n,i,r,o,a,s,l){Lrt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,o,a,s,l)}set(t,e,n,i,r,o,a,s,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],g=i[3],m=i[6],v=i[1],y=i[4],b=i[7],_=i[2],x=i[5],w=i[8];return r[0]=o*p+a*v+s*_,r[3]=o*g+a*y+s*x,r[6]=o*m+a*b+s*w,r[1]=l*p+c*v+u*_,r[4]=l*g+c*y+u*x,r[7]=l*m+c*b+u*w,r[2]=h*p+d*v+f*_,r[5]=h*g+d*y+f*x,r[8]=h*m+d*b+f*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=c*o-a*l,h=a*s-c*r,d=l*r-o*s,f=e*u+n*h+i*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(i*l-c*n)*p,t[2]=(a*n-i*o)*p,t[3]=h*p,t[4]=(c*e-i*s)*p,t[5]=(i*r-a*e)*p,t[6]=d*p,t[7]=(n*s-l*e)*p,t[8]=(o*e-n*r)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,o,a){const s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(Drt.makeScale(t,e)),this}rotate(t){return this.premultiply(Drt.makeRotation(-t)),this}translate(t,e){return this.premultiply(Drt.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const Drt=new Lrt;function Irt(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Nrt={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function zrt(t,e){return new Nrt[t](e)}function Frt(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const Urt={};function Brt(t){t in Urt||(Urt[t]=!0,console.warn(t))}function jrt(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Hrt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const Vrt=(new Lrt).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Grt=(new Lrt).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);const Wrt={[Oit]:t=>t,[Pit]:t=>t.convertSRGBToLinear(),[Rit]:function(t){return t.convertSRGBToLinear().applyMatrix3(Grt)}},qrt={[Oit]:t=>t,[Pit]:t=>t.convertLinearToSRGB(),[Rit]:function(t){return t.applyMatrix3(Vrt).convertLinearToSRGB()}},Xrt={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Oit},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const i=Wrt[e],r=qrt[n];if(void 0===i||void 0===r)throw new Error('Unsupported color space conversion, "'.concat(e,'" to "').concat(n,'".'));return r(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Yrt;class Krt{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"===typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Yrt&&(Yrt=Frt("canvas")),Yrt.width=t.width,Yrt.height=t.height;const n=Yrt.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Yrt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=Frt("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*jrt(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*jrt(e[t]/255)):e[t]=jrt(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Zrt=0;class Qrt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Zrt++}),this.uuid=wrt(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(Jrt(i[e].image)):t.push(Jrt(i[e]))}else t=Jrt(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function Jrt(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?Krt.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $rt=0;class tot extends vrt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tot.DEFAULT_IMAGE,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tot.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$et,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$et,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ant,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cnt,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Snt,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:hnt,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:tot.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ait;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$rt++}),this.uuid=wrt(),this.name="",this.source=new Qrt(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new Rrt(0,0),this.repeat=new Rrt(1,1),this.center=new Rrt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lrt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(Brt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Eit?Pit:Ait),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){void 0===t&&(t=null),this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==qet)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Jet:t.x=t.x-Math.floor(t.x);break;case $et:t.x=t.x<0?0:1;break;case tnt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Jet:t.y=t.y-Math.floor(t.y);break;case $et:t.y=t.y<0?0:1;break;case tnt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Brt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Pit?Eit:Sit}set encoding(t){Brt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Eit?Pit:Ait}}tot.DEFAULT_IMAGE=null,tot.DEFAULT_MAPPING=qet,tot.DEFAULT_ANISOTROPY=1;class eot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;eot.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const o=.01,a=.1,s=t.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],g=s[6],m=s[10];if(Math.abs(c-h)<o&&Math.abs(u-p)<o&&Math.abs(f-g)<o){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+g)<a&&Math.abs(l+d+m-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(d+1)/2,v=(m+1)/2,y=(c+h)/4,b=(u+p)/4,_=(f+g)/4;return t>s&&t>v?t<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=y/n,r=b/n):s>v?s<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=y/i,r=_/i):v<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=b/r,i=_/r),this.set(n,i,r,e),this}let v=Math.sqrt((g-f)*(g-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(g-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class not extends vrt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new eot(0,0,t,e),this.scissorTest=!1,this.viewport=new eot(0,0,t,e);const i={width:t,height:e,depth:1};void 0!==n.encoding&&(Brt("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Eit?Pit:Ait),this.texture=new tot(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ant,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Qrt(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class iot extends tot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=ent,this.minFilter=ent,this.wrapR=$et,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rot extends not{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new iot(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class oot extends tot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=ent,this.minFilter=ent,this.wrapR=$et,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class aot extends not{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new oot(null,t,e,n),this.texture.isRenderTargetTexture=!0}}class sot extends not{constructor(){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;const e=this.texture;this.texture=[];for(let n=0;n<t;n++)this.texture[n]=e.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}}class lot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,o,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[o+0],d=r[o+1],f=r[o+2],p=r[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||s!==h||l!==d||c!==f){let t=1-a;const e=s*h+l*d+c*f+u*p,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,e*n);t=Math.sin(t*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*t+h*r,l=l*t+d*r,c=c*t+f*r,u=u*t+p*r,t===1-a){const t=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=t,l*=t,c*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,o){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],d=r[o+2],f=r[o+3];return t[e]=a*f+c*u+s*d-l*h,t[e+1]=s*f+c*h+l*u-a*d,t[e+2]=l*f+c*d+a*h-s*u,t[e+3]=c*f-a*u-s*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),f=s(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],a=e[5],s=e[9],l=e[2],c=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-s)*t,this._y=(r-l)*t,this._z=(o-i)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(c-s)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(r+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(r-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-i)/t,this._x=(r+l)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Srt(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class cot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;cot.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(hot.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(hot.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return uot.copy(this).projectOnVector(t),this.sub(uot)}reflect(t){return this.sub(uot.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Srt(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const uot=new cot,hot=new lot;class dot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot(1/0,1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(pot.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(pot.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=pot.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),got.copy(t.boundingBox),got.applyMatrix4(t.matrixWorld),this.union(got);else{const n=t.geometry;if(void 0!==n)if(e&&void 0!==n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,i=e.count;n<i;n++)pot.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(pot)}else null===n.boundingBox&&n.computeBoundingBox(),got.copy(n.boundingBox),got.applyMatrix4(t.matrixWorld),this.union(got)}const n=t.children;for(let i=0,r=n.length;i<r;i++)this.expandByObject(n[i],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,pot),pot.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(wot),Sot.subVectors(this.max,wot),mot.subVectors(t.a,wot),vot.subVectors(t.b,wot),yot.subVectors(t.c,wot),bot.subVectors(vot,mot),_ot.subVectors(yot,vot),xot.subVectors(mot,yot);let e=[0,-bot.z,bot.y,0,-_ot.z,_ot.y,0,-xot.z,xot.y,bot.z,0,-bot.x,_ot.z,0,-_ot.x,xot.z,0,-xot.x,-bot.y,bot.x,0,-_ot.y,_ot.x,0,-xot.y,xot.x,0];return!!Tot(e,mot,vot,yot,Sot)&&(e=[1,0,0,0,1,0,0,0,1],!!Tot(e,mot,vot,yot,Sot)&&(Eot.crossVectors(bot,_ot),e=[Eot.x,Eot.y,Eot.z],Tot(e,mot,vot,yot,Sot)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,pot).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(pot).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(fot[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),fot[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),fot[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),fot[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),fot[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),fot[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),fot[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),fot[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(fot)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const fot=[new cot,new cot,new cot,new cot,new cot,new cot,new cot,new cot],pot=new cot,got=new dot,mot=new cot,vot=new cot,yot=new cot,bot=new cot,_ot=new cot,xot=new cot,wot=new cot,Sot=new cot,Eot=new cot,Mot=new cot;function Tot(t,e,n,i,r){for(let o=0,a=t.length-3;o<=a;o+=3){Mot.fromArray(t,o);const a=r.x*Math.abs(Mot.x)+r.y*Math.abs(Mot.y)+r.z*Math.abs(Mot.z),s=e.dot(Mot),l=n.dot(Mot),c=i.dot(Mot);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const kot=new dot,Cot=new cot,Aot=new cot;class Pot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):kot.setFromPoints(t).getCenter(n);let i=0;for(let r=0,o=t.length;r<o;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Cot.subVectors(t,this.center);const e=Cot.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(Cot,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Aot.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Cot.copy(t.center).add(Aot)),this.expandByPoint(Cot.copy(t.center).sub(Aot))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Oot=new cot,Rot=new cot,Lot=new cot,Dot=new cot,Iot=new cot,Not=new cot,zot=new cot;class Fot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot(0,0,-1);this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Oot)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Oot.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Oot.copy(this.origin).addScaledVector(this.direction,e),Oot.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){Rot.copy(t).add(e).multiplyScalar(.5),Lot.copy(e).sub(t).normalize(),Dot.copy(this.origin).sub(Rot);const r=.5*t.distanceTo(e),o=-this.direction.dot(Lot),a=Dot.dot(this.direction),s=-Dot.dot(Lot),l=Dot.lengthSq(),c=Math.abs(1-o*o);let u,h,d,f;if(c>0)if(u=o*s-a,h=o*a-s,f=r*c,u>=0)if(h>=-f)if(h<=f){const t=1/c;u*=t,h*=t,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-f?(u=Math.max(0,-(-o*r+a)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l):h<=f?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+l):(u=Math.max(0,-(o*r+a)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(Rot).addScaledVector(Lot,h),d}intersectSphere(t,e){Oot.subVectors(t.center,this.origin);const n=Oot.dot(this.direction),i=Oot.dot(Oot)-n*n,r=t.radius*t.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||r>i?null:((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,Oot)}intersectTriangle(t,e,n,i,r){Iot.subVectors(e,t),Not.subVectors(n,t),zot.crossVectors(Iot,Not);let o,a=this.direction.dot(zot);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Dot.subVectors(this.origin,t);const s=o*this.direction.dot(Not.crossVectors(Dot,Not));if(s<0)return null;const l=o*this.direction.dot(Iot.cross(Dot));if(l<0)return null;if(s+l>a)return null;const c=-o*Dot.dot(zot);return c<0?null:this.at(c/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Uot{constructor(t,e,n,i,r,o,a,s,l,c,u,h,d,f,p,g){Uot.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,o,a,s,l,c,u,h,d,f,p,g)}set(t,e,n,i,r,o,a,s,l,c,u,h,d,f,p,g){const m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=o,m[9]=a,m[13]=s,m[2]=l,m[6]=c,m[10]=u,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Uot).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/Bot.setFromMatrixColumn(t,0).length(),r=1/Bot.setFromMatrixColumn(t,1).length(),o=1/Bot.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*s,e[2]=r-t*l,e[6]=i+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t+r*a,e[4]=i*a-n,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t-r*a,e[4]=-o*u,e[8]=i+n*a,e[1]=n+i*a,e[5]=o*c,e[9]=r-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=s*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=o*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=a*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Hot,t,Vot)}lookAt(t,e,n){const i=this.elements;return qot.subVectors(t,e),0===qot.lengthSq()&&(qot.z=1),qot.normalize(),Got.crossVectors(n,qot),0===Got.lengthSq()&&(1===Math.abs(n.z)?qot.x+=1e-4:qot.z+=1e-4,qot.normalize(),Got.crossVectors(n,qot)),Got.normalize(),Wot.crossVectors(qot,Got),i[0]=Got.x,i[4]=Wot.x,i[8]=qot.x,i[1]=Got.y,i[5]=Wot.y,i[9]=qot.y,i[2]=Got.z,i[6]=Wot.z,i[10]=qot.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],g=n[10],m=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=i[0],w=i[4],S=i[8],E=i[12],M=i[1],T=i[5],k=i[9],C=i[13],A=i[2],P=i[6],O=i[10],R=i[14],L=i[3],D=i[7],I=i[11],N=i[15];return r[0]=o*x+a*M+s*A+l*L,r[4]=o*w+a*T+s*P+l*D,r[8]=o*S+a*k+s*O+l*I,r[12]=o*E+a*C+s*R+l*N,r[1]=c*x+u*M+h*A+d*L,r[5]=c*w+u*T+h*P+d*D,r[9]=c*S+u*k+h*O+d*I,r[13]=c*E+u*C+h*R+d*N,r[2]=f*x+p*M+g*A+m*L,r[6]=f*w+p*T+g*P+m*D,r[10]=f*S+p*k+g*O+m*I,r[14]=f*E+p*C+g*R+m*N,r[3]=v*x+y*M+b*A+_*L,r[7]=v*w+y*T+b*P+_*D,r[11]=v*S+y*k+b*O+_*I,r[15]=v*E+y*C+b*R+_*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+t[7]*(+e*s*d-e*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+t[11]*(+e*l*u-e*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+t[15]*(-i*a*c-e*s*u+e*a*h+i*o*u-n*o*h+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15],v=u*g*l-p*h*l+p*s*d-a*g*d-u*s*m+a*h*m,y=f*h*l-c*g*l-f*s*d+o*g*d+c*s*m-o*h*m,b=c*p*l-f*u*l+f*a*d-o*p*d-c*a*m+o*u*m,_=f*u*s-c*p*s-f*a*h+o*p*h+c*a*g-o*u*g,x=e*v+n*y+i*b+r*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return t[0]=v*w,t[1]=(p*h*r-u*g*r-p*i*d+n*g*d+u*i*m-n*h*m)*w,t[2]=(a*g*r-p*s*r+p*i*l-n*g*l-a*i*m+n*s*m)*w,t[3]=(u*s*r-a*h*r-u*i*l+n*h*l+a*i*d-n*s*d)*w,t[4]=y*w,t[5]=(c*g*r-f*h*r+f*i*d-e*g*d-c*i*m+e*h*m)*w,t[6]=(f*s*r-o*g*r-f*i*l+e*g*l+o*i*m-e*s*m)*w,t[7]=(o*h*r-c*s*r+c*i*l-e*h*l-o*i*d+e*s*d)*w,t[8]=b*w,t[9]=(f*u*r-c*p*r-f*n*d+e*p*d+c*n*m-e*u*m)*w,t[10]=(o*p*r-f*a*r+f*n*l-e*p*l-o*n*m+e*a*m)*w,t[11]=(c*a*r-o*u*r-c*n*l+e*u*l+o*n*d-e*a*d)*w,t[12]=_*w,t[13]=(c*p*i-f*u*i+f*n*h-e*p*h-c*n*g+e*u*g)*w,t[14]=(f*a*i-o*p*i-f*n*s+e*p*s+o*n*g-e*a*g)*w,t[15]=(o*u*i-c*a*i+c*n*s-e*u*s-o*n*h+e*a*h)*w,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,o){return this.set(1,n,r,0,t,1,o,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,f=r*u,p=o*c,g=o*u,m=a*u,v=s*l,y=s*c,b=s*u,_=n.x,x=n.y,w=n.z;return i[0]=(1-(p+m))*_,i[1]=(d+b)*_,i[2]=(f-y)*_,i[3]=0,i[4]=(d-b)*x,i[5]=(1-(h+m))*x,i[6]=(g+v)*x,i[7]=0,i[8]=(f+y)*w,i[9]=(g-v)*w,i[10]=(1-(h+p))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=Bot.set(i[0],i[1],i[2]).length();const o=Bot.set(i[4],i[5],i[6]).length(),a=Bot.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],jot.copy(this);const s=1/r,l=1/o,c=1/a;return jot.elements[0]*=s,jot.elements[1]*=s,jot.elements[2]*=s,jot.elements[4]*=l,jot.elements[5]*=l,jot.elements[6]*=l,jot.elements[8]*=c,jot.elements[9]*=c,jot.elements[10]*=c,e.setFromRotationMatrix(jot),n.x=r,n.y=o,n.z=a,this}makePerspective(t,e,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:grt;const s=this.elements,l=2*r/(e-t),c=2*r/(n-i),u=(e+t)/(e-t),h=(n+i)/(n-i);let d,f;if(a===grt)d=-(o+r)/(o-r),f=-2*o*r/(o-r);else{if(a!==mrt)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-o/(o-r),f=-o*r/(o-r)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:grt;const s=this.elements,l=1/(e-t),c=1/(n-i),u=1/(o-r),h=(e+t)*l,d=(n+i)*c;let f,p;if(a===grt)f=(o+r)*u,p=-2*u;else{if(a!==mrt)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);f=r*u,p=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=p,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Bot=new cot,jot=new Uot,Hot=new cot(0,0,0),Vot=new cot(1,1,1),Got=new cot,Wot=new cot,qot=new cot,Xot=new Uot,Yot=new lot;class Kot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kot.DEFAULT_ORDER;this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=t.elements,r=i[0],o=i[4],a=i[8],s=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(Srt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Srt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Srt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-Srt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Srt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Srt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Xot.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Xot,e,n)}setFromVector3(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}reorder(t){return Yot.setFromEuler(this),this.setFromQuaternion(Yot,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Kot.DEFAULT_ORDER="XYZ";class Zot{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let Qot=0;const Jot=new cot,$ot=new lot,tat=new Uot,eat=new cot,nat=new cot,iat=new cot,rat=new lot,oat=new cot(1,0,0),aat=new cot(0,1,0),sat=new cot(0,0,1),lat={type:"added"},cat={type:"removed"};class uat extends vrt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Qot++}),this.uuid=wrt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=uat.DEFAULT_UP.clone();const t=new cot,e=new Kot,n=new lot,i=new cot(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Uot},normalMatrix:{value:new Lrt}}),this.matrix=new Uot,this.matrixWorld=new Uot,this.matrixAutoUpdate=uat.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=uat.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Zot,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return $ot.setFromAxisAngle(t,e),this.quaternion.multiply($ot),this}rotateOnWorldAxis(t,e){return $ot.setFromAxisAngle(t,e),this.quaternion.premultiply($ot),this}rotateX(t){return this.rotateOnAxis(oat,t)}rotateY(t){return this.rotateOnAxis(aat,t)}rotateZ(t){return this.rotateOnAxis(sat,t)}translateOnAxis(t,e){return Jot.copy(t).applyQuaternion(this.quaternion),this.position.add(Jot.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(oat,t)}translateY(t){return this.translateOnAxis(aat,t)}translateZ(t){return this.translateOnAxis(sat,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(tat.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?eat.copy(t):eat.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),nat.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tat.lookAt(nat,eat,this.up):tat.lookAt(eat,nat,this.up),this.quaternion.setFromRotationMatrix(tat),i&&(tat.extractRotation(i.matrixWorld),$ot.setFromRotationMatrix(tat),this.quaternion.premultiply($ot.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(lat)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(cat)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(cat)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),tat.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),tat.multiply(t.parent.matrixWorld)),t.applyMatrix4(tat),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(t,e);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nat,t,iat),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nat,rat,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++){const i=e[n];!0!==i.matrixWorldAutoUpdate&&!0!==t||i.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=o(t.geometries),i=o(t.materials),r=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),c=o(t.animations),u=o(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function o(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}uat.DEFAULT_UP=new cot(0,1,0),uat.DEFAULT_MATRIX_AUTO_UPDATE=!0,uat.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const hat=new cot,dat=new cot,fat=new cot,pat=new cot,gat=new cot,mat=new cot,vat=new cot,yat=new cot,bat=new cot,_at=new cot;let xat=!1;class wat{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cot;this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),hat.subVectors(t,e),i.cross(hat);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){hat.subVectors(i,e),dat.subVectors(n,e),fat.subVectors(t,e);const o=hat.dot(hat),a=hat.dot(dat),s=hat.dot(fat),l=dat.dot(dat),c=dat.dot(fat),u=o*l-a*a;if(0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,f=(o*c-a*s)*h;return r.set(1-d-f,f,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,pat),pat.x>=0&&pat.y>=0&&pat.x+pat.y<=1}static getUV(t,e,n,i,r,o,a,s){return!1===xat&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),xat=!0),this.getInterpolation(t,e,n,i,r,o,a,s)}static getInterpolation(t,e,n,i,r,o,a,s){return this.getBarycoord(t,e,n,i,pat),s.setScalar(0),s.addScaledVector(r,pat.x),s.addScaledVector(o,pat.y),s.addScaledVector(a,pat.z),s}static isFrontFacing(t,e,n,i){return hat.subVectors(n,e),dat.subVectors(t,e),hat.cross(dat).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return hat.subVectors(this.c,this.b),dat.subVectors(this.a,this.b),.5*hat.cross(dat).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return wat.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return wat.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return!1===xat&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),xat=!0),wat.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}getInterpolation(t,e,n,i,r){return wat.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return wat.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return wat.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let o,a;gat.subVectors(i,n),mat.subVectors(r,n),yat.subVectors(t,n);const s=gat.dot(yat),l=mat.dot(yat);if(s<=0&&l<=0)return e.copy(n);bat.subVectors(t,i);const c=gat.dot(bat),u=mat.dot(bat);if(c>=0&&u<=c)return e.copy(i);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),e.copy(n).addScaledVector(gat,o);_at.subVectors(t,r);const d=gat.dot(_at),f=mat.dot(_at);if(f>=0&&d<=f)return e.copy(r);const p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),e.copy(n).addScaledVector(mat,a);const g=c*f-d*u;if(g<=0&&u-c>=0&&d-f>=0)return vat.subVectors(r,i),a=(u-c)/(u-c+(d-f)),e.copy(i).addScaledVector(vat,a);const m=1/(g+p+h);return o=p*m,a=h*m,e.copy(n).addScaledVector(gat,o).addScaledVector(mat,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Sat=0;class Eat extends vrt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Sat++}),this.uuid=wrt(),this.name="",this.type="Material",this.blending=aet,this.side=eet,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=xet,this.blendDst=wet,this.blendEquation=det,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ret,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Yit,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Dit,this.stencilZFail=Dit,this.stencilZPass=Dit,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==aet&&(n.blending=this.blending),this.side!==eet&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const Mat={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tat={h:0,s:0,l:0},kat={h:0,s:0,l:0};function Cat(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Aat{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pit;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Xrt.toWorkingColorSpace(this,e),this}setRGB(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xrt.workingColorSpace;return this.r=t,this.g=e,this.b=n,Xrt.toWorkingColorSpace(this,i),this}setHSL(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xrt.workingColorSpace;if(t=Ert(t,1),e=Srt(e,0,1),n=Srt(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Cat(r,i,t+1/3),this.g=Cat(r,i,t),this.b=Cat(r,i,t-1/3)}return Xrt.toWorkingColorSpace(this,i),this}setStyle(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pit;function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}if(e=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const o=e[1],a=e[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(e=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=e[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pit;const n=Mat[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=jrt(t.r),this.g=jrt(t.g),this.b=jrt(t.b),this}copyLinearToSRGB(t){return this.r=Hrt(t.r),this.g=Hrt(t.g),this.b=Hrt(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pit;return Xrt.fromWorkingColorSpace(Pat.copy(this),t),65536*Math.round(Srt(255*Pat.r,0,255))+256*Math.round(Srt(255*Pat.g,0,255))+Math.round(Srt(255*Pat.b,0,255))}getHexString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pit;return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xrt.workingColorSpace;Xrt.fromWorkingColorSpace(Pat.copy(this),e);const n=Pat.r,i=Pat.g,r=Pat.b,o=Math.max(n,i,r),a=Math.min(n,i,r);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const t=o-a;switch(l=c<=.5?t/(o+a):t/(2-o-a),o){case n:s=(i-r)/t+(i<r?6:0);break;case i:s=(r-n)/t+2;break;case r:s=(n-i)/t+4}s/=6}return t.h=s,t.s=l,t.l=c,t}getRGB(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xrt.workingColorSpace;return Xrt.fromWorkingColorSpace(Pat.copy(this),e),t.r=Pat.r,t.g=Pat.g,t.b=Pat.b,t}getStyle(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pit;Xrt.fromWorkingColorSpace(Pat.copy(this),t);const e=Pat.r,n=Pat.g,i=Pat.b;return t!==Pit?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*e),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(t,e,n){return this.getHSL(Tat),Tat.h+=t,Tat.s+=e,Tat.l+=n,this.setHSL(Tat.h,Tat.s,Tat.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Tat),t.getHSL(kat);const n=Mrt(Tat.h,kat.h,e),i=Mrt(Tat.s,kat.s,e),r=Mrt(Tat.l,kat.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Pat=new Aat;Aat.NAMES=Mat;class Oat extends Eat{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Aat(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zet,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Rat=Lat();function Lat(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const t=l-127;t<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):t<-14?(i[l]=1024>>-t-14,i[256|l]=1024>>-t-14|32768,r[l]=-t-1,r[256|l]=-t-1):t<=15?(i[l]=t+15<<10,i[256|l]=t+15<<10|32768,r[l]=13,r[256|l]=13):t<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let t=l<<13,e=0;for(;0===(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,o[l]=t|e}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:a,offsetTable:s}}function Dat(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Srt(t,-65504,65504),Rat.floatView[0]=t;const e=Rat.uint32View[0],n=e>>23&511;return Rat.baseTable[n]+((8388607&e)>>Rat.shiftTable[n])}function Iat(t){const e=t>>10;return Rat.uint32View[0]=Rat.mantissaTable[Rat.offsetTable[e]+(1023&t)]+Rat.exponentTable[e],Rat.floatView[0]}const Nat={toHalfFloat:Dat,fromHalfFloat:Iat},zat=new cot,Fat=new Rrt;class Uat{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=irt,this.updateRange={offset:0,count:-1},this.gpuType=vnt,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Fat.fromBufferAttribute(this,e),Fat.applyMatrix3(t),this.setXY(e,Fat.x,Fat.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)zat.fromBufferAttribute(this,e),zat.applyMatrix3(t),this.setXYZ(e,zat.x,zat.y,zat.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)zat.fromBufferAttribute(this,e),zat.applyMatrix4(t),this.setXYZ(e,zat.x,zat.y,zat.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)zat.fromBufferAttribute(this,e),zat.applyNormalMatrix(t),this.setXYZ(e,zat.x,zat.y,zat.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)zat.fromBufferAttribute(this,e),zat.transformDirection(t),this.setXYZ(e,zat.x,zat.y,zat.z);return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Art(e,this.array)),e}setX(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Art(e,this.array)),e}setY(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Art(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Art(e,this.array)),e}setW(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array),i=Prt(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array),i=Prt(i,this.array),r=Prt(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==irt&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}class Bat extends Uat{constructor(t,e,n){super(new Int8Array(t),e,n)}}class jat extends Uat{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class Hat extends Uat{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class Vat extends Uat{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Gat extends Uat{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Wat extends Uat{constructor(t,e,n){super(new Int32Array(t),e,n)}}class qat extends Uat{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Xat extends Uat{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Iat(this.array[t*this.itemSize]);return this.normalized&&(e=Art(e,this.array)),e}setX(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize]=Dat(e),this}getY(t){let e=Iat(this.array[t*this.itemSize+1]);return this.normalized&&(e=Art(e,this.array)),e}setY(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize+1]=Dat(e),this}getZ(t){let e=Iat(this.array[t*this.itemSize+2]);return this.normalized&&(e=Art(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize+2]=Dat(e),this}getW(t){let e=Iat(this.array[t*this.itemSize+3]);return this.normalized&&(e=Art(e,this.array)),e}setW(t,e){return this.normalized&&(e=Prt(e,this.array)),this.array[t*this.itemSize+3]=Dat(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array)),this.array[t+0]=Dat(e),this.array[t+1]=Dat(n),this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array),i=Prt(i,this.array)),this.array[t+0]=Dat(e),this.array[t+1]=Dat(n),this.array[t+2]=Dat(i),this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array),i=Prt(i,this.array),r=Prt(r,this.array)),this.array[t+0]=Dat(e),this.array[t+1]=Dat(n),this.array[t+2]=Dat(i),this.array[t+3]=Dat(r),this}}class Yat extends Uat{constructor(t,e,n){super(new Float32Array(t),e,n)}}class Kat extends Uat{constructor(t,e,n){super(new Float64Array(t),e,n)}}let Zat=0;const Qat=new Uot,Jat=new uat,$at=new cot,tst=new dot,est=new dot,nst=new cot;class ist extends vrt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Zat++}),this.uuid=wrt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Irt(t)?qat:Gat)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Lrt).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Qat.makeRotationFromQuaternion(t),this.applyMatrix4(Qat),this}rotateX(t){return Qat.makeRotationX(t),this.applyMatrix4(Qat),this}rotateY(t){return Qat.makeRotationY(t),this.applyMatrix4(Qat),this}rotateZ(t){return Qat.makeRotationZ(t),this.applyMatrix4(Qat),this}translate(t,e,n){return Qat.makeTranslation(t,e,n),this.applyMatrix4(Qat),this}scale(t,e,n){return Qat.makeScale(t,e,n),this.applyMatrix4(Qat),this}lookAt(t){return Jat.lookAt(t),Jat.updateMatrix(),this.applyMatrix4(Jat.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($at).negate(),this.translate($at.x,$at.y,$at.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Yat(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new dot);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new cot(-1/0,-1/0,-1/0),new cot(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const t=e[n];tst.setFromBufferAttribute(t),this.morphTargetsRelative?(nst.addVectors(this.boundingBox.min,tst.min),this.boundingBox.expandByPoint(nst),nst.addVectors(this.boundingBox.max,tst.max),this.boundingBox.expandByPoint(nst)):(this.boundingBox.expandByPoint(tst.min),this.boundingBox.expandByPoint(tst.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Pot);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new cot,1/0);if(t){const n=this.boundingSphere.center;if(tst.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const n=e[t];est.setFromBufferAttribute(n),this.morphTargetsRelative?(nst.addVectors(tst.min,est.min),tst.expandByPoint(nst),nst.addVectors(tst.max,est.max),tst.expandByPoint(nst)):(tst.expandByPoint(est.min),tst.expandByPoint(est.max))}tst.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)nst.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(nst));if(e)for(let r=0,o=e.length;r<o;r++){const o=e[r],a=this.morphTargetsRelative;for(let e=0,r=o.count;e<r;e++)nst.fromBufferAttribute(o,e),a&&($at.fromBufferAttribute(t,e),nst.add($at)),i=Math.max(i,n.distanceToSquared(nst))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,o=e.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Uat(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<a;M++)l[M]=new cot,c[M]=new cot;const u=new cot,h=new cot,d=new cot,f=new Rrt,p=new Rrt,g=new Rrt,m=new cot,v=new cot;function y(t,e,n){u.fromArray(i,3*t),h.fromArray(i,3*e),d.fromArray(i,3*n),f.fromArray(o,2*t),p.fromArray(o,2*e),g.fromArray(o,2*n),h.sub(u),d.sub(u),p.sub(f),g.sub(f);const r=1/(p.x*g.y-g.x*p.y);isFinite(r)&&(m.copy(h).multiplyScalar(g.y).addScaledVector(d,-p.y).multiplyScalar(r),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-g.x).multiplyScalar(r),l[t].add(m),l[e].add(m),l[n].add(m),c[t].add(v),c[e].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let M=0,T=b.length;M<T;++M){const t=b[M],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)y(n[i+0],n[i+1],n[i+2])}const _=new cot,x=new cot,w=new cot,S=new cot;function E(t){w.fromArray(r,3*t),S.copy(w);const e=l[t];_.copy(e),_.sub(w.multiplyScalar(w.dot(e))).normalize(),x.crossVectors(S,e);const n=x.dot(c[t])<0?-1:1;s[4*t]=_.x,s[4*t+1]=_.y,s[4*t+2]=_.z,s[4*t+3]=n}for(let M=0,T=b.length;M<T;++M){const t=b[M],e=t.start;for(let i=e,r=e+t.count;i<r;i+=3)E(n[i+0]),E(n[i+1]),E(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Uat(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new cot,r=new cot,o=new cot,a=new cot,s=new cot,l=new cot,c=new cot,u=new cot;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,f),o.fromBufferAttribute(e,p),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)nst.fromBufferAttribute(t,e),nst.normalize(),t.setXYZ(e,nst.x,nst.y,nst.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,o=new n.constructor(e.length*i);let a=0,s=0;for(let l=0,c=e.length;l<c;l++){a=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(let t=0;t<i;t++)o[s++]=n[a++]}return new Uat(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ist,n=this.index.array,i=this.attributes;for(const a in i){const r=t(i[a],n);e.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],o=r[a];for(let e=0,r=o.length;e<r;e++){const r=t(o[e],n);i.push(r)}e.morphAttributes[a]=i}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const t=o[a];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const s in n){const e=n[s];t.data.attributes[s]=e.toJSON(t.data)}const i={};let r=!1;for(const s in this.morphAttributes){const e=this.morphAttributes[s],n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];n.push(r.toJSON(t.data))}n.length>0&&(i[s]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const t=i[l];this.setAttribute(l,t.clone(e))}const r=t.morphAttributes;for(const l in r){const t=[],n=r[l];for(let i=0,r=n.length;i<r;i++)t.push(n[i].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,c=o.length;l<c;l++){const t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const rst=new Uot,ost=new Fot,ast=new Pot,sst=new cot,lst=new cot,cst=new cot,ust=new cot,hst=new cot,dst=new cot,fst=new Rrt,pst=new Rrt,gst=new Rrt,mst=new cot,vst=new cot,yst=new cot,bst=new cot,_st=new cot;class xst extends uat{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ist,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oat;super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const a=this.morphTargetInfluences;if(r&&a){dst.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],s=r[n];0!==i&&(hst.fromBufferAttribute(s,t),o?dst.addScaledVector(hst,i):dst.addScaledVector(hst.sub(e),i))}e.add(dst)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),ast.copy(n.boundingSphere),ast.applyMatrix4(r),ost.copy(t.ray).recast(t.near),!1===ast.containsPoint(ost.origin)){if(null===ost.intersectSphere(ast,sst))return;if(ost.origin.distanceToSquared(sst)>(t.far-t.near)**2)return}rst.copy(r).invert(),ost.copy(t.ray).applyMatrix4(rst),null!==n.boundingBox&&!1===ost.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,ost)}}_computeIntersections(t,e,n){let i;const r=this.geometry,o=this.material,a=r.index,s=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const r=h[f],s=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3){i=wst(this,s,t,n,l,c,u,a.getX(o),a.getX(o+1),a.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);r<s;r+=3){i=wst(this,o,t,n,l,c,u,a.getX(r),a.getX(r+1),a.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}else if(void 0!==s)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const r=h[f],a=o[r.materialIndex];for(let o=Math.max(r.start,d.start),h=Math.min(s.count,Math.min(r.start+r.count,d.start+d.count));o<h;o+=3){i=wst(this,a,t,n,l,c,u,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);r<a;r+=3){i=wst(this,o,t,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}}}function wst(t,e,n,i,r,o,a,s,l,c){t.getVertexPosition(s,lst),t.getVertexPosition(l,cst),t.getVertexPosition(c,ust);const u=function(t,e,n,i,r,o,a,s){let l;if(l=e.side===net?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,e.side===eet,s),null===l)return null;_st.copy(s),_st.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(_st);return c<n.near||c>n.far?null:{distance:c,point:_st.clone(),object:t}}(t,e,n,i,lst,cst,ust,bst);if(u){r&&(fst.fromBufferAttribute(r,s),pst.fromBufferAttribute(r,l),gst.fromBufferAttribute(r,c),u.uv=wat.getInterpolation(bst,lst,cst,ust,fst,pst,gst,new Rrt)),o&&(fst.fromBufferAttribute(o,s),pst.fromBufferAttribute(o,l),gst.fromBufferAttribute(o,c),u.uv1=wat.getInterpolation(bst,lst,cst,ust,fst,pst,gst,new Rrt),u.uv2=u.uv1),a&&(mst.fromBufferAttribute(a,s),vst.fromBufferAttribute(a,l),yst.fromBufferAttribute(a,c),u.normal=wat.getInterpolation(bst,lst,cst,ust,mst,vst,yst,new cot),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const t={a:s,b:l,c:c,normal:new cot,materialIndex:0};wat.getNormal(lst,cst,ust,t.normal),u.face=t}return u}class Sst extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function f(t,e,n,i,r,o,f,p,g,m,v){const y=o/g,b=f/m,_=o/2,x=f/2,w=p/2,S=g+1,E=m+1;let M=0,T=0;const k=new cot;for(let a=0;a<E;a++){const o=a*b-x;for(let s=0;s<S;s++){const h=s*y-_;k[t]=h*i,k[e]=o*r,k[n]=w,l.push(k.x,k.y,k.z),k[t]=0,k[e]=0,k[n]=p>0?1:-1,c.push(k.x,k.y,k.z),u.push(s/g),u.push(1-a/m),M+=1}}for(let a=0;a<m;a++)for(let t=0;t<g;t++){const e=h+t+S*a,n=h+t+S*(a+1),i=h+(t+1)+S*(a+1),r=h+(t+1)+S*a;s.push(e,n,r),s.push(n,i,r),T+=6}a.addGroup(d,T,v),d+=T,h+=M}f("z","y","x",-1,-1,n,e,t,o,r,0),f("z","y","x",1,-1,n,e,-t,o,r,1),f("x","z","y",1,1,t,n,e,i,o,2),f("x","z","y",1,-1,t,n,-e,i,o,3),f("x","y","z",1,-1,t,e,n,i,r,4),f("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new Yat(l,3)),this.setAttribute("normal",new Yat(c,3)),this.setAttribute("uv",new Yat(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Sst(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Est(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Mst(t){const e={};for(let n=0;n<t.length;n++){const i=Est(t[n]);for(const t in i)e[t]=i[t]}return e}function Tst(t){return null===t.getRenderTarget()?t.outputColorSpace:Oit}const kst={clone:Est,merge:Mst};class Cst extends Eat{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Est(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Ast extends uat{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Uot,this.projectionMatrix=new Uot,this.projectionMatrixInverse=new Uot,this.coordinateSystem=grt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Pst extends Ast{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*xrt*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*_rt*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*xrt*Math.atan(Math.tan(.5*_rt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*_rt*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/t,e-=o.offsetY*n/a,i*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Ost=-90;class Rst extends uat{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const i=new Pst(Ost,1,t,e);i.layers=this.layers,this.add(i);const r=new Pst(Ost,1,t,e);r.layers=this.layers,this.add(r);const o=new Pst(Ost,1,t,e);o.layers=this.layers,this.add(o);const a=new Pst(Ost,1,t,e);a.layers=this.layers,this.add(a);const s=new Pst(Ost,1,t,e);s.layers=this.layers,this.add(s);const l=new Pst(Ost,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,i,r,o,a,s]=e;for(const l of e)this.remove(l);if(t===grt)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(t!==mrt)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of e)this.add(l),l.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[i,r,o,a,s,l]=this.children,c=t.getRenderTarget(),u=t.toneMapping,h=t.xr.enabled;t.toneMapping=Bet,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=u,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Lst extends tot{constructor(t,e,n,i,r,o,a,s,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:Xet,n,i,r,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Dst extends not{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];void 0!==e.encoding&&(Brt("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===Eit?Pit:Ait),this.texture=new Lst(i,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:ant}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Sst(5,5,5),a=new Cst({name:"CubemapFromEquirect",uniforms:Est(n),vertexShader:i,fragmentShader:r,side:net,blending:oet});a.uniforms.tEquirect.value=e;const s=new xst(o,a),l=e.minFilter;e.minFilter===cnt&&(e.minFilter=ant);return new Rst(1,10,this).update(t,s),e.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,i);t.setRenderTarget(r)}}const Ist=new cot,Nst=new cot,zst=new Lrt;class Fst{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot(1,0,0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Ist.subVectors(n,e).cross(Nst.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(Ist),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||zst.getNormalMatrix(t),i=this.coplanarPoint(Ist).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ust=new Pot,Bst=new cot;class jst{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fst,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fst,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fst,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Fst,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Fst,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Fst;this.planes=[t,e,n,i,r,o]}set(t,e,n,i,r,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:grt;const n=this.planes,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],g=i[11],m=i[12],v=i[13],y=i[14],b=i[15];if(n[0].setComponents(s-r,h-l,g-d,b-m).normalize(),n[1].setComponents(s+r,h+l,g+d,b+m).normalize(),n[2].setComponents(s+o,h+c,g+f,b+v).normalize(),n[3].setComponents(s-o,h-c,g-f,b-v).normalize(),n[4].setComponents(s-a,h-u,g-p,b-y).normalize(),e===grt)n[5].setComponents(s+a,h+u,g+p,b+y).normalize();else{if(e!==mrt)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,u,p,y).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Ust.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Ust.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Ust)}intersectsSprite(t){return Ust.center.set(0,0,0),Ust.radius=.7071067811865476,Ust.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ust)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Bst.x=i.normal.x>0?t.max.x:t.min.x,Bst.y=i.normal.y>0?t.max.y:t.min.y,Bst.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Bst)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Hst(){let t=null,e=!1,n=null,i=null;function r(e,o){n(e,o),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Vst(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=i.get(e);void 0===o?i.set(e,function(e,i){const r=e.array,o=e.usage,a=t.createBuffer();let s;if(t.bindBuffer(i,a),t.bufferData(i,r,o),e.onUploadCallback(),r instanceof Float32Array)s=t.FLOAT;else if(r instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=t.HALF_FLOAT}else s=t.UNSIGNED_SHORT;else if(r instanceof Int16Array)s=t.SHORT;else if(r instanceof Uint32Array)s=t.UNSIGNED_INT;else if(r instanceof Int32Array)s=t.INT;else if(r instanceof Int8Array)s=t.BYTE;else if(r instanceof Uint8Array)s=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);s=t.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):o.version<e.version&&(!function(e,i,r){const o=i.array,a=i.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,o):(n?t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(o.buffer,e,r),o.version=e.version)}}}class Gst extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,o=e/2,a=Math.floor(n),s=Math.floor(i),l=a+1,c=s+1,u=t/a,h=e/s,d=[],f=[],p=[],g=[];for(let m=0;m<c;m++){const t=m*h-o;for(let e=0;e<l;e++){const n=e*u-r;f.push(n,-t,0),p.push(0,0,1),g.push(e/a),g.push(1-m/s)}}for(let m=0;m<s;m++)for(let t=0;t<a;t++){const e=t+l*m,n=t+l*(m+1),i=t+1+l*(m+1),r=t+1+l*m;d.push(e,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new Yat(f,3)),this.setAttribute("normal",new Yat(p,3)),this.setAttribute("uv",new Yat(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Gst(t.width,t.height,t.widthSegments,t.heightSegments)}}const Wst={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},qst={common:{diffuse:{value:new Aat(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Lrt},alphaMap:{value:null},alphaMapTransform:{value:new Lrt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Lrt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Lrt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Lrt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Lrt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Lrt},normalScale:{value:new Rrt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Lrt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Lrt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Lrt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Lrt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Aat(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Aat(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Lrt},alphaTest:{value:0},uvTransform:{value:new Lrt}},sprite:{diffuse:{value:new Aat(16777215)},opacity:{value:1},center:{value:new Rrt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Lrt},alphaMap:{value:null},alphaMapTransform:{value:new Lrt},alphaTest:{value:0}}},Xst={basic:{uniforms:Mst([qst.common,qst.specularmap,qst.envmap,qst.aomap,qst.lightmap,qst.fog]),vertexShader:Wst.meshbasic_vert,fragmentShader:Wst.meshbasic_frag},lambert:{uniforms:Mst([qst.common,qst.specularmap,qst.envmap,qst.aomap,qst.lightmap,qst.emissivemap,qst.bumpmap,qst.normalmap,qst.displacementmap,qst.fog,qst.lights,{emissive:{value:new Aat(0)}}]),vertexShader:Wst.meshlambert_vert,fragmentShader:Wst.meshlambert_frag},phong:{uniforms:Mst([qst.common,qst.specularmap,qst.envmap,qst.aomap,qst.lightmap,qst.emissivemap,qst.bumpmap,qst.normalmap,qst.displacementmap,qst.fog,qst.lights,{emissive:{value:new Aat(0)},specular:{value:new Aat(1118481)},shininess:{value:30}}]),vertexShader:Wst.meshphong_vert,fragmentShader:Wst.meshphong_frag},standard:{uniforms:Mst([qst.common,qst.envmap,qst.aomap,qst.lightmap,qst.emissivemap,qst.bumpmap,qst.normalmap,qst.displacementmap,qst.roughnessmap,qst.metalnessmap,qst.fog,qst.lights,{emissive:{value:new Aat(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wst.meshphysical_vert,fragmentShader:Wst.meshphysical_frag},toon:{uniforms:Mst([qst.common,qst.aomap,qst.lightmap,qst.emissivemap,qst.bumpmap,qst.normalmap,qst.displacementmap,qst.gradientmap,qst.fog,qst.lights,{emissive:{value:new Aat(0)}}]),vertexShader:Wst.meshtoon_vert,fragmentShader:Wst.meshtoon_frag},matcap:{uniforms:Mst([qst.common,qst.bumpmap,qst.normalmap,qst.displacementmap,qst.fog,{matcap:{value:null}}]),vertexShader:Wst.meshmatcap_vert,fragmentShader:Wst.meshmatcap_frag},points:{uniforms:Mst([qst.points,qst.fog]),vertexShader:Wst.points_vert,fragmentShader:Wst.points_frag},dashed:{uniforms:Mst([qst.common,qst.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wst.linedashed_vert,fragmentShader:Wst.linedashed_frag},depth:{uniforms:Mst([qst.common,qst.displacementmap]),vertexShader:Wst.depth_vert,fragmentShader:Wst.depth_frag},normal:{uniforms:Mst([qst.common,qst.bumpmap,qst.normalmap,qst.displacementmap,{opacity:{value:1}}]),vertexShader:Wst.meshnormal_vert,fragmentShader:Wst.meshnormal_frag},sprite:{uniforms:Mst([qst.sprite,qst.fog]),vertexShader:Wst.sprite_vert,fragmentShader:Wst.sprite_frag},background:{uniforms:{uvTransform:{value:new Lrt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wst.background_vert,fragmentShader:Wst.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Wst.backgroundCube_vert,fragmentShader:Wst.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wst.cube_vert,fragmentShader:Wst.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wst.equirect_vert,fragmentShader:Wst.equirect_frag},distanceRGBA:{uniforms:Mst([qst.common,qst.displacementmap,{referencePosition:{value:new cot},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wst.distanceRGBA_vert,fragmentShader:Wst.distanceRGBA_frag},shadow:{uniforms:Mst([qst.lights,qst.fog,{color:{value:new Aat(0)},opacity:{value:1}}]),vertexShader:Wst.shadow_vert,fragmentShader:Wst.shadow_frag}};Xst.physical={uniforms:Mst([Xst.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Lrt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Lrt},clearcoatNormalScale:{value:new Rrt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Lrt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Lrt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Lrt},sheen:{value:0},sheenColor:{value:new Aat(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Lrt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Lrt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Lrt},transmissionSamplerSize:{value:new Rrt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Lrt},attenuationDistance:{value:0},attenuationColor:{value:new Aat(0)},specularColor:{value:new Aat(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Lrt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Lrt},anisotropyVector:{value:new Rrt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Lrt}}]),vertexShader:Wst.meshphysical_vert,fragmentShader:Wst.meshphysical_frag};const Yst={r:0,b:0,g:0};function Kst(t,e,n,i,r,o,a){const s=new Aat(0);let l,c,u=!0===o?0:1,h=null,d=0,f=null;function p(e,n){e.getRGB(Yst,Tst(t)),i.buffers.color.setClear(Yst.r,Yst.g,Yst.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),u=e,p(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,p(s,u)},render:function(o,g){let m=!1,v=!0===g.isScene?g.background:null;if(v&&v.isTexture){v=(g.backgroundBlurriness>0?n:e).get(v)}switch(null===v?p(s,u):v&&v.isColor&&(p(v,1),m=!0),t.xr.getEnvironmentBlendMode()){case"opaque":m=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,a),m=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,a),m=!0}(t.autoClear||m)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),v&&(v.isCubeTexture||v.mapping===Qet)?(void 0===c&&(c=new xst(new Sst(1,1,1),new Cst({name:"BackgroundCubeMaterial",uniforms:Est(Xst.backgroundCube.uniforms),vertexShader:Xst.backgroundCube.vertexShader,fragmentShader:Xst.backgroundCube.fragmentShader,side:net,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=v.colorSpace!==Pit,h===v&&d===v.version&&f===t.toneMapping||(c.material.needsUpdate=!0,h=v,d=v.version,f=t.toneMapping),c.layers.enableAll(),o.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new xst(new Gst(2,2),new Cst({name:"BackgroundMaterial",uniforms:Est(Xst.background.uniforms),vertexShader:Xst.background.vertexShader,fragmentShader:Xst.background.fragmentShader,side:eet,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=v.colorSpace!==Pit,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&d===v.version&&f===t.toneMapping||(l.material.needsUpdate=!0,h=v,d=v.version,f=t.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null))}}}function Zst(t,e,n,i){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},l=f(null);let c=l,u=!1;function h(e){return i.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function d(e){return i.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function f(t){const e=[],n=[],i=[];for(let o=0;o<r;o++)e[o]=0,n[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function p(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function g(t){m(t,0)}function m(n,r){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function v(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function y(e,n,i,r,o,a,s){!0===s?t.vertexAttribIPointer(e,n,i,o,a):t.vertexAttribPointer(e,n,i,r,o,a)}function b(){_(),u=!0,c!==l&&(c=l,h(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,b,_){let x=!1;if(a){const e=function(e,n,r){const a=!0===r.wireframe;let l=s[e.id];void 0===l&&(l={},s[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=f(i.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),c[a]=u);return u}(b,d,l);c!==e&&(c=e,h(c.object)),x=function(t,e,n,i){const r=c.attributes,o=e.attributes;let a=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){const e=r[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;a++}}return c.attributesNum!==a||c.index!==i}(r,b,d,_),x&&function(t,e,n,i){const r={},o=e.attributes;let a=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){let e=o[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),r[l]=n,a++}}c.attributes=r,c.attributesNum=a,c.index=i}(r,b,d,_)}else{const t=!0===l.wireframe;c.geometry===b.id&&c.program===d.id&&c.wireframe===t||(c.geometry=b.id,c.program=d.id,c.wireframe=t,x=!0)}null!==_&&n.update(_,t.ELEMENT_ARRAY_BUFFER),(x||u)&&(u=!1,function(r,o,a,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;p();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const e in c){const o=c[e];if(o.location>=0){let a=l[e];if(void 0===a&&("instanceMatrix"===e&&r.instanceMatrix&&(a=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(a=r.instanceColor)),void 0!==a){const e=a.normalized,l=a.itemSize,c=n.get(a);if(void 0===c)continue;const u=c.buffer,h=c.type,d=c.bytesPerElement,f=!0===i.isWebGL2&&(h===t.INT||h===t.UNSIGNED_INT||a.gpuType===gnt);if(a.isInterleavedBufferAttribute){const n=a.data,i=n.stride,c=a.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<o.locationSize;t++)m(o.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<o.locationSize;t++)g(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)y(o.location+t,l/o.locationSize,h,e,i*d,(c+l/o.locationSize*t)*d,f)}else{if(a.isInstancedBufferAttribute){for(let t=0;t<o.locationSize;t++)m(o.location+t,a.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let t=0;t<o.locationSize;t++)g(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)y(o.location+t,l/o.locationSize,h,e,l*d,l/o.locationSize*t*d,f)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(o.location,n);break;case 3:t.vertexAttrib3fv(o.location,n);break;case 4:t.vertexAttrib4fv(o.location,n);break;default:t.vertexAttrib1fv(o.location,n)}}}}v()}(r,l,d,b),null!==_&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)d(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const n in e){const t=e[n];for(const e in t)d(t[e].object),delete t[e];delete e[n]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)d(i[t].object),delete i[t];delete n[t.id]}},initAttributes:p,enableAttribute:g,disableUnusedAttributes:v}}function Qst(t,e,n,i){const r=i.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,i){t.drawArrays(o,e,i),n.update(i,o,1)},this.renderInstances=function(i,a,s){if(0===s)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,i,a,s),n.update(a,o,s)}}function Jst(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:g,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?t.getParameter(t.MAX_SAMPLES):0}}function $st(t){const e=this;let n=null,i=0,r=!1,o=!1;const a=new Fst,s=new Lrt,l={value:null,needsUpdate:!1};function c(t,n,i,r){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const e=i+4*o,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=i;n!==o;++n,l+=4)a.copy(t[n]).applyMatrix4(r,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==i||r;return r=e,i=t.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=c(t,e,0)},this.setState=function(a,s,u){const h=a.clippingPlanes,d=a.clipIntersection,f=a.clipShadows,p=t.get(a);if(!r||null===h||0===h.length||o&&!f)o?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);e.numPlanes=i,e.numIntersection=0}();else{const t=o?0:i,e=4*t;let r=p.clippingState||null;l.value=r,r=c(h,s,e,u);for(let i=0;i!==e;++i)r[i]=n[i];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function tlt(t){let e=new WeakMap;function n(t,e){return e===Ket?t.mapping=Xet:e===Zet&&(t.mapping=Yet),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(o===Ket||o===Zet){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const o=r.image;if(o&&o.height>0){const a=new Dst(o.height/2);return a.fromEquirectangularTexture(t,r),e.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}class elt extends Ast{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,o=r+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const nlt=[.125,.215,.35,.446,.526,.582],ilt=20,rlt=new elt,olt=new Aat;let alt=null;const slt=(1+Math.sqrt(5))/2,llt=1/slt,clt=[new cot(1,1,1),new cot(-1,1,1),new cot(1,1,-1),new cot(-1,1,-1),new cot(0,slt,llt),new cot(0,slt,-llt),new cot(llt,0,slt),new cot(-llt,0,slt),new cot(slt,llt,0),new cot(-slt,llt,0)];class ult{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;alt=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}fromCubemap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=plt(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=flt(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(alt),t.scissorTest=!1,dlt(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Xet||t.mapping===Yet?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),alt=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:ant,minFilter:ant,generateMipmaps:!1,type:ynt,format:Snt,colorSpace:Oit,depthBuffer:!1},i=hlt(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=hlt(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const o=t-4+1+nlt.length;for(let a=0;a<o;a++){const o=Math.pow(2,r);n.push(o);let s=1/o;a>t-4?s=nlt[a-t+4-1]:0===a&&(s=0),i.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,g=2,m=1,v=new Float32Array(p*f*d),y=new Float32Array(g*f*d),b=new Float32Array(m*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(i,p*f*t),y.set(h,g*f*t);const r=[t,t,t,t,t,t];b.set(r,m*f*t)}const _=new ist;_.setAttribute("position",new Uat(v,p)),_.setAttribute("uv",new Uat(y,g)),_.setAttribute("faceIndex",new Uat(b,m)),e.push(_),r>4&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array(ilt),r=new cot(0,1,0),o=new Cst({name:"SphericalGaussianBlur",defines:{n:ilt,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:oet,depthTest:!1,depthWrite:!1});return o}(i,t,e)}return i}_compileMaterial(t){const e=new xst(this._lodPlanes[0],t);this._renderer.compile(e,rlt)}_sceneToCubeUV(t,e,n,i){const r=new Pst(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(olt),s.toneMapping=Bet,s.autoClear=!1;const u=new Oat({name:"PMREM.Background",side:net,depthWrite:!1,depthTest:!1}),h=new xst(new Sst,u);let d=!1;const f=t.background;f?f.isColor&&(u.color.copy(f),t.background=null,d=!0):(u.color.copy(olt),d=!0);for(let p=0;p<6;p++){const e=p%3;0===e?(r.up.set(0,o[p],0),r.lookAt(a[p],0,0)):1===e?(r.up.set(0,0,o[p]),r.lookAt(0,a[p],0)):(r.up.set(0,o[p],0),r.lookAt(0,0,a[p]));const n=this._cubeSize;dlt(i,e*n,p>2?n:0,n,n),s.setRenderTarget(i),d&&s.render(h,r),s.render(t,r)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=l,t.background=f}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===Xet||t.mapping===Yet;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=plt()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=flt());const r=i?this._cubemapMaterial:this._equirectMaterial,o=new xst(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const a=this._cubeSize;dlt(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,rlt)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const e=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=clt[(i-1)%clt.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,i,"latitudinal",r),this._halfBlur(o,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new xst(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,f=r/d,p=isFinite(r)?1+Math.floor(3*f):ilt;p>ilt&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(ilt));const g=[];let m=0;for(let b=0;b<ilt;++b){const t=b/f,e=Math.exp(-t*t/2);g.push(e),0===b?m+=e:b<p&&(m+=2*e)}for(let b=0;b<g.length;b++)g[b]=g[b]/m;u.envMap.value=t.texture,u.samples.value=p,u.weights.value=g,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[i];dlt(e,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(e),s.render(c,rlt)}}function hlt(t,e,n){const i=new not(t,e,n);return i.texture.mapping=Qet,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function dlt(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function flt(){return new Cst({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:oet,depthTest:!1,depthWrite:!1})}function plt(){return new Cst({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:oet,depthTest:!1,depthWrite:!1})}function glt(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping,a=o===Ket||o===Zet,s=o===Xet||o===Yet;if(a||s){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new ult(t)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const o=r.image;if(a&&o&&o.height>0||s&&o&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(o)){null===n&&(n=new ult(t));const o=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,o),r.addEventListener("dispose",i),o.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function mlt(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function vlt(t,e,n,i){const r={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const n in s.attributes)e.remove(s.attributes[n]);for(const n in s.morphAttributes){const t=s.morphAttributes[n];for(let n=0,i=t.length;n<i;n++)e.remove(t[n])}s.removeEventListener("dispose",a),delete r[s.id];const l=o.get(s);l&&(e.remove(l),o.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],i=t.index,r=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],o=t[e+2];n.push(i,r,r,o,o,i)}}else{const t=r.array;a=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const s=new(Irt(n)?qat:Gat)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",a),r[e.id]=!0,n.memory.geometries++),e},update:function(n){const i=n.attributes;for(const o in i)e.update(i[o],t.ARRAY_BUFFER);const r=n.morphAttributes;for(const o in r){const n=r[o];for(let i=0,r=n.length;i<r;i++)e.update(n[i],t.ARRAY_BUFFER)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function ylt(t,e,n,i){const r=i.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,i){t.drawElements(o,i,a,e*s),n.update(i,o,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,i*s,c),n.update(l,o,c)}}function blt(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,i,r){switch(e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function _lt(t,e){return t[0]-e[0]}function xlt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function wlt(t,e,n){const i={},r=new Float32Array(8),o=new WeakMap,a=new eot,s=[];for(let l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==d?d.length:0;let p=o.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,b=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===b&&(S=3);let E=c.attributes.position.count*S,M=1;E>e.maxTextureSize&&(M=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const T=new Float32Array(E*M*4*f),k=new iot(T,E,M,f);k.type=vnt,k.needsUpdate=!0;const C=4*S;for(let P=0;P<f;P++){const O=_[P],R=x[P],L=w[P],D=E*M*4*P;for(let I=0;I<O.count;I++){const N=I*C;!0===v&&(a.fromBufferAttribute(O,I),T[D+N+0]=a.x,T[D+N+1]=a.y,T[D+N+2]=a.z,T[D+N+3]=0),!0===y&&(a.fromBufferAttribute(R,I),T[D+N+4]=a.x,T[D+N+5]=a.y,T[D+N+6]=a.z,T[D+N+7]=0),!0===b&&(a.fromBufferAttribute(L,I),T[D+N+8]=a.x,T[D+N+9]=a.y,T[D+N+10]=a.z,T[D+N+11]=4===L.itemSize?a.w:1)}}function A(){k.dispose(),o.delete(c),c.removeEventListener("dispose",A)}p={count:f,texture:k,size:new Rrt(E,M)},o.set(c,p),c.addEventListener("dispose",A)}let g=0;for(let z=0;z<h.length;z++)g+=h[z];const m=c.morphTargetsRelative?1:1-g;u.getUniforms().setValue(t,"morphTargetBaseInfluence",m),u.getUniforms().setValue(t,"morphTargetInfluences",h),u.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{const F=void 0===h?0:h.length;let U=i[c.id];if(void 0===U||U.length!==F){U=[];for(let G=0;G<F;G++)U[G]=[G,0];i[c.id]=U}for(let W=0;W<F;W++){const q=U[W];q[0]=W,q[1]=h[W]}U.sort(xlt);for(let X=0;X<8;X++)X<F&&U[X][1]?(s[X][0]=U[X][0],s[X][1]=U[X][1]):(s[X][0]=Number.MAX_SAFE_INTEGER,s[X][1]=0);s.sort(_lt);const B=c.morphAttributes.position,j=c.morphAttributes.normal;let H=0;for(let Y=0;Y<8;Y++){const K=s[Y],Z=K[0],Q=K[1];Z!==Number.MAX_SAFE_INTEGER&&Q?(B&&c.getAttribute("morphTarget"+Y)!==B[Z]&&c.setAttribute("morphTarget"+Y,B[Z]),j&&c.getAttribute("morphNormal"+Y)!==j[Z]&&c.setAttribute("morphNormal"+Y,j[Z]),r[Y]=Q,H+=Q):(B&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),j&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),r[Y]=0)}const V=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(t,"morphTargetBaseInfluence",V),u.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function Slt(t,e,n,i){let r=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(a){const s=i.render.frame,l=a.geometry,c=e.get(a,l);if(r.get(c)!==s&&(e.update(c),r.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),r.get(a)!==s&&(n.update(a.instanceMatrix,t.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,t.ARRAY_BUFFER),r.set(a,s))),a.isSkinnedMesh){const t=a.skeleton;r.get(t)!==s&&(t.update(),r.set(t,s))}return c},dispose:function(){r=new WeakMap}}}const Elt=new tot,Mlt=new iot,Tlt=new oot,klt=new Lst,Clt=[],Alt=[],Plt=new Float32Array(16),Olt=new Float32Array(9),Rlt=new Float32Array(4);function Llt(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let o=Clt[r];if(void 0===o&&(o=new Float32Array(r),Clt[r]=o),0!==e){i.toArray(o,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(o,r)}return o}function Dlt(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ilt(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Nlt(t,e){let n=Alt[e];void 0===n&&(n=new Int32Array(e),Alt[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function zlt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Flt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Dlt(n,e))return;t.uniform2fv(this.addr,e),Ilt(n,e)}}function Ult(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Dlt(n,e))return;t.uniform3fv(this.addr,e),Ilt(n,e)}}function Blt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Dlt(n,e))return;t.uniform4fv(this.addr,e),Ilt(n,e)}}function jlt(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Dlt(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ilt(n,e)}else{if(Dlt(n,i))return;Rlt.set(i),t.uniformMatrix2fv(this.addr,!1,Rlt),Ilt(n,i)}}function Hlt(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Dlt(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ilt(n,e)}else{if(Dlt(n,i))return;Olt.set(i),t.uniformMatrix3fv(this.addr,!1,Olt),Ilt(n,i)}}function Vlt(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Dlt(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ilt(n,e)}else{if(Dlt(n,i))return;Plt.set(i),t.uniformMatrix4fv(this.addr,!1,Plt),Ilt(n,i)}}function Glt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Wlt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Dlt(n,e))return;t.uniform2iv(this.addr,e),Ilt(n,e)}}function qlt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Dlt(n,e))return;t.uniform3iv(this.addr,e),Ilt(n,e)}}function Xlt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Dlt(n,e))return;t.uniform4iv(this.addr,e),Ilt(n,e)}}function Ylt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Klt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Dlt(n,e))return;t.uniform2uiv(this.addr,e),Ilt(n,e)}}function Zlt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Dlt(n,e))return;t.uniform3uiv(this.addr,e),Ilt(n,e)}}function Qlt(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Dlt(n,e))return;t.uniform4uiv(this.addr,e),Ilt(n,e)}}function Jlt(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(e||Elt,r)}function $lt(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Tlt,r)}function tct(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||klt,r)}function ect(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Mlt,r)}function nct(t,e){t.uniform1fv(this.addr,e)}function ict(t,e){const n=Llt(e,this.size,2);t.uniform2fv(this.addr,n)}function rct(t,e){const n=Llt(e,this.size,3);t.uniform3fv(this.addr,n)}function oct(t,e){const n=Llt(e,this.size,4);t.uniform4fv(this.addr,n)}function act(t,e){const n=Llt(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function sct(t,e){const n=Llt(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function lct(t,e){const n=Llt(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function cct(t,e){t.uniform1iv(this.addr,e)}function uct(t,e){t.uniform2iv(this.addr,e)}function hct(t,e){t.uniform3iv(this.addr,e)}function dct(t,e){t.uniform4iv(this.addr,e)}function fct(t,e){t.uniform1uiv(this.addr,e)}function pct(t,e){t.uniform2uiv(this.addr,e)}function gct(t,e){t.uniform3uiv(this.addr,e)}function mct(t,e){t.uniform4uiv(this.addr,e)}function vct(t,e,n){const i=this.cache,r=e.length,o=Nlt(n,r);Dlt(i,o)||(t.uniform1iv(this.addr,o),Ilt(i,o));for(let a=0;a!==r;++a)n.setTexture2D(e[a]||Elt,o[a])}function yct(t,e,n){const i=this.cache,r=e.length,o=Nlt(n,r);Dlt(i,o)||(t.uniform1iv(this.addr,o),Ilt(i,o));for(let a=0;a!==r;++a)n.setTexture3D(e[a]||Tlt,o[a])}function bct(t,e,n){const i=this.cache,r=e.length,o=Nlt(n,r);Dlt(i,o)||(t.uniform1iv(this.addr,o),Ilt(i,o));for(let a=0;a!==r;++a)n.setTextureCube(e[a]||klt,o[a])}function _ct(t,e,n){const i=this.cache,r=e.length,o=Nlt(n,r);Dlt(i,o)||(t.uniform1iv(this.addr,o),Ilt(i,o));for(let a=0;a!==r;++a)n.setTexture2DArray(e[a]||Mlt,o[a])}class xct{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return zlt;case 35664:return Flt;case 35665:return Ult;case 35666:return Blt;case 35674:return jlt;case 35675:return Hlt;case 35676:return Vlt;case 5124:case 35670:return Glt;case 35667:case 35671:return Wlt;case 35668:case 35672:return qlt;case 35669:case 35673:return Xlt;case 5125:return Ylt;case 36294:return Klt;case 36295:return Zlt;case 36296:return Qlt;case 35678:case 36198:case 36298:case 36306:case 35682:return Jlt;case 35679:case 36299:case 36307:return $lt;case 35680:case 36300:case 36308:case 36293:return tct;case 36289:case 36303:case 36311:case 36292:return ect}}(e.type)}}class wct{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return nct;case 35664:return ict;case 35665:return rct;case 35666:return oct;case 35674:return act;case 35675:return sct;case 35676:return lct;case 5124:case 35670:return cct;case 35667:case 35671:return uct;case 35668:case 35672:return hct;case 35669:case 35673:return dct;case 5125:return fct;case 36294:return pct;case 36295:return gct;case 36296:return mct;case 35678:case 36198:case 36298:case 36306:case 35682:return vct;case 35679:case 36299:case 36307:return yct;case 35680:case 36300:case 36308:case 36293:return bct;case 36289:case 36303:case 36311:case 36292:return _ct}}(e.type)}}class Sct{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(t,e[o.id],n)}}}const Ect=/(\w+)(\])?(\[|\.)?/g;function Mct(t,e){t.seq.push(e),t.map[e.id]=e}function Tct(t,e,n){const i=t.name,r=i.length;for(Ect.lastIndex=0;;){const o=Ect.exec(i),a=Ect.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){Mct(n,void 0===c?new xct(s,t,e):new wct(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new Sct(s),Mct(n,t)),n=t}}}class kct{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);Tct(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,o=e.length;r!==o;++r){const o=e[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n}}function Cct(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let Act=0;function Pct(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const i=parseInt(o[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let a=r;a<o;a++){const t=a+1;i.push("".concat(t===e?">":" "," ").concat(t,": ").concat(n[a]))}return i.join("\n")}(t.getShaderSource(e),i)}return r}function Oct(t,e){const n=function(t){switch(t){case Oit:return["Linear","( value )"];case Pit:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Rct(t,e){let n;switch(e){case jet:n="Linear";break;case Het:n="Reinhard";break;case Vet:n="OptimizedCineon";break;case Get:n="ACESFilmic";break;case Wet:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Lct(t){return""!==t}function Dct(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ict(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Nct=/^[ \t]*#include +<([\w\d./]+)>/gm;function zct(t){return t.replace(Nct,Uct)}const Fct=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Uct(t,e){let n=Wst[e];if(void 0===n){const t=Fct.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=Wst[t],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return zct(n)}const Bct=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jct(t){return t.replace(Bct,Hct)}function Hct(t,e,n,i){let r="";for(let o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Vct(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Gct(t,e,n,i){const r=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Jtt?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===$tt?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===tet&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Xet:case Yet:e="ENVMAP_TYPE_CUBE";break;case Qet:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===Yet&&(e="ENVMAP_MODE_REFRACTION");return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case zet:e="ENVMAP_BLENDING_MULTIPLY";break;case Fet:e="ENVMAP_BLENDING_MIX";break;case Uet:e="ENVMAP_BLENDING_ADD"}return e}(n),d=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),f=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Lct).join("\n")}(n),p=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(o),g=r.createProgram();let m,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Lct).join("\n"),m.length>0&&(m+="\n"),v=[f,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Lct).join("\n"),v.length>0&&(v+="\n")):(m=[Vct(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Lct).join("\n"),v=[f,Vct(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Bet?"#define TONE_MAPPING":"",n.toneMapping!==Bet?Wst.tonemapping_pars_fragment:"",n.toneMapping!==Bet?Rct("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Wst.colorspace_pars_fragment,Oct("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Lct).join("\n")),a=zct(a),a=Dct(a,n),a=Ict(a,n),s=zct(s),s=Dct(s,n),s=Ict(s,n),a=jct(a),s=jct(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#define varying in",n.glslVersion===frt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===frt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+m+a,_=y+v+s,x=Cct(r,r.VERTEX_SHADER,b),w=Cct(r,r.FRAGMENT_SHADER,_);if(r.attachShader(g,x),r.attachShader(g,w),void 0!==n.index0AttributeName?r.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),t.debug.checkShaderErrors){const e=r.getProgramInfoLog(g).trim(),n=r.getShaderInfoLog(x).trim(),i=r.getShaderInfoLog(w).trim();let o=!0,a=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(o=!1,"function"===typeof t.debug.onShaderError)t.debug.onShaderError(r,g,x,w);else{const t=Pct(r,x,"vertex"),n=Pct(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==i||(a=!1);a&&(this.diagnostics={runnable:o,programLog:e,vertexShader:{log:n,prefix:m},fragmentShader:{log:i,prefix:v}})}let S,E;return r.deleteShader(x),r.deleteShader(w),this.getUniforms=function(){return void 0===S&&(S=new kct(r,g)),S},this.getAttributes=function(){return void 0===E&&(E=function(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),o=i.name;let a=1;i.type===t.FLOAT_MAT2&&(a=2),i.type===t.FLOAT_MAT3&&(a=3),i.type===t.FLOAT_MAT4&&(a=4),n[o]={type:i.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}(r,g)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Act++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=x,this.fragmentShader=w,this}let Wct=0;class qct{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Xct(t),e.set(t,n)),n}}class Xct{constructor(t){this.id=Wct++,this.code=t,this.usedTimes=0}}function Yct(t,e,n,i,r,o,a){const s=new Zot,l=new qct,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(t){return 0===t?"uv":"uv".concat(t)}return{getParameters:function(o,s,c,m,v){const y=m.fog,b=v.geometry,_=o.isMeshStandardMaterial?m.environment:null,x=(o.isMeshStandardMaterial?n:e).get(o.envMap||_),w=x&&x.mapping===Qet?x.image.height:null,S=p[o.type];null!==o.precision&&(f=r.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const E=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,M=void 0!==E?E.length:0;let T,k,C,A,P=0;if(void 0!==b.morphAttributes.position&&(P=1),void 0!==b.morphAttributes.normal&&(P=2),void 0!==b.morphAttributes.color&&(P=3),S){const t=Xst[S];T=t.vertexShader,k=t.fragmentShader}else T=o.vertexShader,k=o.fragmentShader,l.update(o),C=l.getVertexShaderID(o),A=l.getFragmentShaderID(o);const O=t.getRenderTarget(),R=!0===v.isInstancedMesh,L=!!o.map,D=!!o.matcap,I=!!x,N=!!o.aoMap,z=!!o.lightMap,F=!!o.bumpMap,U=!!o.normalMap,B=!!o.displacementMap,j=!!o.emissiveMap,H=!!o.metalnessMap,V=!!o.roughnessMap,G=o.anisotropy>0,W=o.clearcoat>0,q=o.iridescence>0,X=o.sheen>0,Y=o.transmission>0,K=G&&!!o.anisotropyMap,Z=W&&!!o.clearcoatMap,Q=W&&!!o.clearcoatNormalMap,J=W&&!!o.clearcoatRoughnessMap,$=q&&!!o.iridescenceMap,tt=q&&!!o.iridescenceThicknessMap,et=X&&!!o.sheenColorMap,nt=X&&!!o.sheenRoughnessMap,it=!!o.specularMap,rt=!!o.specularColorMap,ot=!!o.specularIntensityMap,at=Y&&!!o.transmissionMap,st=Y&&!!o.thicknessMap,lt=!!o.gradientMap,ct=!!o.alphaMap,ut=o.alphaTest>0,ht=!!o.alphaHash,dt=!!o.extensions,ft=!!b.attributes.uv1,pt=!!b.attributes.uv2,gt=!!b.attributes.uv3;return{isWebGL2:u,shaderID:S,shaderType:o.type,shaderName:o.name,vertexShader:T,fragmentShader:k,defines:o.defines,customVertexShaderID:C,customFragmentShaderID:A,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,instancing:R,instancingColor:R&&null!==v.instanceColor,supportsVertexTextures:d,outputColorSpace:null===O?t.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:Oit,map:L,matcap:D,envMap:I,envMapMode:I&&x.mapping,envMapCubeUVHeight:w,aoMap:N,lightMap:z,bumpMap:F,normalMap:U,displacementMap:d&&B,emissiveMap:j,normalMapObjectSpace:U&&o.normalMapType===Cit,normalMapTangentSpace:U&&o.normalMapType===kit,metalnessMap:H,roughnessMap:V,anisotropy:G,anisotropyMap:K,clearcoat:W,clearcoatMap:Z,clearcoatNormalMap:Q,clearcoatRoughnessMap:J,iridescence:q,iridescenceMap:$,iridescenceThicknessMap:tt,sheen:X,sheenColorMap:et,sheenRoughnessMap:nt,specularMap:it,specularColorMap:rt,specularIntensityMap:ot,transmission:Y,transmissionMap:at,thicknessMap:st,gradientMap:lt,opaque:!1===o.transparent&&o.blending===aet,alphaMap:ct,alphaTest:ut,alphaHash:ht,combine:o.combine,mapUv:L&&g(o.map.channel),aoMapUv:N&&g(o.aoMap.channel),lightMapUv:z&&g(o.lightMap.channel),bumpMapUv:F&&g(o.bumpMap.channel),normalMapUv:U&&g(o.normalMap.channel),displacementMapUv:B&&g(o.displacementMap.channel),emissiveMapUv:j&&g(o.emissiveMap.channel),metalnessMapUv:H&&g(o.metalnessMap.channel),roughnessMapUv:V&&g(o.roughnessMap.channel),anisotropyMapUv:K&&g(o.anisotropyMap.channel),clearcoatMapUv:Z&&g(o.clearcoatMap.channel),clearcoatNormalMapUv:Q&&g(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&g(o.clearcoatRoughnessMap.channel),iridescenceMapUv:$&&g(o.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&g(o.iridescenceThicknessMap.channel),sheenColorMapUv:et&&g(o.sheenColorMap.channel),sheenRoughnessMapUv:nt&&g(o.sheenRoughnessMap.channel),specularMapUv:it&&g(o.specularMap.channel),specularColorMapUv:rt&&g(o.specularColorMap.channel),specularIntensityMapUv:ot&&g(o.specularIntensityMap.channel),transmissionMapUv:at&&g(o.transmissionMap.channel),thicknessMapUv:st&&g(o.thicknessMap.channel),alphaMapUv:ct&&g(o.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(U||G),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUv1s:ft,vertexUv2s:pt,vertexUv3s:gt,pointsUvs:!0===v.isPoints&&!!b.attributes.uv&&(L||ct),fog:!!y,useFog:!0===o.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:M,morphTextureStride:P,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:Bet,useLegacyLights:t.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===iet,flipSided:o.side===net,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:dt&&!0===o.extensions.derivatives,extensionFragDepth:dt&&!0===o.extensions.fragDepth,extensionDrawBuffers:dt&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:dt&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){s.disableAll(),e.isWebGL2&&s.enable(0);e.supportsVertexTextures&&s.enable(1);e.instancing&&s.enable(2);e.instancingColor&&s.enable(3);e.matcap&&s.enable(4);e.envMap&&s.enable(5);e.normalMapObjectSpace&&s.enable(6);e.normalMapTangentSpace&&s.enable(7);e.clearcoat&&s.enable(8);e.iridescence&&s.enable(9);e.alphaTest&&s.enable(10);e.vertexColors&&s.enable(11);e.vertexAlphas&&s.enable(12);e.vertexUv1s&&s.enable(13);e.vertexUv2s&&s.enable(14);e.vertexUv3s&&s.enable(15);e.vertexTangents&&s.enable(16);e.anisotropy&&s.enable(17);t.push(s.mask),s.disableAll(),e.fog&&s.enable(0);e.useFog&&s.enable(1);e.flatShading&&s.enable(2);e.logarithmicDepthBuffer&&s.enable(3);e.skinning&&s.enable(4);e.morphTargets&&s.enable(5);e.morphNormals&&s.enable(6);e.morphColors&&s.enable(7);e.premultipliedAlpha&&s.enable(8);e.shadowMapEnabled&&s.enable(9);e.useLegacyLights&&s.enable(10);e.doubleSided&&s.enable(11);e.flipSided&&s.enable(12);e.useDepthPacking&&s.enable(13);e.dithering&&s.enable(14);e.transmission&&s.enable(15);e.sheen&&s.enable(16);e.opaque&&s.enable(17);e.pointsUvs&&s.enable(18);t.push(s.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=Xst[e];n=kst.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,r=c.length;t<r;t++){const e=c[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Gct(t,n,e,o),c.push(i)),i},releaseProgram:function(t){if(0===--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:c,dispose:function(){l.dispose()}}}function Kct(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Zct(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Qct(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Jct(){const t=[];let e=0;const n=[],i=[],r=[];function o(n,i,r,o,a,s){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,a,s,l,c){const u=o(t,e,a,s,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(t,e,a,s,l,c){const u=o(t,e,a,s,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Zct),i.length>1&&i.sort(e||Qct),r.length>1&&r.sort(e||Qct)}}}function $ct(){let t=new WeakMap;return{get:function(e,n){const i=t.get(e);let r;return void 0===i?(r=new Jct,t.set(e,[r])):n>=i.length?(r=new Jct,i.push(r)):r=i[n],r},dispose:function(){t=new WeakMap}}}function tut(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new cot,color:new Aat};break;case"SpotLight":n={position:new cot,direction:new cot,color:new Aat,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new cot,color:new Aat,distance:0,decay:0};break;case"HemisphereLight":n={direction:new cot,skyColor:new Aat,groundColor:new Aat};break;case"RectAreaLight":n={color:new Aat,position:new cot,halfWidth:new cot,halfHeight:new cot}}return t[e.id]=n,n}}}let eut=0;function nut(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function iut(t,e){const n=new tut,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rrt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Rrt,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)r.probe.push(new cot);const o=new cot,a=new Uot,s=new Uot;return{setup:function(o,a){let s=0,l=0,c=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,g=0,m=0,v=0,y=0,b=0;o.sort(nut);const _=!0===a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.color,x=e.intensity,w=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*x*_,l+=a.g*x*_,c+=a.b*x*_;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],x);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=S,r.directionalShadowMatrix[u]=e.shadow.matrix,g++}r.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(x*_),t.distance=w,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,r.spot[d]=t;const o=e.shadow;if(e.map&&(r.spotLightMap[y]=e.map,y++,o.updateMatrices(e),e.castShadow&&b++),r.spotLightMatrix[d]=o.matrix,e.castShadow){const t=i.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,r.spotShadow[d]=t,r.spotShadowMap[d]=S,v++}d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(x),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=S,r.pointShadowMatrix[h]=e.shadow.matrix,m++}r.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(x*_),t.groundColor.copy(e.groundColor).multiplyScalar(x*_),r.hemi[p]=t,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=qst.LTC_FLOAT_1,r.rectAreaLTC2=qst.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=qst.LTC_HALF_1,r.rectAreaLTC2=qst.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=c;const x=r.hash;x.directionalLength===u&&x.pointLength===h&&x.spotLength===d&&x.rectAreaLength===f&&x.hemiLength===p&&x.numDirectionalShadows===g&&x.numPointShadows===m&&x.numSpotShadows===v&&x.numSpotMaps===y||(r.directional.length=u,r.spot.length=d,r.rectArea.length=f,r.point.length=h,r.hemi.length=p,r.directionalShadow.length=g,r.directionalShadowMap.length=g,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=g,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=v+y-b,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=b,x.directionalLength=u,x.pointLength=h,x.spotLength=d,x.rectAreaLength=f,x.hemiLength=p,x.numDirectionalShadows=g,x.numPointShadows=m,x.numSpotShadows=v,x.numSpotMaps=y,r.version=eut++)},setupView:function(t,e){let n=0,i=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),s.identity(),a.copy(e.matrixWorld),a.premultiply(h),s.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),c++}else if(e.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),i++}else if(e.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}},state:r}}function rut(t,e){const n=new iut(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function out(t,e){let n=new WeakMap;return{get:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const o=n.get(i);let a;return void 0===o?(a=new rut(t,e),n.set(i,[a])):r>=o.length?(a=new rut(t,e),o.push(a)):a=o[r],a},dispose:function(){n=new WeakMap}}}class aut extends Eat{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Mit,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class sut extends Eat{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function lut(t,e,n){let i=new jst;const r=new Rrt,o=new Rrt,a=new eot,s=new aut({depthPacking:Tit}),l=new sut,c={},u=n.maxTextureSize,h={[eet]:net,[net]:eet,[iet]:iet},d=new Cst({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Rrt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new ist;p.setAttribute("position",new Uat(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new xst(p,d),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Jtt;let v=this.type;function y(n,i){const o=e.update(g);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new not(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,o,d,g,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,o,f,g,null)}function b(e,n,i,r){let o=null;const a=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===i.isPointLight?l:s,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let i=c[t];void 0===i&&(i={},c[t]=i);let r=i[e];void 0===r&&(r=o.clone(),i[e]=r),o=r}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=r===tet?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial){t.properties.get(o).light=i}return o}function _(n,r,o,a,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===tet)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=r[c.materialIndex];if(u&&u.visible){const e=b(n,u,a,s);t.renderBufferDirect(o,null,i,e,n,c)}}}else if(r.visible){const e=b(n,r,a,s);t.renderBufferDirect(o,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)_(l[t],r,o,a,s)}this.render=function(e,n,s){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(oet),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=v!==tet&&this.type===tet,p=v===tet&&this.type!==tet;for(let g=0,m=e.length;g<m;g++){const l=e[g],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),o.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/h.x),r.x=o.x*h.x,c.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/h.y),r.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map||!0===f||!0===p){const t=this.type!==tet?{minFilter:ent,magFilter:ent}:{};null!==c.map&&c.map.dispose(),c.map=new not(r.x,r.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const m=c.getViewportCount();for(let t=0;t<m;t++){const e=c.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(a),c.updateMatrices(l,t),i=c.getFrustum(),_(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===tet&&y(c,s),c.needsUpdate=!1}v=this.type,m.needsUpdate=!1,t.setRenderTarget(l,c,h)}}function cut(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new eot;let i=null;const r=new eot(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(e){e?B(t.DEPTH_TEST):j(t.DEPTH_TEST)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){switch(e){case Aet:t.depthFunc(t.NEVER);break;case Pet:t.depthFunc(t.ALWAYS);break;case Oet:t.depthFunc(t.LESS);break;case Ret:t.depthFunc(t.LEQUAL);break;case Let:t.depthFunc(t.EQUAL);break;case Det:t.depthFunc(t.GEQUAL);break;case Iet:t.depthFunc(t.GREATER);break;case Net:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},a=new function(){let e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(n){e||(n?B(t.STENCIL_TEST):j(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&l===i||(t.stencilOp(e,n,i),a=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}},s=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],f=null,p=!1,g=null,m=null,v=null,y=null,b=null,_=null,x=null,w=!1,S=null,E=null,M=null,T=null,k=null;const C=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let A=!1,P=0;const O=t.getParameter(t.VERSION);-1!==O.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(O)[1]),A=P>=1):-1!==O.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),A=P>=2);let R=null,L={};const D=t.getParameter(t.SCISSOR_BOX),I=t.getParameter(t.VIEWPORT),N=(new eot).fromArray(D),z=(new eot).fromArray(I);function F(e,n,r,o){const a=new Uint8Array(4),s=t.createTexture();t.bindTexture(e,s),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let l=0;l<r;l++)!i||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage3D(n,0,t.RGBA,1,1,o,0,t.RGBA,t.UNSIGNED_BYTE,a);return s}const U={};function B(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function j(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}U[t.TEXTURE_2D]=F(t.TEXTURE_2D,t.TEXTURE_2D,1),U[t.TEXTURE_CUBE_MAP]=F(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(U[t.TEXTURE_2D_ARRAY]=F(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),U[t.TEXTURE_3D]=F(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),o.setClear(1),a.setClear(0),B(t.DEPTH_TEST),o.setFunc(Ret),W(!1),q(Ytt),B(t.CULL_FACE),G(oet);const H={[det]:t.FUNC_ADD,[fet]:t.FUNC_SUBTRACT,[pet]:t.FUNC_REVERSE_SUBTRACT};if(i)H[get]=t.MIN,H[met]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(H[get]=t.MIN_EXT,H[met]=t.MAX_EXT)}const V={[vet]:t.ZERO,[yet]:t.ONE,[bet]:t.SRC_COLOR,[xet]:t.SRC_ALPHA,[Cet]:t.SRC_ALPHA_SATURATE,[Tet]:t.DST_COLOR,[Eet]:t.DST_ALPHA,[_et]:t.ONE_MINUS_SRC_COLOR,[wet]:t.ONE_MINUS_SRC_ALPHA,[ket]:t.ONE_MINUS_DST_COLOR,[Met]:t.ONE_MINUS_DST_ALPHA};function G(e,n,i,r,o,a,s,l){if(e!==oet){if(!1===p&&(B(t.BLEND),p=!0),e===het)o=o||n,a=a||i,s=s||r,n===m&&o===b||(t.blendEquationSeparate(H[n],H[o]),m=n,b=o),i===v&&r===y&&a===_&&s===x||(t.blendFuncSeparate(V[i],V[r],V[a],V[s]),v=i,y=r,_=a,x=s),g=e,w=!1;else if(e!==g||l!==w){if(m===det&&b===det||(t.blendEquation(t.FUNC_ADD),m=det,b=det),l)switch(e){case aet:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case set:t.blendFunc(t.ONE,t.ONE);break;case cet:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case uet:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case aet:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case set:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case cet:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case uet:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,_=null,x=null,g=e,w=l}}else!0===p&&(j(t.BLEND),p=!1)}function W(e){S!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),S=e)}function q(e){e!==Xtt?(B(t.CULL_FACE),e!==E&&(e===Ytt?t.cullFace(t.BACK):e===Ktt?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):j(t.CULL_FACE),E=e}function X(e,n,i){e?(B(t.POLYGON_OFFSET_FILL),T===n&&k===i||(t.polygonOffset(n,i),T=n,k=i)):j(t.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:o,stencil:a},enable:B,disable:j,bindFramebuffer:function(e,n){return u[e]!==n&&(t.bindFramebuffer(e,n),u[e]=n,i&&(e===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let o=d,a=!1;if(i)if(o=h.get(r),void 0===o&&(o=[],h.set(r,o)),i.isWebGLMultipleRenderTargets){const e=i.texture;if(o.length!==e.length||o[0]!==t.COLOR_ATTACHMENT0){for(let n=0,i=e.length;n<i;n++)o[n]=t.COLOR_ATTACHMENT0+n;o.length=e.length,a=!0}}else o[0]!==t.COLOR_ATTACHMENT0&&(o[0]=t.COLOR_ATTACHMENT0,a=!0);else o[0]!==t.BACK&&(o[0]=t.BACK,a=!0);a&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(e){return f!==e&&(t.useProgram(e),f=e,!0)},setBlending:G,setMaterial:function(e,n){e.side===iet?j(t.CULL_FACE):B(t.CULL_FACE);let i=e.side===net;n&&(i=!i),W(i),e.blending===aet&&!1===e.transparent?G(oet):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),r.setMask(e.colorWrite);const s=e.stencilWrite;a.setTest(s),s&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(t.SAMPLE_ALPHA_TO_COVERAGE):j(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:q,setLineWidth:function(e){e!==M&&(A&&t.lineWidth(e),M=e)},setPolygonOffset:X,setScissorTest:function(e){e?B(t.SCISSOR_TEST):j(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+C-1),R!==e&&(t.activeTexture(e),R=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===R?t.TEXTURE0+C-1:R);let r=L[i];void 0===r&&(r={type:void 0,texture:void 0},L[i]=r),r.type===e&&r.texture===n||(R!==i&&(t.activeTexture(i),R=i),t.bindTexture(e,n||U[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=L[R];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},updateUBOMapping:function(e,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=l.get(n).get(e);s.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),s.set(n,i))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ROt){console.error("THREE.WebGLState:",ROt)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===z.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),z.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===i&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},R=null,L={},u={},h=new WeakMap,d=[],f=null,p=!1,g=null,m=null,v=null,y=null,b=null,_=null,x=null,w=!1,S=null,E=null,M=null,T=null,k=null,N.set(0,0,t.canvas.width,t.canvas.height),z.set(0,0,t.canvas.width,t.canvas.height),r.reset(),o.reset(),a.reset()}}}function uut(t,e,n,i,r,o,a){const s=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const m=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function y(t,e){return v?new OffscreenCanvas(t,e):Frt("canvas")}function b(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?Crt:Math.floor,o=i(r*t.width),a=i(r*t.height);void 0===g&&(g=y(o,a));const s=n?y(o,a):g;s.width=o,s.height=a;return s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return Trt(t.width)&&Trt(t.height)}function x(t,e){return t.generateMipmaps&&e&&t.minFilter!==ent&&t.minFilter!==ant}function w(e){t.generateMipmap(e)}function S(n,i,r,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===s)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return i===t.RED&&(r===t.FLOAT&&(l=t.R32F),r===t.HALF_FLOAT&&(l=t.R16F),r===t.UNSIGNED_BYTE&&(l=t.R8)),i===t.RG&&(r===t.FLOAT&&(l=t.RG32F),r===t.HALF_FLOAT&&(l=t.RG16F),r===t.UNSIGNED_BYTE&&(l=t.RG8)),i===t.RGBA&&(r===t.FLOAT&&(l=t.RGBA32F),r===t.HALF_FLOAT&&(l=t.RGBA16F),r===t.UNSIGNED_BYTE&&(l=o===Pit&&!1===a?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)),l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function E(t,e,n){return!0===x(t,n)||t.isFramebufferTexture&&t.minFilter!==ent&&t.minFilter!==ant?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function M(e){return e===ent||e===nnt||e===rnt?t.NEAREST:t.LINEAR}function T(t){const e=t.target;e.removeEventListener("dispose",T),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=m.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&C(t),0===Object.keys(r).length&&m.delete(n)}i.remove(t)}(e),e.isVideoTexture&&p.delete(e)}function k(e){const n=e.target;n.removeEventListener("dispose",k),function(e){const n=e.texture,r=i.get(e),o=i.get(n);void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)t.deleteFramebuffer(r.__webglFramebuffer[i]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[i]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const e=i.get(n[s]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),a.memory.textures--),i.remove(n[s])}i.remove(n),i.remove(e)}(n)}function C(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete m.get(r)[n.__cacheKey],a.memory.textures--}let A=0;function P(e,r){const o=i.get(e);if(e.isVideoTexture&&function(t){const e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void N(o,e,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+r)}const O={[Jet]:t.REPEAT,[$et]:t.CLAMP_TO_EDGE,[tnt]:t.MIRRORED_REPEAT},R={[ent]:t.NEAREST,[nnt]:t.NEAREST_MIPMAP_NEAREST,[rnt]:t.NEAREST_MIPMAP_LINEAR,[ant]:t.LINEAR,[snt]:t.LINEAR_MIPMAP_NEAREST,[cnt]:t.LINEAR_MIPMAP_LINEAR},L={[Kit]:t.NEVER,[nrt]:t.ALWAYS,[Zit]:t.LESS,[Jit]:t.LEQUAL,[Qit]:t.EQUAL,[ert]:t.GEQUAL,[$it]:t.GREATER,[trt]:t.NOTEQUAL};function D(n,o,a){if(a?(t.texParameteri(n,t.TEXTURE_WRAP_S,O[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,O[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,O[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,R[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,R[o.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),o.wrapS===$et&&o.wrapT===$et||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,M(o.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,M(o.minFilter)),o.minFilter!==ent&&o.minFilter!==ant&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,L[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===ent)return;if(o.minFilter!==rnt&&o.minFilter!==cnt)return;if(o.type===vnt&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&o.type===ynt&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function I(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T));const r=n.source;let o=m.get(r);void 0===o&&(o={},m.set(r,o));const s=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(s!==e.__cacheKey){void 0===o[s]&&(o[s]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,i=!0),o[s].usedTimes++;const r=o[e.__cacheKey];void 0!==r&&(o[e.__cacheKey].usedTimes--,0===r.usedTimes&&C(n)),e.__cacheKey=s,e.__webglTexture=o[s].texture}return i}function N(e,r,a){let l=t.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=t.TEXTURE_3D);const c=I(e,r),h=r.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+a);const d=i.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(t.TEXTURE0+a),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=function(t){return!s&&(t.wrapS!==$et||t.wrapT!==$et||t.minFilter!==ent&&t.minFilter!==ant)}(r)&&!1===_(r.image);let i=b(r.image,e,!1,u);i=H(r,i);const f=_(i)||s,p=o.convert(r.format,r.colorSpace);let g,m=o.convert(r.type),v=S(r.internalFormat,p,m,r.colorSpace);D(l,r,f);const y=r.mipmaps,M=s&&!0!==r.isVideoTexture,T=void 0===d.__version||!0===c,k=E(r,i,f);if(r.isDepthTexture)v=t.DEPTH_COMPONENT,s?v=r.type===vnt?t.DEPTH_COMPONENT32F:r.type===mnt?t.DEPTH_COMPONENT24:r.type===xnt?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:r.type===vnt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Tnt&&v===t.DEPTH_COMPONENT&&r.type!==pnt&&r.type!==mnt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=mnt,m=o.convert(r.type)),r.format===knt&&v===t.DEPTH_COMPONENT&&(v=t.DEPTH_STENCIL,r.type!==xnt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=xnt,m=o.convert(r.type))),T&&(M?n.texStorage2D(t.TEXTURE_2D,1,v,i.width,i.height):n.texImage2D(t.TEXTURE_2D,0,v,i.width,i.height,0,p,m,null));else if(r.isDataTexture)if(y.length>0&&f){M&&T&&n.texStorage2D(t.TEXTURE_2D,k,v,y[0].width,y[0].height);for(let e=0,i=y.length;e<i;e++)g=y[e],M?n.texSubImage2D(t.TEXTURE_2D,e,0,0,g.width,g.height,p,m,g.data):n.texImage2D(t.TEXTURE_2D,e,v,g.width,g.height,0,p,m,g.data);r.generateMipmaps=!1}else M?(T&&n.texStorage2D(t.TEXTURE_2D,k,v,i.width,i.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,i.width,i.height,p,m,i.data)):n.texImage2D(t.TEXTURE_2D,0,v,i.width,i.height,0,p,m,i.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){M&&T&&n.texStorage3D(t.TEXTURE_2D_ARRAY,k,v,y[0].width,y[0].height,i.depth);for(let e=0,o=y.length;e<o;e++)g=y[e],r.format!==Snt?null!==p?M?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,g.width,g.height,i.depth,p,g.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,v,g.width,g.height,i.depth,0,g.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,g.width,g.height,i.depth,p,m,g.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,v,g.width,g.height,i.depth,0,p,m,g.data)}else{M&&T&&n.texStorage2D(t.TEXTURE_2D,k,v,y[0].width,y[0].height);for(let e=0,i=y.length;e<i;e++)g=y[e],r.format!==Snt?null!==p?M?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,g.width,g.height,p,g.data):n.compressedTexImage2D(t.TEXTURE_2D,e,v,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?n.texSubImage2D(t.TEXTURE_2D,e,0,0,g.width,g.height,p,m,g.data):n.texImage2D(t.TEXTURE_2D,e,v,g.width,g.height,0,p,m,g.data)}else if(r.isDataArrayTexture)M?(T&&n.texStorage3D(t.TEXTURE_2D_ARRAY,k,v,i.width,i.height,i.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,i.width,i.height,i.depth,p,m,i.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,v,i.width,i.height,i.depth,0,p,m,i.data);else if(r.isData3DTexture)M?(T&&n.texStorage3D(t.TEXTURE_3D,k,v,i.width,i.height,i.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,i.width,i.height,i.depth,p,m,i.data)):n.texImage3D(t.TEXTURE_3D,0,v,i.width,i.height,i.depth,0,p,m,i.data);else if(r.isFramebufferTexture){if(T)if(M)n.texStorage2D(t.TEXTURE_2D,k,v,i.width,i.height);else{let e=i.width,r=i.height;for(let i=0;i<k;i++)n.texImage2D(t.TEXTURE_2D,i,v,e,r,0,p,m,null),e>>=1,r>>=1}}else if(y.length>0&&f){M&&T&&n.texStorage2D(t.TEXTURE_2D,k,v,y[0].width,y[0].height);for(let e=0,i=y.length;e<i;e++)g=y[e],M?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p,m,g):n.texImage2D(t.TEXTURE_2D,e,v,p,m,g);r.generateMipmaps=!1}else M?(T&&n.texStorage2D(t.TEXTURE_2D,k,v,i.width,i.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,p,m,i)):n.texImage2D(t.TEXTURE_2D,0,v,p,m,i);x(r,f)&&w(l),d.__version=h.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function z(e,r,a,s,l){const c=o.convert(a.format,a.colorSpace),u=o.convert(a.type),h=S(a.internalFormat,c,u,a.colorSpace);i.get(r).__hasExternalTextures||(l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,h,r.width,r.height,0,c,u,null)),n.bindFramebuffer(t.FRAMEBUFFER,e),j(r)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,s,l,i.get(a).__webglTexture,0,B(r)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,s,l,i.get(a).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function F(e,n,i){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let r=t.DEPTH_COMPONENT16;if(i||j(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===vnt?r=t.DEPTH_COMPONENT32F:e.type===mnt&&(r=t.DEPTH_COMPONENT24));const i=B(n);j(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,r,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,i,r,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,r,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=B(n);i&&!1===j(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):j(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<e.length;r++){const a=e[r],s=o.convert(a.format,a.colorSpace),l=o.convert(a.type),c=S(a.internalFormat,s,l,a.colorSpace),u=B(n);i&&!1===j(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,u,c,n.width,n.height):j(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,u,c,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,c,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function U(e){const r=i.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),P(r.depthTexture,0);const o=i.get(r.depthTexture).__webglTexture,a=B(r);if(r.depthTexture.format===Tnt)j(r)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(r.depthTexture.format!==knt)throw new Error("Unknown depthTexture format");j(r)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}(r.__webglFramebuffer,e)}else if(o){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),F(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),F(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function B(t){return Math.min(h,t.samples)}function j(t){const n=i.get(t);return s&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(t,n){const i=t.colorSpace,r=t.format,o=t.type;return!0===t.isCompressedTexture||t.format===prt||i!==Oit&&i!==Ait&&(i===Pit?!1===s?!0===e.has("EXT_sRGB")&&r===Snt?(t.format=prt,t.minFilter=ant,t.generateMipmaps=!1):n=Krt.sRGBToLinear(n):r===Snt&&o===hnt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const t=A;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),A+=1,t},this.resetTextureUnits=function(){A=0},this.setTexture2D=P,this.setTexture2DArray=function(e,r){const o=i.get(e);e.version>0&&o.__version!==e.version?N(o,e,r):n.bindTexture(t.TEXTURE_2D_ARRAY,o.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const o=i.get(e);e.version>0&&o.__version!==e.version?N(o,e,r):n.bindTexture(t.TEXTURE_3D,o.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?function(e,r,a){if(6!==r.image.length)return;const l=I(e,r),u=r.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+a);const h=i.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(t.TEXTURE0+a),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,r.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||i?i?r.image[t].image:r.image[t]:b(r.image[t],!1,!0,c),d[t]=H(r,d[t]);const f=d[0],p=_(f)||s,g=o.convert(r.format,r.colorSpace),m=o.convert(r.type),v=S(r.internalFormat,g,m,r.colorSpace),y=s&&!0!==r.isVideoTexture,M=void 0===h.__version||!0===l;let T,k=E(r,f,p);if(D(t.TEXTURE_CUBE_MAP,r,p),e){y&&M&&n.texStorage2D(t.TEXTURE_CUBE_MAP,k,v,f.width,f.height);for(let e=0;e<6;e++){T=d[e].mipmaps;for(let i=0;i<T.length;i++){const o=T[i];r.format!==Snt?null!==g?y?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,o.width,o.height,g,o.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,v,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,o.width,o.height,g,m,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,v,o.width,o.height,0,g,m,o.data)}}}else{T=r.mipmaps,y&&M&&(T.length>0&&k++,n.texStorage2D(t.TEXTURE_CUBE_MAP,k,v,d[0].width,d[0].height));for(let e=0;e<6;e++)if(i){y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,d[e].width,d[e].height,g,m,d[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,d[e].width,d[e].height,0,g,m,d[e].data);for(let i=0;i<T.length;i++){const r=T[i].image[e].image;y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,r.width,r.height,g,m,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,v,r.width,r.height,0,g,m,r.data)}}else{y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,g,m,d[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,v,g,m,d[e]);for(let i=0;i<T.length;i++){const r=T[i];y?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,g,m,r.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,v,g,m,r.image[e])}}}x(r,p)&&w(t.TEXTURE_CUBE_MAP),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(a,e,r):n.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture,t.TEXTURE0+r)},this.rebindTextures=function(e,n,r){const o=i.get(e);void 0!==n&&z(o.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==r&&U(e)},this.setupRenderTarget=function(e){const l=e.texture,c=i.get(e),u=i.get(l);e.addEventListener("dispose",k),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=_(e)||s;if(h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(c.__webglFramebuffer=t.createFramebuffer(),d)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&e.samples>0&&!1===j(e)){const i=d?l:[l];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const a=o.convert(r.format,r.colorSpace),s=o.convert(r.type),l=S(r.internalFormat,a,s,r.colorSpace,!0===e.isXRRenderTarget),u=B(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),F(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,u.__webglTexture),D(t.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)z(c.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n);x(l,f)&&w(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){const r=e.texture;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i.get(a);n.bindTexture(t.TEXTURE_2D,s.__webglTexture),D(t.TEXTURE_2D,a,f),z(c.__webglFramebuffer,e,a,t.COLOR_ATTACHMENT0+o,t.TEXTURE_2D),x(a,f)&&w(t.TEXTURE_2D)}n.unbindTexture()}else{let i=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(s?i=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,u.__webglTexture),D(i,l,f),z(c.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,i),x(l,f)&&w(i),n.unbindTexture()}e.depthBuffer&&U(e)},this.updateRenderTargetMipmap=function(e){const r=_(e)||s,o=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,s=o.length;a<s;a++){const s=o[a];if(x(s,r)){const r=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=i.get(s).__webglTexture;n.bindTexture(r,o),w(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(s&&e.samples>0&&!1===j(e)){const r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,a=e.height;let s=t.COLOR_BUFFER_BIT;const l=[],c=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,u=i.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<r.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(s|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(s|=t.STENCIL_BUFFER_BIT)),h&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[c]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[c])),h){const e=i.get(r[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,o,a,0,0,o,a,s,t.NEAREST),f&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<r.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,u.__webglColorRenderbuffer[e]);const o=i.get(r[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,o,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=z,this.useMultisampledRTT=j}function hut(t,e,n){const i=n.isWebGL2;return{convert:function(n){let r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ait;if(n===hnt)return t.UNSIGNED_BYTE;if(n===bnt)return t.UNSIGNED_SHORT_4_4_4_4;if(n===_nt)return t.UNSIGNED_SHORT_5_5_5_1;if(n===dnt)return t.BYTE;if(n===fnt)return t.SHORT;if(n===pnt)return t.UNSIGNED_SHORT;if(n===gnt)return t.INT;if(n===mnt)return t.UNSIGNED_INT;if(n===vnt)return t.FLOAT;if(n===ynt)return i?t.HALF_FLOAT:(r=e.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===wnt)return t.ALPHA;if(n===Snt)return t.RGBA;if(n===Ent)return t.LUMINANCE;if(n===Mnt)return t.LUMINANCE_ALPHA;if(n===Tnt)return t.DEPTH_COMPONENT;if(n===knt)return t.DEPTH_STENCIL;if(n===prt)return r=e.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===Cnt)return t.RED;if(n===Ant)return t.RED_INTEGER;if(n===Pnt)return t.RG;if(n===Ont)return t.RG_INTEGER;if(n===Rnt)return t.RGBA_INTEGER;if(n===Lnt||n===Dnt||n===Int||n===Nnt)if(o===Pit){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Lnt)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Dnt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Int)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Nnt)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Lnt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Dnt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Int)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Nnt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===znt||n===Fnt||n===Unt||n===Bnt){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===znt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Fnt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Unt)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Bnt)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===jnt)return r=e.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Hnt||n===Vnt){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Hnt)return o===Pit?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Vnt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Gnt||n===Wnt||n===qnt||n===Xnt||n===Ynt||n===Knt||n===Znt||n===Qnt||n===Jnt||n===$nt||n===tit||n===eit||n===nit||n===iit){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Gnt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Wnt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===qnt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Xnt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Ynt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Knt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Znt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Qnt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Jnt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===$nt)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===tit)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===eit)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===nit)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===iit)return o===Pit?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===rit){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(n===rit)return o===Pit?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===oit||n===ait||n===sit||n===lit){if(r=e.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===rit)return r.COMPRESSED_RED_RGTC1_EXT;if(n===ait)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===sit)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===lit)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===xnt?i?t.UNSIGNED_INT_24_8:(r=e.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}}}class dut extends Pst{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=t}}class fut extends uat{constructor(){super(),this.isGroup=!0,this.type="Group"}}const put={type:"move"};class gut{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new fut,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new fut,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new cot,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new cot),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new fut,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new cot,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new cot),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n),i=this._getHandJoint(l,o);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=t.radius),i.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(i=e.getPose(t.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(put)))}return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new fut;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class mut extends tot{constructor(t,e,n,i,r,o,a,s,l,c){if((c=void 0!==c?c:Tnt)!==Tnt&&c!==knt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Tnt&&(n=mnt),void 0===n&&c===knt&&(n=xnt),super(null,i,r,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:ent,this.minFilter=void 0!==s?s:ent,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class vut extends vrt{constructor(t,e){super();const n=this;let i=null,r=1,o=null,a="local-floor",s=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=e.getContextAttributes();let g=null,m=null;const v=[],y=[],b=new Pst;b.layers.enable(1),b.viewport=new eot;const _=new Pst;_.layers.enable(2),_.viewport=new eot;const x=[b,_],w=new dut;w.layers.enable(1),w.layers.enable(2);let S=null,E=null;function M(t){const e=y.indexOf(t.inputSource);if(-1===e)return;const n=v[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||o),n.dispatchEvent({type:t.type,data:t.inputSource}))}function T(){i.removeEventListener("select",M),i.removeEventListener("selectstart",M),i.removeEventListener("selectend",M),i.removeEventListener("squeeze",M),i.removeEventListener("squeezestart",M),i.removeEventListener("squeezeend",M),i.removeEventListener("end",T),i.removeEventListener("inputsourceschange",k);for(let t=0;t<v.length;t++){const e=y[t];null!==e&&(y[t]=null,v[t].disconnect(e))}S=null,E=null,t.setRenderTarget(g),d=null,h=null,u=null,i=null,m=null,R.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function k(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let i=y.indexOf(n);if(-1===i){for(let t=0;t<v.length;t++){if(t>=y.length){y.push(n),i=t;break}if(null===y[t]){y[t]=n,i=t;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=v[t];return void 0===e&&(e=new gut,v[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=v[t];return void 0===e&&(e=new gut,v[t]=e),e.getGripSpace()},this.getHand=function(t){let e=v[t];return void 0===e&&(e=new gut,v[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(g=t.getRenderTarget(),i.addEventListener("select",M),i.addEventListener("selectstart",M),i.addEventListener("selectend",M),i.addEventListener("squeeze",M),i.addEventListener("squeezestart",M),i.addEventListener("squeezeend",M),i.addEventListener("end",T),i.addEventListener("inputsourceschange",k),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:d}),m=new not(d.framebufferWidth,d.framebufferHeight,{format:Snt,type:hnt,colorSpace:t.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,o=null,a=null;p.depth&&(a=p.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=p.stencil?knt:Tnt,o=p.stencil?xnt:mnt);const s={colorFormat:e.RGBA8,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(i,e),h=u.createProjectionLayer(s),i.updateRenderState({layers:[h]}),m=new not(h.textureWidth,h.textureHeight,{format:Snt,type:hnt,depthTexture:new mut(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:t.outputColorSpace,samples:p.antialias?4:0});t.properties.get(m).__ignoreDepthValues=h.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await i.requestReferenceSpace(a),R.setContext(i),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const C=new cot,A=new cot;function P(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;w.near=_.near=b.near=t.near,w.far=_.far=b.far=t.far,S===w.near&&E===w.far||(i.updateRenderState({depthNear:w.near,depthFar:w.far}),S=w.near,E=w.far);const e=t.parent,n=w.cameras;P(w,e);for(let i=0;i<n.length;i++)P(n[i],e);2===n.length?function(t,e,n){C.setFromMatrixPosition(e.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const i=C.distanceTo(A),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,f=a*h,p=i/(-u+h),g=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(g),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const m=a+p,v=s+p,y=d-g,b=f+(i-g),_=l*s/v*m,x=c*s/v*m;t.projectionMatrix.makePerspective(y,b,_,x,m,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}(w,b,_):w.projectionMatrix.copy(b.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);const i=t.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*xrt*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,w,e)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(t){s=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)};let O=null;const R=new Hst;R.setAnimationLoop((function(e,i){if(c=i.getViewerPose(l||o),f=i,null!==c){const e=c.views;null!==d&&(t.setRenderTargetFramebuffer(m,d.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let o=null;if(null!==d)o=d.getViewport(r);else{const e=u.getViewSubImage(h,r);o=e.viewport,0===i&&(t.setRenderTargetTextures(m,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}let a=x[i];void 0===a&&(a=new Pst,a.layers.enable(i),a.viewport=new eot,x[i]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===i&&(w.matrix.copy(a.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===n&&w.cameras.push(a)}}for(let t=0;t<v.length;t++){const e=y[t],n=v[t];null!==e&&void 0!==n&&n.update(e,i,l||o)}O&&O(e,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),f=null})),this.setAnimationLoop=function(t){O=t},this.dispose=function(){}}}function yut(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===net&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===net&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const o=e.get(r).envMap;if(o&&(i.envMap.value=o,i.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*e,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,Tst(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,o,a,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(t,r):r.isMeshToonMaterial?(i(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(i(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(i(t,r),function(t,i){t.metalness.value=i.metalness,i.metalnessMap&&(t.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,t.metalnessMapTransform));t.roughness.value=i.roughness,i.roughnessMap&&(t.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,t.roughnessMapTransform));const r=e.get(i).envMap;r&&(t.envMapIntensity.value=i.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===net&&t.clearcoatNormalScale.value.negate()));e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,s)):r.isMeshMatcapMaterial?(i(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?i(t,r):r.isMeshDistanceMaterial?(i(t,r),function(t,n){const i=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(i.matrixWorld),t.nearDistance.value=i.shadow.camera.near,t.farDistance.value=i.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?i(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,i,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r,o,a):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function but(t,e,n,i){let r={},o={},a=[];const s=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e,n){const i=t.value;if(void 0===n[e]){if("number"===typeof i)n[e]=i;else{const t=Array.isArray(i)?i:[i],r=[];for(let e=0;e<t.length;e++)r.push(t[e].clone());n[e]=r}return!0}if("number"===typeof i){if(n[e]!==i)return n[e]=i,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],r=Array.isArray(i)?i:[i];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(r[e]))return n.copy(r[e]),!0}}return!1}function c(t){const e={boundary:0,storage:0};return"number"===typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function u(e){const n=e.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete o[n.id]}return{bind:function(t,e){const n=e.program;i.uniformBlockBinding(t,n)},update:function(n,h){let d=r[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const i=16;let r=0;for(let o=0,a=e.length;o<a;o++){const t=e[o],a={boundary:0,storage:0},s=Array.isArray(t.value)?t.value:[t.value];for(let e=0,n=s.length;e<n;e++){const t=c(s[e]);a.boundary+=t.boundary,a.storage+=t.storage}if(t.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,o>0){r=n%i;0!==r&&i-r-a.boundary<0&&(n+=i-r,t.__offset=n)}n+=a.storage}r=n%i,r>0&&(n+=i-r);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<s;t++)if(-1===a.indexOf(t))return a.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;const i=t.createBuffer(),r=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,r,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const f=h.program;i.updateUBOMapping(n,f);const p=e.render.frame;o[n.id]!==p&&(!function(e){const n=r[e.id],i=e.uniforms,o=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let r=0,a=i.length;r<a;r++){const e=i[r];if(!0===l(e,r,o)){const n=e.__offset,i=Array.isArray(e.value)?e.value:[e.value];let r=0;for(let o=0;o<i.length;o++){const a=i[o],s=c(a);"number"===typeof a?(e.__data[0]=a,t.bufferSubData(t.UNIFORM_BUFFER,n+r,e.__data)):a.isMatrix3?(e.__data[0]=a.elements[0],e.__data[1]=a.elements[1],e.__data[2]=a.elements[2],e.__data[3]=a.elements[0],e.__data[4]=a.elements[3],e.__data[5]=a.elements[4],e.__data[6]=a.elements[5],e.__data[7]=a.elements[0],e.__data[8]=a.elements[6],e.__data[9]=a.elements[7],e.__data[10]=a.elements[8],e.__data[11]=a.elements[0]):(a.toArray(e.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,n,e.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),o[n.id]=p)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);a=[],r={},o={}}}}function _ut(){const t=Frt("canvas");return t.style.display="block",t}class xut{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:e=_ut(),context:n=null,depth:i=!0,stencil:r=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=t;let h;this.isWebGLRenderer=!0,h=null!==n?n.getContextAttributes().alpha:o;const d=new Uint32Array(4),f=new Int32Array(4);let p=null,g=null;const m=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Pit,this.useLegacyLights=!0,this.toneMapping=Bet,this.toneMappingExposure=1;const y=this;let b=!1,_=0,x=0,w=null,S=-1,E=null;const M=new eot,T=new eot;let k=null;const C=new Aat(0);let A=0,P=e.width,O=e.height,R=1,L=null,D=null;const I=new eot(0,0,P,O),N=new eot(0,0,P,O);let z=!1;const F=new jst;let U=!1,B=!1,j=null;const H=new Uot,V=new Rrt,G=new cot,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===w?R:1}let X,Y,K,Z,Q,J,$,tt,et,nt,it,rt,ot,at,st,lt,ct,ut,ht,dt,ft,pt,gt,mt,vt=n;function yt(t,n){for(let i=0;i<t.length;i++){const r=t[i],o=e.getContext(r,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:i,stencil:r,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r".concat(Gtt)),e.addEventListener("webglcontextlost",xt,!1),e.addEventListener("webglcontextrestored",wt,!1),e.addEventListener("webglcontextcreationerror",St,!1),null===vt){const e=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&e.shift(),vt=yt(e,t),null===vt)throw yt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&vt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===vt.getShaderPrecisionFormat&&(vt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ROt){throw console.error("THREE.WebGLRenderer: "+ROt.message),ROt}function bt(){X=new mlt(vt),Y=new Jst(vt,X,t),X.init(Y),pt=new hut(vt,X,Y),K=new cut(vt,X,Y),Z=new blt(vt),Q=new Kct,J=new uut(vt,X,K,Q,Y,pt,Z),$=new tlt(y),tt=new glt(y),et=new Vst(vt,Y),gt=new Zst(vt,X,et,Y),nt=new vlt(vt,et,Z,gt),it=new Slt(vt,nt,et,Z),ht=new wlt(vt,Y,J),lt=new $st(Q),rt=new Yct(y,$,tt,X,Y,gt,lt),ot=new yut(y,Q),at=new $ct,st=new out(X,Y),ut=new Kst(y,$,tt,K,it,h,s),ct=new lut(y,it,Y),mt=new but(vt,Z,Y,K),dt=new Qst(vt,X,Z,Y),ft=new ylt(vt,X,Z,Y),Z.programs=rt.programs,y.capabilities=Y,y.extensions=X,y.properties=Q,y.renderLists=at,y.shadowMap=ct,y.state=K,y.info=Z}bt();const _t=new vut(y,vt);function xt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function wt(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const t=Z.autoReset,e=ct.enabled,n=ct.autoUpdate,i=ct.needsUpdate,r=ct.type;bt(),Z.autoReset=t,ct.enabled=e,ct.autoUpdate=n,ct.needsUpdate=i,ct.type=r}function St(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Et(t){const e=t.target;e.removeEventListener("dispose",Et),function(t){(function(t){const e=Q.get(t).programs;void 0!==e&&(e.forEach((function(t){rt.releaseProgram(t)})),t.isShaderMaterial&&rt.releaseShaderCache(t))})(t),Q.remove(t)}(e)}this.xr=_t,this.getContext=function(){return vt},this.getContextAttributes=function(){return vt.getContextAttributes()},this.forceContextLoss=function(){const t=X.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=X.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(P,O,!1))},this.getSize=function(t){return t.set(P,O)},this.setSize=function(t,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_t.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=t,O=n,e.width=Math.floor(t*R),e.height=Math.floor(n*R),!0===i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(P*R,O*R).floor()},this.setDrawingBufferSize=function(t,n,i){P=t,O=n,R=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(M)},this.getViewport=function(t){return t.copy(I)},this.setViewport=function(t,e,n,i){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,i),K.viewport(M.copy(I).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(N)},this.setScissor=function(t,e,n,i){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,n,i),K.scissor(T.copy(N).multiplyScalar(R).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(t){K.setScissorTest(z=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){D=t},this.getClearColor=function(t){return t.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let t=!1;if(null!==w){const e=w.texture.format;t=e===Rnt||e===Ont||e===Ant}if(t){const t=w.texture.type,e=t===hnt||t===mnt||t===pnt||t===xnt||t===bnt||t===_nt,n=ut.getClearColor(),i=ut.getClearAlpha(),r=n.r,o=n.g,a=n.b;e?(d[0]=r,d[1]=o,d[2]=a,d[3]=i,vt.clearBufferuiv(vt.COLOR,0,d)):(f[0]=r,f[1]=o,f[2]=a,f[3]=i,vt.clearBufferiv(vt.COLOR,0,f))}else n|=vt.COLOR_BUFFER_BIT}t&&(n|=vt.DEPTH_BUFFER_BIT),e&&(n|=vt.STENCIL_BUFFER_BIT),vt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",xt,!1),e.removeEventListener("webglcontextrestored",wt,!1),e.removeEventListener("webglcontextcreationerror",St,!1),at.dispose(),st.dispose(),Q.dispose(),$.dispose(),tt.dispose(),it.dispose(),gt.dispose(),mt.dispose(),rt.dispose(),_t.dispose(),_t.removeEventListener("sessionstart",Tt),_t.removeEventListener("sessionend",kt),j&&(j.dispose(),j=null),Ct.stop()},this.renderBufferDirect=function(t,e,n,i,r,o){null===e&&(e=W);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=function(t,e,n,i,r){!0!==e.isScene&&(e=W);J.resetTextureUnits();const o=e.fog,a=i.isMeshStandardMaterial?e.environment:null,s=null===w?y.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:Oit,l=(i.isMeshStandardMaterial?tt:$).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=i.toneMapped?y.toneMapping:Bet,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,b=Q.get(i),_=g.state.lights;if(!0===U&&(!0===B||t!==E)){const e=t===E&&i.id===S;lt.setState(i,t,e)}let x=!1;i.version===b.__version?b.needsLights&&b.lightsStateVersion!==_.state.version||b.outputColorSpace!==s||r.isInstancedMesh&&!1===b.instancing?x=!0:r.isInstancedMesh||!0!==b.instancing?r.isSkinnedMesh&&!1===b.skinning?x=!0:r.isSkinnedMesh||!0!==b.skinning?b.envMap!==l||!0===i.fog&&b.fog!==o?x=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===lt.numPlanes&&b.numIntersection===lt.numIntersection?(b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==h||b.morphNormals!==d||b.morphColors!==f||b.toneMapping!==p||!0===Y.isWebGL2&&b.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,b.__version=i.version);let M=b.currentProgram;!0===x&&(M=Lt(i,e,r));let T=!1,k=!1,C=!1;const A=M.getUniforms(),P=b.uniforms;K.useProgram(M.program)&&(T=!0,k=!0,C=!0);i.id!==S&&(S=i.id,k=!0);if(T||E!==t){if(A.setValue(vt,"projectionMatrix",t.projectionMatrix),Y.logarithmicDepthBuffer&&A.setValue(vt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),E!==t&&(E=t,k=!0,C=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=A.map.cameraPosition;void 0!==e&&e.setValue(vt,G.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&A.setValue(vt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&A.setValue(vt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){A.setOptional(vt,r,"bindMatrix"),A.setOptional(vt,r,"bindMatrixInverse");const t=r.skeleton;t&&(Y.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),A.setValue(vt,"boneTexture",t.boneTexture,J),A.setValue(vt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const L=n.morphAttributes;(void 0!==L.position||void 0!==L.normal||void 0!==L.color&&!0===Y.isWebGL2)&&ht.update(r,n,M);(k||b.receiveShadow!==r.receiveShadow)&&(b.receiveShadow=r.receiveShadow,A.setValue(vt,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);k&&(A.setValue(vt,"toneMappingExposure",y.toneMappingExposure),b.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(P,C),o&&!0===i.fog&&ot.refreshFogUniforms(P,o),ot.refreshMaterialUniforms(P,i,R,O,j),kct.upload(vt,b.uniformsList,P,J));i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(kct.upload(vt,b.uniformsList,P,J),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&A.setValue(vt,"center",r.center);if(A.setValue(vt,"modelViewMatrix",r.modelViewMatrix),A.setValue(vt,"normalMatrix",r.normalMatrix),A.setValue(vt,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(Y.isWebGL2){const n=t[e];mt.update(n,M),mt.bind(n,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return M}(t,e,n,i,r);K.setMaterial(i,a);let l=n.index,c=1;!0===i.wireframe&&(l=nt.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;gt.setup(r,i,s,n,l);let v=dt;if(null!==l&&(m=et.get(l),v=ft,v.setIndex(m)),r.isMesh)!0===i.wireframe?(K.setLineWidth(i.wireframeLinewidth*q()),v.setMode(vt.LINES)):v.setMode(vt.TRIANGLES);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),K.setLineWidth(t*q()),r.isLineSegments?v.setMode(vt.LINES):r.isLineLoop?v.setMode(vt.LINE_LOOP):v.setMode(vt.LINE_STRIP)}else r.isPoints?v.setMode(vt.POINTS):r.isSprite&&v.setMode(vt.TRIANGLES);if(r.isInstancedMesh)v.renderInstances(d,p,r.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);v.renderInstances(d,p,e)}else v.render(d,p)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===iet&&!1===t.forceSinglePass?(t.side=net,t.needsUpdate=!0,Lt(t,e,n),t.side=eet,t.needsUpdate=!0,Lt(t,e,n),t.side=iet):Lt(t,e,n)}g=st.get(t),g.init(),v.push(g),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),g.setupLights(y.useLegacyLights),t.traverse((function(e){const i=e.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){n(i[r],t,e)}else n(i,t,e)})),v.pop(),g=null};let Mt=null;function Tt(){Ct.stop()}function kt(){Ct.start()}const Ct=new Hst;function At(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)g.pushLight(t),t.castShadow&&g.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||F.intersectsSprite(t)){i&&G.setFromMatrixPosition(t.matrixWorld).applyMatrix4(H);const e=it.update(t),r=t.material;r.visible&&p.push(t,e,r,n,G.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||F.intersectsObject(t))){const e=it.update(t),r=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)),G.applyMatrix4(t.matrixWorld).applyMatrix4(H)),Array.isArray(r)){const i=e.groups;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r[a.materialIndex];s&&s.visible&&p.push(t,e,s,n,G.z,a)}}else r.visible&&p.push(t,e,r,n,G.z,null)}const r=t.children;for(let o=0,a=r.length;o<a;o++)At(r[o],e,n,i)}function Pt(t,e,n,i){const r=t.opaque,o=t.transmissive,a=t.transparent;g.setupLightsView(n),!0===U&&lt.setGlobalState(y.clippingPlanes,n),o.length>0&&function(t,e,n,i){const r=Y.isWebGL2;null===j&&(j=new not(1,1,{generateMipmaps:!0,type:X.has("EXT_color_buffer_half_float")?ynt:hnt,minFilter:cnt,samples:r?4:0}));y.getDrawingBufferSize(V),r?j.setSize(V.x,V.y):j.setSize(Crt(V.x),Crt(V.y));const o=y.getRenderTarget();y.setRenderTarget(j),y.getClearColor(C),A=y.getClearAlpha(),A<1&&y.setClearColor(16777215,.5);y.clear();const a=y.toneMapping;y.toneMapping=Bet,Ot(t,n,i),J.updateMultisampleRenderTarget(j),J.updateRenderTargetMipmap(j);let s=!1;for(let l=0,c=e.length;l<c;l++){const t=e[l],r=t.object,o=t.geometry,a=t.material,c=t.group;if(a.side===iet&&r.layers.test(i.layers)){const t=a.side;a.side=net,a.needsUpdate=!0,Rt(r,n,i,o,a,c),a.side=t,a.needsUpdate=!0,s=!0}}!0===s&&(J.updateMultisampleRenderTarget(j),J.updateRenderTargetMipmap(j));y.setRenderTarget(o),y.setClearColor(C,A),y.toneMapping=a}(r,o,e,n),i&&K.viewport(M.copy(i)),r.length>0&&Ot(r,e,n),o.length>0&&Ot(o,e,n),a.length>0&&Ot(a,e,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Ot(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,o=t.length;r<o;r++){const o=t[r],a=o.object,s=o.geometry,l=null===i?o.material:i,c=o.group;a.layers.test(n.layers)&&Rt(a,e,n,s,l,c)}}function Rt(t,e,n,i,r,o){t.onBeforeRender(y,e,n,i,r,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(y,e,n,i,t,o),!0===r.transparent&&r.side===iet&&!1===r.forceSinglePass?(r.side=net,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,o),r.side=eet,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,o),r.side=iet):y.renderBufferDirect(n,e,i,r,t,o),t.onAfterRender(y,e,n,i,r,o)}function Lt(t,e,n){!0!==e.isScene&&(e=W);const i=Q.get(t),r=g.state.lights,o=g.state.shadowsArray,a=r.state.version,s=rt.getParameters(t,r.state,o,e,n),l=rt.getProgramCacheKey(s);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?tt:$).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",Et),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return Dt(t,s),u}else s.uniforms=rt.getUniforms(t),t.onBuild(n,s,y),t.onBeforeCompile(s,y),u=rt.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;const h=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=lt.uniform),Dt(t,s),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=u.getUniforms(),f=kct.seqWithValue(d.seq,h);return i.currentProgram=u,i.uniformsList=f,u}function Dt(t,e){const n=Q.get(t);n.outputColorSpace=e.outputColorSpace,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Ct.setAnimationLoop((function(t){Mt&&Mt(t)})),"undefined"!==typeof self&&Ct.setContext(self),this.setAnimationLoop=function(t){Mt=t,_t.setAnimationLoop(t),null===t?Ct.stop():Ct.start()},_t.addEventListener("sessionstart",Tt),_t.addEventListener("sessionend",kt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===_t.enabled&&!0===_t.isPresenting&&(!0===_t.cameraAutoUpdate&&_t.updateCamera(e),e=_t.getCamera()),!0===t.isScene&&t.onBeforeRender(y,t,e,w),g=st.get(t,v.length),g.init(),v.push(g),H.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),F.setFromProjectionMatrix(H),B=this.localClippingEnabled,U=lt.init(this.clippingPlanes,B),p=at.get(t,m.length),p.init(),m.push(p),At(t,e,0,y.sortObjects),p.finish(),!0===y.sortObjects&&p.sort(L,D),this.info.render.frame++,!0===U&&lt.beginShadows();const n=g.state.shadowsArray;if(ct.render(n,t,e),!0===U&&lt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ut.render(p,t),g.setupLights(y.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];Pt(p,t,i,i.viewport)}}else Pt(p,t,e);null!==w&&(J.updateMultisampleRenderTarget(w),J.updateRenderTargetMipmap(w)),!0===t.isScene&&t.onAfterRender(y,t,e),gt.resetDefaultState(),S=-1,E=null,v.pop(),g=v.length>0?v[v.length-1]:null,m.pop(),p=m.length>0?m[m.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(t,e,n){Q.get(t.texture).__webglTexture=e,Q.get(t.depthTexture).__webglTexture=n;const i=Q.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===X.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=Q.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;w=t,_=e,x=n;let i=!0,r=null,o=!1,a=!1;if(t){const n=Q.get(t);void 0!==n.__useDefaultFramebuffer?(K.bindFramebuffer(vt.FRAMEBUFFER,null),i=!1):void 0===n.__webglFramebuffer?J.setupRenderTarget(t):n.__hasExternalTextures&&J.rebindTextures(t,Q.get(t.texture).__webglTexture,Q.get(t.depthTexture).__webglTexture);const s=t.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);const l=Q.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=l[e],o=!0):r=Y.isWebGL2&&t.samples>0&&!1===J.useMultisampledRTT(t)?Q.get(t).__webglMultisampledFramebuffer:l,M.copy(t.viewport),T.copy(t.scissor),k=t.scissorTest}else M.copy(I).multiplyScalar(R).floor(),T.copy(N).multiplyScalar(R).floor(),k=z;if(K.bindFramebuffer(vt.FRAMEBUFFER,r)&&Y.drawBuffers&&i&&K.drawBuffers(t,r),K.viewport(M),K.scissor(T),K.setScissorTest(k),o){const i=Q.get(t.texture);vt.framebufferTexture2D(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_CUBE_MAP_POSITIVE_X+e,i.__webglTexture,n)}else if(a){const i=Q.get(t.texture),r=e||0;vt.framebufferTextureLayer(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}S=-1},this.readRenderTargetPixels=function(t,e,n,i,r,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Q.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){K.bindFramebuffer(vt.FRAMEBUFFER,s);try{const a=t.texture,s=a.format,l=a.type;if(s!==Snt&&pt.convert(s)!==vt.getParameter(vt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===ynt&&(X.has("EXT_color_buffer_half_float")||Y.isWebGL2&&X.has("EXT_color_buffer_float"));if(l!==hnt&&pt.convert(l)!==vt.getParameter(vt.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==vnt||!(Y.isWebGL2||X.has("OES_texture_float")||X.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&vt.readPixels(e,n,i,r,pt.convert(s),pt.convert(l),o)}finally{const t=null!==w?Q.get(w).__webglFramebuffer:null;K.bindFramebuffer(vt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i);J.setTexture2D(e,0),vt.copyTexSubImage2D(vt.TEXTURE_2D,n,0,0,t.x,t.y,r,o),K.unbindTexture()},this.copyTextureToTexture=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.image.width,o=e.image.height,a=pt.convert(n.format),s=pt.convert(n.type);J.setTexture2D(n,0),vt.pixelStorei(vt.UNPACK_FLIP_Y_WEBGL,n.flipY),vt.pixelStorei(vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),vt.pixelStorei(vt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?vt.texSubImage2D(vt.TEXTURE_2D,i,t.x,t.y,r,o,a,s,e.image.data):e.isCompressedTexture?vt.compressedTexSubImage2D(vt.TEXTURE_2D,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):vt.texSubImage2D(vt.TEXTURE_2D,i,t.x,t.y,a,s,e.image),0===i&&n.generateMipmaps&&vt.generateMipmap(vt.TEXTURE_2D),K.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=pt.convert(i.format),c=pt.convert(i.type);let u;if(i.isData3DTexture)J.setTexture3D(i,0),u=vt.TEXTURE_3D;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(i,0),u=vt.TEXTURE_2D_ARRAY}vt.pixelStorei(vt.UNPACK_FLIP_Y_WEBGL,i.flipY),vt.pixelStorei(vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),vt.pixelStorei(vt.UNPACK_ALIGNMENT,i.unpackAlignment);const h=vt.getParameter(vt.UNPACK_ROW_LENGTH),d=vt.getParameter(vt.UNPACK_IMAGE_HEIGHT),f=vt.getParameter(vt.UNPACK_SKIP_PIXELS),p=vt.getParameter(vt.UNPACK_SKIP_ROWS),g=vt.getParameter(vt.UNPACK_SKIP_IMAGES),m=n.isCompressedTexture?n.mipmaps[0]:n.image;vt.pixelStorei(vt.UNPACK_ROW_LENGTH,m.width),vt.pixelStorei(vt.UNPACK_IMAGE_HEIGHT,m.height),vt.pixelStorei(vt.UNPACK_SKIP_PIXELS,t.min.x),vt.pixelStorei(vt.UNPACK_SKIP_ROWS,t.min.y),vt.pixelStorei(vt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?vt.texSubImage3D(u,r,e.x,e.y,e.z,o,a,s,l,c,m.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),vt.compressedTexSubImage3D(u,r,e.x,e.y,e.z,o,a,s,l,m.data)):vt.texSubImage3D(u,r,e.x,e.y,e.z,o,a,s,l,c,m),vt.pixelStorei(vt.UNPACK_ROW_LENGTH,h),vt.pixelStorei(vt.UNPACK_IMAGE_HEIGHT,d),vt.pixelStorei(vt.UNPACK_SKIP_PIXELS,f),vt.pixelStorei(vt.UNPACK_SKIP_ROWS,p),vt.pixelStorei(vt.UNPACK_SKIP_IMAGES,g),0===r&&i.generateMipmaps&&vt.generateMipmap(u),K.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?J.setTextureCube(t,0):t.isData3DTexture?J.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?J.setTexture2DArray(t,0):J.setTexture2D(t,0),K.unbindTexture()},this.resetState=function(){_=0,x=0,w=null,K.reset(),gt.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return grt}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Pit?Eit:Sit}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===Eit?Pit:Oit}}class wut extends xut{}wut.prototype.isWebGL1Renderer=!0;class Sut{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new Aat(t),this.density=e}clone(){return new Sut(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Eut{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Aat(t),this.near=e,this.far=n}clone(){return new Eut(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Mut extends uat{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}}class Tut{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=irt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=wrt()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wrt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=wrt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const kut=new cot;class Cut{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)kut.fromBufferAttribute(this,e),kut.applyMatrix4(t),this.setXYZ(e,kut.x,kut.y,kut.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)kut.fromBufferAttribute(this,e),kut.applyNormalMatrix(t),this.setXYZ(e,kut.x,kut.y,kut.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)kut.fromBufferAttribute(this,e),kut.transformDirection(t),this.setXYZ(e,kut.x,kut.y,kut.z);return this}setX(t,e){return this.normalized&&(e=Prt(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Prt(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Prt(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Prt(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Art(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Art(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Art(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Art(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array),i=Prt(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Prt(e,this.array),n=Prt(n,this.array),i=Prt(i,this.array),r=Prt(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Uat(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Cut(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Aut extends Eat{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Aat(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Put;const Out=new cot,Rut=new cot,Lut=new cot,Dut=new Rrt,Iut=new Rrt,Nut=new Uot,zut=new cot,Fut=new cot,Uut=new cot,But=new Rrt,jut=new Rrt,Hut=new Rrt;class Vut extends uat{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Put){Put=new ist;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Tut(t,5);Put.setIndex([0,1,2,0,2,3]),Put.setAttribute("position",new Cut(e,3,0,!1)),Put.setAttribute("uv",new Cut(e,2,3,!1))}this.geometry=Put,this.material=void 0!==t?t:new Aut,this.center=new Rrt(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Rut.setFromMatrixScale(this.matrixWorld),Nut.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Lut.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Rut.multiplyScalar(-Lut.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;Gut(zut.set(-.5,-.5,0),Lut,o,Rut,i,r),Gut(Fut.set(.5,-.5,0),Lut,o,Rut,i,r),Gut(Uut.set(.5,.5,0),Lut,o,Rut,i,r),But.set(0,0),jut.set(1,0),Hut.set(1,1);let a=t.ray.intersectTriangle(zut,Fut,Uut,!1,Out);if(null===a&&(Gut(Fut.set(-.5,.5,0),Lut,o,Rut,i,r),jut.set(0,1),a=t.ray.intersectTriangle(zut,Uut,Fut,!1,Out),null===a))return;const s=t.ray.origin.distanceTo(Out);s<t.near||s>t.far||e.push({distance:s,point:Out.clone(),uv:wat.getInterpolation(Out,zut,Fut,Uut,But,jut,Hut,new Rrt),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Gut(t,e,n,i,r,o){Dut.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Iut.x=o*Dut.x-r*Dut.y,Iut.y=r*Dut.x+o*Dut.y):Iut.copy(Dut),t.copy(e),t.x+=Iut.x,t.y+=Iut.y,t.applyMatrix4(Nut)}const Wut=new cot,qut=new cot;class Xut extends uat{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance,t.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=Math.abs(e);const i=this.levels;let r;for(r=0;r<i.length&&!(e<i[r].distance);r++);return i.splice(r,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i;n++){let i=e[n].distance;if(e[n].object.visible&&(i-=i*e[n].hysteresis),t<i)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){Wut.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Wut);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){Wut.setFromMatrixPosition(t.matrixWorld),qut.setFromMatrixPosition(this.matrixWorld);const n=Wut.distanceTo(qut)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r;i++){let t=e[i].distance;if(e[i].object.visible&&(t-=t*e[i].hysteresis),!(n>=t))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const t=n[i];e.object.levels.push({object:t.object.uuid,distance:t.distance,hysteresis:t.hysteresis})}return e}}const Yut=new cot,Kut=new eot,Zut=new eot,Qut=new cot,Jut=new Uot,$ut=new cot,tht=new Pot,eht=new Uot,nht=new Fot;class iht extends xst{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Uot,this.bindMatrixInverse=new Uot,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new dot),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)$ut.fromBufferAttribute(e,n),this.applyBoneTransform(n,$ut),this.boundingBox.expandByPoint($ut)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Pot),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)$ut.fromBufferAttribute(e,n),this.applyBoneTransform(n,$ut),this.boundingSphere.expandByPoint($ut)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),tht.copy(this.boundingSphere),tht.applyMatrix4(i),!1!==t.ray.intersectsSphere(tht)&&(eht.copy(i).invert(),nht.copy(t.ray).applyMatrix4(eht),null!==this.boundingBox&&!1===nht.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,nht)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new eot,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.fromBufferAttribute(e,n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,i=this.geometry;Kut.fromBufferAttribute(i.attributes.skinIndex,t),Zut.fromBufferAttribute(i.attributes.skinWeight,t),Yut.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const t=Zut.getComponent(r);if(0!==t){const i=Kut.getComponent(r);Jut.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(Qut.copy(Yut).applyMatrix4(Jut),t)}}return e.applyMatrix4(this.bindMatrixInverse)}boneTransform(t,e){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(t,e)}}class rht extends uat{constructor(){super(),this.isBone=!0,this.type="Bone"}}class oht extends tot{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:ent,arguments.length>9&&void 0!==arguments[9]?arguments[9]:ent,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const aht=new Uot,sht=new Uot;class lht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=wrt(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Uot)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Uot;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=t.length;r<o;r++){const i=t[r]?t[r].matrixWorld:sht;aht.multiplyMatrices(i,e[r]),aht.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new lht(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=krt(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new oht(e,t,t,Snt,vnt);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new rht),this.bones.push(r),this.boneInverses.push((new Uot).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const o=n[i];t.boneInverses.push(o.toArray())}return t}}class cht extends Uat{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const uht=new Uot,hht=new Uot,dht=[],fht=new dot,pht=new Uot,ght=new xst,mht=new Pot;class vht extends xst{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new cht(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,pht)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new dot),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,uht),fht.copy(t.boundingBox).applyMatrix4(uht),this.boundingBox.union(fht)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new Pot),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,uht),mht.copy(t.boundingSphere).applyMatrix4(uht),this.boundingSphere.union(mht)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(ght.geometry=this.geometry,ght.material=this.material,void 0!==ght.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),mht.copy(this.boundingSphere),mht.applyMatrix4(n),!1!==t.ray.intersectsSphere(mht)))for(let r=0;r<i;r++){this.getMatrixAt(r,uht),hht.multiplyMatrices(n,uht),ght.matrixWorld=hht,ght.raycast(t,dht);for(let t=0,n=dht.length;t<n;t++){const n=dht[t];n.instanceId=r,n.object=this,e.push(n)}dht.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new cht(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class yht extends Eat{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Aat(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const bht=new cot,_ht=new cot,xht=new Uot,wht=new Fot,Sht=new Pot;class Eht extends uat{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ist,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new yht;super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)bht.fromBufferAttribute(e,t-1),_ht.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=bht.distanceTo(_ht);t.setAttribute("lineDistance",new Yat(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Sht.copy(n.boundingSphere),Sht.applyMatrix4(i),Sht.radius+=r,!1===t.ray.intersectsSphere(Sht))return;xht.copy(i).invert(),wht.copy(t.ray).applyMatrix4(xht);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new cot,c=new cot,u=new cot,h=new cot,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,o.start),i=Math.min(f.count,o.start+o.count)-1;n<i;n+=d){const i=f.getX(n),r=f.getX(n+1);l.fromBufferAttribute(p,i),c.fromBufferAttribute(p,r);if(wht.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const o=t.ray.origin.distanceTo(h);o<t.near||o>t.far||e.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),i=Math.min(p.count,o.start+o.count)-1;n<i;n+=d){l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1);if(wht.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(h);i<t.near||i>t.far||e.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}const Mht=new cot,Tht=new cot;class kht extends Eht{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)Mht.fromBufferAttribute(e,t),Tht.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+Mht.distanceTo(Tht);t.setAttribute("lineDistance",new Yat(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Cht extends Eht{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Aht extends Eat{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Aat(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Pht=new Uot,Oht=new Fot,Rht=new Pot,Lht=new cot;class Dht extends uat{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ist,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Aht;super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Rht.copy(n.boundingSphere),Rht.applyMatrix4(i),Rht.radius+=r,!1===t.ray.intersectsSphere(Rht))return;Pht.copy(i).invert(),Oht.copy(t.ray).applyMatrix4(Pht);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),r=Math.min(l.count,o.start+o.count);n<r;n++){const r=l.getX(n);Lht.fromBufferAttribute(c,r),Iht(Lht,r,s,i,t,e,this)}}else{for(let n=Math.max(0,o.start),r=Math.min(c.count,o.start+o.count);n<r;n++)Lht.fromBufferAttribute(c,n),Iht(Lht,n,s,i,t,e,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function Iht(t,e,n,i,r,o,a){const s=Oht.distanceSqToPoint(t);if(s<n){const n=new cot;Oht.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}class Nht extends tot{constructor(t,e,n,i,r,o,a,s,l){super(t,e,n,i,r,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:ant,this.magFilter=void 0!==r?r:ant,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class zht extends tot{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=ent,this.minFilter=ent,this.generateMipmaps=!1,this.needsUpdate=!0}}class Fht extends tot{constructor(t,e,n,i,r,o,a,s,l,c,u,h){super(null,o,a,s,l,c,i,r,u,h),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class Uht extends Fht{constructor(t,e,n,i,r,o){super(t,e,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=$et}}class Bht extends tot{constructor(t,e,n,i,r,o,a,s,l){super(t,e,n,i,r,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class jht{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let o;o=e||t*n[r-1];let a,s=0,l=r-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),a=n[i]-o,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)}getTangent(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),a=this.getPoint(r),s=e||(o.isVector2?new Rrt:new cot);return s.copy(a).sub(o).normalize(),s}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new cot,i=[],r=[],o=[],a=new cot,s=new Uot;for(let d=0;d<=t;d++){const e=d/t;i[d]=this.getTangentAt(e,new cot)}r[0]=new cot,o[0]=new cot;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let d=1;d<=t;d++){if(r[d]=r[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(Srt(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(s.makeRotationAxis(a,t))}o[d].crossVectors(i[d],r[d])}if(!0===e){let e=Math.acos(Srt(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],e*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Hht extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t,e){const n=e||new Rrt,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const a=this.aStartAngle+t*r;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,i=l-this.aY;s=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(s,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class Vht extends Hht{constructor(t,e,n,i,r,o){super(t,e,n,n,i,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Ght(){let t=0,e=0,n=0,i=0;function r(r,o,a,s){t=r,e=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,a,s){let l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+s)+(i-n)/s;l*=a,c*=a,r(e,n,l,c)},calc:function(r){const o=r*r;return t+e*r+n*o+i*(o*r)}}}const Wht=new cot,qht=new Ght,Xht=new Ght,Yht=new Ght;class Kht extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot,n=this.points,i=n.length,r=(i-(this.closed?0:1))*t;let o,a,s=Math.floor(r),l=r-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:0===l&&s===i-1&&(s=i-2,l=1),this.closed||s>0?o=n[(s-1)%i]:(Wht.subVectors(n[0],n[1]).add(n[0]),o=Wht);const c=n[s%i],u=n[(s+1)%i];if(this.closed||s+2<i?a=n[(s+2)%i]:(Wht.subVectors(n[i-1],n[i-2]).add(n[i-1]),a=Wht),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(c),t),n=Math.pow(c.distanceToSquared(u),t),i=Math.pow(u.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),qht.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,e,n,i),Xht.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,e,n,i),Yht.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,e,n,i)}else"catmullrom"===this.curveType&&(qht.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),Xht.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),Yht.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return e.set(qht.calc(l),Xht.calc(l),Yht.calc(l)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new cot).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Zht(t,e,n,i,r){const o=.5*(i-e),a=.5*(r-n),s=t*t;return(2*n-2*i+o+a)*(t*s)+(-3*n+3*i-2*o-a)*s+o*t+n}function Qht(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Jht(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}class $ht extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rrt,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rrt,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Rrt;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return e.set(Jht(t,n.x,i.x,r.x,o.x),Jht(t,n.y,i.y,r.y,o.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class tdt extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cot,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new cot;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return e.set(Jht(t,n.x,i.x,r.x,o.x),Jht(t,n.y,i.y,r.y,o.y),Jht(t,n.z,i.z,r.z,o.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class edt extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rrt,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class ndt extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot).subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class idt extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rrt,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Rrt;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt,n=this.v0,i=this.v1,r=this.v2;return e.set(Qht(t,n.x,i.x,r.x),Qht(t,n.y,i.y,r.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class rdt extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cot;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot,n=this.v0,i=this.v1,r=this.v2;return e.set(Qht(t,n.x,i.x,r.x),Qht(t,n.y,i.y,r.y),Qht(t,n.z,i.z,r.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class odt extends jht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt,n=this.points,i=(n.length-1)*t,r=Math.floor(i),o=i-r,a=n[0===r?r:r-1],s=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return e.set(Zht(o,a.x,s.x,l.x,c.x),Zht(o,a.y,s.y,l.y,c.y)),e}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Rrt).fromArray(n))}return this}}var adt=Object.freeze({__proto__:null,ArcCurve:Vht,CatmullRomCurve3:Kht,CubicBezierCurve:$ht,CubicBezierCurve3:tdt,EllipseCurve:Hht,LineCurve:edt,LineCurve3:ndt,QuadraticBezierCurve:idt,QuadraticBezierCurve3:rdt,SplineCurve:odt});class sdt extends jht{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new edt(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,o=this.curves[r],a=o.getLength(),s=0===a?0:1-t/a;return o.getPointAt(s,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const i=s[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new adt[n.type]).fromJSON(n))}return this}}class ldt extends sdt{constructor(t){super(),this.type="Path",this.currentPoint=new Rrt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new edt(this.currentPoint.clone(),new Rrt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new idt(this.currentPoint.clone(),new Rrt(t,e),new Rrt(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,o){const a=new $ht(this.currentPoint.clone(),new Rrt(t,e),new Rrt(n,i),new Rrt(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new odt(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,i,r,o),this}absarc(t,e,n,i,r,o){return this.absellipse(t,e,n,n,i,r,o),this}ellipse(t,e,n,i,r,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,o,a,s),this}absellipse(t,e,n,i,r,o,a,s){const l=new Hht(t,e,n,i,r,o,a,s);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class cdt extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Rrt(0,-.5),new Rrt(.5,0),new Rrt(0,.5)],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Srt(i,0,2*Math.PI);const r=[],o=[],a=[],s=[],l=[],c=1/e,u=new cot,h=new Rrt,d=new cot,f=new cot,p=new cot;let g=0,m=0;for(let v=0;v<=t.length-1;v++)switch(v){case 0:g=t[v+1].x-t[v].x,m=t[v+1].y-t[v].y,d.x=1*m,d.y=-g,d.z=0*m,p.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case t.length-1:s.push(p.x,p.y,p.z);break;default:g=t[v+1].x-t[v].x,m=t[v+1].y-t[v].y,d.x=1*m,d.y=-g,d.z=0*m,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),s.push(d.x,d.y,d.z),p.copy(f)}for(let v=0;v<=e;v++){const r=n+v*c*i,d=Math.sin(r),f=Math.cos(r);for(let n=0;n<=t.length-1;n++){u.x=t[n].x*d,u.y=t[n].y,u.z=t[n].x*f,o.push(u.x,u.y,u.z),h.x=v/e,h.y=n/(t.length-1),a.push(h.x,h.y);const i=s[3*n+0]*d,r=s[3*n+1],c=s[3*n+0]*f;l.push(i,r,c)}}for(let v=0;v<e;v++)for(let e=0;e<t.length-1;e++){const n=e+v*t.length,i=n,o=n+t.length,a=n+t.length+1,s=n+1;r.push(i,o,s),r.push(a,s,o)}this.setIndex(r),this.setAttribute("position",new Yat(o,3)),this.setAttribute("uv",new Yat(a,2)),this.setAttribute("normal",new Yat(l,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cdt(t.points,t.segments,t.phiStart,t.phiLength)}}class udt extends cdt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new ldt;r.absarc(0,-e/2,t,1.5*Math.PI,0),r.absarc(0,e/2,t,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:i}}static fromJSON(t){return new udt(t.radius,t.length,t.capSegments,t.radialSegments)}}class hdt extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],o=[],a=[],s=[],l=new cot,c=new Rrt;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=e;u++,h+=3){const r=n+u/e*i;l.x=t*Math.cos(r),l.y=t*Math.sin(r),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[h]/t+1)/2,c.y=(o[h+1]/t+1)/2,s.push(c.x,c.y)}for(let u=1;u<=e;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new Yat(o,3)),this.setAttribute("normal",new Yat(a,3)),this.setAttribute("uv",new Yat(s,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new hdt(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class ddt extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let f=0;const p=[],g=n/2;let m=0;function v(n){const r=f,o=new Rrt,p=new cot;let v=0;const y=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=i;t++)u.push(0,g*b,0),h.push(0,b,0),d.push(.5,.5),f++;const _=f;for(let t=0;t<=i;t++){const e=t/i*s+a,n=Math.cos(e),r=Math.sin(e);p.x=y*r,p.y=g*b,p.z=y*n,u.push(p.x,p.y,p.z),h.push(0,b,0),o.x=.5*n+.5,o.y=.5*r*b+.5,d.push(o.x,o.y),f++}for(let t=0;t<i;t++){const e=r+t,i=_+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),v+=3}l.addGroup(m,v,!0===n?1:2),m+=v}!function(){const o=new cot,v=new cot;let y=0;const b=(e-t)/n;for(let l=0;l<=r;l++){const c=[],m=l/r,y=m*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*s+a,l=Math.sin(r),p=Math.cos(r);v.x=y*l,v.y=-m*n+g,v.z=y*p,u.push(v.x,v.y,v.z),o.set(l,b,p).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-m),c.push(f++)}p.push(c)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=p[e][t],i=p[e+1][t],r=p[e+1][t+1],o=p[e][t+1];c.push(n,i,o),c.push(i,r,o),y+=6}l.addGroup(m,y,0),m+=y}(),!1===o&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Yat(u,3)),this.setAttribute("normal",new Yat(h,3)),this.setAttribute("uv",new Yat(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ddt(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class fdt extends ddt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}static fromJSON(t){return new fdt(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class pdt extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],o=[];function a(t,e,n,i){const r=i+1,o=[];for(let a=0;a<=r;a++){o[a]=[];const i=t.clone().lerp(n,a/r),s=e.clone().lerp(n,a/r),l=r-a;for(let t=0;t<=l;t++)o[a][t]=0===t&&a===r?i:i.clone().lerp(s,t/l)}for(let a=0;a<r;a++)for(let t=0;t<2*(r-a)-1;t++){const e=Math.floor(t/2);t%2===0?(s(o[a][e+1]),s(o[a+1][e]),s(o[a][e])):(s(o[a][e+1]),s(o[a+1][e+1]),s(o[a+1][e]))}}function s(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=i/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new cot,i=new cot,r=new cot;for(let o=0;o<e.length;o+=3)l(e[o+0],n),l(e[o+1],i),l(e[o+2],r),a(n,i,r,t)}(i),function(t){const e=new cot;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new cot;for(let n=0;n<r.length;n+=3){t.x=r[n+0],t.y=r[n+1],t.z=r[n+2];const i=u(t)/2/Math.PI+.5,a=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);o.push(i,1-a)}var e;(function(){const t=new cot,e=new cot,n=new cot,i=new cot,a=new Rrt,s=new Rrt,l=new Rrt;for(let h=0,d=0;h<r.length;h+=9,d+=6){t.set(r[h+0],r[h+1],r[h+2]),e.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),i.copy(t).add(e).add(n).divideScalar(3);const f=u(i);c(a,d+0,t,f),c(s,d+2,e,f),c(l,d+4,n,f)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],i=o[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),i<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Yat(r,3)),this.setAttribute("normal",new Yat(r.slice(),3)),this.setAttribute("uv",new Yat(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new pdt(t.vertices,t.indices,t.radius,t.details)}}class gdt extends pdt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new gdt(t.radius,t.detail)}}const mdt=new cot,vdt=new cot,ydt=new cot,bdt=new wat;class _dt extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(_rt*e),o=t.getIndex(),a=t.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let t=0;t<s;t+=3){o?(l[0]=o.getX(t),l[1]=o.getX(t+1),l[2]=o.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:s}=bdt;if(e.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),s.fromBufferAttribute(a,l[2]),bdt.getNormal(ydt),u[0]="".concat(Math.round(e.x*i),",").concat(Math.round(e.y*i),",").concat(Math.round(e.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(s.x*i),",").concat(Math.round(s.y*i),",").concat(Math.round(s.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=u[t],i=u[e],o=bdt[c[t]],a=bdt[c[e]],s="".concat(n,"_").concat(i),f="".concat(i,"_").concat(n);f in h&&h[f]?(ydt.dot(h[f].normal)<=r&&(d.push(o.x,o.y,o.z),d.push(a.x,a.y,a.z)),h[f]=null):s in h||(h[s]={index0:l[t],index1:l[e],normal:ydt.clone()})}}for(const t in h)if(h[t]){const{index0:e,index1:n}=h[t];mdt.fromBufferAttribute(a,e),vdt.fromBufferAttribute(a,n),d.push(mdt.x,mdt.y,mdt.z),d.push(vdt.x,vdt.y,vdt.z)}this.setAttribute("position",new Yat(d,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class xdt extends ldt{constructor(t){super(t),this.uuid=wrt(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new ldt).fromJSON(n))}return this}}const wdt=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=e&&e.length,r=i?e[0]*n:t.length;let o=Sdt(t,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,f;if(i&&(o=function(t,e,n,i){const r=[];let o,a,s,l,c;for(o=0,a=e.length;o<a;o++)s=e[o]*i,l=o<a-1?e[o+1]*i:t.length,c=Sdt(t,s,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Ddt(c));for(r.sort(Pdt),o=0;o<r.length;o++)n=Odt(r[o],n);return n}(t,e,o,n)),t.length>80*n){s=c=t[0],l=u=t[1];for(let e=n;e<r;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-s,u-l),f=0!==f?32767/f:0}return Mdt(o,a,n,s,l,f,0),a};function Sdt(t,e,n,i,r){let o,a;if(r===function(t,e,n,i){let r=0;for(let o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(t,e,n,i)>0)for(o=e;o<n;o+=i)a=Gdt(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=Gdt(o,t[o],t[o+1],a);return a&&Fdt(a,a.next)&&(Wdt(a),a=a.next),a}function Edt(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!Fdt(i,i.next)&&0!==zdt(i.prev,i,i.next))i=i.next;else{if(Wdt(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function Mdt(t,e,n,i,r,o,a){if(!t)return;!a&&o&&function(t,e,n,i){let r=t;do{0===r.z&&(r.z=Ldt(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ,i);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,o);let s,l,c=t;for(;t.prev!==t.next;)if(s=t.prev,l=t.next,o?kdt(t,i,r,o):Tdt(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),Wdt(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?Mdt(t=Cdt(Edt(t),e,n),e,n,i,r,o,2):2===a&&Adt(t,e,n,i,r,o):Mdt(Edt(t),e,n,i,r,o,1);break}}function Tdt(t){const e=t.prev,n=t,i=t.next;if(zdt(e,n,i)>=0)return!1;const r=e.x,o=n.x,a=i.x,s=e.y,l=n.y,c=i.y,u=r<o?r<a?r:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=r>o?r>a?r:a:o>a?o:a,f=s>l?s>c?s:c:l>c?l:c;let p=i.next;for(;p!==e;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Idt(r,s,o,l,a,c,p.x,p.y)&&zdt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function kdt(t,e,n,i){const r=t.prev,o=t,a=t.next;if(zdt(r,o,a)>=0)return!1;const s=r.x,l=o.x,c=a.x,u=r.y,h=o.y,d=a.y,f=s<l?s<c?s:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,g=s>l?s>c?s:c:l>c?l:c,m=u>h?u>d?u:d:h>d?h:d,v=Ldt(f,p,e,n,i),y=Ldt(g,m,e,n,i);let b=t.prevZ,_=t.nextZ;for(;b&&b.z>=v&&_&&_.z<=y;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=m&&b!==r&&b!==a&&Idt(s,u,l,h,c,d,b.x,b.y)&&zdt(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,_.x>=f&&_.x<=g&&_.y>=p&&_.y<=m&&_!==r&&_!==a&&Idt(s,u,l,h,c,d,_.x,_.y)&&zdt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;b&&b.z>=v;){if(b.x>=f&&b.x<=g&&b.y>=p&&b.y<=m&&b!==r&&b!==a&&Idt(s,u,l,h,c,d,b.x,b.y)&&zdt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=m&&_!==r&&_!==a&&Idt(s,u,l,h,c,d,_.x,_.y)&&zdt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Cdt(t,e,n){let i=t;do{const r=i.prev,o=i.next.next;!Fdt(r,o)&&Udt(r,i,i.next,o)&&Hdt(r,o)&&Hdt(o,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(o.i/n|0),Wdt(i),Wdt(i.next),i=t=o),i=i.next}while(i!==t);return Edt(i)}function Adt(t,e,n,i,r,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&Ndt(a,t)){let s=Vdt(a,t);return a=Edt(a,a.next),s=Edt(s,s.next),Mdt(a,e,n,i,r,o,0),void Mdt(s,e,n,i,r,o,0)}t=t.next}a=a.next}while(a!==t)}function Pdt(t,e){return t.x-e.x}function Odt(t,e){const n=function(t,e){let n,i=e,r=-1/0;const o=t.x,a=t.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const t=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=o&&t>r&&(r=t,n=i.x<i.next.x?i:i.next,t===o))return n}i=i.next}while(i!==e);if(!n)return null;const s=n,l=n.x,c=n.y;let u,h=1/0;i=n;do{o>=i.x&&i.x>=l&&o!==i.x&&Idt(a<c?o:r,a,l,c,a<c?r:o,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(o-i.x),Hdt(i,t)&&(u<h||u===h&&(i.x>n.x||i.x===n.x&&Rdt(n,i)))&&(n=i,h=u)),i=i.next}while(i!==s);return n}(t,e);if(!n)return e;const i=Vdt(n,t);return Edt(i,i.next),Edt(n,n.next)}function Rdt(t,e){return zdt(t.prev,t,e.prev)<0&&zdt(e.next,t,t.next)<0}function Ldt(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ddt(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Idt(t,e,n,i,r,o,a,s){return(r-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(i-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(r-a)*(i-s)}function Ndt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Udt(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Hdt(t,e)&&Hdt(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(zdt(t.prev,t,e.prev)||zdt(t,e.prev,e))||Fdt(t,e)&&zdt(t.prev,t,t.next)>0&&zdt(e.prev,e,e.next)>0)}function zdt(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Fdt(t,e){return t.x===e.x&&t.y===e.y}function Udt(t,e,n,i){const r=jdt(zdt(t,e,n)),o=jdt(zdt(t,e,i)),a=jdt(zdt(n,i,t)),s=jdt(zdt(n,i,e));return r!==o&&a!==s||(!(0!==r||!Bdt(t,n,e))||(!(0!==o||!Bdt(t,i,e))||(!(0!==a||!Bdt(n,t,i))||!(0!==s||!Bdt(n,e,i)))))}function Bdt(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function jdt(t){return t>0?1:t<0?-1:0}function Hdt(t,e){return zdt(t.prev,t,t.next)<0?zdt(t,e,t.next)>=0&&zdt(t,t.prev,e)>=0:zdt(t,e,t.prev)<0||zdt(t,t.next,e)<0}function Vdt(t,e){const n=new qdt(t.i,t.x,t.y),i=new qdt(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Gdt(t,e,n,i){const r=new qdt(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Wdt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function qdt(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Xdt{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return Xdt.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];Ydt(t),Kdt(n,t);let o=t.length;e.forEach(Ydt);for(let s=0;s<e.length;s++)i.push(o),o+=e[s].length,Kdt(n,e[s]);const a=wdt(n,i);for(let s=0;s<a.length;s+=3)r.push(a.slice(s,s+3));return r}}function Ydt(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Kdt(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Zdt extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xdt([new Rrt(.5,.5),new Rrt(-.5,.5),new Rrt(-.5,-.5),new Rrt(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let a=0,s=t.length;a<s;a++){o(t[a])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:1;let c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:.2,h=void 0!==e.bevelSize?e.bevelSize:u-.1,d=void 0!==e.bevelOffset?e.bevelOffset:0,f=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,g=void 0!==e.UVGenerator?e.UVGenerator:Qdt;let m,v,y,b,_,x=!1;p&&(m=p.getSpacedPoints(s),x=!0,c=!1,v=p.computeFrenetFrames(s,!1),y=new cot,b=new cot,_=new cot),c||(f=0,u=0,h=0,d=0);const w=t.extractPoints(a);let S=w.shape;const E=w.holes;if(!Xdt.isClockWise(S)){S=S.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];Xdt.isClockWise(e)&&(E[t]=e.reverse())}}const M=Xdt.triangulateShape(S,E),T=S;for(let e=0,n=E.length;e<n;e++){const t=E[e];S=S.concat(t)}function k(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}const C=S.length,A=M.length;function P(t,e,n){let i,r,o;const a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=e.x-s/h,p=e.y+a/h,g=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(a*c-s*l);i=f+a*g-t.x,r=p+s*g-t.y;const m=i*i+r*r;if(m<=2)return new Rrt(i,r);o=Math.sqrt(m/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(c)&&(t=!0),t?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new Rrt(i/o,r/o)}const O=[];for(let e=0,n=T.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),O[e]=P(T[e],T[i],T[r]);const R=[];let L,D=O.concat();for(let e=0,n=E.length;e<n;e++){const t=E[e];L=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[e]=P(t[e],t[i],t[r]);R.push(L),D=D.concat(L)}for(let e=0;e<f;e++){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,r=T.length;e<r;e++){const t=k(T[e],O[e],i);z(t.x,t.y,-n)}for(let e=0,r=E.length;e<r;e++){const t=E[e];L=R[e];for(let e=0,r=t.length;e<r;e++){const r=k(t[e],L[e],i);z(r.x,r.y,-n)}}}const I=h+d;for(let e=0;e<C;e++){const t=c?k(S[e],D[e],I):S[e];x?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),_.copy(m[0]).add(b).add(y),z(_.x,_.y,_.z)):z(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<C;t++){const n=c?k(S[t],D[t],I):S[t];x?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),_.copy(m[e]).add(b).add(y),z(_.x,_.y,_.z)):z(n.x,n.y,l/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,r=T.length;e<r;e++){const t=k(T[e],O[e],i);z(t.x,t.y,l+n)}for(let e=0,r=E.length;e<r;e++){const t=E[e];L=R[e];for(let e=0,r=t.length;e<r;e++){const r=k(t[e],L[e],i);x?z(r.x,r.y+m[s-1].y,m[s-1].x+n):z(r.x,r.y,l+n)}}}function N(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=s+2*f;t<n;t++){const n=C*t,o=C*(t+1);U(e+i+n,e+r+n,e+r+o,e+i+o)}}}function z(t,e,n){o.push(t),o.push(e),o.push(n)}function F(t,e,r){B(t),B(e),B(r);const o=i.length/3,a=g.generateTopUV(n,i,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2])}function U(t,e,r,o){B(t),B(e),B(o),B(e),B(r),B(o);const a=i.length/3,s=g.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function B(t){i.push(o[3*t+0]),i.push(o[3*t+1]),i.push(o[3*t+2])}function j(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(c){let t=0,e=C*t;for(let n=0;n<A;n++){const t=M[n];F(t[2]+e,t[1]+e,t[0]+e)}t=s+2*f,e=C*t;for(let n=0;n<A;n++){const t=M[n];F(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<A;t++){const e=M[t];F(e[2],e[1],e[0])}for(let t=0;t<A;t++){const e=M[t];F(e[0]+C*s,e[1]+C*s,e[2]+C*s)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;N(T,e),e+=T.length;for(let n=0,i=E.length;n<i;n++){const t=E[n];N(t,e),e+=t.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new Yat(i,3)),this.setAttribute("uv",new Yat(r,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const e=t[i];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);n.options=Object.assign({},e),void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let r=0,o=t.shapes.length;r<o;r++){const i=e[t.shapes[r]];n.push(i)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new adt[i.type]).fromJSON(i)),new Zdt(n,t.options)}}const Qdt={generateTopUV:function(t,e,n,i,r){const o=e[3*n],a=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new Rrt(o,a),new Rrt(s,l),new Rrt(c,u)]},generateSideWallUV:function(t,e,n,i,r,o){const a=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],f=e[3*r+1],p=e[3*r+2],g=e[3*o],m=e[3*o+1],v=e[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new Rrt(a,1-l),new Rrt(c,1-h),new Rrt(d,1-p),new Rrt(g,1-v)]:[new Rrt(s,1-l),new Rrt(u,1-h),new Rrt(f,1-p),new Rrt(m,1-v)]}};class Jdt extends pdt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Jdt(t.radius,t.detail)}}class $dt extends pdt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new $dt(t.radius,t.detail)}}class tft extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const a=[],s=[],l=[],c=[];let u=t;const h=(e-t)/i,d=new cot,f=new Rrt;for(let p=0;p<=i;p++){for(let t=0;t<=n;t++){const i=r+t/n*o;d.x=u*Math.cos(i),d.y=u*Math.sin(i),s.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/e+1)/2,f.y=(d.y/e+1)/2,c.push(f.x,f.y)}u+=h}for(let p=0;p<i;p++){const t=p*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,o=i+n+1,s=i+n+2,l=i+1;a.push(r,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Yat(s,3)),this.setAttribute("normal",new Yat(l,3)),this.setAttribute("uv",new Yat(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new tft(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class eft extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xdt([new Rrt(0,.5),new Rrt(-.5,-.5),new Rrt(.5,-.5)]),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))l(t);else for(let c=0;c<t.length;c++)l(t[c]),this.addGroup(a,s,c),a+=s,s=0;function l(t){const a=i.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===Xdt.isClockWise(c)&&(c=c.reverse());for(let e=0,n=u.length;e<n;e++){const t=u[e];!0===Xdt.isClockWise(t)&&(u[e]=t.reverse())}const h=Xdt.triangulateShape(c,u);for(let e=0,n=u.length;e<n;e++){const t=u[e];c=c.concat(t)}for(let e=0,n=c.length;e<n;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),o.push(t.x,t.y)}for(let e=0,i=h.length;e<i;e++){const t=h[e],i=t[0]+a,r=t[1]+a,o=t[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Yat(i,3)),this.setAttribute("normal",new Yat(r,3)),this.setAttribute("uv",new Yat(o,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new eft(n,t.curveSegments)}}class nft extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new cot,h=new cot,d=[],f=[],p=[],g=[];for(let m=0;m<=n;m++){const d=[],v=m/n;let y=0;0===m&&0===o?y=.5/e:m===n&&s===Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(i+s*r)*Math.sin(o+v*a),u.y=t*Math.cos(o+v*a),u.z=t*Math.sin(i+s*r)*Math.sin(o+v*a),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),g.push(s+y,1-v),d.push(l++)}c.push(d)}for(let m=0;m<n;m++)for(let t=0;t<e;t++){const e=c[m][t+1],i=c[m][t],r=c[m+1][t],a=c[m+1][t+1];(0!==m||o>0)&&d.push(e,i,a),(m!==n-1||s<Math.PI)&&d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new Yat(f,3)),this.setAttribute("normal",new Yat(p,3)),this.setAttribute("uv",new Yat(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new nft(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class ift extends pdt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new ift(t.radius,t.detail)}}class rft extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const o=[],a=[],s=[],l=[],c=new cot,u=new cot,h=new cot;for(let d=0;d<=n;d++)for(let o=0;o<=i;o++){const f=o/i*r,p=d/n*Math.PI*2;u.x=(t+e*Math.cos(p))*Math.cos(f),u.y=(t+e*Math.cos(p))*Math.sin(f),u.z=e*Math.sin(p),a.push(u.x,u.y,u.z),c.x=t*Math.cos(f),c.y=t*Math.sin(f),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(o/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=i;t++){const e=(i+1)*d+t-1,n=(i+1)*(d-1)+t-1,r=(i+1)*(d-1)+t,a=(i+1)*d+t;o.push(e,n,a),o.push(n,r,a)}this.setIndex(o),this.setAttribute("position",new Yat(a,3)),this.setAttribute("normal",new Yat(s,3)),this.setAttribute("uv",new Yat(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rft(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class oft extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],l=[],c=[],u=new cot,h=new cot,d=new cot,f=new cot,p=new cot,g=new cot,m=new cot;for(let y=0;y<=n;++y){const a=y/n*r*Math.PI*2;v(a,r,o,t,d),v(a+.01,r,o,t,f),g.subVectors(f,d),m.addVectors(f,d),p.crossVectors(g,m),m.crossVectors(p,g),p.normalize(),m.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,o=-e*Math.cos(r),a=e*Math.sin(r);u.x=d.x+(o*m.x+a*p.x),u.y=d.y+(o*m.y+a*p.y),u.z=d.z+(o*m.z+a*p.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(t/i)}}for(let y=1;y<=n;y++)for(let t=1;t<=i;t++){const e=(i+1)*(y-1)+(t-1),n=(i+1)*y+(t-1),r=(i+1)*y+t,o=(i+1)*(y-1)+t;a.push(e,n,o),a.push(n,r,o)}function v(t,e,n,i,r){const o=Math.cos(t),a=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Yat(s,3)),this.setAttribute("normal",new Yat(l,3)),this.setAttribute("uv",new Yat(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new oft(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class aft extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rdt(new cot(-1,-1,0),new cot(-1,1,0),new cot(1,1,0)),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new cot,s=new cot,l=new Rrt;let c=new cot;const u=[],h=[],d=[],f=[];function p(r){c=t.getPointAt(r/e,c);const l=o.normals[r],d=o.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),o=-Math.cos(e);s.x=o*l.x+r*d.x,s.y=o*l.y+r*d.y,s.z=o*l.z+r*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)p(t);p(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),o=(i+1)*t+e,a=(i+1)*(t-1)+e;f.push(n,r,a),f.push(r,o,a)}}()}(),this.setIndex(f),this.setAttribute("position",new Yat(u,3)),this.setAttribute("normal",new Yat(h,3)),this.setAttribute("uv",new Yat(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new aft((new adt[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class sft extends ist{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new cot,r=new cot;if(null!==t.index){const o=t.attributes.position,a=t.index;let s=t.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,l=s.length;t<l;++t){const l=s[t],c=l.start;for(let t=c,s=c+l.count;t<s;t+=3)for(let l=0;l<3;l++){const s=a.getX(t+l),c=a.getX(t+(l+1)%3);i.fromBufferAttribute(o,s),r.fromBufferAttribute(o,c),!0===lft(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const o=t.attributes.position;for(let t=0,a=o.count/3;t<a;t++)for(let s=0;s<3;s++){const a=3*t+s,l=3*t+(s+1)%3;i.fromBufferAttribute(o,a),r.fromBufferAttribute(o,l),!0===lft(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Yat(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function lft(t,e,n){const i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var cft=Object.freeze({__proto__:null,BoxGeometry:Sst,CapsuleGeometry:udt,CircleGeometry:hdt,ConeGeometry:fdt,CylinderGeometry:ddt,DodecahedronGeometry:gdt,EdgesGeometry:_dt,ExtrudeGeometry:Zdt,IcosahedronGeometry:Jdt,LatheGeometry:cdt,OctahedronGeometry:$dt,PlaneGeometry:Gst,PolyhedronGeometry:pdt,RingGeometry:tft,ShapeGeometry:eft,SphereGeometry:nft,TetrahedronGeometry:ift,TorusGeometry:rft,TorusKnotGeometry:oft,TubeGeometry:aft,WireframeGeometry:sft});class uft extends Eat{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Aat(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class hft extends Cst{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class dft extends Eat{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Aat(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Aat(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kit,this.normalScale=new Rrt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class fft extends dft{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Rrt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Srt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Aat(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Aat(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Aat(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!==t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!==t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!==t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!==t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!==t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class pft extends Eat{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Aat(16777215),this.specular=new Aat(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Aat(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kit,this.normalScale=new Rrt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zet,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class gft extends Eat{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Aat(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Aat(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kit,this.normalScale=new Rrt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class mft extends Eat{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kit,this.normalScale=new Rrt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class vft extends Eat{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Aat(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Aat(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kit,this.normalScale=new Rrt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zet,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class yft extends Eat{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Aat(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kit,this.normalScale=new Rrt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class bft extends yht{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function _ft(t,e,n){return wft(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function xft(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function wft(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sft(t){const e=t.length,n=new Array(e);for(let i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n}function Eft(t,e,n){const i=t.length,r=new t.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*e;for(let n=0;n!==e;++n)r[a++]=t[i+n]}return r}function Mft(t,e,n,i){let r=1,o=t[0];for(;void 0!==o&&void 0===o[i];)o=t[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)}const Tft={arraySlice:_ft,convertArray:xft,isTypedArray:wft,getKeyframeOrder:Sft,sortedArray:Eft,flattenJSON:Mft,subclip:function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=t.clone();o.name=e;const a=[];for(let l=0;l<o.tracks.length;++l){const t=o.tracks[l],e=t.getValueSize(),s=[],c=[];for(let o=0;o<t.times.length;++o){const a=t.times[o]*r;if(!(a<n||a>=i)){s.push(t.times[o]);for(let n=0;n<e;++n)c.push(t.values[o*e+n])}}0!==s.length&&(t.times=xft(s,t.times.constructor),t.values=xft(c,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,o=e/i;for(let a=0;a<r;++a){const e=n.tracks[a],i=e.ValueTypeName;if("bool"===i||"string"===i)continue;const r=t.tracks.find((function(t){return t.name===e.name&&t.ValueTypeName===i}));if(void 0===r)continue;let s=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=e.times.length-1;let d;if(o<=e.times[0]){const t=s,n=l-s;d=_ft(e.values,t,n)}else if(o>=e.times[h]){const t=h*l+s,n=t+l-s;d=_ft(e.values,t,n)}else{const t=e.createInterpolant(),n=s,i=l-s;t.evaluate(o),d=_ft(t.resultBuffer,n,i)}if("quaternion"===i){(new lot).fromArray(d).normalize().conjugate().toArray(d)}const f=r.times.length;for(let t=0;t<f;++t){const e=t*u+c;if("quaternion"===i)lot.multiplyQuaternionsFlat(r.values,e,d,0,r.values,e);else{const t=u-2*c;for(let n=0;n<t;++n)r.values[e+n]-=d[n]}}}return t.blendMode=bit,t}};class kft{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let o;n:{i:if(!(t<i)){for(let o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}if(t>=r)break t;{const a=e[1];t<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}}for(;n<o;){const i=n+o>>>1;t<e[i]?o=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let o=0;o!==i;++o)e[o]=n[r+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Cft extends kft{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:git,endingEnd:git}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case mit:r=t,a=2*e-n;break;case vit:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case mit:o=t,s=2*n-e;break;case vit:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(i-e),p=f*f,g=p*f,m=-h*g+2*h*p-h*f,v=(1+h)*g+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*g+(1.5+d)*p+.5*f,b=d*g-d*p;for(let _=0;_!==a;++_)r[_]=m*o[c+_]+v*o[l+_]+y*o[s+_]+b*o[u+_];return r}}class Aft extends kft{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=(n-e)/(i-e),u=1-c;for(let h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}class Pft extends kft{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class Oft{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=xft(e,this.TimeBufferType),this.values=xft(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:xft(t.times,Array),values:xft(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Pft(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Aft(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Cft(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case dit:e=this.InterpolantFactoryMethodDiscrete;break;case fit:e=this.InterpolantFactoryMethodLinear;break;case pit:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dit;case this.InterpolantFactoryMethodLinear:return fit;case this.InterpolantFactoryMethodSmooth:return pit}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const t=this.getValueSize();this.times=_ft(n,r,o),this.values=_ft(this.values,r*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==r;a++){const e=n[a];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,e,o),t=!1;break}o=e}if(void 0!==i&&wft(i))for(let a=0,s=i.length;a!==s;++a){const e=i[a];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,e),t=!1;break}}return t}optimize(){const t=_ft(this.times),e=_ft(this.values),n=this.getValueSize(),i=this.getInterpolation()===pit,r=t.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(i)r=!0;else{const t=a*n,i=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[i+a]||n!==e[o+a]){r=!0;break}}}if(r){if(a!==o){t[o]=t[a];const i=a*n,r=o*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++o}}if(r>0){t[o]=t[r];for(let t=r*n,i=o*n,a=0;a!==n;++a)e[i+a]=e[t+a];++o}return o!==t.length?(this.times=_ft(t,0,o),this.values=_ft(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=_ft(this.times,0),e=_ft(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}Oft.prototype.TimeBufferType=Float32Array,Oft.prototype.ValueBufferType=Float32Array,Oft.prototype.DefaultInterpolation=fit;class Rft extends Oft{}Rft.prototype.ValueTypeName="bool",Rft.prototype.ValueBufferType=Array,Rft.prototype.DefaultInterpolation=dit,Rft.prototype.InterpolantFactoryMethodLinear=void 0,Rft.prototype.InterpolantFactoryMethodSmooth=void 0;class Lft extends Oft{}Lft.prototype.ValueTypeName="color";class Dft extends Oft{}Dft.prototype.ValueTypeName="number";class Ift extends kft{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(i-e);let l=t*a;for(let c=l+a;l!==c;l+=4)lot.slerpFlat(r,0,o,l-a,o,l,s);return r}}class Nft extends Oft{InterpolantFactoryMethodLinear(t){return new Ift(this.times,this.values,this.getValueSize(),t)}}Nft.prototype.ValueTypeName="quaternion",Nft.prototype.DefaultInterpolation=fit,Nft.prototype.InterpolantFactoryMethodSmooth=void 0;class zft extends Oft{}zft.prototype.ValueTypeName="string",zft.prototype.ValueBufferType=Array,zft.prototype.DefaultInterpolation=dit,zft.prototype.InterpolantFactoryMethodLinear=void 0,zft.prototype.InterpolantFactoryMethodSmooth=void 0;class Fft extends Oft{}Fft.prototype.ValueTypeName="vector";class Uft{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yit;this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=wrt(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(Bft(n[o]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,o=n.length;r!==o;++r)e.push(Oft.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,o=[];for(let a=0;a<r;a++){let t=[],s=[];t.push((a+r-1)%r,a,(a+1)%r),s.push(0,1,0);const l=Sft(t);t=Eft(t,1,l),s=Eft(s,1,l),i||0!==t[0]||(t.push(r),s.push(s[0])),o.push(new Dft(".morphTargetInfluences["+e[a].name+"]",t,s).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,s=t.length;a<s;a++){const e=t[a],n=e.name.match(r);if(n&&n.length>1){const t=n[1];let r=i[t];r||(i[t]=r=[]),r.push(e)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const o=[],a=[];Mft(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const l=t.hierarchy||[];for(let c=0;c<l.length;c++){const t=l[c].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let i=0;i<t[n].morphTargets.length;i++)e[t[n].morphTargets[i]]=-1;for(const r in e){const e=[],o=[];for(let i=0;i!==t[n].morphTargets.length;++i){const i=t[n];e.push(i.time),o.push(i.morphTarget===r?1:0)}i.push(new Dft(".morphTargetInfluence["+r+"]",e,o))}s=e.length*o}else{const r=".bones["+e[c].name+"]";n(Fft,r+".position",t,"pos",i),n(Nft,r+".quaternion",t,"rot",i),n(Fft,r+".scale",t,"scl",i)}}if(0===i.length)return null;return new this(r,s,i,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Bft(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Dft;case"vector":case"vector2":case"vector3":case"vector4":return Fft;case"color":return Lft;case"quaternion":return Nft;case"bool":case"boolean":return Rft;case"string":return zft}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Mft(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const jft={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Hft{constructor(t,e,n){const i=this;let r,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===o&&void 0!==i.onStart&&i.onStart(t,a,s),o=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const Vft=new Hft;class Gft{constructor(t){this.manager=void 0!==t?t:Vft,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Gft.DEFAULT_MATERIAL_NAME="__DEFAULT";const Wft={};class qft extends Error{constructor(t,e){super(t),this.response=e}}class Xft extends Gft{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=jft.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout((()=>{e&&e(r),this.manager.itemEnd(t)}),0),r;if(void 0!==Wft[t])return void Wft[t].push({onLoad:e,onProgress:n,onError:i});Wft[t]=[],Wft[t].push({onLoad:e,onProgress:n,onError:i});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;const n=Wft[t],i=e.body.getReader(),r=e.headers.get("Content-Length")||e.headers.get("X-File-Size"),o=r?parseInt(r):0,a=0!==o;let s=0;const l=new ReadableStream({start(t){!function e(){i.read().then((i=>{let{done:r,value:l}=i;if(r)t.close();else{s+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(l),e()}}))}()}});return new Response(l)}throw new qft('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText),e)})).then((t=>{switch(s){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((t=>(new DOMParser).parseFromString(t,a)));case"json":return t.json();default:if(void 0===a)return t.text();{const e=/charset="?([^;"\s]*)"?/i.exec(a),n=e&&e[1]?e[1].toLowerCase():void 0,i=new TextDecoder(n);return t.arrayBuffer().then((t=>i.decode(t)))}}})).then((e=>{jft.add(t,e);const n=Wft[t];delete Wft[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}})).catch((e=>{const n=Wft[t];if(void 0===n)throw this.manager.itemError(t),e;delete Wft[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)})).finally((()=>{this.manager.itemEnd(t)})),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Yft extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=this,o=new Xft(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}}),n,i)}parse(t){const e=[];for(let n=0;n<t.length;n++){const i=Uft.parse(t[n]);e.push(i)}return e}}class Kft extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=this,o=[],a=new Fht,s=new Xft(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);let l=0;function c(c){s.load(t[c],(function(t){const n=r.parse(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=ant),a.image=o,a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,i)}if(Array.isArray(t))for(let u=0,h=t.length;u<h;++u)c(u);else s.load(t,(function(t){const n=r.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=ant),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,i);return a}}class Zft extends Gft{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=jft.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;const a=Frt("img");function s(){c(),jft.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}class Qft extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=new Lst;r.colorSpace=Pit;const o=new Zft(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],(function(t){r.images[n]=t,a++,6===a&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let l=0;l<t.length;++l)s(l);return r}}class Jft extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=this,o=new oht,a=new Xft(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,(function(t){const n=r.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:$et,o.wrapT=void 0!==n.wrapT?n.wrapT:$et,o.magFilter=void 0!==n.magFilter?n.magFilter:ant,o.minFilter=void 0!==n.minFilter?n.minFilter:ant,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?o.colorSpace=n.colorSpace:void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=cnt),1===n.mipmapCount&&(o.minFilter=ant),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,e&&e(o,n))}),n,i),o}}class $ft extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=new tot,o=new Zft(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class tpt extends uat{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Aat(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}class ept extends tpt{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(uat.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Aat(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const npt=new Uot,ipt=new cot,rpt=new cot;class opt{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Rrt(512,512),this.map=null,this.mapPass=null,this.matrix=new Uot,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jst,this._frameExtents=new Rrt(1,1),this._viewportCount=1,this._viewports=[new eot(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;ipt.setFromMatrixPosition(t.matrixWorld),e.position.copy(ipt),rpt.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(rpt),e.updateMatrixWorld(),npt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(npt),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(npt)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class apt extends opt{constructor(){super(new Pst(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*xrt*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class spt extends tpt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(uat.DEFAULT_UP),this.updateMatrix(),this.target=new uat,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new apt}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const lpt=new Uot,cpt=new cot,upt=new cot;class hpt extends opt{constructor(){super(new Pst(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Rrt(4,2),this._viewportCount=6,this._viewports=[new eot(2,1,1,1),new eot(0,1,1,1),new eot(3,1,1,1),new eot(1,1,1,1),new eot(3,0,1,1),new eot(1,0,1,1)],this._cubeDirections=[new cot(1,0,0),new cot(-1,0,0),new cot(0,0,1),new cot(0,0,-1),new cot(0,1,0),new cot(0,-1,0)],this._cubeUps=[new cot(0,1,0),new cot(0,1,0),new cot(0,1,0),new cot(0,1,0),new cot(0,0,1),new cot(0,0,-1)]}updateMatrices(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),cpt.setFromMatrixPosition(t.matrixWorld),n.position.copy(cpt),upt.copy(n.position),upt.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(upt),n.updateMatrixWorld(),i.makeTranslation(-cpt.x,-cpt.y,-cpt.z),lpt.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lpt)}}class dpt extends tpt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new hpt}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class fpt extends opt{constructor(){super(new elt(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ppt extends tpt{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(uat.DEFAULT_UP),this.updateMatrix(),this.target=new uat,this.shadow=new fpt}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class gpt extends tpt{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class mpt extends tpt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class vpt{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new cot)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*i),e.addScaledVector(o[2],.488603*r),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*i*1.092548),e.addScaledVector(o[5],i*r*1.092548),e.addScaledVector(o[6],.315392*(3*r*r-1)),e.addScaledVector(o[7],n*r*1.092548),e.addScaledVector(o[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*i),e.addScaledVector(o[2],1.023328*r),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*i),e.addScaledVector(o[5],.858086*i*r),e.addScaledVector(o[6],.743125*r*r-.247708),e.addScaledVector(o[7],.858086*n*r),e.addScaledVector(o[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}class ypt extends tpt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vpt;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class bpt extends Gft{constructor(t){super(t),this.textures={}}load(t,e,n,i){const r=this,o=new Xft(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}}),n,i)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const i=bpt.createMaterialFromType(t.type);if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new Aat).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.iridescence&&(i.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(i.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(i.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(i.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(i.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(i.alphaHash=t.alphaHash),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(i.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"===typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const r in t.uniforms){const e=t.uniforms[r];switch(i.uniforms[r]={},e.type){case"t":i.uniforms[r].value=n(e.value);break;case"c":i.uniforms[r].value=(new Aat).setHex(e.value);break;case"v2":i.uniforms[r].value=(new Rrt).fromArray(e.value);break;case"v3":i.uniforms[r].value=(new cot).fromArray(e.value);break;case"v4":i.uniforms[r].value=(new eot).fromArray(e.value);break;case"m3":i.uniforms[r].value=(new Lrt).fromArray(e.value);break;case"m4":i.uniforms[r].value=(new Uot).fromArray(e.value);break;default:i.uniforms[r].value=e.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(i.glslVersion=t.glslVersion),void 0!==t.extensions)for(const r in t.extensions)i.extensions[r]=t.extensions[r];if(void 0!==t.lights&&(i.lights=t.lights),void 0!==t.clipping&&(i.clipping=t.clipping),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new Rrt).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Rrt).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(i.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(i.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}static createMaterialFromType(t){return new{ShadowMaterial:uft,SpriteMaterial:Aut,RawShaderMaterial:hft,ShaderMaterial:Cst,PointsMaterial:Aht,MeshPhysicalMaterial:fft,MeshStandardMaterial:dft,MeshPhongMaterial:pft,MeshToonMaterial:gft,MeshNormalMaterial:mft,MeshLambertMaterial:vft,MeshDepthMaterial:aut,MeshDistanceMaterial:sut,MeshBasicMaterial:Oat,MeshMatcapMaterial:yft,LineDashedMaterial:bft,LineBasicMaterial:yht,Material:Eat}[t]}}class _pt{static decodeText(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(n){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class xpt extends ist{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class wpt extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=this,o=new Xft(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}}),n,i)}parse(t){const e={},n={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],o=function(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers,r=i[e],o=new Uint32Array(r).buffer;return n[e]=o,o}(t,r.buffer),a=zrt(r.type,o),s=new Tut(a,r.stride);return s.uuid=r.uuid,e[i]=s,s}const r=t.isInstancedBufferGeometry?new xpt:new ist,o=t.data.index;if(void 0!==o){const t=zrt(o.type,o.array);r.setIndex(new Uat(t,1))}const a=t.data.attributes;for(const u in a){const e=a[u];let n;if(e.isInterleavedBufferAttribute){const r=i(t.data,e.data);n=new Cut(r,e.itemSize,e.offset,e.normalized)}else{const t=zrt(e.type,e.array);n=new(e.isInstancedBufferAttribute?cht:Uat)(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),void 0!==e.usage&&n.setUsage(e.usage),void 0!==e.updateRange&&(n.updateRange.offset=e.updateRange.offset,n.updateRange.count=e.updateRange.count),r.setAttribute(u,n)}const s=t.data.morphAttributes;if(s)for(const u in s){const e=s[u],n=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];let a;if(o.isInterleavedBufferAttribute){const e=i(t.data,o.data);a=new Cut(e,o.itemSize,o.offset,o.normalized)}else{const t=zrt(o.type,o.array);a=new Uat(t,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}r.morphAttributes[u]=n}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const t=l[u];r.addGroup(t.start,t.count,t.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new cot;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new Pot(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class Spt extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=this,o=""===this.path?_pt.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new Xft(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(ROt){return void 0!==i&&i(ROt),void console.error("THREE:ObjectLoader: Can't parse "+t+".",ROt.message)}const a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);r.parse(o,e)}),n,i)}async loadAsync(t,e){const n=""===this.path?_pt.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const i=new Xft(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(t,e),o=JSON.parse(r),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(o)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),o=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,r,s,a,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){let t=!1;for(const e in o)if(o[e].data instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,i,a,o,e),l=this.parseSkeletons(t.skeletons,s);return this.bindSkeletons(s,l),s}parseShapes(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new xdt).fromJSON(t[n]);e[i.uuid]=i}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(let r=0,o=t.length;r<o;r++){const e=(new lht).fromJSON(t[r],i);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};if(void 0!==t){const i=new wpt;for(let r=0,o=t.length;r<o;r++){let o;const a=t[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;default:a.type in cft?o=cft[a.type].fromJSON(a,e):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new bpt;r.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],r=Uft.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function o(t){if("string"===typeof t){const e=t;return function(t){return n.manager.itemStart(t),r.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:zrt(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new Hft(e);r=new Zft(n),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const n=t[e],r=n.url;if(Array.isArray(r)){const t=[];for(let e=0,n=r.length;e<n;e++){const n=o(r[e]);null!==n&&(n instanceof HTMLImageElement?t.push(n):t.push(new oht(n.data,n.width,n.height)))}i[n.uuid]=new Qrt(t)}else{const t=o(n.url);i[n.uuid]=new Qrt(t)}}}return i}async parseImagesAsync(t){const e=this,n={};let i;async function r(t){if("string"===typeof t){const n=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await i.loadAsync(r)}return t.data?{data:zrt(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new Zft(this.manager),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],o=i.url;if(Array.isArray(o)){const t=[];for(let e=0,n=o.length;e<n;e++){const n=o[e],i=await r(n);null!==i&&(i instanceof HTMLImageElement?t.push(i):t.push(new oht(i.data,i.width,i.height)))}n[i.uuid]=new Qrt(t)}else{const t=await r(i.url);n[i.uuid]=new Qrt(t)}}}return n}parseTextures(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const i={};if(void 0!==t)for(let r=0,o=t.length;r<o;r++){const o=t[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=e[o.image],s=a.data;let l;Array.isArray(s)?(l=new Lst,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new oht:new tot,s&&(l.needsUpdate=!0)),l.source=a,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,Ept)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],Mpt),l.wrapT=n(o.wrap[1],Mpt)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.encoding&&(l.encoding=o.encoding),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,Tpt)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,Tpt)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),i[o.uuid]=l}return i}parseObject(t,e,n,i,r){let o,a,s;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(n[r])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function u(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}switch(t.type){case"Scene":o=new Mut,void 0!==t.background&&(Number.isInteger(t.background)?o.background=new Aat(t.background):o.background=u(t.background)),void 0!==t.environment&&(o.environment=u(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Eut(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new Sut(t.fog.color,t.fog.density))),void 0!==t.backgroundBlurriness&&(o.backgroundBlurriness=t.backgroundBlurriness),void 0!==t.backgroundIntensity&&(o.backgroundIntensity=t.backgroundIntensity);break;case"PerspectiveCamera":o=new Pst(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new elt(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new gpt(t.color,t.intensity);break;case"DirectionalLight":o=new ppt(t.color,t.intensity);break;case"PointLight":o=new dpt(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new mpt(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new spt(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new ept(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=(new ypt).fromJSON(t);break;case"SkinnedMesh":a=l(t.geometry),s=c(t.material),o=new iht(a,s),void 0!==t.bindMode&&(o.bindMode=t.bindMode),void 0!==t.bindMatrix&&o.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(o.skeleton=t.skeleton);break;case"Mesh":a=l(t.geometry),s=c(t.material),o=new xst(a,s);break;case"InstancedMesh":a=l(t.geometry),s=c(t.material);const e=t.count,n=t.instanceMatrix,i=t.instanceColor;o=new vht(a,s,e),o.instanceMatrix=new cht(new Float32Array(n.array),16),void 0!==i&&(o.instanceColor=new cht(new Float32Array(i.array),i.itemSize));break;case"LOD":o=new Xut;break;case"Line":o=new Eht(l(t.geometry),c(t.material));break;case"LineLoop":o=new Cht(l(t.geometry),c(t.material));break;case"LineSegments":o=new kht(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":o=new Dht(l(t.geometry),c(t.material));break;case"Sprite":o=new Vut(c(t.material));break;case"Group":o=new fut;break;case"Bone":o=new rht;break;default:o=new uat}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.up&&o.up.fromArray(t.up),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(o.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children){const a=t.children;for(let t=0;t<a.length;t++)o.add(this.parseObject(a[t],e,n,i,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];o.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(o.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],i=o.getObjectByProperty("uuid",n.object);void 0!==i&&o.addLevel(i,n.distance,n.hysteresis)}}return o}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}}const Ept={UVMapping:qet,CubeReflectionMapping:Xet,CubeRefractionMapping:Yet,EquirectangularReflectionMapping:Ket,EquirectangularRefractionMapping:Zet,CubeUVReflectionMapping:Qet},Mpt={RepeatWrapping:Jet,ClampToEdgeWrapping:$et,MirroredRepeatWrapping:tnt},Tpt={NearestFilter:ent,NearestMipmapNearestFilter:nnt,NearestMipmapLinearFilter:rnt,LinearFilter:ant,LinearMipmapNearestFilter:snt,LinearMipmapLinearFilter:cnt};class kpt extends Gft{constructor(t){super(t),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=jft.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){jft.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}let Cpt;class Apt{static getContext(){return void 0===Cpt&&(Cpt=new(window.AudioContext||window.webkitAudioContext)),Cpt}static setContext(t){Cpt=t}}class Ppt extends Gft{constructor(t){super(t)}load(t,e,n,i){const r=this,o=new Xft(this.manager);function a(e){i?i(e):console.error(e),r.manager.itemError(t)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(t){try{const n=t.slice(0);Apt.getContext().decodeAudioData(n,(function(t){e(t)}),a)}catch(n){a(n)}}),n,i)}}class Opt extends ypt{constructor(t,e){super(void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),this.isHemisphereLightProbe=!0;const n=(new Aat).set(t),i=(new Aat).set(e),r=new cot(n.r,n.g,n.b),o=new cot(i.r,i.g,i.b),a=Math.sqrt(Math.PI),s=a*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(r).sub(o).multiplyScalar(s)}}class Rpt extends ypt{constructor(t){super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isAmbientLightProbe=!0;const e=(new Aat).set(t);this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Lpt=new Uot,Dpt=new Uot,Ipt=new Uot;class Npt{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Pst,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Pst,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Ipt.copy(t.projectionMatrix);const n=e.eyeSep/2,i=n*e.near/e.focus,r=e.near*Math.tan(_rt*e.fov*.5)/e.zoom;let o,a;Dpt.elements[12]=-n,Lpt.elements[12]=n,o=-r*e.aspect+i,a=r*e.aspect+i,Ipt.elements[0]=2*e.near/(a-o),Ipt.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(Ipt),o=-r*e.aspect-i,a=r*e.aspect-i,Ipt.elements[0]=2*e.near/(a-o),Ipt.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(Ipt)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Dpt),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Lpt)}}class zpt{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Fpt(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Fpt();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Fpt(){return("undefined"===typeof performance?Date:performance).now()}const Upt=new cot,Bpt=new lot,jpt=new cot,Hpt=new cot;class Vpt extends uat{constructor(){super(),this.type="AudioListener",this.context=Apt.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zpt}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Upt,Bpt,jpt),Hpt.set(0,0,-1).applyQuaternion(Bpt),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Upt.x,t),e.positionY.linearRampToValueAtTime(Upt.y,t),e.positionZ.linearRampToValueAtTime(Upt.z,t),e.forwardX.linearRampToValueAtTime(Hpt.x,t),e.forwardY.linearRampToValueAtTime(Hpt.y,t),e.forwardZ.linearRampToValueAtTime(Hpt.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Upt.x,Upt.y,Upt.z),e.setOrientation(Hpt.x,Hpt.y,Hpt.z,n.x,n.y,n.z)}}class Gpt extends uat{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Wpt=new cot,qpt=new lot,Xpt=new cot,Ypt=new cot;class Kpt extends Gpt{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Wpt,qpt,Xpt),Ypt.set(0,0,1).applyQuaternion(qpt);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Wpt.x,t),e.positionY.linearRampToValueAtTime(Wpt.y,t),e.positionZ.linearRampToValueAtTime(Wpt.z,t),e.orientationX.linearRampToValueAtTime(Ypt.x,t),e.orientationY.linearRampToValueAtTime(Ypt.y,t),e.orientationZ.linearRampToValueAtTime(Ypt.z,t)}else e.setPosition(Wpt.x,Wpt.y,Wpt.z),e.setOrientation(Ypt.x,Ypt.y,Ypt.z)}}class Zpt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class Qpt{constructor(t,e,n){let i,r,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==i;++t)n[r+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){a.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)t[e+o]=t[n+o]}_slerp(t,e,n,i){lot.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const o=this._workIndex*r;lot.multiplyQuaternionsFlat(t,o,t,e,t,n),lot.slerpFlat(t,e,t,e,t,o,i)}_lerp(t,e,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]*o+t[n+a]*i}}_lerpAdditive(t,e,n,i,r){for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]+t[n+o]*i}}}const Jpt="\\[\\]\\.:\\/",$pt=new RegExp("["+Jpt+"]","g"),tgt="[^"+Jpt+"]",egt="[^"+Jpt.replace("\\.","")+"]",ngt=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",tgt)+/(WCOD+)?/.source.replace("WCOD",egt)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tgt)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tgt)+"$"),igt=["material","materials","bones","map"];class rgt{constructor(t,e,n){this.path=e,this.parsedPath=n||rgt.parseTrackName(e),this.node=rgt.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new rgt.Composite(t,e,n):new rgt(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace($pt,"")}static parseTrackName(t){const e=ngt.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==igt.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const o=n(r.children);if(o)return o}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=rgt.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const o=t[i];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}rgt.Composite=class{constructor(t,e,n){const i=n||rgt.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},rgt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},rgt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},rgt.prototype.GetterByBindingType=[rgt.prototype._getValue_direct,rgt.prototype._getValue_array,rgt.prototype._getValue_arrayElement,rgt.prototype._getValue_toArray],rgt.prototype.SetterByBindingTypeAndVersioning=[[rgt.prototype._setValue_direct,rgt.prototype._setValue_direct_setNeedsUpdate,rgt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[rgt.prototype._setValue_array,rgt.prototype._setValue_array_setNeedsUpdate,rgt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[rgt.prototype._setValue_arrayElement,rgt.prototype._setValue_arrayElement_setNeedsUpdate,rgt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[rgt.prototype._setValue_fromArray,rgt.prototype._setValue_fromArray_setNeedsUpdate,rgt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class ogt{constructor(){this.isAnimationObjectGroup=!0,this.uuid=wrt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let a,s=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=e[h];if(void 0===d){d=s++,e[h]=d,t.push(u);for(let t=0,e=o;t!==e;++t)r[t].push(new rgt(u,n[t],i[t]))}else if(d<l){a=t[d];const s=--l,c=t[s];e[c.uuid]=d,t[d]=c,e[h]=s,t[s]=u;for(let t=0,e=o;t!==e;++t){const e=r[t],o=e[s];let a=e[d];e[d]=o,void 0===a&&(a=new rgt(u,n[t],i[t])),e[s]=a}}else t[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=e[s];if(void 0!==l&&l>=r){const o=r++,c=t[o];e[c.uuid]=l,t[l]=c,e[s]=o,t[o]=a;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[o],r=e[l];e[l]=i,e[o]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=e[s];if(void 0!==l)if(delete e[s],l<r){const a=--r,s=t[a],c=--o,u=t[c];e[s.uuid]=l,t[l]=s,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[a],r=e[c];e[l]=i,e[a]=r,e.pop()}}else{const r=--o,a=t[r];r>0&&(e[a.uuid]=l),t[l]=a,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(let h=c,d=s.length;h!==d;++h){const n=s[h];u[h]=new rgt(n,t,e)}return u}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}class agt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.blendMode;this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,o=r.length,a=new Array(o),s={endingStart:git,endingEnd:git};for(let l=0;l!==o;++l){const t=r[l].createInterpolant(null);a[l]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=uit,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,o=n/i;t.warp(1,r,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;i<0||0===n?e=0:(this._startTime=null,e=n*i)}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;if(this.blendMode===bit)for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);else for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulate(i,a)}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const o=n===hit;if(0===t)return-1===r?i:o&&1===(1&r)?e-i:i;if(n===cit){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1===(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=mit,i.endingEnd=mit):(i.endingStart=t?this.zeroSlopeAtStart?mit:git:vit,i.endingEnd=e?this.zeroSlopeAtEnd?mit:git:vit)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}const sgt=new Float32Array(1);class lgt extends vrt{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==r;++u){const t=i[u],r=t.name;let l=c[r];if(void 0!==l)++l.referenceCount,o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,r));continue}const i=e&&e._propertyBindings[u].binding.parsedPath;l=new Qpt(rgt.create(n,r,i),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,r),o[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[e];void 0===o&&(o={},i[e]=o),o[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Aft(new Float32Array(2),new Float32Array(2),1,sgt),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let o="string"===typeof t?Uft.findByName(i,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:yit),void 0!==s){const t=s.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new agt(this,o,e,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"===typeof t?Uft.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1;for(let l=0;l!==n;++l){e[l]._update(i,t,r,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,o=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,e[r]=o,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const t=n[r].actionByRoot[e];void 0!==t&&(this._deactivateAction(t),this._removeInactiveAction(t))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const r in i){const t=i[r];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class cgt{constructor(t){this.value=t}clone(){return new cgt(void 0===this.value.clone?this.value:this.value.clone())}}let ugt=0;class hgt extends vrt{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:ugt++}),this.name="",this.usage=irt,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,i=e.length;n<i;n++)this.uniforms.push(e[n].clone());return this}clone(){return(new this.constructor).copy(this)}}class dgt extends Tut{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class fgt{constructor(t,e,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}class pgt{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Fot(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new Zot,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return mgt(t,this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),e.sort(ggt),e}intersectObjects(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=t.length;i<r;i++)mgt(t[i],this,n,e);return n.sort(ggt),n}}function ggt(t,e){return t.distance-e.distance}function mgt(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)mgt(i[t],e,n,!0)}}class vgt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Srt(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class ygt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=t,this.theta=e,this.y=n,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return(new this.constructor).copy(this)}}const bgt=new Rrt;class _gt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rrt(1/0,1/0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt(-1/0,-1/0);this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=bgt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,bgt).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const xgt=new cot,wgt=new cot;class Sgt{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot;this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){xgt.subVectors(t,this.start),wgt.subVectors(this.end,this.start);const n=wgt.dot(wgt);let i=wgt.dot(xgt)/n;return e&&(i=Srt(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Egt=new cot;class Mgt extends uat{constructor(t,e){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new ist,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const t=o/s*Math.PI*2,e=a/s*Math.PI*2;i.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new Yat(i,3));const r=new yht({fog:!1,toneMapped:!1});this.cone=new kht(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Egt.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Egt),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tgt=new cot,kgt=new Uot,Cgt=new Uot;class Agt extends kht{constructor(t){const e=Pgt(t),n=new ist,i=[],r=[],o=new Aat(0,0,1),a=new Aat(0,1,0);for(let s=0;s<e.length;s++){const t=e[s];t.parent&&t.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Yat(i,3)),n.setAttribute("color",new Yat(r,3));super(n,new yht({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");Cgt.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<e.length;r++){const t=e[r];t.parent&&t.parent.isBone&&(kgt.multiplyMatrices(Cgt,t.matrixWorld),Tgt.setFromMatrixPosition(kgt),i.setXYZ(o,Tgt.x,Tgt.y,Tgt.z),kgt.multiplyMatrices(Cgt,t.parent.matrixWorld),Tgt.setFromMatrixPosition(kgt),i.setXYZ(o+1,Tgt.x,Tgt.y,Tgt.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pgt(t){const e=[];!0===t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Pgt(t.children[n]));return e}class Ogt extends xst{constructor(t,e,n){super(new nft(e,4,2),new Oat({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Rgt=new cot,Lgt=new Aat,Dgt=new Aat;class Igt extends uat{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new $dt(e);i.rotateY(.5*Math.PI),this.material=new Oat({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new Uat(o,3)),this.add(new xst(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Lgt.copy(this.light.color),Dgt.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const i=t<n/2?Lgt:Dgt;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(Rgt.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ngt extends kht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Aat(n),i=new Aat(i);const r=e/2,o=t/e,a=t/2,s=[],l=[];for(let u=0,h=0,d=-a;u<=e;u++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);const t=u===r?n:i;t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3,t.toArray(l,h),h+=3}const c=new ist;c.setAttribute("position",new Yat(s,3)),c.setAttribute("color",new Yat(l,3));super(c,new yht({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class zgt extends kht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new Aat(r),o=new Aat(o);const a=[],s=[];if(e>1)for(let c=0;c<e;c++){const n=c/e*(2*Math.PI),i=Math.sin(n)*t,l=Math.cos(n)*t;a.push(0,0,0),a.push(i,0,l);const u=1&c?r:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const e=1&c?r:o,l=t-t/n*c;for(let t=0;t<i;t++){let n=t/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l;a.push(r,0,o),s.push(e.r,e.g,e.b),n=(t+1)/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l,a.push(r,0,o),s.push(e.r,e.g,e.b)}}const l=new ist;l.setAttribute("position",new Yat(a,3)),l.setAttribute("color",new Yat(s,3));super(l,new yht({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Fgt=new cot,Ugt=new cot,Bgt=new cot;class jgt extends uat{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===e&&(e=1);let i=new ist;i.setAttribute("position",new Yat([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new yht({fog:!1,toneMapped:!1});this.lightPlane=new Eht(i,r),this.add(this.lightPlane),i=new ist,i.setAttribute("position",new Yat([0,0,0,0,0,1],3)),this.targetLine=new Eht(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Fgt.setFromMatrixPosition(this.light.matrixWorld),Ugt.setFromMatrixPosition(this.light.target.matrixWorld),Bgt.subVectors(Ugt,Fgt),this.lightPlane.lookAt(Ugt),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ugt),this.targetLine.scale.z=Bgt.length()}}const Hgt=new cot,Vgt=new Ast;class Ggt extends kht{constructor(t){const e=new ist,n=new yht({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={};function a(t,e){s(t),s(e)}function s(t){i.push(0,0,0),r.push(0,0,0),void 0===o[t]&&(o[t]=[]),o[t].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),e.setAttribute("position",new Yat(i,3)),e.setAttribute("color",new Yat(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new Aat(16755200),c=new Aat(16711680),u=new Aat(43775),h=new Aat(16777215),d=new Aat(3355443);this.setColors(l,c,u,h,d)}setColors(t,e,n,i,r){const o=this.geometry.getAttribute("color");o.setXYZ(0,t.r,t.g,t.b),o.setXYZ(1,t.r,t.g,t.b),o.setXYZ(2,t.r,t.g,t.b),o.setXYZ(3,t.r,t.g,t.b),o.setXYZ(4,t.r,t.g,t.b),o.setXYZ(5,t.r,t.g,t.b),o.setXYZ(6,t.r,t.g,t.b),o.setXYZ(7,t.r,t.g,t.b),o.setXYZ(8,t.r,t.g,t.b),o.setXYZ(9,t.r,t.g,t.b),o.setXYZ(10,t.r,t.g,t.b),o.setXYZ(11,t.r,t.g,t.b),o.setXYZ(12,t.r,t.g,t.b),o.setXYZ(13,t.r,t.g,t.b),o.setXYZ(14,t.r,t.g,t.b),o.setXYZ(15,t.r,t.g,t.b),o.setXYZ(16,t.r,t.g,t.b),o.setXYZ(17,t.r,t.g,t.b),o.setXYZ(18,t.r,t.g,t.b),o.setXYZ(19,t.r,t.g,t.b),o.setXYZ(20,t.r,t.g,t.b),o.setXYZ(21,t.r,t.g,t.b),o.setXYZ(22,t.r,t.g,t.b),o.setXYZ(23,t.r,t.g,t.b),o.setXYZ(24,e.r,e.g,e.b),o.setXYZ(25,e.r,e.g,e.b),o.setXYZ(26,e.r,e.g,e.b),o.setXYZ(27,e.r,e.g,e.b),o.setXYZ(28,e.r,e.g,e.b),o.setXYZ(29,e.r,e.g,e.b),o.setXYZ(30,e.r,e.g,e.b),o.setXYZ(31,e.r,e.g,e.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap;Vgt.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wgt("c",e,t,Vgt,0,0,-1),Wgt("t",e,t,Vgt,0,0,1),Wgt("n1",e,t,Vgt,-1,-1,-1),Wgt("n2",e,t,Vgt,1,-1,-1),Wgt("n3",e,t,Vgt,-1,1,-1),Wgt("n4",e,t,Vgt,1,1,-1),Wgt("f1",e,t,Vgt,-1,-1,1),Wgt("f2",e,t,Vgt,1,-1,1),Wgt("f3",e,t,Vgt,-1,1,1),Wgt("f4",e,t,Vgt,1,1,1),Wgt("u1",e,t,Vgt,.7,1.1,-1),Wgt("u2",e,t,Vgt,-.7,1.1,-1),Wgt("u3",e,t,Vgt,0,2,-1),Wgt("cf1",e,t,Vgt,-1,0,1),Wgt("cf2",e,t,Vgt,1,0,1),Wgt("cf3",e,t,Vgt,0,-1,1),Wgt("cf4",e,t,Vgt,0,1,1),Wgt("cn1",e,t,Vgt,-1,0,-1),Wgt("cn2",e,t,Vgt,1,0,-1),Wgt("cn3",e,t,Vgt,0,-1,-1),Wgt("cn4",e,t,Vgt,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Wgt(t,e,n,i,r,o,a){Hgt.set(r,o,a).unproject(i);const s=e[t];if(void 0!==s){const t=n.getAttribute("position");for(let e=0,n=s.length;e<n;e++)t.setXYZ(s[e],Hgt.x,Hgt.y,Hgt.z)}}const qgt=new dot;class Xgt extends kht{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ist;r.setIndex(new Uat(n,1)),r.setAttribute("position",new Uat(i,3)),super(r,new yht({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&qgt.setFromObject(this.object),qgt.isEmpty())return;const e=qgt.min,n=qgt.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ygt extends kht{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new ist;i.setIndex(new Uat(n,1)),i.setAttribute("position",new Yat([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new yht({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kgt extends Eht{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new ist;i.setAttribute("position",new Yat([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new yht({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const r=new ist;r.setAttribute("position",new Yat([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new xst(r,new Oat({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Zgt=new cot;let Qgt,Jgt;class $gt extends uat{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cot(0,0,1),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cot(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===Qgt&&(Qgt=new ist,Qgt.setAttribute("position",new Yat([0,0,0,0,1,0],3)),Jgt=new ddt(0,.5,1,5,1),Jgt.translate(0,-.5,0)),this.position.copy(e),this.line=new Eht(Qgt,new yht({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xst(Jgt,new Oat({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Zgt.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Zgt,e)}}setLength(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class tmt extends kht{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new ist;n.setAttribute("position",new Yat(e,3)),n.setAttribute("color",new Yat([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new yht({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const i=new Aat,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class emt{constructor(){this.type="ShapePath",this.color=new Aat,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new ldt,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}bezierCurveTo(t,e,n,i,r,o){return this.currentPath.bezierCurveTo(t,e,n,i,r,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t,e){const n=e.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=e[r],a=e[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[o],s=-s,a=e[r],l=-l),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return i}const n=Xdt.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,o,a;const s=[];if(1===i.length)return o=i[0],a=new xdt,a.curves=o.curves,s.push(a),s;let l=!n(i[0].getPoints());l=t?!l:l;const c=[],u=[];let h,d,f=[],p=0;u[p]=void 0,f[p]=[];for(let g=0,m=i.length;g<m;g++)o=i[g],h=o.getPoints(),r=n(h),r=t?!r:r,r?(!l&&u[p]&&p++,u[p]={s:new xdt,p:h},u[p].s.curves=o.curves,l&&p++,f[p]=[]):f[p].push({h:o,p:h[0]});if(!u[0])return function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new xdt;r.curves=i.curves,e.push(r)}return e}(i);if(u.length>1){let t=!1,n=0;for(let e=0,i=u.length;e<i;e++)c[e]=[];for(let i=0,r=u.length;i<r;i++){const r=f[i];for(let o=0;o<r.length;o++){const a=r[o];let s=!0;for(let r=0;r<u.length;r++)e(a.p,u[r].p)&&(i!==r&&n++,s?(s=!1,c[r].push(a)):t=!0);s&&c[i].push(a)}}n>0&&!1===t&&(f=c)}for(let g=0,m=u.length;g<m;g++){a=u[g].s,s.push(a),d=f[g];for(let t=0,e=d.length;t<e;t++)a.holes.push(d[t].h)}return s}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gtt}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gtt);var nmt=n(7205);function imt(t){let e;const n=new Set,i=(t,i)=>{const r="function"===typeof t?t(e):t;if(r!==e){const t=e;e=i?r:Object.assign({},e,r),n.forEach((n=>n(e,t)))}},r=()=>e,o={setState:i,getState:r,subscribe:(t,i,o)=>i||o?function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=i(e);function s(){const n=i(e);if(!o(a,n)){const e=a;t(a=n,e)}}return n.add(s),()=>n.delete(s)}(t,i,o):(n.add(t),()=>n.delete(t)),destroy:()=>n.clear()};return e=t(i,r,o),o}const rmt="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?e.useEffect:e.useLayoutEffect;var omt=n(2016),amt=n.n(omt),smt=n(8784);const lmt=t=>"object"===typeof t&&"function"===typeof t.then,cmt=[];function umt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>t===e;if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function hmt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===e&&(e=[t]);for(const o of cmt)if(umt(e,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!n)throw o.promise}const r={keys:e,equal:i.equal,remove:()=>{const t=cmt.indexOf(r);-1!==t&&cmt.splice(t,1)},promise:(lmt(t)?t:t(...e)).then((t=>{r.response=t,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))})).catch((t=>r.error=t))};if(cmt.push(r),!n)throw r.promise}const dmt=(t,e,n)=>hmt(t,e,!1,n);const fmt={},pmt=t=>{Object.assign(fmt,t)};var gmt,mmt;const vmt=t=>"colorSpace"in t||"outputColorSpace"in t,ymt=()=>{var t;return null!=(t=fmt.ColorManagement)?t:null},bmt=t=>t&&t.isOrthographicCamera,_mt="undefined"!==typeof window&&(null!=(gmt=window.document)&&gmt.createElement||"ReactNative"===(null==(mmt=window.navigator)?void 0:mmt.product))?e.useLayoutEffect:e.useEffect;function xmt(t){const n=e.useRef(t);return _mt((()=>{n.current=t}),[t]),n}function wmt(t){let{set:e}=t;return _mt((()=>(e(new Promise((()=>null))),()=>e(!1))),[e]),null}class Smt extends e.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}Smt.getDerivedStateFromError=()=>({error:!0});const Emt="__default",Mmt=new Map,Tmt=t=>t&&!!t.memoized&&!!t.changes;function kmt(t){var e;const n="undefined"!==typeof window?null!=(e=window.devicePixelRatio)?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Cmt=t=>{var e;return null==(e=t.__r3f)?void 0:e.root.getState()},Amt={obj:t=>t===Object(t)&&!Amt.arr(t)&&"function"!==typeof t,fun:t=>"function"===typeof t,str:t=>"string"===typeof t,num:t=>"number"===typeof t,boo:t=>"boolean"===typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,e){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof t!==typeof e||!!t!==!!e)return!1;if(Amt.str(t)||Amt.num(t))return t===e;const o=Amt.obj(t);if(o&&"reference"===i)return t===e;const a=Amt.arr(t);if(a&&"reference"===n)return t===e;if((a||o)&&t===e)return!0;let s;for(s in t)if(!(s in e))return!1;if(o&&"shallow"===n&&"shallow"===i){for(s in r?e:t)if(!Amt.equ(t[s],e[s],{strict:r,objects:"reference"}))return!1}else for(s in r?e:t)if(t[s]!==e[s])return!1;if(Amt.und(s)){if(a&&0===t.length&&0===e.length)return!0;if(o&&0===Object.keys(t).length&&0===Object.keys(e).length)return!0;if(t!==e)return!1}return!0}};function Pmt(t){const e={nodes:{},materials:{}};return t&&t.traverse((t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)})),e}function Omt(t,e){return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function Rmt(t,e){let n=t;if(e.includes("-")){const i=e.split("-"),r=i.pop();return n=i.reduce(((t,e)=>t[e]),t),{target:n,key:r}}return{target:n,key:e}}const Lmt=/-\d+$/;function Dmt(t,e,n){if(Amt.str(n)){if(Lmt.test(n)){const e=n.replace(Lmt,""),{target:i,key:r}=Rmt(t,e);Array.isArray(i[r])||(i[r]=[])}const{target:i,key:r}=Rmt(t,n);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=n(t,e)}function Imt(t,e,n){var i,r;if(Amt.str(n)){const{target:i,key:r}=Rmt(t,n),o=e.__r3f.previousAttach;void 0===o?delete i[r]:i[r]=o}else null==(i=e.__r3f)||null==i.previousAttach||i.previousAttach(t,e);null==(r=e.__r3f)||delete r.previousAttach}function Nmt(t,e){let{children:n,key:i,ref:r,...o}=e,{children:a,key:s,ref:l,...c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var h;const d=null!=(h=null==t?void 0:t.__r3f)?h:{},f=Object.entries(o),p=[];if(u){const t=Object.keys(c);for(let e=0;e<t.length;e++)o.hasOwnProperty(t[e])||f.unshift([t[e],Emt+"remove"])}f.forEach((e=>{let[n,i]=e;var r;if(null!=(r=t.__r3f)&&r.primitive&&"object"===n)return;if(Amt.equ(i,c[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return p.push([n,i,!0,[]]);let a=[];n.includes("-")&&(a=n.split("-")),p.push([n,i,!1,a]);for(const t in o){const e=o[t];t.startsWith("".concat(n,"-"))&&p.push([t,e,!1,t.split("-")])}}));const g={...o};return d.memoizedProps&&d.memoizedProps.args&&(g.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(g.attach=d.memoizedProps.attach),{memoized:g,changes:p}}function zmt(t,e){var n,i,r;const o=null!=(n=t.__r3f)?n:{},a=o.root,s=null!=(i=null==a||null==a.getState?void 0:a.getState())?i:{},{memoized:l,changes:c}=Tmt(e)?e:Nmt(t,e),u=o.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let h=0;h<c.length;h++){let[e,n,i,r]=c[h];if(vmt(t)){const t=3001,i="srgb",r="srgb-linear";"encoding"===e?(e="colorSpace",n=n===t?i:r):"outputEncoding"===e&&(e="outputColorSpace",n=n===t?i:r)}let a=t,l=a[e];if(r.length&&(l=r.reduce(((t,e)=>t[e]),t),!l||!l.set)){const[n,...i]=r.reverse();a=i.reverse().reduce(((t,e)=>t[e]),t),e=n}if(n===Emt+"remove")if(a.constructor){let t=Mmt.get(a.constructor);t||(t=new a.constructor,Mmt.set(a.constructor,t)),n=t[e]}else n=0;if(i)n?o.handlers[e]=n:delete o.handlers[e],o.eventCount=Object.keys(o.handlers).length;else if(l&&l.set&&(l.copy||l instanceof Zot)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&l.constructor===n.constructor)l.copy(n);else if(void 0!==n){const t=l instanceof Aat;!t&&l.setScalar?l.setScalar(n):l instanceof Zot&&n instanceof Zot?l.mask=n.mask:l.set(n),ymt()||s.linear||!t||l.convertSRGBToLinear()}}else if(a[e]=n,a[e]instanceof tot&&a[e].format===Snt&&a[e].type===hnt){const t=a[e];vmt(t)&&vmt(s.gl)?t.colorSpace=s.gl.outputColorSpace:t.encoding=s.gl.outputEncoding}Fmt(t)}if(o.parent&&s.internal&&t.raycast&&u!==o.eventCount){const e=s.internal.interaction.indexOf(t);e>-1&&s.internal.interaction.splice(e,1),o.eventCount&&s.internal.interaction.push(t)}return!(1===c.length&&"onUpdate"===c[0][0])&&c.length&&null!=(r=t.__r3f)&&r.parent&&Umt(t),t}function Fmt(t){var e,n;const i=null==(e=t.__r3f)||null==(n=e.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function Umt(t){null==t.onUpdate||t.onUpdate(t)}function Bmt(t,e){t.manual||(bmt(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function jmt(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function Hmt(t,e,n,i){const r=n.get(e);r&&(n.delete(e),0===n.size&&(t.delete(i),r.target.releasePointerCapture(i)))}function Vmt(t){function e(t){return t.filter((t=>["Move","Over","Enter","Out","Leave"].some((e=>{var n;return null==(n=t.__r3f)?void 0:n.handlers["onPointer"+e]}))))}function n(e){const{internal:n}=t.getState();for(const t of n.hovered.values())if(!e.length||!e.find((e=>e.object===t.object&&e.index===t.index&&e.instanceId===t.instanceId))){const i=t.eventObject.__r3f,r=null==i?void 0:i.handlers;if(n.hovered.delete(jmt(t)),null!=i&&i.eventCount){const n={...t,intersections:e};null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(t,e){for(let n=0;n<e.length;n++){const i=e[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(t)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return e=>{const{internal:i}=t.getState();"pointerId"in e&&i.capturedMap.has(e.pointerId)&&requestAnimationFrame((()=>{i.capturedMap.has(e.pointerId)&&(i.capturedMap.delete(e.pointerId),n([]))}))}}return function(o){const{onPointerMissed:a,internal:s}=t.getState();s.lastEvent.current=o;const l="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,u=function(e,n){const i=t.getState(),r=new Set,o=[],a=n?n(i.internal.interaction):i.internal.interaction;for(let t=0;t<a.length;t++){const e=Cmt(a[t]);e&&(e.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(e,i);let s=a.flatMap((function(t){const n=Cmt(t);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(e,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(t,!0):[]):[];var i})).sort(((t,e)=>{const n=Cmt(t.object),i=Cmt(e.object);return n&&i&&i.events.priority-n.events.priority||t.distance-e.distance})).filter((t=>{const e=jmt(t);return!r.has(e)&&(r.add(e),!0)}));i.events.filter&&(s=i.events.filter(s,i));for(const t of s){let e=t.object;for(;e;){var l;null!=(l=e.__r3f)&&l.eventCount&&o.push({...t,eventObject:e}),e=e.parent}}if("pointerId"in e&&i.internal.capturedMap.has(e.pointerId))for(let t of i.internal.capturedMap.get(e.pointerId).values())r.has(jmt(t.intersection))||o.push(t.intersection);return o}(o,l?e:void 0),h=c?function(e){const{internal:n}=t.getState(),i=e.offsetX-n.initialClick[0],r=e.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(o):0;"onPointerDown"===r&&(s.initialClick=[o.offsetX,o.offsetY],s.initialHits=u.map((t=>t.eventObject))),c&&!u.length&&h<=2&&(i(o,s.interaction),a&&a(o)),l&&n(u),function(e,i,r,o){const a=t.getState();if(e.length){const t={stopped:!1};for(const s of e){const l=Cmt(s.object)||a,{raycaster:c,pointer:u,camera:h,internal:d}=l,f=new cot(u.x,u.y,0).unproject(h),p=t=>{var e,n;return null!=(e=null==(n=d.capturedMap.get(t))?void 0:n.has(s.eventObject))&&e},g=t=>{const e={intersection:s,target:i.target};d.capturedMap.has(t)?d.capturedMap.get(t).set(s.eventObject,e):d.capturedMap.set(t,new Map([[s.eventObject,e]])),i.target.setPointerCapture(t)},m=t=>{const e=d.capturedMap.get(t);e&&Hmt(d.capturedMap,s.eventObject,e,t)};let v={};for(let t in i){let e=i[t];"function"!==typeof e&&(v[t]=e)}let y={...s,...v,pointer:u,intersections:e,stopped:t.stopped,delta:r,unprojectedPoint:f,ray:c.ray,camera:h,stopPropagation(){const r="pointerId"in i&&d.capturedMap.get(i.pointerId);(!r||r.has(s.eventObject))&&(y.stopped=t.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find((t=>t.eventObject===s.eventObject)))&&n([...e.slice(0,e.indexOf(s)),s])},target:{hasPointerCapture:p,setPointerCapture:g,releasePointerCapture:m},currentTarget:{hasPointerCapture:p,setPointerCapture:g,releasePointerCapture:m},nativeEvent:i};if(o(y),!0===t.stopped)break}}}(u,o,h,(function(t){const e=t.eventObject,n=e.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const e=jmt(t),n=s.hovered.get(e);n?n.stopped&&t.stopPropagation():(s.hovered.set(e,t),null==a.onPointerOver||a.onPointerOver(t),null==a.onPointerEnter||a.onPointerEnter(t))}null==a.onPointerMove||a.onPointerMove(t)}else{const n=a[r];n?c&&!s.initialHits.includes(e)||(i(o,s.interaction.filter((t=>!s.initialHits.includes(t)))),n(t)):c&&s.initialHits.includes(e)&&i(o,s.interaction.filter((t=>!s.initialHits.includes(t))))}}))}}}}const Gmt=t=>!(null==t||!t.render),Wmt=e.createContext(null),qmt=(t,n)=>{const i=function(t){const n="function"===typeof t?imt(t):t,i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,r]=(0,e.useReducer)((t=>t+1),0),o=n.getState(),a=(0,e.useRef)(o),s=(0,e.useRef)(t),l=(0,e.useRef)(i),c=(0,e.useRef)(!1),u=(0,e.useRef)();let h;void 0===u.current&&(u.current=t(o));let d=!1;(a.current!==o||s.current!==t||l.current!==i||c.current)&&(h=t(o),d=!i(u.current,h)),rmt((()=>{d&&(u.current=h),a.current=o,s.current=t,l.current=i,c.current=!1}));const f=(0,e.useRef)(o);rmt((()=>{const t=()=>{try{const t=n.getState(),e=s.current(t);l.current(u.current,e)||(a.current=t,u.current=e,r())}catch(ROt){c.current=!0,r()}},e=n.subscribe(t);return n.getState()!==f.current&&t(),e}),[]);const p=d?h:u.current;return(0,e.useDebugValue)(p),p};return Object.assign(i,n),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const t=[i,n];return{next(){const e=t.length<=0;return{value:t.shift(),done:e}}}},i}(((i,r)=>{const o=new cot,a=new cot,s=new cot;function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:l,top:c,left:u}=n,h=i/l;e instanceof cot?s.copy(e):s.set(...e);const d=t.getWorldPosition(o).distanceTo(s);if(bmt(t))return{width:i/t.zoom,height:l/t.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const e=t.fov*Math.PI/180,n=2*Math.tan(e/2)*d,r=n*(i/l);return{width:r,height:n,top:c,left:u,factor:i/r,distance:d,aspect:h}}}let c;const u=t=>i((e=>({performance:{...e.performance,current:t}}))),h=new Rrt,d={set:i,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t(r(),e)},advance:(t,e)=>n(t,e,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new zpt,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const t=r();c&&clearTimeout(c),t.performance.current!==t.performance.min&&u(t.performance.min),c=setTimeout((()=>u(r().performance.max)),t.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:t=>i((e=>({...e,events:{...e.events,...t}}))),setSize:(t,e,n,o,s)=>{const c=r().camera,u={width:t,height:e,top:o||0,left:s||0,updateStyle:n};i((t=>({size:u,viewport:{...t.viewport,...l(c,a,u)}})))},setDpr:t=>i((e=>{const n=kmt(t);return{viewport:{...e.viewport,dpr:n,initialDpr:e.viewport.initialDpr||n}}})),setFrameloop:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const e=r().clock;e.stop(),e.elapsedTime=0,"never"!==t&&(e.start(),e.elapsedTime=0),i((()=>({frameloop:t})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:e.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(t,e,n)=>{const i=r().internal;return i.priority=i.priority+(e>0?1:0),i.subscribers.push({ref:t,priority:e,store:n}),i.subscribers=i.subscribers.sort(((t,e)=>t.priority-e.priority)),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(e>0?1:0),n.subscribers=n.subscribers.filter((e=>e.ref!==t)))}}}};return d})),r=i.getState();let o=r.size,a=r.viewport.dpr,s=r.camera;return i.subscribe((()=>{const{camera:t,size:e,viewport:n,gl:r,set:l}=i.getState();if(e!==o||n.dpr!==a){var c;o=e,a=n.dpr,Bmt(t,e),r.setPixelRatio(n.dpr);const i=null!=(c=e.updateStyle)?c:"undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(e.width,e.height,i)}t!==s&&(s=t,l((e=>({viewport:{...e.viewport,...e.viewport.getCurrentViewport(t)}}))))})),i.subscribe((e=>t(e))),i};function Xmt(t,e){const n={callback:t};return e.add(n),()=>{e.delete(n)}}let Ymt,Kmt=new Set,Zmt=new Set,Qmt=new Set;function Jmt(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function $mt(t,e){switch(t){case"before":return Jmt(Kmt,e);case"after":return Jmt(Zmt,e);case"tail":return Jmt(Qmt,e)}}let tvt,evt;function nvt(t,e,n){let i=e.clock.getDelta();for("never"===e.frameloop&&"number"===typeof t&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),tvt=e.internal.subscribers,Ymt=0;Ymt<tvt.length;Ymt++)evt=tvt[Ymt],evt.ref.current(evt.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),"always"===e.frameloop?1:e.internal.frames}function ivt(){const t=e.useContext(Wmt);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function rvt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t=>t,e=arguments.length>1?arguments[1]:void 0;return ivt()(t,e)}function ovt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=ivt(),i=n.getState().internal.subscribe,r=xmt(t);return _mt((()=>i(r,e,n)),[e,i,n]),null}function avt(t,e){return function(n){const i=new n;t&&t(i);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return Promise.all(o.map((t=>new Promise(((n,r)=>i.load(t,(t=>{t.scene&&Object.assign(t,Pmt(t.scene)),n(t)}),e,(e=>r(new Error("Could not load ".concat(t,": ").concat(e.message,")"))))))))))}}function svt(t,e,n,i){const r=Array.isArray(e)?e:[e],o=dmt(avt(n,i),[t,...r],{equal:Amt.equ});return Array.isArray(e)?o:o[0]}svt.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return((t,e,n)=>{hmt(t,e,!0,n)})(avt(n),[t,...i])},svt.clear=function(t,e){return(t=>{if(void 0===t||0===t.length)cmt.splice(0,cmt.length);else{const e=cmt.find((e=>umt(t,e.keys,e.equal)));e&&e.remove()}})([t,...Array.isArray(e)?e:[e]])};const lvt=new Map,{invalidate:cvt,advance:uvt}=function(t){let e,n,i,r=!1;function o(a){n=requestAnimationFrame(o),r=!0,e=0,$mt("before",a);for(const n of t.values()){var s;i=n.store.getState(),!i.internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(s=i.gl.xr)&&s.isPresenting||(e+=nvt(a,i))}if($mt("after",a),0===e)return $mt("tail",a),r=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function e(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a;if(!n)return t.forEach((t=>e(t.store.getState())),i);null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+i),r||(r=!0,requestAnimationFrame(o)))},advance:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&$mt("before",e),i)nvt(e,i,r);else for(const o of t.values())nvt(e,o.store.getState());n&&$mt("after",e)}}}(lvt),{reconciler:hvt,applyProps:dvt}=function(t,e){function n(t,e,n){let i,{args:r=[],attach:o,...a}=e,s="".concat(t[0].toUpperCase()).concat(t.slice(1));if("primitive"===t){if(void 0===a.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=Omt(a.object,{type:t,root:n,attach:o,primitive:!0})}else{const e=fmt[s];if(!e)throw new Error("R3F: ".concat(s," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");i=Omt(new e(...r),{type:t,root:n,attach:o,memoizedProps:{args:r}})}return void 0===i.__r3f.attach&&(i instanceof ist?i.__r3f.attach="geometry":i instanceof Eat&&(i.__r3f.attach="material")),"inject"!==s&&zmt(i,a),i}function i(t,e){let n=!1;var i,r;e&&(null!=(i=e.__r3f)&&i.attach?Dmt(t,e,e.__r3f.attach):e.isObject3D&&t.isObject3D&&(t.add(e),n=!0),n||null==(r=t.__r3f)||r.objects.push(e),e.__r3f||Omt(e,{}),e.__r3f.parent=t,Umt(e),Fmt(e))}function r(t,e,n){let i=!1;if(e){var r,o;if(null!=(r=e.__r3f)&&r.attach)Dmt(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){e.parent=t,e.dispatchEvent({type:"added"});const r=t.children.filter((t=>t!==e)),o=r.indexOf(n);t.children=[...r.slice(0,o),e,...r.slice(o)],i=!0}i||null==(o=t.__r3f)||o.objects.push(e),e.__r3f||Omt(e,{}),e.__r3f.parent=t,Umt(e),Fmt(e)}}function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&[...t].forEach((t=>a(e,t,n)))}function a(t,e,n){if(e){var i,r,a;if(e.__r3f&&(e.__r3f.parent=null),null!=(i=t.__r3f)&&i.objects&&(t.__r3f.objects=t.__r3f.objects.filter((t=>t!==e))),null!=(r=e.__r3f)&&r.attach)Imt(t,e,e.__r3f.attach);else if(e.isObject3D&&t.isObject3D){var s;t.remove(e),null!=(s=e.__r3f)&&s.root&&function(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter((t=>t!==e)),n.initialHits=n.initialHits.filter((t=>t!==e)),n.hovered.forEach(((t,i)=>{t.eventObject!==e&&t.object!==e||n.hovered.delete(i)})),n.capturedMap.forEach(((t,i)=>{Hmt(n.capturedMap,e,t,i)}))}(e.__r3f.root,e)}const c=null==(a=e.__r3f)?void 0:a.primitive,u=void 0===n?null!==e.dispose&&!c:n;var l;if(!c)o(null==(l=e.__r3f)?void 0:l.objects,e,u),o(e.children,e,u);delete e.__r3f,u&&e.dispose&&"Scene"!==e.type&&(0,smt.unstable_scheduleCallback)(smt.unstable_IdlePriority,(()=>{try{e.dispose()}catch(t){}})),Fmt(t)}}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),l=amt()({createInstance:n,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(t,e)=>{if(!e)return;const n=t.getState().scene;n.__r3f&&(n.__r3f.root=t,i(n,e))},removeChildFromContainer:(t,e)=>{e&&a(t.getState().scene,e)},insertInContainerBefore:(t,e,n)=>{if(!e||!n)return;const i=t.getState().scene;i.__r3f&&r(i,e,n)},getRootHostContext:()=>null,getChildHostContext:t=>t,finalizeInitialChildren(t){var e;const n=null!=(e=null==t?void 0:t.__r3f)?e:{};return Boolean(n.handlers)},prepareUpdate(t,e,n,i){var r;if((null!=(r=null==t?void 0:t.__r3f)?r:{}).primitive&&i.object&&i.object!==t)return[!0];{const{args:e=[],children:r,...o}=i,{args:a=[],children:s,...l}=n;if(!Array.isArray(e))throw new Error("R3F: the args prop must be an array!");if(e.some(((t,e)=>t!==a[e])))return[!0];const c=Nmt(t,o,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(t,e,r,o,s,l){let[c,u]=e;c?function(t,e,r,o){var s;const l=null==(s=t.__r3f)?void 0:s.parent;if(!l)return;const c=n(e,r,t.__r3f.root);if(t.children){for(const e of t.children)e.__r3f&&i(c,e);t.children=t.children.filter((t=>!t.__r3f))}t.__r3f.objects.forEach((t=>i(c,t))),t.__r3f.objects=[],t.__r3f.autoRemovedBeforeAppend||a(l,t),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),i(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c);[o,o.alternate].forEach((t=>{null!==t&&(t.stateNode=c,t.ref&&("function"===typeof t.ref?t.ref(c):t.ref.current=c))}))}(t,r,s,l):zmt(t,u)},commitMount(t,e,n,i){var r;const o=null!=(r=t.__r3f)?r:{};t.raycast&&o.handlers&&o.eventCount&&t.__r3f.root.getState().internal.interaction.push(t)},getPublicInstance:t=>t,prepareForCommit:()=>null,preparePortalMount:t=>Omt(t.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(t){var e;const{attach:n,parent:i}=null!=(e=t.__r3f)?e:{};n&&i&&Imt(i,t,n),t.isObject3D&&(t.visible=!1),Fmt(t)},unhideInstance(t,e){var n;const{attach:i,parent:r}=null!=(n=t.__r3f)?n:{};i&&r&&Dmt(r,t,i),(t.isObject3D&&null==e.visible||e.visible)&&(t.visible=!0),Fmt(t)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>e?e():nmt.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&Amt.fun(performance.now)?performance.now:Amt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Amt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Amt.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:zmt}}(0,(function(){var t;const e="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!e)return nmt.DefaultEventPriority;switch(null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nmt.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nmt.ContinuousEventPriority;default:return nmt.DefaultEventPriority}})),fvt={objects:"shallow",strict:!1},pvt=(t,e)=>{const n="function"===typeof t?t(e):t;return Gmt(n)?n:new xut({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function gvt(t){const n=lvt.get(t),i=null==n?void 0:n.fiber,r=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");const o="function"===typeof reportError?reportError:console.error,a=r||qmt(cvt,uvt),s=i||hvt.createContainer(a,nmt.ConcurrentRoot,null,!1,null,"",o,null);let l;n||lvt.set(t,{fiber:s,store:a});let c,u=!1;return{configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:i,scene:r,events:o,onCreated:s,shadows:h=!1,linear:d=!1,flat:f=!1,legacy:p=!1,orthographic:g=!1,frameloop:m="always",dpr:v=[1,2],performance:y,raycaster:b,camera:_,onPointerMissed:x}=e,w=a.getState(),S=w.gl;w.gl||w.set({gl:S=pvt(n,t)});let E=w.raycaster;E||w.set({raycaster:E=new pgt});const{params:M,...T}=b||{};if(Amt.equ(T,E,fvt)||dvt(E,{...T}),Amt.equ(M,E.params,fvt)||dvt(E,{params:{...E.params,...M}}),!w.camera||w.camera===c&&!Amt.equ(c,_,fvt)){c=_;const t=_ instanceof Ast,e=t?_:g?new elt(0,0,0,0,.1,1e3):new Pst(75,0,.1,1e3);t||(e.position.z=5,_&&dvt(e,_),w.camera||null!=_&&_.rotation||e.lookAt(0,0,0)),w.set({camera:e})}if(!w.scene){let t;r instanceof Mut?t=r:(t=new Mut,r&&dvt(t,r)),w.set({scene:Omt(t)})}if(!w.xr){const t=(t,e)=>{const n=a.getState();"never"!==n.frameloop&&uvt(t,!0,n,e)},e=()=>{const e=a.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?t:null),e.gl.xr.isPresenting||cvt(e)},n={connect(){const t=a.getState().gl;t.xr.addEventListener("sessionstart",e),t.xr.addEventListener("sessionend",e)},disconnect(){const t=a.getState().gl;t.xr.removeEventListener("sessionstart",e),t.xr.removeEventListener("sessionend",e)}};S.xr&&n.connect(),w.set({xr:n})}if(S.shadowMap){const t=S.shadowMap.enabled,e=S.shadowMap.type;if(S.shadowMap.enabled=!!h,Amt.boo(h))S.shadowMap.type=$tt;else if(Amt.str(h)){var k;const t={basic:Qtt,percentage:Jtt,soft:$tt,variance:tet};S.shadowMap.type=null!=(k=t[h])?k:$tt}else Amt.obj(h)&&Object.assign(S.shadowMap,h);t===S.shadowMap.enabled&&e===S.shadowMap.type||(S.shadowMap.needsUpdate=!0)}const C=ymt();C&&("enabled"in C?C.enabled=!p:"legacyMode"in C&&(C.legacyMode=p));dvt(S,{outputEncoding:d?3e3:3001,toneMapping:f?Bet:Get}),w.legacy!==p&&w.set((()=>({legacy:p}))),w.linear!==d&&w.set((()=>({linear:d}))),w.flat!==f&&w.set((()=>({flat:f}))),!n||Amt.fun(n)||Gmt(n)||Amt.equ(n,S,fvt)||dvt(S,n),o&&!w.events.handlers&&w.set({events:o(a)});const A=function(t,e){if(e)return e;if("undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:e,height:n,top:i,left:r}=t.parentElement.getBoundingClientRect();return{width:e,height:n,top:i,left:r}}return"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?{width:t.width,height:t.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(t,i);return Amt.equ(A,w.size,fvt)||w.setSize(A.width,A.height,A.updateStyle,A.top,A.left),v&&w.viewport.dpr!==kmt(v)&&w.setDpr(v),w.frameloop!==m&&w.setFrameloop(m),w.onPointerMissed||w.set({onPointerMissed:x}),y&&!Amt.equ(y,w.performance,fvt)&&w.set((t=>({performance:{...t.performance,...y}}))),l=s,u=!0,this},render(n){return u||this.configure(),hvt.updateContainer(e.createElement(mvt,{store:a,children:n,onCreated:l,rootElement:t}),s,null,(()=>{})),a},unmount(){vvt(t)}}}function mvt(t){let{store:n,children:i,onCreated:r,rootElement:o}=t;return _mt((()=>{const t=n.getState();t.set((t=>({internal:{...t.internal,active:!0}}))),r&&r(t),n.getState().events.connected||null==t.events.connect||t.events.connect(o)}),[]),e.createElement(Wmt.Provider,{value:n},i)}function vvt(t,e){const n=lvt.get(t),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),hvt.updateContainer(null,i,null,(()=>{r&&setTimeout((()=>{try{var n,i,o,a;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(o=r.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=r.gl)&&a.xr&&r.xr.disconnect(),function(t){t.dispose&&"Scene"!==t.type&&t.dispose();for(const e in t)null==e.dispose||e.dispose(),delete t[e]}(r),lvt.delete(t),e&&e(t)}catch(s){}}),500)}))}}hvt.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:e.version});e.unstable_act;function yvt(){return yvt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yvt.apply(this,arguments)}var bvt=n(4695),_vt=n.n(bvt);function xvt(t){let{debounce:n,scroll:i,polyfill:r,offsetSize:o}=void 0===t?{debounce:0,scroll:!1,offsetSize:!1}:t;const a=r||("undefined"===typeof window?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=(0,e.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,e.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),u=n?"number"===typeof n?n:n.scroll:null,h=n?"number"===typeof n?n:n.resize:null,d=(0,e.useRef)(!1);(0,e.useEffect)((()=>(d.current=!0,()=>{d.current=!1})));const[f,p,g]=(0,e.useMemo)((()=>{const t=()=>{if(!c.current.element)return;const{left:t,top:e,width:n,height:i,bottom:r,right:a,x:s,y:u}=c.current.element.getBoundingClientRect(),h={left:t,top:e,width:n,height:i,bottom:r,right:a,x:s,y:u};c.current.element instanceof HTMLElement&&o&&(h.height=c.current.element.offsetHeight,h.width=c.current.element.offsetWidth),Object.freeze(h),d.current&&!Evt(c.current.lastBounds,h)&&l(c.current.lastBounds=h)};return[t,h?_vt()(t,h):t,u?_vt()(t,u):t]}),[l,o,u,h]);function m(){c.current.scrollContainers&&(c.current.scrollContainers.forEach((t=>t.removeEventListener("scroll",g,!0))),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function v(){c.current.element&&(c.current.resizeObserver=new a(g),c.current.resizeObserver.observe(c.current.element),i&&c.current.scrollContainers&&c.current.scrollContainers.forEach((t=>t.addEventListener("scroll",g,{capture:!0,passive:!0}))))}return function(t,n){(0,e.useEffect)((()=>{if(n){const e=t;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[t,n])}(g,Boolean(i)),function(t){(0,e.useEffect)((()=>{const e=t;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[t])}(p),(0,e.useEffect)((()=>{m(),v()}),[i,g,p]),(0,e.useEffect)((()=>m),[]),[t=>{t&&t!==c.current.element&&(m(),c.current.element=t,c.current.scrollContainers=wvt(t),v())},s,f]}function wvt(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some((t=>"auto"===t||"scroll"===t))&&e.push(t),[...e,...wvt(t.parentElement)]}const Svt=["x","y","top","bottom","left","right","width","height"],Evt=(t,e)=>Svt.every((n=>t[n]===e[n]));var Mvt=Object.defineProperty,Tvt=Object.defineProperties,kvt=Object.getOwnPropertyDescriptors,Cvt=Object.getOwnPropertySymbols,Avt=Object.prototype.hasOwnProperty,Pvt=Object.prototype.propertyIsEnumerable,Ovt=(t,e,n)=>e in t?Mvt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rvt=(t,e)=>{for(var n in e||(e={}))Avt.call(e,n)&&Ovt(t,n,e[n]);if(Cvt)for(var n of Cvt(e))Pvt.call(e,n)&&Ovt(t,n,e[n]);return t};function Lvt(t,e,n){if(!t)return;if(!0===n(t))return t;let i=e?t.return:t.child;for(;i;){const t=Lvt(i,e,n);if(t)return t;i=e?null:i.sibling}}function Dvt(t){try{return Object.defineProperties(t,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(e){return t}}const Ivt=Dvt(e.createContext(null));class Nvt extends e.Component{render(){return e.createElement(Ivt.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:zvt,ReactCurrentDispatcher:Fvt}=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Uvt(){const t=e.useContext(Ivt);if(null===t)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=e.useId(),i=e.useMemo((()=>{for(const e of[null==zvt?void 0:zvt.current,t,null==t?void 0:t.alternate]){if(!e)continue;const t=Lvt(e,!1,(t=>{let e=t.memoizedState;for(;e;){if(e.memoizedState===n)return!0;e=e.next}}));if(t)return t}}),[t,n]);return i}function Bvt(){const t=function(){var t;const n=Uvt(),[i]=e.useState((()=>new Map));i.clear();let r=n;for(;r;){if(r.type&&"object"===typeof r.type){const e="Provider"in r.type?r.type:r.type._context;e&&e!==Ivt&&!i.has(e)&&i.set(e,null==(t=null==Fvt?void 0:Fvt.current)?void 0:t.readContext(Dvt(e)))}r=r.return}return i}();return e.useMemo((()=>Array.from(t.keys()).reduce(((n,i)=>r=>e.createElement(n,null,e.createElement(i.Provider,((t,e)=>Tvt(t,kvt(e)))(Rvt({},r),{value:t.get(i)})))),(t=>e.createElement(Nvt,Rvt({},t))))),[t])}const jvt={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Hvt(t){const{handlePointer:e}=Vmt(t);return{priority:1,enabled:!0,compute(t,e,n){e.pointer.set(t.offsetX/e.size.width*2-1,-t.offsetY/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)},connected:void 0,handlers:Object.keys(jvt).reduce(((t,n)=>({...t,[n]:e(n)})),{}),update:()=>{var e;const{events:n,internal:i}=t.getState();null!=(e=i.lastEvent)&&e.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:e=>{var n;const{set:i,events:r}=t.getState();null==r.disconnect||r.disconnect(),i((t=>({events:{...t.events,connected:e}}))),Object.entries(null!=(n=r.handlers)?n:[]).forEach((t=>{let[n,i]=t;const[r,o]=jvt[n];e.addEventListener(r,i,{passive:o})}))},disconnect:()=>{const{set:e,events:n}=t.getState();var i;n.connected&&(Object.entries(null!=(i=n.handlers)?i:[]).forEach((t=>{let[e,i]=t;if(n&&n.connected instanceof HTMLElement){const[t]=jvt[e];n.connected.removeEventListener(t,i)}})),e((t=>({events:{...t.events,connected:void 0}}))))}}}const Vvt=e.forwardRef((function(n,i){let{children:r,fallback:o,resize:a,style:s,gl:l,events:c=Hvt,eventSource:u,eventPrefix:h,shadows:d,linear:f,flat:p,legacy:g,orthographic:m,frameloop:v,dpr:y,performance:b,raycaster:_,camera:x,onPointerMissed:w,onCreated:S,...E}=n;e.useMemo((()=>pmt(t)),[]);const M=Bvt(),[T,k]=xvt({scroll:!0,debounce:{scroll:50,resize:0},...a}),C=e.useRef(null),A=e.useRef(null);e.useImperativeHandle(i,(()=>C.current));const P=xmt(w),[O,R]=e.useState(!1),[L,D]=e.useState(!1);if(O)throw O;if(L)throw L;const I=e.useRef(null);_mt((()=>{const t=C.current;k.width>0&&k.height>0&&t&&(I.current||(I.current=gvt(t)),I.current.configure({gl:l,events:c,shadows:d,linear:f,flat:p,legacy:g,orthographic:m,frameloop:v,dpr:y,performance:b,raycaster:_,camera:x,size:k,onPointerMissed:function(){return null==P.current?void 0:P.current(...arguments)},onCreated:t=>{var e;null==t.events.connect||t.events.connect(u?(e=u)&&e.hasOwnProperty("current")?u.current:u:A.current),h&&t.setEvents({compute:(t,e)=>{const n=t[h+"X"],i=t[h+"Y"];e.pointer.set(n/e.size.width*2-1,-i/e.size.height*2+1),e.raycaster.setFromCamera(e.pointer,e.camera)}}),null==S||S(t)}}),I.current.render(e.createElement(M,null,e.createElement(Smt,{set:D},e.createElement(e.Suspense,{fallback:e.createElement(wmt,{set:R})},r)))))})),e.useEffect((()=>{const t=C.current;if(t)return()=>vvt(t)}),[]);const N=u?"none":"auto";return e.createElement("div",yvt({ref:A,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:N,...s}},E),e.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},e.createElement("canvas",{ref:C,style:{display:"block"}},o)))})),Gvt=e.forwardRef((function(t,n){return e.createElement(Nvt,null,e.createElement(Vvt,yvt({},t,{ref:n})))}));function Wvt(t){return function(){return t}}var qvt={value:()=>{}};function Xvt(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new Yvt(i)}function Yvt(t){this._=t}function Kvt(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Zvt(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=qvt,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}Yvt.prototype=Xvt.prototype={constructor:Yvt,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)r[n]=Zvt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Zvt(r[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=Kvt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Yvt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const Qvt=Xvt;var Jvt,$vt,tyt=0,eyt=0,nyt=0,iyt=1e3,ryt=0,oyt=0,ayt=0,syt="object"===typeof performance&&performance.now?performance:Date,lyt="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cyt(){return oyt||(lyt(uyt),oyt=syt.now()+ayt)}function uyt(){oyt=0}function hyt(){this._call=this._time=this._next=null}function dyt(t,e,n){var i=new hyt;return i.restart(t,e,n),i}function fyt(){oyt=(ryt=syt.now())+ayt,tyt=eyt=0;try{!function(){cyt(),++tyt;for(var t,e=Jvt;e;)(t=oyt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tyt}()}finally{tyt=0,function(){var t,e,n=Jvt,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Jvt=e);$vt=t,gyt(i)}(),oyt=0}}function pyt(){var t=syt.now(),e=t-ryt;e>iyt&&(ayt-=e,ryt=t)}function gyt(t){tyt||(eyt&&(eyt=clearTimeout(eyt)),t-oyt>24?(t<1/0&&(eyt=setTimeout(fyt,t-syt.now()-ayt)),nyt&&(nyt=clearInterval(nyt))):(nyt||(ryt=syt.now(),nyt=setInterval(pyt,iyt)),tyt=1,lyt(fyt)))}hyt.prototype=dyt.prototype={constructor:hyt,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?cyt():+n)+(null==e?0:+e),this._next||$vt===this||($vt?$vt._next=this:Jvt=this,$vt=this),this._call=t,this._time=n,gyt()},stop:function(){this._call&&(this._call=null,this._time=1/0,gyt())}};const myt=1664525,vyt=1013904223,yyt=4294967296;var byt=3;function _yt(t){return t.x}function xyt(t){return t.y}function wyt(t){return t.z}var Syt=10,Eyt=Math.PI*(3-Math.sqrt(5)),Myt=20*Math.PI/(9+Math.sqrt(221));function Tyt(t,e){e=e||2;var n,i=Math.min(byt,Math.max(1,Math.round(e))),r=1,o=.001,a=1-Math.pow(o,1/300),s=0,l=.6,c=new Map,u=dyt(f),h=Qvt("tick","end"),d=function(){let t=1;return()=>(t=(myt*t+vyt)%yyt)/yyt}();function f(){p(),h.call("tick",n),r<o&&(u.stop(),h.call("end",n))}function p(e){var o,u,h=t.length;void 0===e&&(e=1);for(var d=0;d<e;++d)for(r+=(s-r)*a,c.forEach((function(t){t(r)})),o=0;o<h;++o)null==(u=t[o]).fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),i>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),i>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return n}function g(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||i>1&&isNaN(e.y)||i>2&&isNaN(e.z)){var o=Syt*(i>2?Math.cbrt(.5+n):i>1?Math.sqrt(.5+n):n),a=n*Eyt,s=n*Myt;1===i?e.x=o:2===i?(e.x=o*Math.cos(a),e.y=o*Math.sin(a)):(e.x=o*Math.sin(a)*Math.cos(s),e.y=o*Math.cos(a),e.z=o*Math.sin(a)*Math.sin(s))}(isNaN(e.vx)||i>1&&isNaN(e.vy)||i>2&&isNaN(e.vz))&&(e.vx=0,i>1&&(e.vy=0),i>2&&(e.vz=0))}}function m(e){return e.initialize&&e.initialize(t,d,i),e}return null==t&&(t=[]),g(),n={tick:p,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},numDimensions:function(t){return arguments.length?(i=Math.min(byt,Math.max(1,Math.round(t))),c.forEach(m),n):i},nodes:function(e){return arguments.length?(t=e,g(),c.forEach(m),n):t},alpha:function(t){return arguments.length?(r=+t,n):r},alphaMin:function(t){return arguments.length?(o=+t,n):o},alphaDecay:function(t){return arguments.length?(a=+t,n):+a},alphaTarget:function(t){return arguments.length?(s=+t,n):s},velocityDecay:function(t){return arguments.length?(l=1-t,n):1-l},randomSource:function(t){return arguments.length?(d=t,c.forEach(m),n):d},force:function(t,e){return arguments.length>1?(null==e?c.delete(t):c.set(t,m(e)),n):c.get(t)},find:function(){var e,n,r,o,a,s,l=Array.prototype.slice.call(arguments),c=l.shift()||0,u=(i>1?l.shift():null)||0,h=(i>2?l.shift():null)||0,d=l.shift()||1/0,f=0,p=t.length;for(d*=d,f=0;f<p;++f)(o=(e=c-(a=t[f]).x)*e+(n=u-(a.y||0))*n+(r=h-(a.z||0))*r)<d&&(s=a,d=o);return s},on:function(t,e){return arguments.length>1?(h.on(t,e),n):h.on(t)}}}function kyt(t){var e,n,i,r=Wvt(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vx+=(i[o]-r.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!==typeof t&&(t=Wvt(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"===typeof t?t:Wvt(+t),a(),o):r},o.x=function(e){return arguments.length?(t="function"===typeof e?e:Wvt(+e),a(),o):t},o}function Cyt(t){var e,n,i,r=Wvt(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vy+=(i[o]-r.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!==typeof t&&(t=Wvt(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"===typeof t?t:Wvt(+t),a(),o):r},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Wvt(+e),a(),o):t},o}function Ayt(t,e,n){if(isNaN(e))return t;var i,r,o,a,s,l,c=t._root,u={data:n},h=t._x0,d=t._x1;if(!c)return t._root=u,t;for(;c.length;)if((a=e>=(r=(h+d)/2))?h=r:d=r,i=c,!(c=c[s=+a]))return i[s]=u,t;if(e===(o=+t._x.call(null,c.data)))return u.next=c,i?i[s]=u:t._root=u,t;do{i=i?i[s]=new Array(2):t._root=new Array(2),(a=e>=(r=(h+d)/2))?h=r:d=r}while((s=+a)===(l=+(o>=r)));return i[l]=c,i[s]=u,t}function Pyt(t,e,n){this.node=t,this.x0=e,this.x1=n}function Oyt(t){return t[0]}function Ryt(t,e){var n=new Lyt(null==e?Oyt:e,NaN,NaN);return null==t?n:n.addAll(t)}function Lyt(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function Dyt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Iyt=Ryt.prototype=Lyt.prototype;function Nyt(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,a,s,l,c,u,h,d,f=t._root,p={data:i},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((c=e>=(o=(g+v)/2))?g=o:v=o,(u=n>=(a=(m+y)/2))?m=a:y=a,r=f,!(f=f[h=u<<1|c]))return r[h]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,r?r[h]=p:t._root=p,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+v)/2))?g=o:v=o,(u=n>=(a=(m+y)/2))?m=a:y=a}while((h=u<<1|c)===(d=(l>=a)<<1|s>=o));return r[d]=f,r[h]=p,t}function zyt(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Fyt(t){return t[0]}function Uyt(t){return t[1]}function Byt(t,e,n){var i=new jyt(null==e?Fyt:e,null==n?Uyt:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function jyt(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Hyt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}Iyt.copy=function(){var t,e,n=new Lyt(this._x,this._x0,this._x1),i=this._root;if(!i)return n;if(!i.length)return n._root=Dyt(i),n;for(t=[{source:i,target:n._root=new Array(2)}];i=t.pop();)for(var r=0;r<2;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(2)}):i.target[r]=Dyt(e));return n},Iyt.add=function(t){const e=+this._x.call(null,t);return Ayt(this.cover(e),e,t)},Iyt.addAll=function(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let i=1/0,r=-1/0;for(let o,a=0;a<e;++a)isNaN(o=+this._x.call(null,t[a]))||(n[a]=o,o<i&&(i=o),o>r&&(r=o));if(i>r)return this;this.cover(i).cover(r);for(let o=0;o<e;++o)Ayt(this,n[o],t[o]);return this},Iyt.cover=function(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{for(var i,r,o=n-e||1,a=this._root;e>t||t>=n;)switch(r=+(t<e),(i=new Array(2))[r]=a,a=i,o*=2,r){case 0:n=e+o;break;case 1:e=n-o}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._x1=n,this},Iyt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Iyt.extent=function(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},Iyt.find=function(t,e){var n,i,r,o,a,s=this._x0,l=this._x1,c=[],u=this._root;for(u&&c.push(new Pyt(u,s,l)),null==e?e=1/0:(s=t-e,l=t+e);o=c.pop();)if(!(!(u=o.node)||(i=o.x0)>l||(r=o.x1)<s))if(u.length){var h=(i+r)/2;c.push(new Pyt(u[1],h,r),new Pyt(u[0],i,h)),(a=+(t>=h))&&(o=c[c.length-1],c[c.length-1]=c[c.length-1-a],c[c.length-1-a]=o)}else{var d=Math.abs(t-+this._x.call(null,u.data));d<e&&(e=d,s=t-d,l=t+d,n=u.data)}return n},Iyt.remove=function(t){if(isNaN(o=+this._x.call(null,t)))return this;var e,n,i,r,o,a,s,l,c,u=this._root,h=this._x0,d=this._x1;if(!u)return this;if(u.length)for(;;){if((s=o>=(a=(h+d)/2))?h=a:d=a,e=u,!(u=u[l=+s]))return this;if(!u.length)break;e[l+1&1]&&(n=e,c=l)}for(;u.data!==t;)if(i=u,!(u=u.next))return this;return(r=u.next)&&delete u.next,i?(r?i.next=r:delete i.next,this):e?(r?e[l]=r:delete e[l],(u=e[0]||e[1])&&u===(e[1]||e[0])&&!u.length&&(n?n[c]=u:this._root=u),this):(this._root=r,this)},Iyt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Iyt.root=function(){return this._root},Iyt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Iyt.visit=function(t){var e,n,i,r,o=[],a=this._root;for(a&&o.push(new Pyt(a,this._x0,this._x1));e=o.pop();)if(!t(a=e.node,i=e.x0,r=e.x1)&&a.length){var s=(i+r)/2;(n=a[1])&&o.push(new Pyt(n,s,r)),(n=a[0])&&o.push(new Pyt(n,i,s))}return this},Iyt.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Pyt(this._root,this._x0,this._x1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.x1,l=(a+s)/2;(o=r[0])&&n.push(new Pyt(o,a,l)),(o=r[1])&&n.push(new Pyt(o,l,s))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.x1);return this},Iyt.x=function(t){return arguments.length?(this._x=t,this):this._x};var Vyt=Byt.prototype=jyt.prototype;function Gyt(t,e,n,i,r){if(isNaN(e)||isNaN(n)||isNaN(i))return t;var o,a,s,l,c,u,h,d,f,p,g,m,v=t._root,y={data:r},b=t._x0,_=t._y0,x=t._z0,w=t._x1,S=t._y1,E=t._z1;if(!v)return t._root=y,t;for(;v.length;)if((d=e>=(a=(b+w)/2))?b=a:w=a,(f=n>=(s=(_+S)/2))?_=s:S=s,(p=i>=(l=(x+E)/2))?x=l:E=l,o=v,!(v=v[g=p<<2|f<<1|d]))return o[g]=y,t;if(c=+t._x.call(null,v.data),u=+t._y.call(null,v.data),h=+t._z.call(null,v.data),e===c&&n===u&&i===h)return y.next=v,o?o[g]=y:t._root=y,t;do{o=o?o[g]=new Array(8):t._root=new Array(8),(d=e>=(a=(b+w)/2))?b=a:w=a,(f=n>=(s=(_+S)/2))?_=s:S=s,(p=i>=(l=(x+E)/2))?x=l:E=l}while((g=p<<2|f<<1|d)===(m=(h>=l)<<2|(u>=s)<<1|c>=a));return o[m]=v,o[g]=y,t}function Wyt(t,e,n,i,r,o,a){this.node=t,this.x0=e,this.y0=n,this.z0=i,this.x1=r,this.y1=o,this.z1=a}function qyt(t){return t[0]}function Xyt(t){return t[1]}function Yyt(t){return t[2]}function Kyt(t,e,n,i){var r=new Zyt(null==e?qyt:e,null==n?Xyt:n,null==i?Yyt:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Zyt(t,e,n,i,r,o,a,s,l){this._x=t,this._y=e,this._z=n,this._x0=i,this._y0=r,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this._root=void 0}function Qyt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}Vyt.copy=function(){var t,e,n=new jyt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Hyt(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=Hyt(e));return n},Vyt.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Nyt(this.cover(e,n),e,n,t)},Vyt.addAll=function(t){var e,n,i,r,o=t.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(a[n]=i,s[n]=r,i<l&&(l=i),i>u&&(u=i),r<c&&(c=r),r>h&&(h=r));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<o;++n)Nyt(this,a[n],s[n],t[n]);return this},Vyt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var a,s,l=r-n||1,c=this._root;n>t||t>=r||i>e||e>=o;)switch(s=(e<i)<<1|t<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:r=n+l,o=i+l;break;case 1:n=r-l,o=i+l;break;case 2:r=n+l,i=o-l;break;case 3:n=r-l,i=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Vyt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Vyt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Vyt.find=function(t,e,n){var i,r,o,a,s,l,c,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new zyt(g,u,h,d,f)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(r=l.x0)>d||(o=l.y0)>f||(a=l.x1)<u||(s=l.y1)<h))if(g.length){var m=(r+a)/2,v=(o+s)/2;p.push(new zyt(g[3],m,v,a,s),new zyt(g[2],r,v,m,s),new zyt(g[1],m,o,a,v),new zyt(g[0],r,o,m,v)),(c=(e>=v)<<1|t>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);u=t-x,h=e-x,d=t+x,f=e+x,i=g.data}}return i},Vyt.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,o,a,s,l,c,u,h,d,f=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(s=(p+m)/2))?p=s:m=s,(u=a>=(l=(g+v)/2))?g=l:v=l,e=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=r,this)},Vyt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Vyt.root=function(){return this._root},Vyt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Vyt.visit=function(t){var e,n,i,r,o,a,s=[],l=this._root;for(l&&s.push(new zyt(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(i+o)/2,u=(r+a)/2;(n=l[3])&&s.push(new zyt(n,c,u,o,a)),(n=l[2])&&s.push(new zyt(n,i,u,c,a)),(n=l[1])&&s.push(new zyt(n,c,r,o,u)),(n=l[0])&&s.push(new zyt(n,i,r,c,u))}return this},Vyt.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new zyt(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,h=(s+c)/2;(o=r[0])&&n.push(new zyt(o,a,s,u,h)),(o=r[1])&&n.push(new zyt(o,u,s,l,h)),(o=r[2])&&n.push(new zyt(o,a,h,u,c)),(o=r[3])&&n.push(new zyt(o,u,h,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Vyt.x=function(t){return arguments.length?(this._x=t,this):this._x},Vyt.y=function(t){return arguments.length?(this._y=t,this):this._y};var Jyt=Kyt.prototype=Zyt.prototype;function $yt(t){return 1e-6*(t()-.5)}function tbt(t){return t.x+t.vx}function ebt(t){return t.y+t.vy}function nbt(t){return t.z+t.vz}function ibt(t){var e,n,i,r,o=1,a=1;function s(){for(var t,s,c,u,h,d,f,p,g=e.length,m=0;m<a;++m)for(s=(1===n?Ryt(e,tbt):2===n?Byt(e,tbt,ebt):3===n?Kyt(e,tbt,ebt,nbt):null).visitAfter(l),t=0;t<g;++t)c=e[t],f=i[c.index],p=f*f,u=c.x+c.vx,n>1&&(h=c.y+c.vy),n>2&&(d=c.z+c.vz),s.visit(v);function v(t,e,i,a,s,l,g){var m=[e,i,a,s,l,g],v=m[0],y=m[1],b=m[2],_=m[n],x=m[n+1],w=m[n+2],S=t.data,E=t.r,M=f+E;if(!S)return v>u+M||_<u-M||n>1&&(y>h+M||x<h-M)||n>2&&(b>d+M||w<d-M);if(S.index>c.index){var T=u-S.x-S.vx,k=n>1?h-S.y-S.vy:0,C=n>2?d-S.z-S.vz:0,A=T*T+k*k+C*C;A<M*M&&(0===T&&(A+=(T=$yt(r))*T),n>1&&0===k&&(A+=(k=$yt(r))*k),n>2&&0===C&&(A+=(C=$yt(r))*C),A=(M-(A=Math.sqrt(A)))/A*o,c.vx+=(T*=A)*(M=(E*=E)/(p+E)),n>1&&(c.vy+=(k*=A)*M),n>2&&(c.vz+=(C*=A)*M),S.vx-=T*(M=1-M),n>1&&(S.vy-=k*M),n>2&&(S.vz-=C*M))}}}function l(t){if(t.data)return t.r=i[t.data.index];for(var e=t.r=0;e<Math.pow(2,n);++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function c(){if(e){var n,r,o=e.length;for(i=new Array(o),n=0;n<o;++n)r=e[n],i[r.index]=+t(r,n,e)}}return"function"!==typeof t&&(t=Wvt(null==t?1:+t)),s.initialize=function(t){e=t;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];r=o.find((t=>"function"===typeof t))||Math.random,n=o.find((t=>[1,2,3].includes(t)))||2,c()},s.iterations=function(t){return arguments.length?(a=+t,s):a},s.strength=function(t){return arguments.length?(o=+t,s):o},s.radius=function(e){return arguments.length?(t="function"===typeof e?e:Wvt(+e),c(),s):t},s}function rbt(){var t,e,n,i,r,o,a=Wvt(-30),s=1,l=1/0,c=.81;function u(i){var o,a=t.length,s=(1===e?Ryt(t,_yt):2===e?Byt(t,_yt,xyt):3===e?Kyt(t,_yt,xyt,wyt):null).visitAfter(d);for(r=i,o=0;o<a;++o)n=t[o],s.visit(f)}function h(){if(t){var e,n,i=t.length;for(o=new Array(i),e=0;e<i;++e)n=t[e],o[n.index]=+a(n,e,t)}}function d(t){var n,i,r,a,s,l,c=0,u=0,h=t.length;if(h){for(r=a=s=l=0;l<h;++l)(n=t[l])&&(i=Math.abs(n.value))&&(c+=n.value,u+=i,r+=i*(n.x||0),a+=i*(n.y||0),s+=i*(n.z||0));c*=Math.sqrt(4/h),t.x=r/u,e>1&&(t.y=a/u),e>2&&(t.z=s/u)}else{(n=t).x=n.data.x,e>1&&(n.y=n.data.y),e>2&&(n.z=n.data.z);do{c+=o[n.data.index]}while(n=n.next)}t.value=c}function f(t,a,u,h,d){if(!t.value)return!0;var f=[u,h,d][e-1],p=t.x-n.x,g=e>1?t.y-n.y:0,m=e>2?t.z-n.z:0,v=f-a,y=p*p+g*g+m*m;if(v*v/c<y)return y<l&&(0===p&&(y+=(p=$yt(i))*p),e>1&&0===g&&(y+=(g=$yt(i))*g),e>2&&0===m&&(y+=(m=$yt(i))*m),y<s&&(y=Math.sqrt(s*y)),n.vx+=p*t.value*r/y,e>1&&(n.vy+=g*t.value*r/y),e>2&&(n.vz+=m*t.value*r/y)),!0;if(!(t.length||y>=l)){(t.data!==n||t.next)&&(0===p&&(y+=(p=$yt(i))*p),e>1&&0===g&&(y+=(g=$yt(i))*g),e>2&&0===m&&(y+=(m=$yt(i))*m),y<s&&(y=Math.sqrt(s*y)));do{t.data!==n&&(v=o[t.data.index]*r/y,n.vx+=p*v,e>1&&(n.vy+=g*v),e>2&&(n.vz+=m*v))}while(t=t.next)}}return u.initialize=function(n){t=n;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];i=o.find((t=>"function"===typeof t))||Math.random,e=o.find((t=>[1,2,3].includes(t)))||2,h()},u.strength=function(t){return arguments.length?(a="function"===typeof t?t:Wvt(+t),h(),u):a},u.distanceMin=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.distanceMax=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u.theta=function(t){return arguments.length?(c=t*t,u):Math.sqrt(c)},u}function obt(t){return t.index}function abt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function sbt(t){var e,n,i,r,o,a,s,l=obt,c=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},u=Wvt(30),h=1;function d(i){for(var o=0,l=t.length;o<h;++o)for(var c,u,d,f,p,g=0,m=0,v=0,y=0;g<l;++g)u=(c=t[g]).source,m=(d=c.target).x+d.vx-u.x-u.vx||$yt(s),r>1&&(v=d.y+d.vy-u.y-u.vy||$yt(s)),r>2&&(y=d.z+d.vz-u.z-u.vz||$yt(s)),m*=f=((f=Math.sqrt(m*m+v*v+y*y))-n[g])/f*i*e[g],v*=f,y*=f,d.vx-=m*(p=a[g]),r>1&&(d.vy-=v*p),r>2&&(d.vz-=y*p),u.vx+=m*(p=1-p),r>1&&(u.vy+=v*p),r>2&&(u.vz+=y*p)}function f(){if(i){var r,s,c=i.length,u=t.length,h=new Map(i.map(((t,e)=>[l(t,e,i),t])));for(r=0,o=new Array(c);r<u;++r)(s=t[r]).index=r,"object"!==typeof s.source&&(s.source=abt(h,s.source)),"object"!==typeof s.target&&(s.target=abt(h,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(r=0,a=new Array(u);r<u;++r)s=t[r],a[r]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);e=new Array(u),p(),n=new Array(u),g()}}function p(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+c(t[n],n,t)}function g(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t){i=t;for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];s=n.find((t=>"function"===typeof t))||Math.random,r=n.find((t=>[1,2,3].includes(t)))||2,f()},d.links=function(e){return arguments.length?(t=e,f(),d):t},d.id=function(t){return arguments.length?(l=t,d):l},d.iterations=function(t){return arguments.length?(h=+t,d):h},d.strength=function(t){return arguments.length?(c="function"===typeof t?t:Wvt(+t),p(),d):c},d.distance=function(t){return arguments.length?(u="function"===typeof t?t:Wvt(+t),g(),d):u},d}function lbt(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function cbt(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(i-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*c}function ubt(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(r-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*c}Jyt.copy=function(){var t,e,n=new Zyt(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),i=this._root;if(!i)return n;if(!i.length)return n._root=Qyt(i),n;for(t=[{source:i,target:n._root=new Array(8)}];i=t.pop();)for(var r=0;r<8;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(8)}):i.target[r]=Qyt(e));return n},Jyt.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),i=+this._z.call(null,t);return Gyt(this.cover(e,n,i),e,n,i,t)},Jyt.addAll=function(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),i=new Float64Array(e),r=new Float64Array(e);let o=1/0,a=1/0,s=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h,d,f,p,g=0;g<e;++g)isNaN(d=+this._x.call(null,h=t[g]))||isNaN(f=+this._y.call(null,h))||isNaN(p=+this._z.call(null,h))||(n[g]=d,i[g]=f,r[g]=p,d<o&&(o=d),d>l&&(l=d),f<a&&(a=f),f>c&&(c=f),p<s&&(s=p),p>u&&(u=p));if(o>l||a>c||s>u)return this;this.cover(o,a,s).cover(l,c,u);for(let h=0;h<e;++h)Gyt(this,n[h],i[h],r[h],t[h]);return this},Jyt.cover=function(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var i=this._x0,r=this._y0,o=this._z0,a=this._x1,s=this._y1,l=this._z1;if(isNaN(i))a=(i=Math.floor(t))+1,s=(r=Math.floor(e))+1,l=(o=Math.floor(n))+1;else{for(var c,u,h=a-i||1,d=this._root;i>t||t>=a||r>e||e>=s||o>n||n>=l;)switch(u=(n<o)<<2|(e<r)<<1|t<i,(c=new Array(8))[u]=d,d=c,h*=2,u){case 0:a=i+h,s=r+h,l=o+h;break;case 1:i=a-h,s=r+h,l=o+h;break;case 2:a=i+h,r=s-h,l=o+h;break;case 3:i=a-h,r=s-h,l=o+h;break;case 4:a=i+h,s=r+h,o=l-h;break;case 5:i=a-h,s=r+h,o=l-h;break;case 6:a=i+h,r=s-h,o=l-h;break;case 7:i=a-h,r=s-h,o=l-h}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=r,this._z0=o,this._x1=a,this._y1=s,this._z1=l,this},Jyt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Jyt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},Jyt.find=function(t,e,n,i){var r,o,a,s,l,c,u,h,d,f=this._x0,p=this._y0,g=this._z0,m=this._x1,v=this._y1,y=this._z1,b=[],_=this._root;for(_&&b.push(new Wyt(_,f,p,g,m,v,y)),null==i?i=1/0:(f=t-i,p=e-i,g=n-i,m=t+i,v=e+i,y=n+i,i*=i);h=b.pop();)if(!(!(_=h.node)||(o=h.x0)>m||(a=h.y0)>v||(s=h.z0)>y||(l=h.x1)<f||(c=h.y1)<p||(u=h.z1)<g))if(_.length){var x=(o+l)/2,w=(a+c)/2,S=(s+u)/2;b.push(new Wyt(_[7],x,w,S,l,c,u),new Wyt(_[6],o,w,S,x,c,u),new Wyt(_[5],x,a,S,l,w,u),new Wyt(_[4],o,a,S,x,w,u),new Wyt(_[3],x,w,s,l,c,S),new Wyt(_[2],o,w,s,x,c,S),new Wyt(_[1],x,a,s,l,w,S),new Wyt(_[0],o,a,s,x,w,S)),(d=(n>=S)<<2|(e>=w)<<1|t>=x)&&(h=b[b.length-1],b[b.length-1]=b[b.length-1-d],b[b.length-1-d]=h)}else{var E=t-+this._x.call(null,_.data),M=e-+this._y.call(null,_.data),T=n-+this._z.call(null,_.data),k=E*E+M*M+T*T;if(k<i){var C=Math.sqrt(i=k);f=t-C,p=e-C,g=n-C,m=t+C,v=e+C,y=n+C,r=_.data}}return r},Jyt.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t))||isNaN(s=+this._z.call(null,t)))return this;var e,n,i,r,o,a,s,l,c,u,h,d,f,p,g,m=this._root,v=this._x0,y=this._y0,b=this._z0,_=this._x1,x=this._y1,w=this._z1;if(!m)return this;if(m.length)for(;;){if((h=o>=(l=(v+_)/2))?v=l:_=l,(d=a>=(c=(y+x)/2))?y=c:x=c,(f=s>=(u=(b+w)/2))?b=u:w=u,e=m,!(m=m[p=f<<2|d<<1|h]))return this;if(!m.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,g=p)}for(;m.data!==t;)if(i=m,!(m=m.next))return this;return(r=m.next)&&delete m.next,i?(r?i.next=r:delete i.next,this):e?(r?e[p]=r:delete e[p],(m=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&m===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!m.length&&(n?n[g]=m:this._root=m),this):(this._root=r,this)},Jyt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Jyt.root=function(){return this._root},Jyt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Jyt.visit=function(t){var e,n,i,r,o,a,s,l,c=[],u=this._root;for(u&&c.push(new Wyt(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=c.pop();)if(!t(u=e.node,i=e.x0,r=e.y0,o=e.z0,a=e.x1,s=e.y1,l=e.z1)&&u.length){var h=(i+a)/2,d=(r+s)/2,f=(o+l)/2;(n=u[7])&&c.push(new Wyt(n,h,d,f,a,s,l)),(n=u[6])&&c.push(new Wyt(n,i,d,f,h,s,l)),(n=u[5])&&c.push(new Wyt(n,h,r,f,a,d,l)),(n=u[4])&&c.push(new Wyt(n,i,r,f,h,d,l)),(n=u[3])&&c.push(new Wyt(n,h,d,o,a,s,f)),(n=u[2])&&c.push(new Wyt(n,i,d,o,h,s,f)),(n=u[1])&&c.push(new Wyt(n,h,r,o,a,d,f)),(n=u[0])&&c.push(new Wyt(n,i,r,o,h,d,f))}return this},Jyt.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Wyt(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.z0,c=e.x1,u=e.y1,h=e.z1,d=(a+c)/2,f=(s+u)/2,p=(l+h)/2;(o=r[0])&&n.push(new Wyt(o,a,s,l,d,f,p)),(o=r[1])&&n.push(new Wyt(o,d,s,l,c,f,p)),(o=r[2])&&n.push(new Wyt(o,a,f,l,d,u,p)),(o=r[3])&&n.push(new Wyt(o,d,f,l,c,u,p)),(o=r[4])&&n.push(new Wyt(o,a,s,p,d,f,h)),(o=r[5])&&n.push(new Wyt(o,d,s,p,c,f,h)),(o=r[6])&&n.push(new Wyt(o,a,f,p,d,u,h)),(o=r[7])&&n.push(new Wyt(o,d,f,p,c,u,h))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this},Jyt.x=function(t){return arguments.length?(this._x=t,this):this._x},Jyt.y=function(t){return arguments.length?(this._y=t,this):this._y},Jyt.z=function(t){return arguments.length?(this._z=t,this):this._z};const hbt=function t(e){function n(t,n,i,r,o){!function(t,e,n,i,r,o){for(var a,s,l,c,u,h,d,f,p,g,m,v=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){l=r-n,c=o-i;do{u=y[_++].value}while(!u&&_<x);for(h=d=u,m=u*u*(g=Math.max(c/l,l/c)/(w*t)),p=Math.max(d/m,m/h);_<x;++_){if(u+=s=y[_].value,s<h&&(h=s),s>d&&(d=s),m=u*u*g,(f=Math.max(d/m,m/h))>p){u-=s;break}p=f}v.push(a={value:u,dice:l<c,children:y.slice(b,_)}),a.dice?cbt(a,n,i,r,w?i+=c*u/w:o):ubt(a,n,i,w?n+=l*u/w:r,o),w-=u,b=_}}(e,t,n,i,r,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}((1+Math.sqrt(5))/2);function dbt(t){return null==t?null:fbt(t)}function fbt(t){if("function"!==typeof t)throw new Error;return t}function pbt(){return 0}function gbt(t){return function(){return t}}function mbt(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function vbt(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=bbt)):void 0===e&&(e=ybt);for(var n,i,r,o,a,s=new wbt(t),l=[s];n=l.pop();)if((r=e(n.data))&&(a=(r=Array.from(r)).length))for(n.children=r,o=a-1;o>=0;--o)l.push(i=r[o]=new wbt(r[o])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(xbt)}function ybt(t){return t.children}function bbt(t){return Array.isArray(t)?t[1]:null}function _bt(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function xbt(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function wbt(t){this.data=t,this.depth=this.height=0,this.parent=null}wbt.prototype=vbt.prototype={constructor:wbt,count:function(){return this.eachAfter(mbt)},each:function(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(i=0,r=n.length;i<r;++i)a.push(n[i]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,i,r=this,o=[r],a=-1;r=o.pop();)if(t.call(e,r,++a,this),n=r.children)for(i=n.length-1;i>=0;--i)o.push(n[i]);return this},find:function(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return vbt(this).eachBefore(_bt)},[Symbol.iterator]:function*(){var t,e,n,i,r=this,o=[r];do{for(t=o.reverse(),o=[];r=t.pop();)if(yield r,e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n])}while(o.length)}};var Sbt={depth:-1},Ebt={},Mbt={};function Tbt(t){return t.id}function kbt(t){return t.parentId}function Cbt(){var t,e=Tbt,n=kbt;function i(i){var r,o,a,s,l,c,u,h,d=Array.from(i),f=e,p=n,g=new Map;if(null!=t){const e=d.map(((e,n)=>function(t){t="".concat(t);let e=t.length;Pbt(t,e-1)&&!Pbt(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:"/".concat(t)}(t(e,n,i)))),n=e.map(Abt),r=new Set(e).add("");for(const t of n)r.has(t)||(r.add(t),e.push(t),n.push(Abt(t)),d.push(Mbt));f=(t,n)=>e[n],p=(t,e)=>n[e]}for(a=0,r=d.length;a<r;++a)o=d[a],c=d[a]=new wbt(o),null!=(u=f(o,a,i))&&(u+="")&&(h=c.id=u,g.set(h,g.has(h)?Ebt:c)),null!=(u=p(o,a,i))&&(u+="")&&(c.parent=u);for(a=0;a<r;++a)if(u=(c=d[a]).parent){if(!(l=g.get(u)))throw new Error("missing: "+u);if(l===Ebt)throw new Error("ambiguous: "+u);l.children?l.children.push(c):l.children=[c],c.parent=l}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(null!=t){for(;s.data===Mbt&&1===s.children.length;)s=s.children[0],--r;for(let t=d.length-1;t>=0&&(c=d[t]).data===Mbt;--t)c.data=null}if(s.parent=Sbt,s.eachBefore((function(t){t.depth=t.parent.depth+1,--r})).eachBefore(xbt),s.parent=null,r>0)throw new Error("cycle");return s}return i.id=function(t){return arguments.length?(e=dbt(t),i):e},i.parentId=function(t){return arguments.length?(n=dbt(t),i):n},i.path=function(e){return arguments.length?(t=dbt(e),i):t},i}function Abt(t){let e=t.length;if(e<2)return"";for(;--e>1&&!Pbt(t,e););return t.slice(0,e)}function Pbt(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(0===(1&n))return!0}return!1}function Obt(t,e){return t.parent===e.parent?1:2}function Rbt(t){var e=t.children;return e?e[0]:t.t}function Lbt(t){var e=t.children;return e?e[e.length-1]:t.t}function Dbt(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Ibt(t,e,n){return t.a.parent===e.parent?t.a:n}function Nbt(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function zbt(){var t=Obt,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,o,a=new Nbt(t,0),s=[a];e=s.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)s.push(n=e.children[r]=new Nbt(i[r],r)),n.parent=e;return(a.parent=new Nbt(null,0)).children=[a],a}(r);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),i)r.eachBefore(s);else{var c=r,u=r,h=r;r.eachBefore((function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>h.depth&&(h=t)}));var d=c===u?1:t(c,u)/2,f=d-c.x,p=e/(u.x+d+f),g=n/(h.depth||1);r.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*g}))}return r}function o(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,o=e,a=e,s=n,l=o.parent.children[0],c=o.m,u=a.m,h=s.m,d=l.m;s=Lbt(s),o=Rbt(o),s&&o;)l=Rbt(l),(a=Lbt(a)).a=e,(r=s.z+h-o.z-c+t(s._,o._))>0&&(Dbt(Ibt(s,e,i),e,r),c+=r,u+=r),h+=s.m,c+=o.m,d+=l.m,u+=a.m;s&&!Lbt(a)&&(a.t=s,a.m+=h-u),o&&!Rbt(l)&&(l.t=o,l.m+=c-d,i=e)}return i}(e,r,e.parent.A||i[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r}Nbt.prototype=Object.create(wbt.prototype);var Fbt=n(9476),Ubt=n(7241),Bbt=n(6388),jbt=n(3598),Hbt=n(4033),Vbt=n(8492);const Gbt=Math.sqrt(50),Wbt=Math.sqrt(10),qbt=Math.sqrt(2);function Xbt(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Gbt?10:o>=Wbt?5:o>=qbt?2:1;let s,l,c;return r<0?(c=Math.pow(10,-r)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,r)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?Xbt(t,e,2*n):[s,l,c]}function Ybt(t,e,n){return Xbt(t=+t,e=+e,n=+n)[2]}function Kbt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zbt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Qbt(t){let e,n,i;function r(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<0?r=e+1:o=e}while(r<o)}return r}return 2!==t.length?(e=Kbt,n=(e,n)=>Kbt(t(e),n),i=(e,n)=>t(e)-n):(e=t===Kbt||t===Zbt?t:Jbt,n=t,i=t),{left:r,center:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=r(t,e,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length)-1);return o>n&&i(t[o-1],e)>-i(t[o],e)?o-1:o},right:function(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;if(r<o){if(0!==e(i,i))return o;do{const e=r+o>>>1;n(t[e],i)<=0?r=e+1:o=e}while(r<o)}return r}}}function Jbt(){return 0}const $bt=Qbt(Kbt),t_t=$bt.right,e_t=($bt.left,Qbt((function(t){return null===t?NaN:+t})).center,t_t);function n_t(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function i_t(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function r_t(){}var o_t=.7,a_t=1/o_t,s_t="\\s*([+-]?\\d+)\\s*",l_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u_t=/^#([0-9a-f]{3,8})$/,h_t=new RegExp("^rgb\\(".concat(s_t,",").concat(s_t,",").concat(s_t,"\\)$")),d_t=new RegExp("^rgb\\(".concat(c_t,",").concat(c_t,",").concat(c_t,"\\)$")),f_t=new RegExp("^rgba\\(".concat(s_t,",").concat(s_t,",").concat(s_t,",").concat(l_t,"\\)$")),p_t=new RegExp("^rgba\\(".concat(c_t,",").concat(c_t,",").concat(c_t,",").concat(l_t,"\\)$")),g_t=new RegExp("^hsl\\(".concat(l_t,",").concat(c_t,",").concat(c_t,"\\)$")),m_t=new RegExp("^hsla\\(".concat(l_t,",").concat(c_t,",").concat(c_t,",").concat(l_t,"\\)$")),v_t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y_t(){return this.rgb().formatHex()}function b_t(){return this.rgb().formatRgb()}function __t(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=u_t.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?x_t(e):3===n?new E_t(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?w_t(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?w_t(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h_t.exec(t))?new E_t(e[1],e[2],e[3],1):(e=d_t.exec(t))?new E_t(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f_t.exec(t))?w_t(e[1],e[2],e[3],e[4]):(e=p_t.exec(t))?w_t(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g_t.exec(t))?P_t(e[1],e[2]/100,e[3]/100,1):(e=m_t.exec(t))?P_t(e[1],e[2]/100,e[3]/100,e[4]):v_t.hasOwnProperty(t)?x_t(v_t[t]):"transparent"===t?new E_t(NaN,NaN,NaN,0):null}function x_t(t){return new E_t(t>>16&255,t>>8&255,255&t,1)}function w_t(t,e,n,i){return i<=0&&(t=e=n=NaN),new E_t(t,e,n,i)}function S_t(t,e,n,i){return 1===arguments.length?((r=t)instanceof r_t||(r=__t(r)),r?new E_t((r=r.rgb()).r,r.g,r.b,r.opacity):new E_t):new E_t(t,e,n,null==i?1:i);var r}function E_t(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function M_t(){return"#".concat(A_t(this.r)).concat(A_t(this.g)).concat(A_t(this.b))}function T_t(){const t=k_t(this.opacity);return"".concat(1===t?"rgb(":"rgba(").concat(C_t(this.r),", ").concat(C_t(this.g),", ").concat(C_t(this.b)).concat(1===t?")":", ".concat(t,")"))}function k_t(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function C_t(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function A_t(t){return((t=C_t(t))<16?"0":"")+t.toString(16)}function P_t(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R_t(t,e,n,i)}function O_t(t){if(t instanceof R_t)return new R_t(t.h,t.s,t.l,t.opacity);if(t instanceof r_t||(t=__t(t)),!t)return new R_t;if(t instanceof R_t)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new R_t(a,s,l,t.opacity)}function R_t(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function L_t(t){return(t=(t||0)%360)<0?t+360:t}function D_t(t){return Math.max(0,Math.min(1,t||0))}function I_t(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function N_t(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}n_t(r_t,__t,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:y_t,formatHex:y_t,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O_t(this).formatHsl()},formatRgb:b_t,toString:b_t}),n_t(E_t,S_t,i_t(r_t,{brighter(t){return t=null==t?a_t:Math.pow(a_t,t),new E_t(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?o_t:Math.pow(o_t,t),new E_t(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new E_t(C_t(this.r),C_t(this.g),C_t(this.b),k_t(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M_t,formatHex:M_t,formatHex8:function(){return"#".concat(A_t(this.r)).concat(A_t(this.g)).concat(A_t(this.b)).concat(A_t(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:T_t,toString:T_t})),n_t(R_t,(function(t,e,n,i){return 1===arguments.length?O_t(t):new R_t(t,e,n,null==i?1:i)}),i_t(r_t,{brighter(t){return t=null==t?a_t:Math.pow(a_t,t),new R_t(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?o_t:Math.pow(o_t,t),new R_t(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new E_t(I_t(t>=240?t-240:t+120,r,i),I_t(t,r,i),I_t(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new R_t(L_t(this.h),D_t(this.s),D_t(this.l),k_t(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=k_t(this.opacity);return"".concat(1===t?"hsl(":"hsla(").concat(L_t(this.h),", ").concat(100*D_t(this.s),"%, ").concat(100*D_t(this.l),"%").concat(1===t?")":", ".concat(t,")"))}}));const z_t=t=>()=>t;function F_t(t,e){return function(n){return t+n*e}}function U_t(t){return 1===(t=+t)?B_t:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):z_t(isNaN(e)?n:e)}}function B_t(t,e){var n=e-t;return n?F_t(t,n):z_t(isNaN(t)?e:t)}const j_t=function t(e){var n=U_t(e);function i(t,e){var i=n((t=S_t(t)).r,(e=S_t(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=B_t(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function H_t(t){return function(e){var n,i,r=e.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=S_t(e[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=t(o),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=a(t),i.b=s(t),i+""}}}H_t((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<e-1?t[i+2]:2*o-r;return N_t((n-i/e)*e,a,r,o,s)}})),H_t((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return N_t((n-i/e)*e,r,o,a,s)}}));function V_t(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=Q_t(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}}function G_t(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function W_t(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function q_t(t,e){var n,i={},r={};for(n in null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={}),e)n in t?i[n]=Q_t(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var X_t=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y_t=new RegExp(X_t.source,"g");function K_t(t,e){var n,i,r,o=X_t.lastIndex=Y_t.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=X_t.exec(t))&&(i=Y_t.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:W_t(n,i)})),o=Y_t.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})}function Z_t(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function Q_t(t,e){var n,i=typeof e;return null==e||"boolean"===i?z_t(e):("number"===i?W_t:"string"===i?(n=__t(e))?(e=n,j_t):K_t:e instanceof __t?j_t:e instanceof Date?G_t:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Z_t:Array.isArray(e)?V_t:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?q_t:W_t)(t,e)}function J_t(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function $_t(t){return+t}var txt=[0,1];function ext(t){return t}function nxt(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function ixt(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=nxt(r,i),o=n(a,o)):(i=nxt(i,r),o=n(o,a)),function(t){return o(i(t))}}function rxt(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=nxt(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=e_t(t,e,1,i)-1;return o[n](r[n](e))}}function oxt(){var t,e,n,i,r,o,a=txt,s=txt,l=Q_t,c=ext;function u(){var t=Math.min(a.length,s.length);return c!==ext&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),i=t>2?rxt:ixt,r=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),s,l)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=i(s,a.map(t),W_t)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,$_t),u()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),l=J_t,u()},h.clamp=function(t){return arguments.length?(c=!!t||ext,u()):c!==ext},h.interpolate=function(t){return arguments.length?(l=t,u()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,u()}}function axt(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var sxt,lxt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cxt(t){if(!(e=lxt.exec(t)))throw new Error("invalid format: "+t);var e;return new uxt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function uxt(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function hxt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function dxt(t){return(t=hxt(Math.abs(t)))?t[1]:NaN}function fxt(t,e){var n=hxt(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}cxt.prototype=uxt.prototype,uxt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const pxt={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fxt(100*t,e),r:fxt,s:function(t,e){var n=hxt(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(sxt=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+hxt(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gxt(t){return t}var mxt,vxt,yxt,bxt=Array.prototype.map,_xt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function xxt(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?gxt:(e=bxt.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?gxt:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(bxt.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"\u2212":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=cxt(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,p=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):pxt[y]||(void 0===m&&(m=12),v=!0,y="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var b="$"===d?r:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===d?o:/[%p]/.test(y)?l:"",x=pxt[y],w=/[defgprs%]/.test(y);function S(t){var r,o,l,d=b,S=_;if("c"===y)S=x(t)+S,t="";else{var E=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),m),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),E&&0===+t&&"+"!==h&&(E=!1),d=(E?"("===h?h:c:"-"===h||"("===h?"":h)+d,S=("s"===y?_xt[8+sxt/3]:"")+S+(E&&"("===h?")":""),w)for(r=-1,o=t.length;++r<o;)if(48>(l=t.charCodeAt(r))||l>57){S=(46===l?a+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}g&&!f&&(t=i(t,1/0));var M=d.length+t.length+S.length,T=M<p?new Array(p-M+1).join(e):"";switch(g&&f&&(t=i(T+t,T.length?p-S.length:1/0),T=""),n){case"<":t=d+t+S+T;break;case"=":t=d+T+t+S;break;case"^":t=T.slice(0,M=T.length>>1)+d+t+S+T.slice(M);break;default:t=T+d+t+S}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=cxt(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(dxt(e)/3))),r=Math.pow(10,-i),o=_xt[8+i/3];return function(t){return n(r*t)+o}}}}function wxt(t,e,n,i){var r,o=function(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?Ybt(e,t,n):Ybt(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}(t,e,n);switch((i=cxt(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dxt(e)/3)))-dxt(Math.abs(t)))}(o,a))||(i.precision=r),yxt(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,dxt(e)-dxt(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-dxt(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type))}return vxt(i)}function Sxt(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const i=e<t,[r,o,a]=i?Xbt(e,t,n):Xbt(t,e,n);if(!(o>=r))return[];const s=o-r+1,l=new Array(s);if(i)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(r+c)/-a;else for(let c=0;c<s;++c)l[c]=(r+c)*a;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return wxt(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,o=e(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(r=l,l=c,c=r,r=a,a=s,s=r);u-- >0;){if((r=Ybt(l,c,n))===i)return o[a]=l,o[s]=c,e(o);if(r>0)l=Math.floor(l/r)*r,c=Math.ceil(c/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,c=Math.floor(c*r)/r}i=r}return t},t}function Ext(){var t=oxt()(ext,ext);return t.copy=function(){return e=t,Ext().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},axt.apply(t,arguments),Sxt(t)}mxt=xxt({thousands:",",grouping:[3],currency:["$",""]}),vxt=mxt.format,yxt=mxt.formatPrefix;const Mxt=t=>{let e;const n=new Set,i=(t,i)=>{const r="function"===typeof t?t(e):t;if(!Object.is(r,e)){const t=e;e=(null!=i?i:"object"!==typeof r)?r:Object.assign({},e,r),n.forEach((n=>n(e,t)))}},r=()=>e,o={setState:i,getState:r,subscribe:t=>(n.add(t),()=>n.delete(t)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(i,r,o),o},Txt=t=>t?Mxt(t):Mxt;var kxt=n(8443);const{useSyncExternalStoreWithSelector:Cxt}=kxt;function Axt(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getState,i=arguments.length>2?arguments[2]:void 0;const r=Cxt(t.subscribe,t.getState,t.getServerState||t.getState,n,i);return(0,e.useDebugValue)(r),r}const Pxt=t=>{"function"!==typeof t&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e="function"===typeof t?Txt(t):t,n=(t,n)=>Axt(e,t,n);return Object.assign(n,e),n},Oxt=t=>t?Pxt(t):Pxt;function Rxt(t,e){return t.map((function(t,n){return t+e[n]}))}function Lxt(t,e){return t.map((function(t,n){return t-e[n]}))}function Dxt(t){return Math.hypot.apply(Math,t)}function Ixt(t,e){void 0===e&&(e=t);var n=Dxt(e),i=0===n?0:1/n,r=e.map((function(t){return i*t}));return{distance:Dxt(t),direction:r}}function Nxt(t,e,n){var i=Dxt(e),r=0===i?0:1/i,o=0===n?0:1/n,a=o*i,s=e.map((function(t){return o*t})),l=e.map((function(t){return r*t}));return{velocities:s,velocity:a,distance:Dxt(t),direction:l}}function zxt(t){return Math.sign?Math.sign(t):Number(t>0)-Number(t<0)||+t}function Fxt(t,e,n){return 0===e||Math.abs(e)===1/0?function(t,e){return Math.pow(t,5*e)}(t,n):t*e*n/(e+n*t)}function Uxt(t,e,n,i){return void 0===i&&(i=.15),0===i?function(t,e,n){return Math.max(e,Math.min(t,n))}(t,e,n):t<e?-Fxt(e-t,n-e,i)+e:t>n?+Fxt(t-n,n-e,i)+n:t}function Bxt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function jxt(){return jxt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jxt.apply(this,arguments)}function Hxt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Vxt(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}function Gxt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wxt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function qxt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"===typeof t)return Wxt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wxt(t,e):void 0}}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function Xxt(){}function Yxt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?Xxt:1===e.length?e[0]:function(){for(var t,n,i=qxt(e);!(n=i()).done;){t=n.value.apply(this,arguments)||t}return t}}function Kxt(t,e){if(void 0===t){if(void 0===e)throw new Error("Must define fallback value if undefined is expected");t=e}return Array.isArray(t)?t:[t,t]}function Zxt(t,e){return Object.assign({},e,t||{})}function Qxt(t){if("function"===typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.apply(void 0,n)}return t}function Jxt(t,e){void 0===t&&(t={});for(var n={},i=0,r=Object.entries(e);i<r.length;i++){var o=r[i],a=o[0],s=o[1];switch(typeof s){case"function":n[a]=s.call(n,t[a],a,t);break;case"object":n[a]=Jxt(t[a],s);break;case"boolean":s&&(n[a]=t[a])}}return n}function $xt(){return"undefined"!==typeof window&&"ontouchstart"in window}function twt(t){return"pointerId"in t?null:"touchend"===t.type?t.changedTouches:t.targetTouches}function ewt(t){return Array.from(twt(t)).map((function(t){return t.identifier}))}function nwt(t){return{buttons:"buttons"in t?t.buttons:0,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey}}var iwt=function(t){return t};function rwt(t,e){void 0===e&&(e=iwt);var n=twt(t),i=n?n[0]:t;return e([i.clientX,i.clientY])}function owt(t,e,n){void 0===n&&(n=iwt);var i=Array.from(t.touches).filter((function(t){return e.includes(t.identifier)})),r=i[0],o=i[1];if(!r||!o)throw Error("The event doesn't have two pointers matching the pointerIds");var a=o.clientX-r.clientX,s=o.clientY-r.clientY,l=(o.clientX+r.clientX)/2,c=(o.clientY+r.clientY)/2;return{values:n([Math.hypot(a,s),-180*Math.atan2(a,s)/Math.PI]),origin:n([l,c])}}function awt(t,e){void 0===e&&(e=iwt);var n=t.deltaX,i=t.deltaY,r=t.deltaMode;return 1===r?(n*=40,i*=40):2===r&&(n*=800,i*=800),e([n,i])}function swt(t,e){return void 0===e&&(e=iwt),e([t.scale,t.rotation])}var lwt={threshold:function(t){return void 0===t&&(t=0),Kxt(t)},rubberband:function(t){switch(void 0===t&&(t=0),t){case!0:return Kxt(.15);case!1:return Kxt(0);default:return Kxt(t)}},enabled:function(t){return void 0===t&&(t=!0),t},triggerAllEvents:function(t){return void 0===t&&(t=!1),t},initial:function(t){return void 0===t&&(t=0),"function"===typeof t?t:Kxt(t)},transform:!0},cwt=jxt({},lwt,{axis:!0,lockDirection:function(t){return void 0===t&&(t=!1),t},bounds:function(t){if(void 0===t&&(t={}),"function"===typeof t)return function(e){return cwt.bounds(t(e))};var e=t,n=e.left,i=void 0===n?-1/0:n,r=e.right,o=void 0===r?1/0:r,a=e.top,s=void 0===a?-1/0:a,l=e.bottom;return[[i,o],[s,void 0===l?1/0:l]]}}),uwt="undefined"!==typeof window&&window.document&&window.document.createElement,hwt={enabled:function(t){return void 0===t&&(t=!0),t},domTarget:!0,window:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return void 0===t&&(t=uwt?window:void 0),t})),eventOptions:function(t){var e=void 0===t?{}:t,n=e.passive,i=void 0===n||n,r=e.capture;return{passive:i,capture:void 0!==r&&r}},transform:!0},dwt=jxt({},lwt,{bounds:function(t,e,n){var i=n.distanceBounds,r=void 0===i?{}:i,o=n.angleBounds,a=void 0===o?{}:o,s=function(t){var e=Zxt(Qxt(r,t),{min:-1/0,max:1/0});return[e.min,e.max]},l=function(t){var e=Zxt(Qxt(a,t),{min:-1/0,max:1/0});return[e.min,e.max]};return"function"!==typeof r&&"function"!==typeof a?[s(),l()]:function(t){return[s(t),l(t)]}}}),fwt=jxt({},cwt,{useTouch:function(t){void 0===t&&(t=!1);var e=$xt(),n="undefined"!==typeof window&&"onpointerdown"in window;return!(!t||!e)||!(!e||n)},experimental_preventWindowScrollY:function(t){return void 0===t&&(t=!1),t},threshold:function(t,e,n){var i=n.filterTaps,r=void 0!==i&&i,o=n.lockDirection,a=void 0!==o&&o,s=n.axis,l=Kxt(t,r?3:a||(void 0===s?void 0:s)?1:0);return this.filterTaps=r,l},swipeVelocity:function(t){return void 0===t&&(t=.5),Kxt(t)},swipeDistance:function(t){return void 0===t&&(t=50),Kxt(t)},swipeDuration:function(t){return void 0===t&&(t=250),t},delay:function(t){switch(void 0===t&&(t=0),t){case!0:return 180;case!1:return 0;default:return t}}});function pwt(t){return void 0===t&&(t={}),Jxt(t,hwt)}function gwt(t){return void 0===t&&(t={}),Jxt(t,cwt)}function mwt(t){return void 0===t&&(t={}),Jxt(t,dwt)}function vwt(t){return void 0===t&&(t={}),Jxt(t,fwt)}function ywt(t){return jxt({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Xxt,canceled:!1,memo:void 0,args:void 0},t)}function bwt(){return{shared:{hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},drag:ywt({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),pinch:ywt({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),wheel:ywt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),move:ywt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),scroll:ywt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0})}}var _wt=new Map,xwt=function(t){return t},wwt=function(){function t(t,e){var n=this;void 0===e&&(e=[]),this.controller=t,this.args=e,this.debounced=!0,this.setTimeout=function(t,e){var i;void 0===e&&(e=140),clearTimeout(n.controller.timeouts[n.stateKey]);for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];n.controller.timeouts[n.stateKey]=(i=window).setTimeout.apply(i,[t,e].concat(o))},this.clearTimeout=function(){clearTimeout(n.controller.timeouts[n.stateKey])},this.fireGestureHandler=function(t){if(void 0===t&&(t=!1),n.state._blocked)return n.debounced||(n.state._active=!1,n.clean()),null;if(!t&&!n.state.intentional&&!n.config.triggerAllEvents)return null;if(n.state.intentional){var e=n.state.active,i=n.state._active;n.state.active=i,n.state.first=i&&!e,n.state.last=e&&!i,n.controller.state.shared[n.ingKey]=i}var r=n.controller.pointerIds.size||n.controller.touchIds.size,o=n.controller.state.shared.buttons>0||r>0,a=jxt({},n.controller.state.shared,n.state,n.mapStateValues(n.state),{locked:!!document.pointerLockElement,touches:r,down:o}),s=n.handler(a);return n.state.memo=void 0!==s?s:n.state.memo,a},this.controller=t,this.args=e}var e,n,i,r=t.prototype;return r.updateSharedState=function(t){Object.assign(this.controller.state.shared,t)},r.updateGestureState=function(t){Object.assign(this.state,t)},r.checkIntentionality=function(t,e){return{_intentional:t,_blocked:!1}},r.getMovement=function(t){var e=this.config.rubberband,n=this.state,i=n._bounds,r=n._initial,o=n._active,a=n._intentional,s=n.lastOffset,l=n.movement,c=n._threshold,u=this.getInternalMovement(t,this.state),h=!1===a[0]?Swt(u[0],c[0]):a[0],d=!1===a[1]?Swt(u[1],c[1]):a[1],f=this.checkIntentionality([h,d],u);if(f._blocked)return jxt({},f,{_movement:u,delta:[0,0]});var p=f._intentional,g=u,m=[!1!==p[0]?u[0]-p[0]:0,!1!==p[1]?u[1]-p[1]:0],v=Rxt(m,s),y=o?e:[0,0];return m=Ewt(i,Rxt(m,r),y),jxt({},f,{intentional:!1!==p[0]||!1!==p[1],_initial:r,_movement:g,movement:m,values:t,offset:Ewt(i,v,y),delta:Lxt(m,l)})},r.clean=function(){this.clearTimeout()},e=t,(n=[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||xwt}}])&&Bxt(e.prototype,n),i&&Bxt(e,i),t}();function Swt(t,e){return Math.abs(t)>=e&&zxt(t)*e}function Ewt(t,e,n){var i=e[0],r=e[1],o=n[0],a=n[1],s=t[0],l=s[0],c=s[1],u=t[1],h=u[0],d=u[1];return[Uxt(i,l,c,o),Uxt(r,h,d,a)]}function Mwt(t,e,n){var i=t.state,r=e.timeStamp,o=e.type,a=i.values;return{_lastEventType:o,event:e,timeStamp:r,elapsedTime:n?0:r-i.startTime,previous:a}}function Twt(t,e,n,i){var r=t.state,o=t.config,a=t.stateKey,s=t.args,l=t.transform,c=r.offset,u=n.timeStamp,h=o.initial,d=o.bounds,f=Lxt(l(o.threshold),l([0,0])).map(Math.abs),p=jxt({},bwt()[a],{_active:!0,args:s,values:e,initial:null!=i?i:e,_threshold:f,offset:c,lastOffset:c,startTime:u});return jxt({},p,{_initial:Qxt(h,p),_bounds:Qxt(d,p)})}var kwt=function(t){var e=this;this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=$xt(),this.supportsGestureEvents=function(){try{return"constructor"in GestureEvent}catch(t){return!1}}(),this.bind=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r,o={},a=qxt(e.classes);!(r=a()).done;){new(0,r.value)(e,n).addBindings(o)}var s=function(t){Rwt(o,t,(function(i){return e.nativeRefs[t](jxt({},e.state.shared,{event:i,args:n}))}))};for(var l in e.nativeRefs)s(l);return e.config.domTarget?function(t,e){var n=t.config,i=t.domListeners,r=Owt(n);if(!r)throw new Error("domTarget must be defined");var o=n.eventOptions;Dwt(r,Pwt(i),o);for(var a=0,s=Object.entries(e);a<s.length;a++){var l=s[a],c=l[0],u=l[1],h=c.slice(2).toLowerCase();i.push([h,Yxt.apply(void 0,u)])}Lwt(r,i,o)}(e,o):function(t,e){for(var n=t.config,i={},r=n.eventOptions.capture?"Capture":"",o=0,a=Object.entries(e);o<a.length;o++){var s=a[o],l=s[0],c=s[1],u=Array.isArray(c)?c:[c];i[l+r]=Yxt.apply(void 0,u)}return i}(e,o)},this.effect=function(){return e.config.domTarget&&e.bind(),e.clean},this.clean=function(){var t=Owt(e.config),n=e.config.eventOptions;t&&Dwt(t,Pwt(e.domListeners),n),Object.values(e.timeouts).forEach(clearTimeout),function(t){var e=t.config,n=e.window,i=e.eventOptions,r=t.windowListeners;if(!n)return;for(var o in r){Dwt(n,r[o],i)}t.windowListeners={}}(e)},this.classes=t,this.state=bwt(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function Cwt(t,e){"pointerId"in e?t.pointerIds.add(e.pointerId):t.touchIds=new Set(ewt(e))}function Awt(t,e){"pointerId"in e?t.pointerIds.delete(e.pointerId):ewt(e).forEach((function(e){return t.touchIds.delete(e)}))}function Pwt(t){return void 0===t&&(t=[]),t.splice(0,t.length)}function Owt(t){var e=t.domTarget;return e&&"current"in e?e.current:e}function Rwt(t,e,n){t[e]||(t[e]=[]),t[e].push(n)}function Lwt(t,e,n){void 0===e&&(e=[]),void 0===n&&(n={});for(var i,r=qxt(e);!(i=r()).done;){var o=i.value,a=o[0],s=o[1];t.addEventListener(a,s,n)}}function Dwt(t,e,n){void 0===e&&(e=[]),void 0===n&&(n={});for(var i,r=qxt(e);!(i=r()).done;){var o=i.value,a=o[0],s=o[1];t.removeEventListener(a,s,n)}}function Iwt(t,n,i){void 0===i&&(i={});var r=function(t){var e=new Set;t.drag&&e.add(_wt.get("drag"));t.wheel&&e.add(_wt.get("wheel"));t.scroll&&e.add(_wt.get("scroll"));t.move&&e.add(_wt.get("move"));t.pinch&&e.add(_wt.get("pinch"));t.hover&&e.add(_wt.get("hover"));return e}(t),o=e.useMemo((function(){return new kwt(r)}),[]);return o.config=n,o.handlers=t,o.nativeRefs=i,e.useEffect(o.effect,[]),o.config.domTarget?Nwt:o.bind}function Nwt(){0}var zwt=function(t){function e(){return t.apply(this,arguments)||this}Hxt(e,t);var n=e.prototype;return n.getInternalMovement=function(t,e){return Lxt(t,e.initial)},n.checkIntentionality=function(t,e){if(!1===t[0]&&!1===t[1])return{_intentional:t,axis:this.state.axis};var n=e.map(Math.abs),i=n[0],r=n[1],o=this.state.axis||(i>r?"x":i<r?"y":void 0);return this.config.axis||this.config.lockDirection?o?this.config.axis&&o!==this.config.axis?{_intentional:t,_blocked:!0,axis:o}:(t["x"===o?1:0]=!1,{_intentional:t,_blocked:!1,axis:o}):{_intentional:[!1,!1],_blocked:!1,axis:o}:{_intentional:t,_blocked:!1,axis:o}},n.getKinematics=function(t,e){var n=this.getMovement(t);if(!n._blocked){var i=e.timeStamp-this.state.timeStamp;Object.assign(n,Nxt(n.movement,n.delta,i))}return n},n.mapStateValues=function(t){return{xy:t.values,vxvy:t.velocities}},e}(wwt);function Fwt(t){"persist"in t&&"function"===typeof t.persist&&t.persist()}var Uwt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).ingKey="dragging",e.stateKey="drag",e.setPointerCapture=function(t){if(!e.config.useTouch&&!document.pointerLockElement){var n=t.target,i=t.pointerId;n&&"setPointerCapture"in n&&n.setPointerCapture(i),e.updateGestureState({_dragTarget:n,_dragPointerId:i})}},e.releasePointerCapture=function(){if(!e.config.useTouch&&!document.pointerLockElement){var t=e.state,n=t._dragTarget,i=t._dragPointerId;if(i&&n&&"releasePointerCapture"in n&&(!("hasPointerCapture"in n)||n.hasPointerCapture(i)))try{n.releasePointerCapture(i)}catch(r){}}},e.preventScroll=function(t){e.state._dragPreventScroll&&t.cancelable&&t.preventDefault()},e.getEventId=function(t){return e.config.useTouch?t.changedTouches[0].identifier:t.pointerId},e.isValidEvent=function(t){return e.state._pointerId===e.getEventId(t)},e.shouldPreventWindowScrollY=e.config.experimental_preventWindowScrollY&&e.controller.supportsTouchEvents,e.setUpWindowScrollDetection=function(t){Fwt(t),function(t,e,n,i){var r=t.config,o=t.windowListeners;void 0===n&&(n=[]),void 0===i&&(i=r.eventOptions),r.window&&(Dwt(r.window,o[e],i),Lwt(r.window,o[e]=n,i))}(e.controller,e.stateKey,[["touchmove",e.preventScroll],["touchend",e.clean.bind(Gxt(e))],["touchcancel",e.clean.bind(Gxt(e))]],{passive:!1}),e.setTimeout(e.startDrag.bind(Gxt(e)),250,t)},e.setUpDelayedDragTrigger=function(t){e.state._dragDelayed=!0,Fwt(t),e.setTimeout(e.startDrag.bind(Gxt(e)),e.config.delay,t)},e.setStartState=function(t){var n=rwt(t,e.transform);e.updateSharedState(nwt(t)),e.updateGestureState(jxt({},Twt(Gxt(e),n,t),Mwt(Gxt(e),t,!0),{_pointerId:e.getEventId(t)})),e.updateGestureState(e.getMovement(n))},e.onDragStart=function(t){Cwt(e.controller,t),e.enabled&&!e.state._active&&(e.setStartState(t),e.setPointerCapture(t),e.shouldPreventWindowScrollY?e.setUpWindowScrollDetection(t):e.config.delay>0?e.setUpDelayedDragTrigger(t):e.startDrag(t,!0))},e.onDragChange=function(t){if(!e.state.canceled&&e.state._active&&e.isValidEvent(t)&&(e.state._lastEventType!==t.type||t.timeStamp!==e.state.timeStamp)){var n;if(document.pointerLockElement){var i=t.movementX,r=t.movementY;n=Rxt(e.transform([i,r]),e.state.values)}else n=rwt(t,e.transform);var o=e.getKinematics(n,t);if(!e.state._dragStarted){if(e.state._dragDelayed)return void e.startDrag(t);if(!e.shouldPreventWindowScrollY)return;if(e.state._dragPreventScroll||!o.axis)return;if("x"!==o.axis)return void(e.state._active=!1);e.startDrag(t)}var a=nwt(t);e.updateSharedState(a);var s=Mwt(Gxt(e),t),l=Dxt(o._movement),c=e.state._dragIsTap;c&&l>=3&&(c=!1),e.updateGestureState(jxt({},s,o,{_dragIsTap:c})),e.fireGestureHandler()}},e.onDragEnd=function(t){if(Awt(e.controller,t),e.isValidEvent(t)&&(e.clean(),e.state._active)){e.state._active=!1;var n=e.state._dragIsTap,i=e.state.velocities,r=i[0],o=i[1],a=e.state.movement,s=a[0],l=a[1],c=e.state._intentional,u=c[0],h=c[1],d=e.config.swipeVelocity,f=d[0],p=d[1],g=e.config.swipeDistance,m=g[0],v=g[1],y=e.config.swipeDuration,b=jxt({},Mwt(Gxt(e),t),e.getMovement(e.state.values)),_=[0,0];b.elapsedTime<y&&(!1!==u&&Math.abs(r)>f&&Math.abs(s)>m&&(_[0]=zxt(r)),!1!==h&&Math.abs(o)>p&&Math.abs(l)>v&&(_[1]=zxt(o))),e.updateSharedState({buttons:0}),e.updateGestureState(jxt({},b,{tap:n,swipe:_})),e.fireGestureHandler(e.config.filterTaps&&!0===n)}},e.clean=function(){t.prototype.clean.call(Gxt(e)),e.state._dragStarted=!1,e.releasePointerCapture(),function(t,e,n){var i=t.config,r=t.windowListeners;void 0===n&&(n=i.eventOptions),i.window&&(Dwt(i.window,r[e],n),delete r[e])}(e.controller,e.stateKey)},e.onCancel=function(){e.state.canceled||(e.updateGestureState({canceled:!0,_active:!1}),e.updateSharedState({buttons:0}),setTimeout((function(){return e.fireGestureHandler()}),0))},e.onClick=function(t){e.state._dragIsTap||t.stopPropagation()},e}Hxt(e,t);var n=e.prototype;return n.startDrag=function(t,e){void 0===e&&(e=!1),this.state._active&&!this.state._dragStarted&&(e||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},n.addBindings=function(t){(this.config.useTouch?(Rwt(t,"onTouchStart",this.onDragStart),Rwt(t,"onTouchMove",this.onDragChange),Rwt(t,"onTouchEnd",this.onDragEnd),Rwt(t,"onTouchCancel",this.onDragEnd)):(Rwt(t,"onPointerDown",this.onDragStart),Rwt(t,"onPointerMove",this.onDragChange),Rwt(t,"onPointerUp",this.onDragEnd),Rwt(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps)&&Rwt(t,this.controller.config.eventOptions.capture?"onClick":"onClickCapture",this.onClick)},e}(zwt);var Bwt=function(t){function e(){return t.apply(this,arguments)||this}Hxt(e,t);var n=e.prototype;return n.getInternalMovement=function(t,e){var n=e.values[1],i=t[0],r=t[1],o=void 0===r?n:r,a=o-n,s=e.turns;return Math.abs(a)>270&&(s+=zxt(a)),Lxt([i,o-360*s],e.initial)},n.getKinematics=function(t,e){var n=this.getMovement(t),i=(t[1]-n._movement[1]-this.state.initial[1])/360,r=e.timeStamp-this.state.timeStamp;return jxt({turns:i},n,Vxt(Nxt(n.movement,n.delta,r),["distance","velocity"]))},n.mapStateValues=function(t){return{da:t.values,vdva:t.velocities}},e}(wwt),jwt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).ingKey="pinching",e.stateKey="pinch",e.onPinchStart=function(t){Cwt(e.controller,t);var n=e.controller.touchIds;if(e.enabled&&(!e.state._active||!e.state._pointerIds.every((function(t){return n.has(t)})))&&!(n.size<2)){var i=Array.from(n).slice(0,2),r=owt(t,i,e.transform),o=r.values,a=r.origin;e.updateSharedState(nwt(t)),e.updateGestureState(jxt({},Twt(Gxt(e),o,t),Mwt(Gxt(e),t,!0),{_pointerIds:i,cancel:e.onCancel,origin:a})),e.updateGestureState(e.getMovement(o)),e.fireGestureHandler()}},e.onPinchChange=function(t){var n=e.state,i=n.canceled,r=n._active;if(!i&&r&&t.timeStamp!==e.state.timeStamp){var o=nwt(t);e.updateSharedState(o);try{var a=owt(t,e.state._pointerIds,e.transform),s=a.values,l=a.origin,c=e.getKinematics(s,t);e.updateGestureState(jxt({},Mwt(Gxt(e),t),c,{origin:l})),e.fireGestureHandler()}catch(u){e.onPinchEnd(t)}}},e.onPinchEnd=function(t){Awt(e.controller,t);var n=ewt(t);e.state._pointerIds.every((function(t){return!n.includes(t)}))||(e.clean(),e.state._active&&(e.updateGestureState(jxt({},Mwt(Gxt(e),t),e.getMovement(e.state.values),{_active:!1})),e.fireGestureHandler()))},e.onCancel=function(){e.state.canceled||(e.updateGestureState({_active:!1,canceled:!0}),setTimeout((function(){return e.fireGestureHandler()}),0))},e.onGestureStart=function(t){if(e.enabled){t.preventDefault();var n=swt(t,e.transform);e.updateSharedState(nwt(t)),e.updateGestureState(jxt({},Twt(Gxt(e),n,t),Mwt(Gxt(e),t,!0),{origin:[t.clientX,t.clientY],cancel:e.onCancel})),e.updateGestureState(e.getMovement(n)),e.fireGestureHandler()}},e.onGestureChange=function(t){var n=e.state,i=n.canceled,r=n._active;if(!i&&r){t.preventDefault();var o=nwt(t);e.updateSharedState(o);var a=swt(t,e.transform);a[0]=260*(a[0]-e.state.event.scale)+e.state.values[0];var s=e.getKinematics(a,t);e.updateGestureState(jxt({},Mwt(Gxt(e),t),s,{origin:[t.clientX,t.clientY]})),e.fireGestureHandler()}},e.onGestureEnd=function(t){e.clean(),e.state._active&&(e.updateGestureState(jxt({},Mwt(Gxt(e),t),e.getMovement(e.state.values),{_active:!1,origin:[t.clientX,t.clientY]})),e.fireGestureHandler())},e.wheelShouldRun=function(t){return e.enabled&&t.ctrlKey},e.getWheelValuesFromEvent=function(t){var n=awt(t,e.transform)[1],i=e.state.values,r=i[0],o=i[1],a=7*-n,s=void 0!==o?o:0;return{values:[r+a,s],origin:[t.clientX,t.clientY],delta:[a,s]}},e.onWheel=function(t){e.wheelShouldRun(t)&&(e.setTimeout(e.onWheelEnd),e.state._active?e.onWheelChange(t):e.onWheelStart(t))},e.onWheelStart=function(t){var n=e.getWheelValuesFromEvent(t),i=n.values,r=n.delta,o=n.origin;t.cancelable&&t.preventDefault(),e.updateSharedState(nwt(t)),e.updateGestureState(jxt({},Twt(Gxt(e),i,t,e.state.values),Mwt(Gxt(e),t,!0),{offset:i,delta:r,origin:o})),e.updateGestureState(e.getMovement(i)),e.fireGestureHandler()},e.onWheelChange=function(t){t.cancelable&&t.preventDefault(),e.updateSharedState(nwt(t));var n=e.getWheelValuesFromEvent(t),i=n.values,r=n.origin,o=n.delta;e.updateGestureState(jxt({},Mwt(Gxt(e),t),e.getKinematics(i,t),{origin:r,delta:o})),e.fireGestureHandler()},e.onWheelEnd=function(){e.clean(),e.state._active&&(e.state._active=!1,e.updateGestureState(e.getMovement(e.state.values)),e.fireGestureHandler())},e}return Hxt(e,t),e.prototype.addBindings=function(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(Rwt(t,"onGestureStart",this.onGestureStart),Rwt(t,"onGestureChange",this.onGestureChange),Rwt(t,"onGestureEnd",this.onGestureEnd)):(Rwt(t,"onTouchStart",this.onPinchStart),Rwt(t,"onTouchMove",this.onPinchChange),Rwt(t,"onTouchEnd",this.onPinchEnd),Rwt(t,"onTouchCancel",this.onPinchEnd),Rwt(t,"onWheel",this.onWheel))},e}(Bwt);var Hwt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).ingKey="wheeling",e.stateKey="wheel",e.debounced=!0,e.handleEvent=function(t){if((!t.ctrlKey||!("pinch"in e.controller.handlers))&&e.enabled){e.setTimeout(e.onEnd),e.updateSharedState(nwt(t));var n=Rxt(awt(t,e.transform),e.state.values);if(e.state._active)e.updateGestureState(jxt({},Mwt(Gxt(e),t),e.getKinematics(n,t)));else{e.updateGestureState(jxt({},Twt(Gxt(e),n,t,e.state.values),Mwt(Gxt(e),t,!0)));var i=e.getMovement(n),r=Ixt(i.delta);e.updateGestureState(i),e.updateGestureState(r)}e.fireGestureHandler()}},e.onEnd=function(){if(e.clean(),e.state._active){var t=e.getMovement(e.state.values);e.updateGestureState(t),e.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),e.fireGestureHandler()}},e}return Hxt(e,t),e.prototype.addBindings=function(t){Rwt(t,"onWheel",this.handleEvent)},e}(zwt);var Vwt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).ingKey="moving",e.stateKey="move",e.debounced=!0,e.onMove=function(t){e.enabled&&(e.setTimeout(e.onMoveEnd),e.state._active?e.onMoveChange(t):e.onMoveStart(t))},e.onMoveStart=function(t){e.updateSharedState(nwt(t));var n=rwt(t,e.transform);e.updateGestureState(jxt({},Twt(Gxt(e),n,t),Mwt(Gxt(e),t,!0))),e.updateGestureState(e.getMovement(n)),e.fireGestureHandler()},e.onMoveChange=function(t){e.updateSharedState(nwt(t));var n=rwt(t,e.transform);e.updateGestureState(jxt({},Mwt(Gxt(e),t),e.getKinematics(n,t))),e.fireGestureHandler()},e.onMoveEnd=function(){if(e.clean(),e.state._active){var t=e.state.values;e.updateGestureState(e.getMovement(t)),e.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),e.fireGestureHandler()}},e.hoverTransform=function(){return e.controller.config.hover.transform||e.controller.config.transform},e.onPointerEnter=function(t){if(e.controller.state.shared.hovering=!0,e.controller.config.enabled){if(e.controller.config.hover.enabled){var n=rwt(t,e.hoverTransform()),i=jxt({},e.controller.state.shared,e.state,Mwt(Gxt(e),t,!0),{args:e.args,values:n,active:!0,hovering:!0});e.controller.handlers.hover(jxt({},i,e.mapStateValues(i)))}"move"in e.controller.handlers&&e.onMoveStart(t)}},e.onPointerLeave=function(t){if(e.controller.state.shared.hovering=!1,"move"in e.controller.handlers&&e.onMoveEnd(),e.controller.config.hover.enabled){var n=rwt(t,e.hoverTransform()),i=jxt({},e.controller.state.shared,e.state,Mwt(Gxt(e),t),{args:e.args,values:n,active:!1});e.controller.handlers.hover(jxt({},i,e.mapStateValues(i)))}},e}return Hxt(e,t),e.prototype.addBindings=function(t){"move"in this.controller.handlers&&Rwt(t,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(Rwt(t,"onPointerEnter",this.onPointerEnter),Rwt(t,"onPointerLeave",this.onPointerLeave))},e}(zwt);var Gwt=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).ingKey="scrolling",e.stateKey="scroll",e.debounced=!0,e.handleEvent=function(t){if(e.enabled){e.clearTimeout(),e.setTimeout(e.onEnd);var n=function(t,e){void 0===e&&(e=iwt);var n=t.currentTarget,i=n.scrollX,r=n.scrollY,o=n.scrollLeft,a=n.scrollTop;return e([i||o||0,r||a||0])}(t,e.transform);if(e.updateSharedState(nwt(t)),e.state._active)e.updateGestureState(jxt({},Mwt(Gxt(e),t),e.getKinematics(n,t)));else{e.updateGestureState(jxt({},Twt(Gxt(e),n,t,e.state.values),Mwt(Gxt(e),t,!0)));var i=e.getMovement(n),r=Ixt(i.delta);e.updateGestureState(i),e.updateGestureState(r)}e.fireGestureHandler()}},e.onEnd=function(){e.clean(),e.state._active&&(e.updateGestureState(jxt({},e.getMovement(e.state.values),{_active:!1,velocities:[0,0],velocity:0})),e.fireGestureHandler())},e}return Hxt(e,t),e.prototype.addBindings=function(t){Rwt(t,"onScroll",this.handleEvent)},e}(zwt);var Wwt=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function qwt(t,e){void 0===e&&(e={});var n=function(t){var e={},n={},i=new Set;for(var r in t)Wwt.test(r)?(i.add(RegExp.lastMatch),n[r]=t[r]):e[r]=t[r];return[n,e,i]}(t),i=n[0],r=n[1],o=n[2];_wt.set("drag",Uwt),_wt.set("hover",Vwt),_wt.set("move",Vwt),_wt.set("pinch",jwt),_wt.set("scroll",Gwt),_wt.set("wheel",Hwt);var a=function(t,e){void 0===t&&(t={}),void 0===e&&(e=new Set);var n=t,i=n.drag,r=n.wheel,o=n.move,a=n.scroll,s=n.pinch,l=n.hover,c=n.eventOptions,u=n.window,h=n.transform,d=pwt({domTarget:n.domTarget,eventOptions:c,transform:h,window:u,enabled:n.enabled});return e.has("onDrag")&&(d.drag=vwt(i)),e.has("onWheel")&&(d.wheel=gwt(r)),e.has("onScroll")&&(d.scroll=gwt(a)),e.has("onMove")&&(d.move=gwt(o)),e.has("onPinch")&&(d.pinch=mwt(s)),e.has("onHover")&&(d.hover=jxt({enabled:!0},l)),d}(e,o),s={};return o.has("onDrag")&&(s.drag=Xwt(i,"onDrag")),o.has("onWheel")&&(s.wheel=Xwt(i,"onWheel")),o.has("onScroll")&&(s.scroll=Xwt(i,"onScroll")),o.has("onMove")&&(s.move=Xwt(i,"onMove")),o.has("onPinch")&&(s.pinch=Xwt(i,"onPinch")),o.has("onHover")&&(s.hover=i.onHover),Iwt(s,a,r)}function Xwt(t,e){var n=e+"Start",i=e+"End";return function(r){var o=void 0;return r.first&&n in t&&t[n](r),e in t&&(o=t[e](r)),r.last&&i in t&&t[i](r),o}}n(6747);var Ywt=n(7611);const Kwt=e.forwardRef((function(t,n){let{children:i,follow:r=!0,lockX:o=!1,lockY:a=!1,lockZ:s=!1,...l}=t;const c=e.useRef(null),u=e.useRef(null),h=new lot;return ovt((t=>{let{camera:e}=t;if(!r||!u.current)return;const n=u.current.rotation.clone();u.current.updateMatrix(),u.current.updateWorldMatrix(!1,!1),u.current.getWorldQuaternion(h),e.getWorldQuaternion(c.current.quaternion).premultiply(h.invert()),o&&(u.current.rotation.x=n.x),a&&(u.current.rotation.y=n.y),s&&(u.current.rotation.z=n.z)})),e.useImperativeHandle(n,(()=>u.current),[]),e.createElement("group",yvt({ref:u,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},l),e.createElement("group",{ref:c},i))}));function Zwt(){var t=Object.create(null);function e(i,r){var o=i.id,a=i.name,s=i.dependencies;void 0===s&&(s=[]);var l=i.init;void 0===l&&(l=function(){});var c=i.getTransferables;if(void 0===c&&(c=null),!t[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(e(n,(function(t){if(t instanceof Error)throw t})),n=t[n.id].value),n})),l=n("<"+a+">.init",l),c&&(c=n("<"+a+">.getTransferables",c));var u=null;"function"===typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:u,getTransferables:c},r(u)}catch(h){h&&h.noLog||console.error(h),r(h)}}function n(t,e){var n=void 0;self.troikaDefine=function(t){return n=t};var i=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+e+"\n)"],{type:"application/javascript"}));try{importScripts(i)}catch(r){console.error(r)}return URL.revokeObjectURL(i),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var i=n.data,r=i.messageId,o=i.action,a=i.data;try{"registerModule"===o&&e(a,(function(t){t instanceof Error?postMessage({messageId:r,success:!1,error:t.message}):postMessage({messageId:r,success:!0,result:{isCallable:"function"===typeof t}})})),"callModule"===o&&function(e,n){var i,r=e.id,o=e.args;t[r]&&"function"===typeof t[r].value||n(new Error("Worker module "+r+": not found or its 'init' did not return a function"));try{var a=(i=t[r]).value.apply(i,o);a&&"function"===typeof a.then?a.then(s,(function(t){return n(t instanceof Error?t:new Error(""+t))})):s(a)}catch(l){n(l)}function s(e){try{var i=t[r].getTransferables&&t[r].getTransferables(e);i&&Array.isArray(i)&&i.length||(i=void 0),n(e,i)}catch(l){console.error(l),n(l)}}}(a,(function(t,e){t instanceof Error?postMessage({messageId:r,success:!1,error:t.message}):postMessage({messageId:r,success:!0,result:t},e||void 0)}))}catch(s){postMessage({messageId:r,success:!1,error:s.stack})}}))}var Qwt=function(){var t=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),t=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return Qwt=function(){return t},t},Jwt=0,$wt=0,tSt=!1,eSt=Object.create(null),nSt=Object.create(null),iSt=Object.create(null);function rSt(t){if((!t||"function"!==typeof t.init)&&!tSt)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,r=t.workerId;if(!Qwt())return function(t){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then((function(e){if("function"===typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map((function(t){return t&&t._getInitResult?t._getInitResult():t})):[];var r=Promise.all(n).then((function(t){return i.apply(null,t)}));return e._getInitResult=function(){return r},r},e}(t);null==r&&(r="#default");var o="workerModule"+ ++Jwt,a=t.name||o,s=null;function l(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(!s){s=aSt(r,"registerModule",l.workerModuleData);var n=function(){s=null,nSt[r].delete(n)};(nSt[r]||(nSt[r]=new Set)).add(n)}return s.then((function(e){if(e.isCallable)return aSt(r,"callModule",{id:o,args:t});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return e=e&&e.map((function(t){return"function"!==typeof t||t.workerModuleData||(tSt=!0,t=rSt({workerId:r,name:"<"+a+"> function dependency: "+t.name,init:"function(){return (\n"+oSt(t)+"\n)}"}),tSt=!1),t&&t.workerModuleData&&(t=t.workerModuleData),t})),l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:e,init:oSt(n),getTransferables:i&&oSt(i)},l}function oSt(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function aSt(t,e,n){return new Promise((function(i,r){var o=++$wt;iSt[o]=function(t){t.success?i(t.result):r(new Error("Error in worker "+e+" call: "+t.error))},function(t){var e=eSt[t];if(!e){var n=oSt(Zwt);(e=eSt[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(t){var e=t.data,n=e.messageId,i=iSt[n];if(!i)throw new Error("WorkerModule response with empty or unknown messageId");delete iSt[n],i(e)}}return e}(t).postMessage({messageId:o,action:e,data:n})}))}function sSt(){var t=function(t){function e(t,e,n,i,r,o,a,s){var l=1-a;s.x=l*l*t+2*l*a*n+a*a*r,s.y=l*l*e+2*l*a*i+a*a*o}function n(t,e,n,i,r,o,a,s,l,c){var u=1-l;c.x=u*u*u*t+3*u*u*l*n+3*u*l*l*r+l*l*l*a,c.y=u*u*u*e+3*u*u*l*i+3*u*l*l*o+l*l*l*s}function i(t,e){for(var n,i,r,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(t);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(t){return parseFloat(t)}));switch(n[1]){case"M":o=i=l[0],a=r=l[1];break;case"L":l[0]===o&&l[1]===a||e("L",o,a,o=l[0],a=l[1]);break;case"Q":e("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":e("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===i&&a===r||e("L",o,a,i,r)}}}function r(t,r,o){void 0===o&&(o=16);var a={x:0,y:0};i(t,(function(t,i,s,l,c,u,h,d,f){switch(t){case"L":r(i,s,l,c);break;case"Q":for(var p=i,g=s,m=1;m<o;m++)e(i,s,u,h,l,c,m/(o-1),a),r(p,g,a.x,a.y),p=a.x,g=a.y;break;case"C":for(var v=i,y=s,b=1;b<o;b++)n(i,s,u,h,d,f,l,c,b/(o-1),a),r(v,y,a.x,a.y),v=a.x,y=a.y}}))}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",s=new WeakMap,l={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(t,e){var n=t.getContext?t.getContext("webgl",l):t,i=s.get(n);if(!i){var r="undefined"!==typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,o={},a={},c={},u=-1,h=[];function d(t){var e=o[t];if(!e&&!(e=o[t]=n.getExtension(t)))throw new Error(t+" not supported");return e}function f(t,e){var i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}function p(t,e,i,o){if(!a[t]){var s={},l={},c=n.createProgram();n.attachShader(c,f(e,n.VERTEX_SHADER)),n.attachShader(c,f(i,n.FRAGMENT_SHADER)),n.linkProgram(c),a[t]={program:c,transaction:function(t){n.useProgram(c),t({setUniform:function(t,e){for(var i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];var o=l[e]||(l[e]=n.getUniformLocation(c,e));n["uniform"+t].apply(n,[o].concat(i))},setAttribute:function(t,e,i,o,a){var l=s[t];l||(l=s[t]={buf:n.createBuffer(),loc:n.getAttribLocation(c,t),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,e,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),r?n.vertexAttribDivisor(l.loc,o):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),a!==l.data&&(n.bufferData(n.ARRAY_BUFFER,a,i),l.data=a)}})}}}a[t].transaction(o)}function g(t,e){u++;try{n.activeTexture(n.TEXTURE0+u);var i=c[t];i||(i=c[t]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,i),e(i,u)}finally{u--}}function m(t,e,i){var r=n.createFramebuffer();h.push(r),n.bindFramebuffer(n.FRAMEBUFFER,r),n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);try{i(r)}finally{n.deleteFramebuffer(r),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function v(){o={},a={},c={},u=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",(function(t){v(),t.preventDefault()}),!1),s.set(n,i={gl:n,isWebGL2:r,getExtension:d,withProgram:p,withTexture:g,withTextureFramebuffer:m,handleContextLoss:v})}e(i)}function u(t,e,n,i,r,s,l,u){void 0===l&&(l=15),void 0===u&&(u=null),c(t,(function(t){var c=t.gl,h=t.withProgram;(0,t.withTexture)("copy",(function(t,d){c.texImage2D(c.TEXTURE_2D,0,c.RGBA,r,s,0,c.RGBA,c.UNSIGNED_BYTE,e),h("copy",o,a,(function(t){var e=t.setUniform;(0,t.setAttribute)("aUV",2,c.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),e("1i","image",d),c.bindFramebuffer(c.FRAMEBUFFER,u||null),c.disable(c.BLEND),c.colorMask(8&l,4&l,2&l,1&l),c.viewport(n,i,r,s),c.scissor(n,i,r,s),c.drawArrays(c.TRIANGLES,0,3)}))}))}))}var h=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:u,resizeWebGLCanvasWithoutClearing:function(t,e,n){var i=t.width,r=t.height;c(t,(function(o){var a=o.gl,s=new Uint8Array(i*r*4);a.readPixels(0,0,i,r,a.RGBA,a.UNSIGNED_BYTE,s),t.width=e,t.height=n,u(a,s,0,0,i,r)}))}});function d(t,e,n,i,o,a){void 0===a&&(a=1);var s=new Uint8Array(t*e),l=i[2]-i[0],c=i[3]-i[1],u=[];r(n,(function(t,e,n,i){u.push({x1:t,y1:e,x2:n,y2:i,minX:Math.min(t,n),minY:Math.min(e,i),maxX:Math.max(t,n),maxY:Math.max(e,i)})})),u.sort((function(t,e){return t.maxX-e.maxX}));for(var h=0;h<t;h++)for(var d=0;d<e;d++){var f=m(i[0]+l*(h+.5)/t,i[1]+c*(d+.5)/e),p=Math.pow(1-Math.abs(f)/o,a)/2;f<0&&(p=1-p),p=Math.max(0,Math.min(255,Math.round(255*p))),s[d*t+h]=p}return s;function m(t,e){for(var n=1/0,i=1/0,r=u.length;r--;){var o=u[r];if(o.maxX+i<=t)break;if(t+i>o.minX&&e-i<o.maxY&&e+i>o.minY){var a=g(t,e,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,i=Math.sqrt(n))}}return function(t,e){for(var n=0,i=u.length;i--;){var r=u[i];if(r.maxX<=t)break;r.y1>e!==r.y2>e&&t<(r.x2-r.x1)*(e-r.y1)/(r.y2-r.y1)+r.x1&&(n+=r.y1<r.y2?1:-1)}return 0!==n}(t,e)&&(i=-i),i}}function f(t,e,n,i,r,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),p(t,e,n,i,r,o,a,null,s,l,c)}function p(t,e,n,i,r,o,a,s,l,c,h){void 0===o&&(o=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=0);for(var f=d(t,e,n,i,r,o),p=new Uint8Array(4*f.length),g=0;g<f.length;g++)p[4*g+h]=f[g];u(a,p,l,c,t,e,1<<3-h,s)}function g(t,e,n,i,r,o){var a=r-n,s=o-i,l=a*a+s*s,c=l?Math.max(0,Math.min(1,((t-n)*a+(e-i)*s)/l)):0,u=t-(n+c*a),h=e-(i+c*s);return u*u+h*h}var m=Object.freeze({__proto__:null,generate:d,generateIntoCanvas:f,generateIntoFramebuffer:p}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",y="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",b="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",_=new Float32Array([0,0,2,0,0,2]),x=null,w=!1,S={},E=new WeakMap;function M(t){if(!w&&!A(t))throw new Error("WebGL generation not supported")}function T(t,e,n,i,r,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=x)){var s="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");a=x=s.getContext("webgl",{depth:!1})}M(a);var l=new Uint8Array(t*e*4);c(a,(function(a){var s=a.gl,c=a.withTexture,u=a.withTextureFramebuffer;c("readable",(function(a,c){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t,e,0,s.RGBA,s.UNSIGNED_BYTE,null),u(a,c,(function(a){C(t,e,n,i,r,o,s,a,0,0,0),s.readPixels(0,0,t,e,s.RGBA,s.UNSIGNED_BYTE,l)}))}))}));for(var u=new Uint8Array(t*e),h=0,d=0;h<l.length;h+=4)u[d++]=l[h];return u}function k(t,e,n,i,r,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),C(t,e,n,i,r,o,a,null,s,l,c)}function C(t,e,n,i,a,s,l,u,h,d,f){void 0===s&&(s=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===f&&(f=0),M(l);var p=[];r(n,(function(t,e,n,i){p.push(t,e,n,i)})),p=new Float32Array(p),c(l,(function(n){var r=n.gl,l=n.isWebGL2,c=n.getExtension,g=n.withProgram,m=n.withTexture,x=n.withTextureFramebuffer,w=n.handleContextLoss;if(m("rawDistances",(function(n,m){t===n._lastWidth&&e===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=t,n._lastHeight=e,0,r.RGBA,r.UNSIGNED_BYTE,null),g("main",v,y,(function(o){var u=o.setAttribute,h=o.setUniform,d=!l&&c("ANGLE_instanced_arrays"),f=!l&&c("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,_),u("aLineSegment",4,r.DYNAMIC_DRAW,1,p),h.apply(void 0,["4f","uGlyphBounds"].concat(i)),h("1f","uMaxDistance",a),h("1f","uExponent",s),x(n,m,(function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,t,e),r.scissor(0,0,t,e),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,l?r.MAX:f.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),l?r.drawArraysInstanced(r.TRIANGLES,0,3,p.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,p.length/4)}))})),g("post",o,b,(function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,_),n.setUniform("1i","tex",m),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===f,1===f,2===f,3===f),r.viewport(h,d,t,e),r.scissor(h,d,t,e),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw w(),new Error("webgl context lost")}))}function A(t){var e=t&&t!==x?t.canvas||t:S,n=E.get(e);if(void 0===n){w=!0;var i=null;try{var r=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=T(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,t);n=o&&r.length===o.length&&o.every((function(t,e){return t===r[e]})),n||(i="bad trial run results",console.info(r,o))}catch(a){n=!1,i=a.message}i&&console.warn("WebGL SDF generation not supported:",i),w=!1,E.set(e,n)}return n}var P=Object.freeze({__proto__:null,generate:T,generateIntoCanvas:k,generateIntoFramebuffer:C,isSupported:A});return t.forEachPathCommand=i,t.generate=function(t,e,n,i,r,o){void 0===r&&(r=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===o&&(o=1);try{return T.apply(P,arguments)}catch(a){return console.info("WebGL SDF generation failed, falling back to JS",a),d.apply(m,arguments)}},t.generateIntoCanvas=function(t,e,n,i,r,o,a,s,l,c){void 0===r&&(r=Math.max(i[2]-i[0],i[3]-i[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return k.apply(P,arguments)}catch(u){return console.info("WebGL SDF generation failed, falling back to JS",u),f.apply(m,arguments)}},t.javascript=m,t.pathToLineSegments=r,t.webgl=P,t.webglUtils=h,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return t}const lSt=function(){var t=function(t){var e={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(e).forEach((function(t,e){n[t]=1<<e+1,i[n[t]]=t})),Object.freeze(n);var r=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|r|n.PDI|s,c=null;function u(t){return function(){if(!c){c=new Map;var t=function(t){if(e.hasOwnProperty(t)){var i=0;e[t].split(",").forEach((function(e){var r=e.split("+"),o=r[0],a=r[1];o=parseInt(o,36),a=a?parseInt(a,36):0,c.set(i+=o,n[t]);for(var s=0;s<a;s++)c.set(++i,n[t])}))}};for(var i in e)t(i)}}(),c.get(t.codePointAt(0))||n.L}var h,d,f,p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(t,e){var n,i=0,r=new Map,o=e&&new Map;return t.split(",").forEach((function t(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)t(n);else{n=a;var l=a.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(i+=parseInt(c,36)),u=String.fromCodePoint(i+=parseInt(u,36)),r.set(c,u),e&&o.set(u,c)}})),{map:r,reverseMap:o}}function m(){if(!h){var t=g(p.pairs,!0),e=t.map,n=t.reverseMap;h=e,d=n,f=g(p.canonical,!1).map}}function v(t){return m(),h.get(t)||null}function y(t){return m(),d.get(t)||null}function b(t){return m(),f.get(t)||null}var _=n.L,x=n.R,w=n.EN,S=n.ES,E=n.ET,M=n.AN,T=n.CS,k=n.B,C=n.S,A=n.ON,P=n.BN,O=n.NSM,R=n.AL,L=n.LRO,D=n.RLO,I=n.LRE,N=n.RLE,z=n.PDF,F=n.LRI,U=n.RLI,B=n.FSI,j=n.PDI;var H,V="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function G(t){return function(){if(!H){var t=g(V,!0),e=t.map;t.reverseMap.forEach((function(t,n){e.set(n,t)})),H=e}}(),H.get(t)||null}function W(t,e,n,i){var r=t.length;n=Math.max(0,null==n?0:+n),i=Math.min(r-1,null==i?r-1:+i);var o=[];return e.paragraphs.forEach((function(r){var a=Math.max(n,r.start),s=Math.min(i,r.end);if(a<s){for(var c=e.levels.slice(a,s+1),h=s;h>=a&&u(t[h])&l;h--)c[h]=r.level;for(var d=r.level,f=1/0,p=0;p<c.length;p++){var g=c[p];g>d&&(d=g),g<f&&(f=1|g)}for(var m=d;m>=f;m--)for(var v=0;v<c.length;v++)if(c[v]>=m){for(var y=v;v+1<c.length&&c[v+1]>=m;)v++;v>y&&o.push([y+a,v+a])}}})),o}function q(t,e,n,i){for(var r=W(t,e,n,i),o=[],a=0;a<t.length;a++)o[a]=a;return r.forEach((function(t){for(var e=t[0],n=t[1],i=o.slice(e,n+1),r=i.length;r--;)o[n-r]=i[r]})),o}return t.closingToOpeningBracket=y,t.getBidiCharType=u,t.getBidiCharTypeName=function(t){return i[u(t)]},t.getCanonicalBracket=b,t.getEmbeddingLevels=function(t,e){for(var n=new Uint32Array(t.length),i=0;i<t.length;i++)n[i]=u(t[i]);var c=new Map;function h(t,e){var i=n[t];n[t]=e,c.set(i,c.get(i)-1),i&a&&c.set(a,c.get(a)-1),c.set(e,(c.get(e)||0)+1),e&a&&c.set(a,(c.get(a)||0)+1)}for(var d=new Uint8Array(t.length),f=new Map,p=[],g=null,m=0;m<t.length;m++)g||p.push(g={start:m,end:t.length-1,level:"rtl"===e?1:"ltr"===e?0:je(m,!1)}),n[m]&k&&(g.end=m,g=null);for(var H=N|I|D|L|r|j|z|k,V=function(t){return t+(1&t?1:2)},G=function(t){return t+(1&t?2:1)},W=0;W<p.length;W++){var q=[{_level:(g=p[W]).level,_override:0,_isolate:0}],X=void 0,Y=0,K=0,Z=0;c.clear();for(var Q=g.start;Q<=g.end;Q++){var J=n[Q];if(X=q[q.length-1],c.set(J,(c.get(J)||0)+1),J&a&&c.set(a,(c.get(a)||0)+1),J&H)if(J&(N|I)){d[Q]=X._level;var $=(J===N?G:V)(X._level);$<=125&&!Y&&!K?q.push({_level:$,_override:0,_isolate:0}):Y||K++}else if(J&(D|L)){d[Q]=X._level;var tt=(J===D?G:V)(X._level);tt<=125&&!Y&&!K?q.push({_level:tt,_override:J&D?x:_,_isolate:0}):Y||K++}else if(J&r){J&B&&(J=1===je(Q+1,!0)?U:F),d[Q]=X._level,X._override&&h(Q,X._override);var et=(J===U?G:V)(X._level);et<=125&&0===Y&&0===K?(Z++,q.push({_level:et,_override:0,_isolate:1,_isolInitIndex:Q})):Y++}else if(J&j){if(Y>0)Y--;else if(Z>0){for(K=0;!q[q.length-1]._isolate;)q.pop();var nt=q[q.length-1]._isolInitIndex;null!=nt&&(f.set(nt,Q),f.set(Q,nt)),q.pop(),Z--}X=q[q.length-1],d[Q]=X._level,X._override&&h(Q,X._override)}else J&z?(0===Y&&(K>0?K--:!X._isolate&&q.length>1&&(q.pop(),X=q[q.length-1])),d[Q]=X._level):J&k&&(d[Q]=g.level);else d[Q]=X._level,X._override&&J!==P&&h(Q,X._override)}for(var it=[],rt=null,ot=g.start;ot<=g.end;ot++){var at=n[ot];if(!(at&s)){var st=d[ot],lt=at&r,ct=at===j;rt&&st===rt._level?(rt._end=ot,rt._endsWithIsolInit=lt):it.push(rt={_start:ot,_end:ot,_level:st,_startsWithPDI:ct,_endsWithIsolInit:lt})}}for(var ut=[],ht=0;ht<it.length;ht++){var dt=it[ht];if(!dt._startsWithPDI||dt._startsWithPDI&&!f.has(dt._start)){for(var ft=[rt=dt],pt=void 0;rt&&rt._endsWithIsolInit&&null!=(pt=f.get(rt._end));)for(var gt=ht+1;gt<it.length;gt++)if(it[gt]._start===pt){ft.push(rt=it[gt]);break}for(var mt=[],vt=0;vt<ft.length;vt++)for(var yt=ft[vt],bt=yt._start;bt<=yt._end;bt++)mt.push(bt);for(var _t=d[mt[0]],xt=g.level,wt=mt[0]-1;wt>=0;wt--)if(!(n[wt]&s)){xt=d[wt];break}var St=mt[mt.length-1],Et=d[St],Mt=g.level;if(!(n[St]&r))for(var Tt=St+1;Tt<=g.end;Tt++)if(!(n[Tt]&s)){Mt=d[Tt];break}ut.push({_seqIndices:mt,_sosType:Math.max(xt,_t)%2?x:_,_eosType:Math.max(Mt,Et)%2?x:_})}}for(var kt=0;kt<ut.length;kt++){var Ct=ut[kt],At=Ct._seqIndices,Pt=Ct._sosType,Ot=Ct._eosType,Rt=1&d[At[0]]?x:_;if(c.get(O))for(var Lt=0;Lt<At.length;Lt++){var Dt=At[Lt];if(n[Dt]&O){for(var It=Pt,Nt=Lt-1;Nt>=0;Nt--)if(!(n[At[Nt]]&s)){It=n[At[Nt]];break}h(Dt,It&(r|j)?A:It)}}if(c.get(w))for(var zt=0;zt<At.length;zt++){var Ft=At[zt];if(n[Ft]&w)for(var Ut=zt-1;Ut>=-1;Ut--){var Bt=-1===Ut?Pt:n[At[Ut]];if(Bt&o){Bt===R&&h(Ft,M);break}}}if(c.get(R))for(var jt=0;jt<At.length;jt++){var Ht=At[jt];n[Ht]&R&&h(Ht,x)}if(c.get(S)||c.get(T))for(var Vt=1;Vt<At.length-1;Vt++){var Gt=At[Vt];if(n[Gt]&(S|T)){for(var Wt=0,qt=0,Xt=Vt-1;Xt>=0&&(Wt=n[At[Xt]])&s;Xt--);for(var Yt=Vt+1;Yt<At.length&&(qt=n[At[Yt]])&s;Yt++);Wt===qt&&(n[Gt]===S?Wt===w:Wt&(w|M))&&h(Gt,Wt)}}if(c.get(w))for(var Kt=0;Kt<At.length;Kt++){var Zt=At[Kt];if(n[Zt]&w){for(var Qt=Kt-1;Qt>=0&&n[At[Qt]]&(E|s);Qt--)h(At[Qt],w);for(Kt++;Kt<At.length&&n[At[Kt]]&(E|s|w);Kt++)n[At[Kt]]!==w&&h(At[Kt],w)}}if(c.get(E)||c.get(S)||c.get(T))for(var Jt=0;Jt<At.length;Jt++){var $t=At[Jt];if(n[$t]&(E|S|T)){h($t,A);for(var te=Jt-1;te>=0&&n[At[te]]&s;te--)h(At[te],A);for(var ee=Jt+1;ee<At.length&&n[At[ee]]&s;ee++)h(At[ee],A)}}if(c.get(w))for(var ne=0,ie=Pt;ne<At.length;ne++){var re=At[ne],oe=n[re];oe&w?ie===_&&h(re,_):oe&o&&(ie=oe)}if(c.get(a)){for(var ae=x|w|M,se=ae|_,le=[],ce=[],ue=0;ue<At.length;ue++)if(n[At[ue]]&a){var he=t[At[ue]],de=void 0;if(null!==v(he)){if(!(ce.length<63))break;ce.push({char:he,seqIndex:ue})}else if(null!==(de=y(he)))for(var fe=ce.length-1;fe>=0;fe--){var pe=ce[fe].char;if(pe===de||pe===y(b(he))||v(b(pe))===he){le.push([ce[fe].seqIndex,ue]),ce.length=fe;break}}}le.sort((function(t,e){return t[0]-e[0]}));for(var ge=0;ge<le.length;ge++){for(var me=le[ge],ve=me[0],ye=me[1],be=!1,_e=0,xe=ve+1;xe<ye;xe++){var we=At[xe];if(n[we]&se){be=!0;var Se=n[we]&ae?x:_;if(Se===Rt){_e=Se;break}}}if(be&&!_e){_e=Pt;for(var Ee=ve-1;Ee>=0;Ee--){var Me=At[Ee];if(n[Me]&se){var Te=n[Me]&ae?x:_;_e=Te!==Rt?Te:Rt;break}}}if(_e){if(n[At[ve]]=n[At[ye]]=_e,_e!==Rt)for(var ke=ve+1;ke<At.length;ke++)if(!(n[At[ke]]&s)){u(t[At[ke]])&O&&(n[At[ke]]=_e);break}if(_e!==Rt)for(var Ce=ye+1;Ce<At.length;Ce++)if(!(n[At[Ce]]&s)){u(t[At[Ce]])&O&&(n[At[Ce]]=_e);break}}}for(var Ae=0;Ae<At.length;Ae++)if(n[At[Ae]]&a){for(var Pe=Ae,Oe=Ae,Re=Pt,Le=Ae-1;Le>=0;Le--){if(!(n[At[Le]]&s)){Re=n[At[Le]]&ae?x:_;break}Pe=Le}for(var De=Ot,Ie=Ae+1;Ie<At.length;Ie++){if(!(n[At[Ie]]&(a|s))){De=n[At[Ie]]&ae?x:_;break}Oe=Ie}for(var Ne=Pe;Ne<=Oe;Ne++)n[At[Ne]]=Re===De?Re:Rt;Ae=Oe}}}for(var ze=g.start;ze<=g.end;ze++){var Fe=d[ze],Ue=n[ze];if(1&Fe?Ue&(_|w|M)&&d[ze]++:Ue&x?d[ze]++:Ue&(M|w)&&(d[ze]+=2),Ue&s&&(d[ze]=0===ze?g.level:d[ze-1]),ze===g.end||u(t[ze])&(C|k))for(var Be=ze;Be>=0&&u(t[Be])&l;Be--)d[Be]=g.level}}return{levels:d,paragraphs:p};function je(e,i){for(var o=e;o<t.length;o++){var a=n[o];if(a&(x|R))return 1;if(a&(k|_)||i&&a===j)return 0;if(a&r){var s=He(o);o=-1===s?t.length:s}}return 0}function He(e){for(var i=1,o=e+1;o<t.length;o++){var a=n[o];if(a&k)break;if(a&j){if(0===--i)return o}else a&r&&i++}return-1}},t.getMirroredCharacter=G,t.getMirroredCharactersMap=function(t,e,n,i){var r=t.length;n=Math.max(0,null==n?0:+n),i=Math.min(r-1,null==i?r-1:+i);for(var o=new Map,a=n;a<=i;a++)if(1&e[a]){var s=G(t[a]);null!==s&&o.set(a,s)}return o},t.getReorderSegments=W,t.getReorderedIndices=q,t.getReorderedString=function(t,e,n,i){var r=q(t,e,n,i),o=[].concat(t);return r.forEach((function(n,i){o[i]=(1&e.levels[n]?G(t[n]):null)||t[n]})),o.join("")},t.openingToClosingBracket=v,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return t},cSt=/\bvoid\s+main\s*\(\s*\)\s*{/g;function uSt(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,e){let n=Wst[e];return n?uSt(n):t}))}const hSt=[];for(let n=0;n<256;n++)hSt[n]=(n<16?"0":"")+n.toString(16);const dSt=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let n=arguments[e];if(n)for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},fSt=Date.now(),pSt=new WeakMap,gSt=new Map;let mSt=1e10;function vSt(t,e){const n=function(t){const e=JSON.stringify(t,bSt);let n=xSt.get(e);null==n&&xSt.set(e,n=++_St);return n}(e);let i=pSt.get(t);if(i||pSt.set(t,i=Object.create(null)),i[n])return new i[n];const r="_onBeforeCompile".concat(n),o=function(i,o){t.onBeforeCompile.call(this,i,o);const a=this.customProgramCacheKey()+"|"+i.vertexShader+"|"+i.fragmentShader;let s=gSt[a];if(!s){const t=function(t,e,n,i){let{vertexShader:r,fragmentShader:o}=e,{vertexDefs:a,vertexMainIntro:s,vertexMainOutro:l,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:d,fragmentColorTransform:f,customRewriter:p,timeUniform:g}=n;a=a||"",s=s||"",l=l||"",u=u||"",h=h||"",d=d||"",(c||p)&&(r=uSt(r));(f||p)&&(o=o.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"),o=uSt(o));if(p){let t=p({vertexShader:r,fragmentShader:o});r=t.vertexShader,o=t.fragmentShader}if(f){let t=[];o=o.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(e=>(t.push(e),""))),d="".concat(f,"\n").concat(t.join("\n"),"\n").concat(d)}if(g){const t="\nuniform float ".concat(g,";\n");a=t+a,u=t+u}c&&(r="vec3 troika_position_".concat(i,";\nvec3 troika_normal_").concat(i,";\nvec2 troika_uv_").concat(i,";\n").concat(r,"\n"),a="".concat(a,"\nvoid troikaVertexTransform").concat(i,"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ").concat(c,"\n}\n"),s="\ntroika_position_".concat(i," = vec3(position);\ntroika_normal_").concat(i," = vec3(normal);\ntroika_uv_").concat(i," = vec2(uv);\ntroikaVertexTransform").concat(i,"(troika_position_").concat(i,", troika_normal_").concat(i,", troika_uv_").concat(i,");\n").concat(s,"\n"),r=r.replace(/\b(position|normal|uv)\b/g,((t,e,n,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?e:"troika_".concat(e,"_").concat(i))),t.map&&t.map.channel>0||(r=r.replace(/\bMAP_UV\b/g,"troika_uv_".concat(i))));return r=ySt(r,i,a,s,l),o=ySt(o,i,u,h,d),{vertexShader:r,fragmentShader:o}}(this,i,e,n);s=gSt[a]=t}i.vertexShader=s.vertexShader,i.fragmentShader=s.fragmentShader,dSt(i.uniforms,this.uniforms),e.timeUniform&&(i.uniforms[e.timeUniform]={get value(){return Date.now()-fSt}}),this[r]&&this[r](i)},a=function(){return s(e.chained?t:t.clone())},s=function(i){const r=Object.create(i,l);return Object.defineProperty(r,"baseMaterial",{value:t}),Object.defineProperty(r,"id",{value:mSt++}),r.uuid=function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(hSt[255&t]+hSt[t>>8&255]+hSt[t>>16&255]+hSt[t>>24&255]+"-"+hSt[255&e]+hSt[e>>8&255]+"-"+hSt[e>>16&15|64]+hSt[e>>24&255]+"-"+hSt[63&n|128]+hSt[n>>8&255]+"-"+hSt[n>>16&255]+hSt[n>>24&255]+hSt[255&i]+hSt[i>>8&255]+hSt[i>>16&255]+hSt[i>>24&255]).toUpperCase()}(),r.uniforms=dSt({},i.uniforms,e.uniforms),r.defines=dSt({},i.defines,e.defines),r.defines["TROIKA_DERIVED_MATERIAL_".concat(n)]="",r.extensions=dSt({},i.extensions,e.extensions),r._listeners=void 0,r},l={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>o,set(t){this[r]=t}},copy:{writable:!0,configurable:!0,value:function(e){return t.copy.call(this,e),t.isShaderMaterial||t.isDerivedMaterial||(dSt(this.extensions,e.extensions),dSt(this.defines,e.defines),dSt(this.uniforms,kst.clone(e.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const e=new t.constructor;return s(e).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=vSt(t.isDerivedMaterial?t.getDepthMaterial():new aut({depthPacking:Tit}),e),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=vSt(t.isDerivedMaterial?t.getDistanceMaterial():new sut,e),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:e,_distanceMaterial:n}=this;e&&e.dispose(),n&&n.dispose(),t.dispose.call(this)}}};return i[n]=a,new a}function ySt(t,e,n,i,r){return(i||r||n)&&(t=t.replace(cSt,"\n".concat(n,"\nvoid troikaOrigMain").concat(e,"() {")),t+="\nvoid main() {\n  ".concat(i,"\n  troikaOrigMain").concat(e,"();\n  ").concat(r,"\n}")),t}function bSt(t,e){return"uniforms"===t?void 0:"function"===typeof e?e.toString():e}let _St=0;const xSt=new Map;const wSt=()=>(self.performance||Date).now(),SSt=sSt();let ESt;const MSt=[];let TSt=0;function kSt(){const t=wSt();for(;MSt.length&&wSt()-t<5;)MSt.shift()();TSt=MSt.length?setTimeout(kSt,0):0}const CSt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Promise(((t,n)=>{MSt.push((()=>{const i=wSt();try{SSt.webgl.generateIntoCanvas(...e),t({timing:wSt()-i})}catch(r){n(r)}})),TSt||(TSt=setTimeout(kSt,0))}))},ASt=4,PSt=2e3,OSt={};let RSt=0;function LSt(t,e,n,i,r,o,a,s,l,c){const u="TroikaTextSDFGenerator_JS_"+RSt++%ASt;let h=OSt[u];return h||(h=OSt[u]={workerModule:rSt({name:u,workerId:u,dependencies:[sSt,wSt],init(t,e){const n=t().javascript.generate;return function(){const t=e();return{textureData:n(...arguments),timing:e()-t}}},getTransferables:t=>[t.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(t,e,n,i,r,o).then((n=>{let{textureData:i,timing:r}=n;const o=wSt(),d=new Uint8Array(4*i.length);for(let t=0;t<i.length;t++)d[4*t+c]=i[t];return SSt.webglUtils.renderImageData(a,d,s,l,t,e,1<<3-c),r+=wSt()-o,0===--h.requests&&(h.idleTimer=setTimeout((()=>{!function(t){nSt[t]&&nSt[t].forEach((function(t){t()})),eSt[t]&&(eSt[t].terminate(),delete eSt[t])}(u)}),PSt)),{timing:r}}))}const DSt=SSt.webglUtils.resizeWebGLCanvasWithoutClearing;const ISt=rSt({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(t){var e={parse:function(t){var n=e._bin,i=new Uint8Array(t);if("ttcf"==n.readASCII(i,0,4)){var r=4;n.readUshort(i,r),r+=2,n.readUshort(i,r),r+=2;var o=n.readUint(i,r);r+=4;for(var a=[],s=0;s<o;s++){var l=n.readUint(i,r);r+=4,a.push(e._readFont(i,l))}return a}return[e._readFont(i,0)]},_readFont:function(t,n){var i=e._bin,r=n;i.readFixed(t,n),n+=4;var o=i.readUshort(t,n);n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:t,_offset:r},l={},c=0;c<o;c++){var u=i.readASCII(t,n,4);n+=4,i.readUint(t,n),n+=4;var h=i.readUint(t,n);n+=4;var d=i.readUint(t,n);n+=4,l[u]={offset:h,length:d}}for(c=0;c<a.length;c++){var f=a[c];l[f]&&(s[f.trim()]=e[f.trim()].parse(t,l[f].offset,l[f].length,s))}return s},_tabOffset:function(t,n,i){for(var r=e._bin,o=r.readUshort(t,i+4),a=i+12,s=0;s<o;s++){var l=r.readASCII(t,a,4);a+=4,r.readUint(t,a),a+=4;var c=r.readUint(t,a);if(a+=4,r.readUint(t,a),a+=4,l==n)return c}return 0}};e._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,n){return e._bin.readShort(t,n)/16384},readInt:function(t,n){return e._bin._view(t).getInt32(n)},readInt8:function(t,n){return e._bin._view(t).getInt8(n)},readShort:function(t,n){return e._bin._view(t).getInt16(n)},readUshort:function(t,n){return e._bin._view(t).getUint16(n)},readUshorts:function(t,n,i){for(var r=[],o=0;o<i;o++)r.push(e._bin.readUshort(t,n+2*o));return r},readUint:function(t,n){return e._bin._view(t).getUint32(n)},readUint64:function(t,n){return 4294967296*e._bin.readUint(t,n)+e._bin.readUint(t,n+4)},readASCII:function(t,e,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[e+r]);return i},readUnicode:function(t,e,n){for(var i="",r=0;r<n;r++){var o=t[e++]<<8|t[e++];i+=String.fromCharCode(o)}return i},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,n,i){var r=e._bin._tdec;return r&&0==n&&i==t.length?r.decode(t):e._bin.readASCII(t,n,i)},readBytes:function(t,e,n){for(var i=[],r=0;r<n;r++)i.push(t[e+r]);return i},readASCIIArray:function(t,e,n){for(var i=[],r=0;r<n;r++)i.push(String.fromCharCode(t[e+r]));return i},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},e._lctf={},e._lctf.parse=function(t,n,i,r,o){var a=e._bin,s={},l=n;a.readFixed(t,n),n+=4;var c=a.readUshort(t,n);n+=2;var u=a.readUshort(t,n);n+=2;var h=a.readUshort(t,n);return n+=2,s.scriptList=e._lctf.readScriptList(t,l+c),s.featureList=e._lctf.readFeatureList(t,l+u),s.lookupList=e._lctf.readLookupList(t,l+h,o),s},e._lctf.readLookupList=function(t,n,i){var r=e._bin,o=n,a=[],s=r.readUshort(t,n);n+=2;for(var l=0;l<s;l++){var c=r.readUshort(t,n);n+=2;var u=e._lctf.readLookupTable(t,o+c,i);a.push(u)}return a},e._lctf.readLookupTable=function(t,n,i){var r=e._bin,o=n,a={tabs:[]};a.ltype=r.readUshort(t,n),n+=2,a.flag=r.readUshort(t,n),n+=2;var s=r.readUshort(t,n);n+=2;for(var l=a.ltype,c=0;c<s;c++){var u=r.readUshort(t,n);n+=2;var h=i(t,l,o+u,a);a.tabs.push(h)}return a},e._lctf.numOfOnes=function(t){for(var e=0,n=0;n<32;n++)0!=(t>>>n&1)&&e++;return e},e._lctf.readClassDef=function(t,n){var i=e._bin,r=[],o=i.readUshort(t,n);if(n+=2,1==o){var a=i.readUshort(t,n);n+=2;var s=i.readUshort(t,n);n+=2;for(var l=0;l<s;l++)r.push(a+l),r.push(a+l),r.push(i.readUshort(t,n)),n+=2}if(2==o){var c=i.readUshort(t,n);for(n+=2,l=0;l<c;l++)r.push(i.readUshort(t,n)),n+=2,r.push(i.readUshort(t,n)),n+=2,r.push(i.readUshort(t,n)),n+=2}return r},e._lctf.getInterval=function(t,e){for(var n=0;n<t.length;n+=3){var i=t[n],r=t[n+1];if(t[n+2],i<=e&&e<=r)return n}return-1},e._lctf.readCoverage=function(t,n){var i=e._bin,r={};r.fmt=i.readUshort(t,n),n+=2;var o=i.readUshort(t,n);return n+=2,1==r.fmt&&(r.tab=i.readUshorts(t,n,o)),2==r.fmt&&(r.tab=i.readUshorts(t,n,3*o)),r},e._lctf.coverageIndex=function(t,n){var i=t.tab;if(1==t.fmt)return i.indexOf(n);if(2==t.fmt){var r=e._lctf.getInterval(i,n);if(-1!=r)return i[r+2]+(n-i[r])}return-1},e._lctf.readFeatureList=function(t,n){var i=e._bin,r=n,o=[],a=i.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var l=i.readASCII(t,n,4);n+=4;var c=i.readUshort(t,n);n+=2;var u=e._lctf.readFeatureTable(t,r+c);u.tag=l.trim(),o.push(u)}return o},e._lctf.readFeatureTable=function(t,n){var i=e._bin,r=n,o={},a=i.readUshort(t,n);n+=2,a>0&&(o.featureParams=r+a);var s=i.readUshort(t,n);n+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(i.readUshort(t,n+2*l));return o},e._lctf.readScriptList=function(t,n){var i=e._bin,r=n,o={},a=i.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var l=i.readASCII(t,n,4);n+=4;var c=i.readUshort(t,n);n+=2,o[l.trim()]=e._lctf.readScriptTable(t,r+c)}return o},e._lctf.readScriptTable=function(t,n){var i=e._bin,r=n,o={},a=i.readUshort(t,n);n+=2,o.default=e._lctf.readLangSysTable(t,r+a);var s=i.readUshort(t,n);n+=2;for(var l=0;l<s;l++){var c=i.readASCII(t,n,4);n+=4;var u=i.readUshort(t,n);n+=2,o[c.trim()]=e._lctf.readLangSysTable(t,r+u)}return o},e._lctf.readLangSysTable=function(t,n){var i=e._bin,r={};i.readUshort(t,n),n+=2,r.reqFeature=i.readUshort(t,n),n+=2;var o=i.readUshort(t,n);return n+=2,r.features=i.readUshorts(t,n,o),r},e.CFF={},e.CFF.parse=function(t,n,i){var r=e._bin;(t=new Uint8Array(t.buffer,n,i))[n=0],t[++n],t[++n],t[++n],n++;var o=[];n=e.CFF.readIndex(t,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(r.readASCII(t,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var l=[];n=e.CFF.readIndex(t,n,l);var c=[];for(s=0;s<l.length-1;s++)c.push(e.CFF.readDict(t,n+l[s],n+l[s+1]));n+=l[l.length-1];var u=c[0],h=[];n=e.CFF.readIndex(t,n,h);var d=[];for(s=0;s<h.length-1;s++)d.push(r.readASCII(t,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],e.CFF.readSubrs(t,n,u),u.CharStrings){n=u.CharStrings,h=[],n=e.CFF.readIndex(t,n,h);var f=[];for(s=0;s<h.length-1;s++)f.push(r.readBytes(t,n+h[s],h[s+1]-h[s]));u.CharStrings=f}if(u.ROS){n=u.FDArray;var p=[];for(n=e.CFF.readIndex(t,n,p),u.FDArray=[],s=0;s<p.length-1;s++){var g=e.CFF.readDict(t,n+p[s],n+p[s+1]);e.CFF._readFDict(t,g,d),u.FDArray.push(g)}n+=p[p.length-1],n=u.FDSelect,u.FDSelect=[];var m=t[n];if(n++,3!=m)throw m;var v=r.readUshort(t,n);for(n+=2,s=0;s<v+1;s++)u.FDSelect.push(r.readUshort(t,n),t[n+2]),n+=3}return u.Encoding&&(u.Encoding=e.CFF.readEncoding(t,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=e.CFF.readCharset(t,u.charset,u.CharStrings.length)),e.CFF._readFDict(t,u,d),u},e.CFF._readFDict=function(t,n,i){var r;for(var o in n.Private&&(r=n.Private[1],n.Private=e.CFF.readDict(t,r,r+n.Private[0]),n.Private.Subrs&&e.CFF.readSubrs(t,r+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=i[n[o]-426+35])},e.CFF.readSubrs=function(t,n,i){var r=e._bin,o=[];n=e.CFF.readIndex(t,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,i.Bias=a,i.Subrs=[];for(var l=0;l<o.length-1;l++)i.Subrs.push(r.readBytes(t,n+o[l],o[l+1]-o[l]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(t,e){for(var n=0;n<t.charset.length;n++)if(t.charset[n]==e)return n;return-1},e.CFF.glyphBySE=function(t,n){return n<0||n>255?-1:e.CFF.glyphByUnicode(t,e.CFF.tableSE[n])},e.CFF.readEncoding=function(t,n,i){e._bin;var r=[".notdef"],o=t[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=t[n];n++;for(var s=0;s<a;s++)r.push(t[n+s]);return r},e.CFF.readCharset=function(t,n,i){var r=e._bin,o=[".notdef"],a=t[n];if(n++,0==a)for(var s=0;s<i;s++){var l=r.readUshort(t,n);n+=2,o.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<i;){l=r.readUshort(t,n),n+=2;var c=0;for(1==a?(c=t[n],n++):(c=r.readUshort(t,n),n+=2),s=0;s<=c;s++)o.push(l),l++}}return o},e.CFF.readIndex=function(t,n,i){var r=e._bin,o=r.readUshort(t,n)+1,a=t[n+=2];if(n++,1==a)for(var s=0;s<o;s++)i.push(t[n+s]);else if(2==a)for(s=0;s<o;s++)i.push(r.readUshort(t,n+2*s));else if(3==a)for(s=0;s<o;s++)i.push(16777215&r.readUint(t,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},e.CFF.getCharString=function(t,n,i){var r=e._bin,o=t[n],a=t[n+1];t[n+2],t[n+3],t[n+4];var s=1,l=null,c=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+a,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(c=r.readShort(t,n+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(c=o-139,s=1),247<=o&&o<=250&&(c=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(c=256*-(o-251)-a-108,s=2),255==o&&(c=r.readInt(t,n+1)/65535,s=5),i.val=null!=c?c:"o"+l,i.size=s},e.CFF.readCharString=function(t,n,i){for(var r=n+i,o=e._bin,a=[];n<r;){var s=t[n],l=t[n+1];t[n+2],t[n+3],t[n+4];var c=1,u=null,h=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(h=o.readShort(t,n+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s&&(h=o.readInt(t,n+1)/65535,c=5),a.push(null!=h?h:"o"+u),n+=c}return a},e.CFF.readDict=function(t,n,i){for(var r=e._bin,o={},a=[];n<i;){var s=t[n],l=t[n+1];t[n+2],t[n+3],t[n+4];var c=1,u=null,h=null;if(28==s&&(h=r.readShort(t,n+1),c=3),29==s&&(h=r.readInt(t,n+1),c=5),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s)throw h=r.readInt(t,n+1)/65535,c=5,"unknown number";if(30==s){var d=[];for(c=1;;){var f=t[n+c];c++;var p=f>>4,g=15&f;if(15!=p&&d.push(p),15!=g&&d.push(g),15==g)break}for(var m="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)m+=v[d[y]];h=parseFloat(m)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==a.length?a[0]:a,a=[]):a.push(h),n+=c}return o},e.cmap={},e.cmap.parse=function(t,n,i){t=new Uint8Array(t.buffer,n,i),n=0;var r=e._bin,o={};r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);n+=2;var s=[];o.tables=[];for(var l=0;l<a;l++){var c=r.readUshort(t,n);n+=2;var u=r.readUshort(t,n);n+=2;var h=r.readUint(t,n);n+=4;var d="p"+c+"e"+u,f=s.indexOf(h);if(-1==f){var p;f=o.tables.length,s.push(h);var g=r.readUshort(t,h);0==g?p=e.cmap.parse0(t,h):4==g?p=e.cmap.parse4(t,h):6==g?p=e.cmap.parse6(t,h):12==g?p=e.cmap.parse12(t,h):console.debug("unknown format: "+g,c,u,h),o.tables.push(p)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=f}return o},e.cmap.parse0=function(t,n){var i=e._bin,r={};r.format=i.readUshort(t,n),n+=2;var o=i.readUshort(t,n);n+=2,i.readUshort(t,n),n+=2,r.map=[];for(var a=0;a<o-6;a++)r.map.push(t[n+a]);return r},e.cmap.parse4=function(t,n){var i=e._bin,r=n,o={};o.format=i.readUshort(t,n),n+=2;var a=i.readUshort(t,n);n+=2,i.readUshort(t,n),n+=2;var s=i.readUshort(t,n);n+=2;var l=s/2;o.searchRange=i.readUshort(t,n),n+=2,o.entrySelector=i.readUshort(t,n),n+=2,o.rangeShift=i.readUshort(t,n),n+=2,o.endCount=i.readUshorts(t,n,l),n+=2*l,n+=2,o.startCount=i.readUshorts(t,n,l),n+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(i.readShort(t,n)),n+=2;for(o.idRangeOffset=i.readUshorts(t,n,l),n+=2*l,o.glyphIdArray=[];n<r+a;)o.glyphIdArray.push(i.readUshort(t,n)),n+=2;return o},e.cmap.parse6=function(t,n){var i=e._bin,r={};r.format=i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2,r.firstCode=i.readUshort(t,n),n+=2;var o=i.readUshort(t,n);n+=2,r.glyphIdArray=[];for(var a=0;a<o;a++)r.glyphIdArray.push(i.readUshort(t,n)),n+=2;return r},e.cmap.parse12=function(t,n){var i=e._bin,r={};r.format=i.readUshort(t,n),n+=2,n+=2,i.readUint(t,n),n+=4,i.readUint(t,n),n+=4;var o=i.readUint(t,n);n+=4,r.groups=[];for(var a=0;a<o;a++){var s=n+12*a,l=i.readUint(t,s+0),c=i.readUint(t,s+4),u=i.readUint(t,s+8);r.groups.push([l,c,u])}return r},e.glyf={},e.glyf.parse=function(t,e,n,i){for(var r=[],o=0;o<i.maxp.numGlyphs;o++)r.push(null);return r},e.glyf._parseGlyf=function(t,n){var i=e._bin,r=t._data,o=e._tabOffset(r,"glyf",t._offset)+t.loca[n];if(t.loca[n]==t.loca[n+1])return null;var a={};if(a.noc=i.readShort(r,o),o+=2,a.xMin=i.readShort(r,o),o+=2,a.yMin=i.readShort(r,o),o+=2,a.xMax=i.readShort(r,o),o+=2,a.yMax=i.readShort(r,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(i.readUshort(r,o)),o+=2;var l=i.readUshort(r,o);if(o+=2,r.length-o<l)return null;a.instructions=i.readBytes(r,o,l),o+=l;var c=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<c;s++){var u=r[o];if(o++,a.flags.push(u),0!=(8&u)){var h=r[o];o++;for(var d=0;d<h;d++)a.flags.push(u),s++}}for(a.xs=[],s=0;s<c;s++){var f=0!=(2&a.flags[s]),p=0!=(16&a.flags[s]);f?(a.xs.push(p?r[o]:-r[o]),o++):p?a.xs.push(0):(a.xs.push(i.readShort(r,o)),o+=2)}for(a.ys=[],s=0;s<c;s++)f=0!=(4&a.flags[s]),p=0!=(32&a.flags[s]),f?(a.ys.push(p?r[o]:-r[o]),o++):p?a.ys.push(0):(a.ys.push(i.readShort(r,o)),o+=2);var g=0,m=0;for(s=0;s<c;s++)g+=a.xs[s],m+=a.ys[s],a.xs[s]=g,a.ys[s]=m}else{var v;a.parts=[];do{v=i.readUshort(r,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=i.readUshort(r,o),o+=2,1&v){var b=i.readShort(r,o);o+=2;var _=i.readShort(r,o);o+=2}else b=i.readInt8(r,o),o++,_=i.readInt8(r,o),o++;2&v?(y.m.tx=b,y.m.ty=_):(y.p1=b,y.p2=_),8&v?(y.m.a=y.m.d=i.readF2dot14(r,o),o+=2):64&v?(y.m.a=i.readF2dot14(r,o),o+=2,y.m.d=i.readF2dot14(r,o),o+=2):128&v&&(y.m.a=i.readF2dot14(r,o),o+=2,y.m.b=i.readF2dot14(r,o),o+=2,y.m.c=i.readF2dot14(r,o),o+=2,y.m.d=i.readF2dot14(r,o),o+=2)}while(32&v);if(256&v){var x=i.readUshort(r,o);for(o+=2,a.instr=[],s=0;s<x;s++)a.instr.push(r[o]),o++}}return a},e.GPOS={},e.GPOS.parse=function(t,n,i,r){return e._lctf.parse(t,n,i,r,e.GPOS.subt)},e.GPOS.subt=function(t,n,i,r){var o=e._bin,a=i,s={};if(s.fmt=o.readUshort(t,i),i+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=o.readUshort(t,i);i+=2,s.coverage=e._lctf.readCoverage(t,l+a)}if(1==n&&1==s.fmt){var c=o.readUshort(t,i);i+=2;var u=e._lctf.numOfOnes(c);0!=c&&(s.pos=e.GPOS.readValueRecord(t,i,c))}else if(2==n&&s.fmt>=1&&s.fmt<=2){c=o.readUshort(t,i),i+=2;var h=o.readUshort(t,i);i+=2,u=e._lctf.numOfOnes(c);var d=e._lctf.numOfOnes(h);if(1==s.fmt){s.pairsets=[];var f=o.readUshort(t,i);i+=2;for(var p=0;p<f;p++){var g=a+o.readUshort(t,i);i+=2;var m=o.readUshort(t,g);g+=2;for(var v=[],y=0;y<m;y++){var b=o.readUshort(t,g);g+=2,0!=c&&(M=e.GPOS.readValueRecord(t,g,c),g+=2*u),0!=h&&(T=e.GPOS.readValueRecord(t,g,h),g+=2*d),v.push({gid2:b,val1:M,val2:T})}s.pairsets.push(v)}}if(2==s.fmt){var _=o.readUshort(t,i);i+=2;var x=o.readUshort(t,i);i+=2;var w=o.readUshort(t,i);i+=2;var S=o.readUshort(t,i);for(i+=2,s.classDef1=e._lctf.readClassDef(t,a+_),s.classDef2=e._lctf.readClassDef(t,a+x),s.matrix=[],p=0;p<w;p++){var E=[];for(y=0;y<S;y++){var M=null,T=null;0!=c&&(M=e.GPOS.readValueRecord(t,i,c),i+=2*u),0!=h&&(T=e.GPOS.readValueRecord(t,i,h),i+=2*d),E.push({val1:M,val2:T})}s.matrix.push(E)}}}else{if(9==n&&1==s.fmt){var k=o.readUshort(t,i);i+=2;var C=o.readUint(t,i);if(i+=4,9==r.ltype)r.ltype=k;else if(r.ltype!=k)throw"invalid extension substitution";return e.GPOS.subt(t,r.ltype,a+C)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},e.GPOS.readValueRecord=function(t,n,i){var r=e._bin,o=[];return o.push(1&i?r.readShort(t,n):0),n+=1&i?2:0,o.push(2&i?r.readShort(t,n):0),n+=2&i?2:0,o.push(4&i?r.readShort(t,n):0),n+=4&i?2:0,o.push(8&i?r.readShort(t,n):0),n+=8&i?2:0,o},e.GSUB={},e.GSUB.parse=function(t,n,i,r){return e._lctf.parse(t,n,i,r,e.GSUB.subt)},e.GSUB.subt=function(t,n,i,r){var o=e._bin,a=i,s={};if(s.fmt=o.readUshort(t,i),i+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=o.readUshort(t,i);i+=2,s.coverage=e._lctf.readCoverage(t,a+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(t,i),i+=2;else if(2==s.fmt){var c=o.readUshort(t,i);i+=2,s.newg=o.readUshorts(t,i,c),i+=2*s.newg.length}}else if(4==n){s.vals=[],c=o.readUshort(t,i),i+=2;for(var u=0;u<c;u++){var h=o.readUshort(t,i);i+=2,s.vals.push(e.GSUB.readLigatureSet(t,a+h))}}else if(5==n&&2==s.fmt){if(2==s.fmt){var d=o.readUshort(t,i);i+=2,s.cDef=e._lctf.readClassDef(t,a+d),s.scset=[];var f=o.readUshort(t,i);for(i+=2,u=0;u<f;u++){var p=o.readUshort(t,i);i+=2,s.scset.push(0==p?null:e.GSUB.readSubClassSet(t,a+p))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=o.readUshort(t,i),i+=2;for(var g=[],m=0;m<c;m++)g.push(e._lctf.readCoverage(t,a+o.readUshort(t,i+2*m)));i+=2*c,0==u&&(s.backCvg=g),1==u&&(s.inptCvg=g),2==u&&(s.ahedCvg=g)}c=o.readUshort(t,i),i+=2,s.lookupRec=e.GSUB.readSubstLookupRecords(t,i,c)}}else{if(7==n&&1==s.fmt){var v=o.readUshort(t,i);i+=2;var y=o.readUint(t,i);if(i+=4,9==r.ltype)r.ltype=v;else if(r.ltype!=v)throw"invalid extension substitution";return e.GSUB.subt(t,r.ltype,a+y)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},e.GSUB.readSubClassSet=function(t,n){var i=e._bin.readUshort,r=n,o=[],a=i(t,n);n+=2;for(var s=0;s<a;s++){var l=i(t,n);n+=2,o.push(e.GSUB.readSubClassRule(t,r+l))}return o},e.GSUB.readSubClassRule=function(t,n){var i=e._bin.readUshort,r={},o=i(t,n),a=i(t,n+=2);n+=2,r.input=[];for(var s=0;s<o-1;s++)r.input.push(i(t,n)),n+=2;return r.substLookupRecords=e.GSUB.readSubstLookupRecords(t,n,a),r},e.GSUB.readSubstLookupRecords=function(t,n,i){for(var r=e._bin.readUshort,o=[],a=0;a<i;a++)o.push(r(t,n),r(t,n+2)),n+=4;return o},e.GSUB.readChainSubClassSet=function(t,n){var i=e._bin,r=n,o=[],a=i.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var l=i.readUshort(t,n);n+=2,o.push(e.GSUB.readChainSubClassRule(t,r+l))}return o},e.GSUB.readChainSubClassRule=function(t,n){for(var i=e._bin,r={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=i.readUshort(t,n);n+=2,1==a&&s--,r[o[a]]=i.readUshorts(t,n,s),n+=2*r[o[a]].length}return s=i.readUshort(t,n),n+=2,r.subst=i.readUshorts(t,n,2*s),n+=2*r.subst.length,r},e.GSUB.readLigatureSet=function(t,n){var i=e._bin,r=n,o=[],a=i.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var l=i.readUshort(t,n);n+=2,o.push(e.GSUB.readLigature(t,r+l))}return o},e.GSUB.readLigature=function(t,n){var i=e._bin,r={chain:[]};r.nglyph=i.readUshort(t,n),n+=2;var o=i.readUshort(t,n);n+=2;for(var a=0;a<o-1;a++)r.chain.push(i.readUshort(t,n)),n+=2;return r},e.head={},e.head.parse=function(t,n,i){var r=e._bin,o={};return r.readFixed(t,n),n+=4,o.fontRevision=r.readFixed(t,n),n+=4,r.readUint(t,n),n+=4,r.readUint(t,n),n+=4,o.flags=r.readUshort(t,n),n+=2,o.unitsPerEm=r.readUshort(t,n),n+=2,o.created=r.readUint64(t,n),n+=8,o.modified=r.readUint64(t,n),n+=8,o.xMin=r.readShort(t,n),n+=2,o.yMin=r.readShort(t,n),n+=2,o.xMax=r.readShort(t,n),n+=2,o.yMax=r.readShort(t,n),n+=2,o.macStyle=r.readUshort(t,n),n+=2,o.lowestRecPPEM=r.readUshort(t,n),n+=2,o.fontDirectionHint=r.readShort(t,n),n+=2,o.indexToLocFormat=r.readShort(t,n),n+=2,o.glyphDataFormat=r.readShort(t,n),n+=2,o},e.hhea={},e.hhea.parse=function(t,n,i){var r=e._bin,o={};return r.readFixed(t,n),n+=4,o.ascender=r.readShort(t,n),n+=2,o.descender=r.readShort(t,n),n+=2,o.lineGap=r.readShort(t,n),n+=2,o.advanceWidthMax=r.readUshort(t,n),n+=2,o.minLeftSideBearing=r.readShort(t,n),n+=2,o.minRightSideBearing=r.readShort(t,n),n+=2,o.xMaxExtent=r.readShort(t,n),n+=2,o.caretSlopeRise=r.readShort(t,n),n+=2,o.caretSlopeRun=r.readShort(t,n),n+=2,o.caretOffset=r.readShort(t,n),n+=2,n+=8,o.metricDataFormat=r.readShort(t,n),n+=2,o.numberOfHMetrics=r.readUshort(t,n),n+=2,o},e.hmtx={},e.hmtx.parse=function(t,n,i,r){for(var o=e._bin,a={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<r.maxp.numGlyphs;c++)c<r.hhea.numberOfHMetrics&&(s=o.readUshort(t,n),n+=2,l=o.readShort(t,n),n+=2),a.aWidth.push(s),a.lsBearing.push(l);return a},e.kern={},e.kern.parse=function(t,n,i,r){var o=e._bin,a=o.readUshort(t,n);if(n+=2,1==a)return e.kern.parseV1(t,n-2,i,r);var s=o.readUshort(t,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){n+=2,i=o.readUshort(t,n),n+=2;var u=o.readUshort(t,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=e.kern.readFormat0(t,n,l)}return l},e.kern.parseV1=function(t,n,i,r){var o=e._bin;o.readFixed(t,n),n+=4;var a=o.readUint(t,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<a;l++){o.readUint(t,n),n+=4;var c=o.readUshort(t,n);n+=2,o.readUshort(t,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=e.kern.readFormat0(t,n,s)}return s},e.kern.readFormat0=function(t,n,i){var r=e._bin,o=-1,a=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2;for(var s=0;s<a;s++){var l=r.readUshort(t,n);n+=2;var c=r.readUshort(t,n);n+=2;var u=r.readShort(t,n);n+=2,l!=o&&(i.glyph1.push(l),i.rval.push({glyph2:[],vals:[]}));var h=i.rval[i.rval.length-1];h.glyph2.push(c),h.vals.push(u),o=l}return n},e.loca={},e.loca.parse=function(t,n,i,r){var o=e._bin,a=[],s=r.head.indexToLocFormat,l=r.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)a.push(o.readUshort(t,n+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)a.push(o.readUint(t,n+(c<<2)));return a},e.maxp={},e.maxp.parse=function(t,n,i){var r=e._bin,o={},a=r.readUint(t,n);return n+=4,o.numGlyphs=r.readUshort(t,n),n+=2,65536==a&&(o.maxPoints=r.readUshort(t,n),n+=2,o.maxContours=r.readUshort(t,n),n+=2,o.maxCompositePoints=r.readUshort(t,n),n+=2,o.maxCompositeContours=r.readUshort(t,n),n+=2,o.maxZones=r.readUshort(t,n),n+=2,o.maxTwilightPoints=r.readUshort(t,n),n+=2,o.maxStorage=r.readUshort(t,n),n+=2,o.maxFunctionDefs=r.readUshort(t,n),n+=2,o.maxInstructionDefs=r.readUshort(t,n),n+=2,o.maxStackElements=r.readUshort(t,n),n+=2,o.maxSizeOfInstructions=r.readUshort(t,n),n+=2,o.maxComponentElements=r.readUshort(t,n),n+=2,o.maxComponentDepth=r.readUshort(t,n),n+=2),o},e.name={},e.name.parse=function(t,n,i){var r=e._bin,o={};r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);n+=2,r.readUshort(t,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<a;u++){var h=r.readUshort(t,n);n+=2;var d=r.readUshort(t,n);n+=2;var f=r.readUshort(t,n);n+=2;var p=r.readUshort(t,n);n+=2;var g=r.readUshort(t,n);n+=2;var m=r.readUshort(t,n);n+=2;var v,y=l[p],b=c+12*a+m;if(0==h)v=r.readUnicode(t,b,g/2);else if(3==h&&0==d)v=r.readUnicode(t,b,g/2);else if(0==d)v=r.readASCII(t,b,g);else if(1==d)v=r.readUnicode(t,b,g/2);else if(3==d)v=r.readUnicode(t,b,g/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;v=r.readASCII(t,b,g),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var _="p"+h+","+f.toString(16);null==o[_]&&(o[_]={}),o[_][void 0!==y?y:p]=v,o[_]._lang=f}for(var x in o)if(null!=o[x].postScriptName&&1033==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&0==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&3084==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName)return o[x];for(var x in o){s=x;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},e["OS/2"]={},e["OS/2"].parse=function(t,n,i){var r=e._bin.readUshort(t,n);n+=2;var o={};if(0==r)e["OS/2"].version0(t,n,o);else if(1==r)e["OS/2"].version1(t,n,o);else if(2==r||3==r||4==r)e["OS/2"].version2(t,n,o);else{if(5!=r)throw"unknown OS/2 table version: "+r;e["OS/2"].version5(t,n,o)}return o},e["OS/2"].version0=function(t,n,i){var r=e._bin;return i.xAvgCharWidth=r.readShort(t,n),n+=2,i.usWeightClass=r.readUshort(t,n),n+=2,i.usWidthClass=r.readUshort(t,n),n+=2,i.fsType=r.readUshort(t,n),n+=2,i.ySubscriptXSize=r.readShort(t,n),n+=2,i.ySubscriptYSize=r.readShort(t,n),n+=2,i.ySubscriptXOffset=r.readShort(t,n),n+=2,i.ySubscriptYOffset=r.readShort(t,n),n+=2,i.ySuperscriptXSize=r.readShort(t,n),n+=2,i.ySuperscriptYSize=r.readShort(t,n),n+=2,i.ySuperscriptXOffset=r.readShort(t,n),n+=2,i.ySuperscriptYOffset=r.readShort(t,n),n+=2,i.yStrikeoutSize=r.readShort(t,n),n+=2,i.yStrikeoutPosition=r.readShort(t,n),n+=2,i.sFamilyClass=r.readShort(t,n),n+=2,i.panose=r.readBytes(t,n,10),n+=10,i.ulUnicodeRange1=r.readUint(t,n),n+=4,i.ulUnicodeRange2=r.readUint(t,n),n+=4,i.ulUnicodeRange3=r.readUint(t,n),n+=4,i.ulUnicodeRange4=r.readUint(t,n),n+=4,i.achVendID=[r.readInt8(t,n),r.readInt8(t,n+1),r.readInt8(t,n+2),r.readInt8(t,n+3)],n+=4,i.fsSelection=r.readUshort(t,n),n+=2,i.usFirstCharIndex=r.readUshort(t,n),n+=2,i.usLastCharIndex=r.readUshort(t,n),n+=2,i.sTypoAscender=r.readShort(t,n),n+=2,i.sTypoDescender=r.readShort(t,n),n+=2,i.sTypoLineGap=r.readShort(t,n),n+=2,i.usWinAscent=r.readUshort(t,n),n+=2,i.usWinDescent=r.readUshort(t,n),n+2},e["OS/2"].version1=function(t,n,i){var r=e._bin;return n=e["OS/2"].version0(t,n,i),i.ulCodePageRange1=r.readUint(t,n),n+=4,i.ulCodePageRange2=r.readUint(t,n),n+4},e["OS/2"].version2=function(t,n,i){var r=e._bin;return n=e["OS/2"].version1(t,n,i),i.sxHeight=r.readShort(t,n),n+=2,i.sCapHeight=r.readShort(t,n),n+=2,i.usDefault=r.readUshort(t,n),n+=2,i.usBreak=r.readUshort(t,n),n+=2,i.usMaxContext=r.readUshort(t,n),n+2},e["OS/2"].version5=function(t,n,i){var r=e._bin;return n=e["OS/2"].version2(t,n,i),i.usLowerOpticalPointSize=r.readUshort(t,n),n+=2,i.usUpperOpticalPointSize=r.readUshort(t,n),n+2},e.post={},e.post.parse=function(t,n,i){var r=e._bin,o={};return o.version=r.readFixed(t,n),n+=4,o.italicAngle=r.readFixed(t,n),n+=4,o.underlinePosition=r.readShort(t,n),n+=2,o.underlineThickness=r.readShort(t,n),n+=2,o},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(t,e){var n=t.cmap,i=-1;if(null!=n.p0e4?i=n.p0e4:null!=n.p3e1?i=n.p3e1:null!=n.p1e0?i=n.p1e0:null!=n.p0e3&&(i=n.p0e3),-1==i)throw"no familiar platform and encoding!";var r=n.tables[i];if(0==r.format)return e>=r.map.length?0:r.map[e];if(4==r.format){for(var o=-1,a=0;a<r.endCount.length;a++)if(e<=r.endCount[a]){o=a;break}return-1==o||r.startCount[o]>e?0:65535&(0!=r.idRangeOffset[o]?r.glyphIdArray[e-r.startCount[o]+(r.idRangeOffset[o]>>1)-(r.idRangeOffset.length-o)]:e+r.idDelta[o])}if(12==r.format){if(e>r.groups[r.groups.length-1][1])return 0;for(a=0;a<r.groups.length;a++){var s=r.groups[a];if(s[0]<=e&&e<=s[1])return s[2]+(e-s[0])}return 0}throw"unknown cmap table format "+r.format},e.U.glyphToPath=function(t,n){var i={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[n]){var r=t.SVG.entries[n];return null==r?i:("string"==typeof r&&(r=e.SVG.toPath(r),t.SVG.entries[n]=r),r)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,s=t.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=n;)l+=2;s=a.FDArray[a.FDSelect[l+1]].Private}e.U._drawCFF(t.CFF.CharStrings[n],o,a,s,i)}else t.glyf&&e.U._drawGlyf(n,t,i);return i},e.U._drawGlyf=function(t,n,i){var r=n.glyf[t];null==r&&(r=n.glyf[t]=e.glyf._parseGlyf(n,t)),null!=r&&(r.noc>-1?e.U._simpleGlyph(r,i):e.U._compoGlyph(r,n,i))},e.U._simpleGlyph=function(t,n){for(var i=0;i<t.noc;i++){for(var r=0==i?0:t.endPts[i-1]+1,o=t.endPts[i],a=r;a<=o;a++){var s=a==r?o:a-1,l=a==o?r:a+1,c=1&t.flags[a],u=1&t.flags[s],h=1&t.flags[l],d=t.xs[a],f=t.ys[a];if(a==r)if(c){if(!u){e.U.P.moveTo(n,d,f);continue}e.U.P.moveTo(n,t.xs[s],t.ys[s])}else u?e.U.P.moveTo(n,t.xs[s],t.ys[s]):e.U.P.moveTo(n,(t.xs[s]+d)/2,(t.ys[s]+f)/2);c?u&&e.U.P.lineTo(n,d,f):h?e.U.P.qcurveTo(n,d,f,t.xs[l],t.ys[l]):e.U.P.qcurveTo(n,d,f,(d+t.xs[l])/2,(f+t.ys[l])/2)}e.U.P.closePath(n)}},e.U._compoGlyph=function(t,n,i){for(var r=0;r<t.parts.length;r++){var o={cmds:[],crds:[]},a=t.parts[r];e.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];i.crds.push(c*s.a+u*s.b+s.tx),i.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)i.cmds.push(o.cmds[l])}},e.U._getGlyphClass=function(t,n){var i=e._lctf.getInterval(n,t);return-1==i?0:n[i+2]},e.U.getPairAdjustment=function(t,n,i){var r=!1;if(t.GPOS)for(var o=t.GPOS,a=o.lookupList,s=o.featureList,l=[],c=0;c<s.length;c++){var u=s[c];if("kern"==u.tag){r=!0;for(var h=0;h<u.tab.length;h++)if(!l[u.tab[h]]){l[u.tab[h]]=!0;for(var d=a[u.tab[h]],f=0;f<d.tabs.length;f++)if(null!=d.tabs[f]){var p,g=d.tabs[f];if(!g.coverage||-1!=(p=e._lctf.coverageIndex(g.coverage,n)))if(1==d.ltype);else if(2==d.ltype){var m=null;if(1==g.fmt){var v=g.pairsets[p];for(c=0;c<v.length;c++)v[c].gid2==i&&(m=v[c])}else if(2==g.fmt){var y=e.U._getGlyphClass(n,g.classDef1),b=e.U._getGlyphClass(i,g.classDef2);m=g.matrix[y][b]}if(m){var _=0;return m.val1&&m.val1[2]&&(_+=m.val1[2]),m.val2&&m.val2[0]&&(_+=m.val2[0]),_}}}}}}if(t.kern&&!r){var x=t.kern.glyph1.indexOf(n);if(-1!=x){var w=t.kern.rval[x].glyph2.indexOf(i);if(-1!=w)return t.kern.rval[x].vals[w]}}return 0},e.U._applySubs=function(t,n,i,r){for(var o=t.length-n-1,a=0;a<i.tabs.length;a++)if(null!=i.tabs[a]){var s,l=i.tabs[a];if(!l.coverage||-1!=(s=e._lctf.coverageIndex(l.coverage,t[n])))if(1==i.ltype)t[n],1==l.fmt?t[n]=t[n]+l.delta:t[n]=l.newg[s];else if(4==i.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>o)){for(var f=!0,p=0,g=0;g<d;g++){for(;-1==t[n+p+(1+g)];)p++;h.chain[g]!=t[n+p+(1+g)]&&(f=!1)}if(f){for(t[n]=h.nglyph,g=0;g<d+p;g++)t[n+g+1]=-1;break}}}else if(5==i.ltype&&2==l.fmt)for(var m=e._lctf.getInterval(l.cDef,t[n]),v=l.cDef[m+2],y=l.scset[v],b=0;b<y.length;b++){var _=y[b],x=_.input;if(!(x.length>o)){for(f=!0,g=0;g<x.length;g++){var w=e._lctf.getInterval(l.cDef,t[n+1+g]);if(-1==m&&l.cDef[w+2]!=x[g]){f=!1;break}}if(f){var S=_.substLookupRecords;for(u=0;u<S.length;u+=2)S[u],S[u+1]}}}else if(6==i.ltype&&3==l.fmt){if(!e.U._glsCovered(t,l.backCvg,n-l.backCvg.length))continue;if(!e.U._glsCovered(t,l.inptCvg,n))continue;if(!e.U._glsCovered(t,l.ahedCvg,n+l.inptCvg.length))continue;var E=l.lookupRec;for(b=0;b<E.length;b+=2){m=E[b];var M=r[E[b+1]];e.U._applySubs(t,n+m,M,r)}}}},e.U._glsCovered=function(t,n,i){for(var r=0;r<n.length;r++)if(-1==e._lctf.coverageIndex(n[r],t[i+r]))return!1;return!0},e.U.glyphsToPath=function(t,n,i){for(var r={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var l=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,c=e.U.glyphToPath(t,s),u=0;u<c.crds.length;u+=2)r.crds.push(c.crds[u]+o),r.crds.push(c.crds[u+1]);for(i&&r.cmds.push(i),u=0;u<c.cmds.length;u++)r.cmds.push(c.cmds[u]);i&&r.cmds.push("X"),o+=t.hmtx.aWidth[s],a<n.length-1&&(o+=e.U.getPairAdjustment(t,s,l))}}return r},e.U.P={},e.U.P.moveTo=function(t,e,n){t.cmds.push("M"),t.crds.push(e,n)},e.U.P.lineTo=function(t,e,n){t.cmds.push("L"),t.crds.push(e,n)},e.U.P.curveTo=function(t,e,n,i,r,o,a){t.cmds.push("C"),t.crds.push(e,n,i,r,o,a)},e.U.P.qcurveTo=function(t,e,n,i,r){t.cmds.push("Q"),t.crds.push(e,n,i,r)},e.U.P.closePath=function(t){t.cmds.push("Z")},e.U._drawCFF=function(t,n,i,r,o){for(var a=n.stack,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,d=n.x,f=n.y,p=0,g=0,m=0,v=0,y=0,b=0,_=0,x=0,w=0,S=0,E={val:0,size:0};h<t.length;){e.CFF.getCharString(t,h,E);var M=E.val;if(h+=E.size,"o1"==M||"o18"==M)a.length%2!=0&&!l&&(c=a.shift()+r.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o3"==M||"o23"==M)a.length%2!=0&&!l&&(c=a.shift()+r.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o4"==M)a.length>1&&!l&&(c=a.shift()+r.nominalWidthX,l=!0),u&&e.U.P.closePath(o),f+=a.pop(),e.U.P.moveTo(o,d,f),u=!0;else if("o5"==M)for(;a.length>0;)d+=a.shift(),f+=a.shift(),e.U.P.lineTo(o,d,f);else if("o6"==M||"o7"==M)for(var T=a.length,k="o6"==M,C=0;C<T;C++){var A=a.shift();k?d+=A:f+=A,k=!k,e.U.P.lineTo(o,d,f)}else if("o8"==M||"o24"==M){T=a.length;for(var P=0;P+6<=T;)p=d+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),d=m+a.shift(),f=v+a.shift(),e.U.P.curveTo(o,p,g,m,v,d,f),P+=6;"o24"==M&&(d+=a.shift(),f+=a.shift(),e.U.P.lineTo(o,d,f))}else{if("o11"==M)break;if("o1234"==M||"o1235"==M||"o1236"==M||"o1237"==M)"o1234"==M&&(g=f,m=(p=d+a.shift())+a.shift(),S=v=g+a.shift(),b=v,x=f,d=(_=(y=(w=m+a.shift())+a.shift())+a.shift())+a.shift(),e.U.P.curveTo(o,p,g,m,v,w,S),e.U.P.curveTo(o,y,b,_,x,d,f)),"o1235"==M&&(p=d+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),w=m+a.shift(),S=v+a.shift(),y=w+a.shift(),b=S+a.shift(),_=y+a.shift(),x=b+a.shift(),d=_+a.shift(),f=x+a.shift(),a.shift(),e.U.P.curveTo(o,p,g,m,v,w,S),e.U.P.curveTo(o,y,b,_,x,d,f)),"o1236"==M&&(p=d+a.shift(),g=f+a.shift(),m=p+a.shift(),S=v=g+a.shift(),b=v,_=(y=(w=m+a.shift())+a.shift())+a.shift(),x=b+a.shift(),d=_+a.shift(),e.U.P.curveTo(o,p,g,m,v,w,S),e.U.P.curveTo(o,y,b,_,x,d,f)),"o1237"==M&&(p=d+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),w=m+a.shift(),S=v+a.shift(),y=w+a.shift(),b=S+a.shift(),_=y+a.shift(),x=b+a.shift(),Math.abs(_-d)>Math.abs(x-f)?d=_+a.shift():f=x+a.shift(),e.U.P.curveTo(o,p,g,m,v,w,S),e.U.P.curveTo(o,y,b,_,x,d,f));else if("o14"==M){if(a.length>0&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),4==a.length){var O=a.shift(),R=a.shift(),L=a.shift(),D=a.shift(),I=e.CFF.glyphBySE(i,L),N=e.CFF.glyphBySE(i,D);e.U._drawCFF(i.CharStrings[I],n,i,r,o),n.x=O,n.y=R,e.U._drawCFF(i.CharStrings[N],n,i,r,o)}u&&(e.U.P.closePath(o),u=!1)}else if("o19"==M||"o20"==M)a.length%2!=0&&!l&&(c=a.shift()+r.nominalWidthX),s+=a.length>>1,a.length=0,l=!0,h+=s+7>>3;else if("o21"==M)a.length>2&&!l&&(c=a.shift()+r.nominalWidthX,l=!0),f+=a.pop(),d+=a.pop(),u&&e.U.P.closePath(o),e.U.P.moveTo(o,d,f),u=!0;else if("o22"==M)a.length>1&&!l&&(c=a.shift()+r.nominalWidthX,l=!0),d+=a.pop(),u&&e.U.P.closePath(o),e.U.P.moveTo(o,d,f),u=!0;else if("o25"==M){for(;a.length>6;)d+=a.shift(),f+=a.shift(),e.U.P.lineTo(o,d,f);p=d+a.shift(),g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),d=m+a.shift(),f=v+a.shift(),e.U.P.curveTo(o,p,g,m,v,d,f)}else if("o26"==M)for(a.length%2&&(d+=a.shift());a.length>0;)p=d,g=f+a.shift(),d=m=p+a.shift(),f=(v=g+a.shift())+a.shift(),e.U.P.curveTo(o,p,g,m,v,d,f);else if("o27"==M)for(a.length%2&&(f+=a.shift());a.length>0;)g=f,m=(p=d+a.shift())+a.shift(),v=g+a.shift(),d=m+a.shift(),f=v,e.U.P.curveTo(o,p,g,m,v,d,f);else if("o10"==M||"o29"==M){var z="o10"==M?r:i;if(0==a.length)console.debug("error: empty stack");else{var F=a.pop(),U=z.Subrs[F+z.Bias];n.x=d,n.y=f,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u,e.U._drawCFF(U,n,i,r,o),d=n.x,f=n.y,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==M||"o31"==M){var B=a.length,j=(P=0,"o31"==M);for(P+=B-(T=-3&B);P<T;)j?(g=f,m=(p=d+a.shift())+a.shift(),f=(v=g+a.shift())+a.shift(),T-P==5?(d=m+a.shift(),P++):d=m,j=!1):(p=d,g=f+a.shift(),m=p+a.shift(),v=g+a.shift(),d=m+a.shift(),T-P==5?(f=v+a.shift(),P++):f=v,j=!0),e.U.P.curveTo(o,p,g,m,v,d,f),P+=4}else{if("o"==(M+"").charAt(0))throw console.debug("Unknown operation: "+M,t),M;a.push(M)}}}n.x=d,n.y=f,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u};var n=e,i={Typr:n};return t.Typr=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr},function(){return function(t){var e=Uint8Array,n=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var r=new n(31),o=0;o<31;++o)r[o]=e+=1<<t[o-1];var a=new i(r[30]);for(o=1;o<30;++o)for(var s=r[o];s<r[o+1];++s)a[s]=s-r[o]<<5|o;return[r,a]},l=s(r,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=s(o,0)[0],d=new n(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(t,e,i){for(var r=t.length,o=0,a=new n(e);o<r;++o)++a[t[o]-1];var s,l=new n(e);for(o=0;o<e;++o)l[o]=l[o-1]+a[o-1]<<1;if(i){s=new n(1<<e);var c=15-e;for(o=0;o<r;++o)if(t[o])for(var u=o<<4|t[o],h=e-t[o],f=l[t[o]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)s[d[f]>>>c]=u}else for(s=new n(r),o=0;o<r;++o)t[o]&&(s[o]=d[l[t[o]-1]++]>>>15-t[o]);return s},m=new e(288);for(f=0;f<144;++f)m[f]=8;for(f=144;f<256;++f)m[f]=9;for(f=256;f<280;++f)m[f]=7;for(f=280;f<288;++f)m[f]=8;var v=new e(32);for(f=0;f<32;++f)v[f]=5;var y=g(m,9,1),b=g(v,5,1),_=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},x=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(7&e)&n},w=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,e,n){var i=new Error(e||S[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,E),!n)throw i;return i},M=function(t,s,l){var u=t.length;if(!u||l&&!l.l&&u<5)return s||new e(0);var d=!s||l,f=!l||l.i;l||(l={}),s||(s=new e(3*u));var p,m=function(t){var n=s.length;if(t>n){var i=new e(Math.max(2*n,t));i.set(s),s=i}},v=l.f||0,S=l.p||0,M=l.b||0,T=l.l,k=l.d,C=l.m,A=l.n,P=8*u;do{if(!T){l.f=v=x(t,S,1);var O=x(t,S+1,3);if(S+=3,!O){var R=t[(V=((p=S)/8|0)+(7&p&&1)+4)-4]|t[V-3]<<8,L=V+R;if(L>u){f&&E(0);break}d&&m(M+R),s.set(t.subarray(V,L),M),l.b=M+=R,l.p=S=8*L;continue}if(1==O)T=y,k=b,C=9,A=5;else if(2==O){var D=x(t,S,31)+257,I=x(t,S+10,15)+4,N=D+x(t,S+5,31)+1;S+=14;for(var z=new e(N),F=new e(19),U=0;U<I;++U)F[a[U]]=x(t,S+3*U,7);S+=3*I;var B=_(F),j=(1<<B)-1,H=g(F,B,1);for(U=0;U<N;){var V,G=H[x(t,S,j)];if(S+=15&G,(V=G>>>4)<16)z[U++]=V;else{var W=0,q=0;for(16==V?(q=3+x(t,S,3),S+=2,W=z[U-1]):17==V?(q=3+x(t,S,7),S+=3):18==V&&(q=11+x(t,S,127),S+=7);q--;)z[U++]=W}}var X=z.subarray(0,D),Y=z.subarray(D);C=_(X),A=_(Y),T=g(X,C,1),k=g(Y,A,1)}else E(1);if(S>P){f&&E(0);break}}d&&m(M+131072);for(var K=(1<<C)-1,Z=(1<<A)-1,Q=S;;Q=S){var J=(W=T[w(t,S)&K])>>>4;if((S+=15&W)>P){f&&E(0);break}if(W||E(2),J<256)s[M++]=J;else{if(256==J){Q=S,T=null;break}var $=J-254;if(J>264){var tt=r[U=J-257];$=x(t,S,(1<<tt)-1)+c[U],S+=tt}var et=k[w(t,S)&Z],nt=et>>>4;if(et||E(3),S+=15&et,Y=h[nt],nt>3&&(tt=o[nt],Y+=w(t,S)&(1<<tt)-1,S+=tt),S>P){f&&E(0);break}d&&m(M+131072);for(var it=M+$;M<it;M+=4)s[M]=s[M-Y],s[M+1]=s[M+1-Y],s[M+2]=s[M+2-Y],s[M+3]=s[M+3-Y];M=it}}l.l=T,l.p=Q,l.b=M,T&&(v=1,l.m=C,l.d=k,l.n=A)}while(!v);return M==s.length?s:function(t,r,o){(null==r||r<0)&&(r=0),(null==o||o>t.length)&&(o=t.length);var a=new(t instanceof n?n:t instanceof i?i:e)(o-r);return a.set(t.subarray(r,o)),a}(s,0,M)},T=new e(0),k="undefined"!=typeof TextDecoder&&new TextDecoder;try{k.decode(T,{stream:!0})}catch(t){}return t.convert_streams=function(t){var e=new DataView(t),n=0;function i(){var t=e.getUint16(n);return n+=2,t}function r(){var t=e.getUint32(n);return n+=4,t}function o(t){v.setUint16(y,t),y+=2}function a(t){v.setUint32(y,t),y+=4}for(var s={signature:r(),flavor:r(),length:r(),numTables:i(),reserved:i(),totalSfntSize:r(),majorVersion:i(),minorVersion:i(),metaOffset:r(),metaLength:r(),metaOrigLength:r(),privOffset:r(),privLength:r()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*s.numTables-c,h=12,d=[],f=0;f<s.numTables;f++)d.push({tag:r(),offset:r(),compLength:r(),origLength:r(),origChecksum:r()}),h+=16;var p,g=new Uint8Array(12+16*d.length+d.reduce((function(t,e){return t+e.origLength+4}),0)),m=g.buffer,v=new DataView(m),y=0;return a(s.flavor),o(s.numTables),o(c),o(l),o(u),d.forEach((function(t){a(t.tag),a(t.origChecksum),a(h),a(t.origLength),t.outOffset=h,(h+=t.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(e){var n,i=t.slice(e.offset,e.offset+e.compLength);if(e.compLength!=e.origLength){var r=new Uint8Array(e.origLength);n=new Uint8Array(i,2),M(n,r)}else r=new Uint8Array(i);g.set(r,e.outOffset);var o=0;(h=e.outOffset+e.origLength)%4!=0&&(o=4-h%4),g.set(new Uint8Array(o).buffer,e.outOffset+e.origLength),p=h+o})),m.slice(0,p)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams},function(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,o=2,a=4,s=8,l=16,c=32;let u;function h(t){if(!u){const t={R:o,L:r,D:a,C:l,U:c,T:s};u=new Map;for(let e in i){let n=0;i[e].split(",").forEach((i=>{let[r,o]=i.split("+");r=parseInt(r,36),o=o?parseInt(o,36):0,u.set(n+=r,t[e]);for(let a=o;a--;)u.set(++n,t[e])}))}}return u.get(t)||c}const d=1,f=2,p=3,g=4,m=[null,"isol","init","fina","medi"];function v(t){const e=new Uint8Array(t.length);let n=c,i=d,u=-1;for(let m=0;m<t.length;m++){const v=t.codePointAt(m);let y=0|h(v),b=d;y&s||(n&(r|a|l)?y&(o|a|l)?(b=p,i!==d&&i!==p||e[u]++):y&(r|c)&&(i!==f&&i!==g||e[u]--):n&(o|c)&&(i!==f&&i!==g||e[u]--),i=e[m]=b,n=y,u=m,v>65535&&m++)}return e}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let i=0;i<e.length;i++)if("number"===typeof e[i])return e[i]}function b(e){const i=Object.create(null),r=e["OS/2"],o=e.hhea,a=e.head.unitsPerEm,s=y(r&&r.sTypoAscender,o&&o.ascender,a),l={unitsPerEm:a,ascender:s,descender:y(r&&r.sTypoDescender,o&&o.descender,0),capHeight:y(r&&r.sCapHeight,s),xHeight:y(r&&r.sxHeight,s),lineGap:y(r&&r.sTypoLineGap,o&&o.lineGap),forEachGlyph(r,o,a,s){let c=0;const u=1/l.unitsPerEm*o,h=function(e,n){const i=[];for(let o=0;o<n.length;o++){const r=n.codePointAt(o);r>65535&&o++,i.push(t.U.codeToGlyph(e,r))}const r=e.GSUB;if(r){const{lookupList:e,featureList:o}=r;let a;const s=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,l=[];o.forEach((r=>{if(s.test(r.tag))for(let o=0;o<r.tab.length;o++){if(l[r.tab[o]])continue;l[r.tab[o]]=!0;const s=e[r.tab[o]],c=/^(isol|init|fina|medi)$/.test(r.tag);c&&!a&&(a=v(n));for(let n=0;n<i.length;n++)a&&c&&m[a[n]]!==r.tag||t.U._applySubs(i,n,s,e)}}))}return i}(e,r);let d=0,f=-1;return h.forEach(((l,h)=>{if(-1!==l){let r=i[l];if(!r){const{cmds:o,crds:a}=t.U.glyphToPath(e,l);let s,c,u,h,d="",f=0;for(let t=0,e=o.length;t<e;t++){const e=n[o[t]];d+=o[t];for(let t=1;t<=e;t++)d+=(t>1?",":"")+a[f++]}if(a.length){s=c=1/0,u=h=-1/0;for(let t=0,e=a.length;t<e;t+=2){let e=a[t],n=a[t+1];e<s&&(s=e),n<c&&(c=n),e>u&&(u=e),n>h&&(h=n)}}else s=u=c=h=0;r=i[l]={index:l,advanceWidth:e.hmtx.aWidth[l],xMin:s,yMin:c,xMax:u,yMax:h,path:d,pathCommandCount:o.length}}-1!==f&&(c+=t.U.getPairAdjustment(e,f,l)*u),s.call(null,r,c,d),r.advanceWidth&&(c+=r.advanceWidth*u),a&&(c+=a*o),f=l}d+=r.codePointAt(d)>65535?2:1})),c}};return l}return function(n){const i=new Uint8Array(n,0,4),r=t._bin.readASCII(i,0,4);if("wOFF"===r)n=e(n);else if("wOF2"===r)throw new Error("woff2 fonts not supported");return b(t.parse(n)[0])}}],init:(t,e,n)=>n(t(),e())}),NSt={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},zSt=new Aat;let FSt=!1;function USt(){return(self.performance||Date).now()}const BSt=Object.create(null);function jSt(t,e){FSt=!0,t=VSt({},t);const n=USt();if(t.font=function(t){GSt||(GSt="undefined"===typeof document?{}:document.createElement("a"));return GSt.href=t,GSt.href}(t.font||NSt.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||NSt.sdfGlyphSize,null!=t.colorRanges){let e={};for(let n in t.colorRanges)if(t.colorRanges.hasOwnProperty(n)){let i=t.colorRanges[n];"number"!==typeof i&&(i=zSt.set(i).getHex()),e[n]=i}t.colorRanges=e}Object.freeze(t);const{textureWidth:i,sdfExponent:r}=NSt,{sdfGlyphSize:o}=t,a=i/o*4;let s=BSt[o];if(!s){const t=document.createElement("canvas");t.width=i,t.height=256*o/a,s=BSt[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:t,sdfTexture:new tot(t,void 0,void 0,void 0,ant,ant),contextLost:!1,glyphsByFont:new Map},s.sdfTexture.generateMipmaps=!1,function(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",(e=>{console.log("Context Lost",e),e.preventDefault(),t.contextLost=!0})),e.addEventListener("webglcontextrestored",(e=>{console.log("Context Restored",e),t.contextLost=!1;const n=[];t.glyphsByFont.forEach((e=>{e.forEach((e=>{n.push(HSt(e,t,!0))}))})),Promise.all(n).then((()=>{WSt(t),t.sdfTexture.needsUpdate=!0}))}))}(s)}const{sdfTexture:l,sdfCanvas:c}=s;let u=s.glyphsByFont.get(t.font);u||s.glyphsByFont.set(t.font,u=new Map),XSt(t).then((h=>{const{glyphIds:d,glyphPositions:f,fontSize:p,unitsPerEm:g,timings:m}=h,v=[],y=new Float32Array(4*d.length),b=p/g;let _=0,x=0;const w=USt();d.forEach(((t,e)=>{let n=u.get(t);if(!n){const{path:e,pathBounds:i}=h.glyphData[t],r=Math.max(i[2]-i[0],i[3]-i[1])/o*(NSt.sdfMargin*o+.5),a=s.glyphCount++,l=[i[0]-r,i[1]-r,i[2]+r,i[3]+r];u.set(t,n={path:e,atlasIndex:a,sdfViewBox:l}),v.push(n)}const{sdfViewBox:i}=n,r=f[x++],a=f[x++];y[_++]=r+i[0]*b,y[_++]=a+i[1]*b,y[_++]=r+i[2]*b,y[_++]=a+i[3]*b,d[e]=n.atlasIndex})),m.quads=(m.quads||0)+(USt()-w);const S=USt();m.sdf={};const E=c.height,M=Math.ceil(s.glyphCount/a),T=Math.pow(2,Math.ceil(Math.log2(M*o)));T>E&&(console.info("Increasing SDF texture size ".concat(E,"->").concat(T)),DSt(c,i,T),l.dispose()),Promise.all(v.map((e=>HSt(e,s,t.gpuAccelerateSDF).then((t=>{let{timing:n}=t;m.sdf[e.atlasIndex]=n}))))).then((()=>{v.length&&!s.contextLost&&(WSt(s),l.needsUpdate=!0),m.sdfTotal=USt()-S,m.total=USt()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:o,sdfExponent:r,glyphBounds:y,glyphAtlasIndices:d,glyphColors:h.glyphColors,caretPositions:h.caretPositions,caretHeight:h.caretHeight,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))}))})),Promise.resolve().then((()=>{s.contextLost||function(t){t._warm||(SSt.webgl.isSupported(t),t._warm=!0)}(c)}))}function HSt(t,e,n){let{path:i,atlasIndex:r,sdfViewBox:o}=t,{sdfGlyphSize:a,sdfCanvas:s,contextLost:l}=e;if(l)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:u}=NSt,h=Math.max(o[2]-o[0],o[3]-o[1]),d=Math.floor(r/4);return function(t,e,n,i,r,o,a,s,l,c){return arguments.length>10&&void 0!==arguments[10]&&!arguments[10]?LSt(t,e,n,i,r,o,a,s,l,c):CSt(t,e,n,i,r,o,a,s,l,c).then(null,(u=>(ESt||(console.warn("WebGL SDF generation failed, falling back to JS",u),ESt=!0),LSt(t,e,n,i,r,o,a,s,l,c))))}(a,a,i,o,h,u,s,d%(c/a)*a,Math.floor(d/(c/a))*a,r%4,n)}function VSt(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let GSt;function WSt(t){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:i,height:r}=e,o=t.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===i*r*4||(a=new Uint8Array(i*r*4),n.image={width:i,height:r,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,i,r,o.RGBA,o.UNSIGNED_BYTE,a)}}const qSt=rSt({name:"Typesetter",dependencies:[NSt,ISt,function(t,e,n){const{defaultFontURL:i}=n,r=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",l=new RegExp("".concat(s,"|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]"));function c(e,n){e||(e=i);let o=r[e];o?o.pending?o.pending.push(n):n(o):(r[e]={pending:[n]},function(e,n){!function r(){const o=t=>{console.error("Failure loading font ".concat(e).concat(e===i?"":"; trying fallback"),t),e!==i&&(e=i,r())};try{const i=new XMLHttpRequest;i.open("get",e,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)o(new Error(i.statusText));else if(i.status>0)try{const e=t(i.response);n(e)}catch(e){o(e)}},i.onerror=o,i.send()}catch(a){o(a)}}()}(e,(t=>{let n=r[e].pending;r[e]=t,n.forEach((e=>e(t)))})))}function u(t,n){let{text:r="",font:u=i,sdfGlyphSize:g=64,fontSize:m=1,letterSpacing:v=0,lineHeight:y="normal",maxWidth:b=o,direction:_,textAlign:x="left",textIndent:w=0,whiteSpace:S="normal",overflowWrap:E="normal",anchorX:M=0,anchorY:T=0,includeCaretPositions:k=!1,chunkedBoundsSize:C=8192,colorRanges:A=null}=t,P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const O=f(),R={fontLoad:0,typesetting:0};r.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),r=r.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),m=+m,v=+v,b=+b,y=y||"normal",w=+w,c(u,(t=>{const i=isFinite(b);let c=null,u=null,g=null,L=null,D=null,I=null,N=null,z=0,F=0,U="nowrap"!==S;const{ascender:B,descender:j,unitsPerEm:H,lineGap:V,capHeight:G,xHeight:W}=t;R.fontLoad=f()-O;const q=f(),X=m/H;"normal"===y&&(y=(B-j+V)/H),y*=m;const Y=(y-(B-j)*X)/2,K=-(B*X+Y),Z=Math.min(y,(B-j)*X),Q=(B+j)/2*X-Z/2;let J=w,$=new p;const tt=[$];t.forEachGlyph(r,m,v,((t,e,n)=>{const o=r.charAt(n),c=t.advanceWidth*X,u=$.count;let h;if("isEmpty"in t||(t.isWhitespace=!!o&&new RegExp(s).test(o),t.canBreakAfter=!!o&&l.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||a.test(o)),t.isWhitespace||t.isEmpty||F++,U&&i&&!t.isWhitespace&&e+c+J>b&&u){if($.glyphAt(u-1).glyphObj.canBreakAfter)h=new p,J=-e;else for(let t=u;t--;){if(0===t&&"break-word"===E){h=new p,J=-e;break}if($.glyphAt(t).glyphObj.canBreakAfter){h=$.splitAt(t+1);const e=h.glyphAt(0).x;J-=e;for(let t=h.count;t--;)h.glyphAt(t).x-=e;break}}h&&($.isSoftWrapped=!0,$=h,tt.push($),z=b)}let d=$.glyphAt($.count);d.glyphObj=t,d.x=e+J,d.width=c,d.charIndex=n,"\n"===o&&($=new p,tt.push($),J=-(e+c+v*m)+w)})),tt.forEach((t=>{for(let e=t.count;e--;){let{glyphObj:n,x:i,width:r}=t.glyphAt(e);if(!n.isWhitespace)return t.width=i+r,void(t.width>z&&(z=t.width))}}));let et=0,nt=0;if(M&&("number"===typeof M?et=-M:"string"===typeof M&&(et=-z*("left"===M?0:"center"===M?.5:"right"===M?1:h(M)))),T)if("number"===typeof T)nt=-T;else if("string"===typeof T){let t=tt.length*y;nt="top"===T?0:"top-baseline"===T?-K:"top-cap"===T?-K-G*X:"top-ex"===T?-K-W*X:"middle"===T?t/2:"bottom"===T?t:"bottom-baseline"===T?t-Y+j*X:h(T)*t}if(!P){const n=e.getEmbeddingLevels(r,_);c=new Uint16Array(F),u=new Float32Array(2*F),g={},I=[o,o,-o,-o],N=[];let i=K;k&&(D=new Float32Array(3*r.length)),A&&(L=new Uint8Array(3*F));let a,s,l=0,h=-1,f=-1;if(tt.forEach(((p,m)=>{let{count:v,width:b}=p;if(v>0){let m=0;for(let t=v;t--&&p.glyphAt(t).glyphObj.isWhitespace;)m++;let y=0,_=0;if("center"===x)y=(z-b)/2;else if("right"===x)y=z-b;else if("justify"===x&&p.isSoftWrapped){let t=0;for(let e=v-m;e--;)p.glyphAt(e).glyphObj.isWhitespace&&t++;_=(z-b)/t}if(_||y){let t=0;for(let e=0;e<v;e++){let n=p.glyphAt(e);const i=n.glyphObj;n.x+=y+t,0!==_&&i.isWhitespace&&e<v-m&&(t+=_,n.width+=_)}}const w=e.getReorderSegments(r,n,p.glyphAt(0).charIndex,p.glyphAt(p.count-1).charIndex);for(let t=0;t<w.length;t++){const[e,n]=w[t];let i=1/0,r=-1/0;for(let t=0;t<v;t++)if(p.glyphAt(t).charIndex>=e){let e=t,o=t;for(;o<v;o++){let t=p.glyphAt(o);if(t.charIndex>n)break;o<v-m&&(i=Math.min(i,t.x),r=Math.max(r,t.x+t.width))}for(let t=e;t<o;t++){const e=p.glyphAt(t);e.x=r-(e.x+e.width-i)}break}}let S;const E=t=>S=t;for(let b=0;b<v;b++){let m=p.glyphAt(b);S=m.glyphObj;const v=S.index,y=1&n.levels[m.charIndex];if(y){const n=e.getMirroredCharacter(r[m.charIndex]);n&&t.forEachGlyph(n,0,0,E)}if(k){const{charIndex:t}=m,e=m.x+et,n=m.x+m.width+et;D[3*t]=y?n:e,D[3*t+1]=y?e:n,D[3*t+2]=i+Q+nt;const r=t-h;r>1&&d(D,h,r),h=t}if(A){const{charIndex:t}=m;for(;t>f;)f++,A.hasOwnProperty(f)&&(s=A[f])}if(!S.isWhitespace&&!S.isEmpty){const t=l++;g[v]||(g[v]={path:S.path,pathBounds:[S.xMin,S.yMin,S.xMax,S.yMax]});const e=m.x+et,n=i+nt;u[2*t]=e,u[2*t+1]=n;const r=e+S.xMin*X,h=n+S.yMin*X,d=e+S.xMax*X,f=n+S.yMax*X;r<I[0]&&(I[0]=r),h<I[1]&&(I[1]=h),d>I[2]&&(I[2]=d),f>I[3]&&(I[3]=f),t%C===0&&(a={start:t,end:t,rect:[o,o,-o,-o]},N.push(a)),a.end++;const p=a.rect;if(r<p[0]&&(p[0]=r),h<p[1]&&(p[1]=h),d>p[2]&&(p[2]=d),f>p[3]&&(p[3]=f),c[t]=v,A){const e=3*t;L[e]=s>>16&255,L[e+1]=s>>8&255,L[e+2]=255&s}}}}i-=y})),D){const t=r.length-h;t>1&&d(D,h,t)}}R.typesetting=f()-q,n({glyphIds:c,glyphPositions:u,glyphData:g,caretPositions:D,caretHeight:Z,glyphColors:L,chunkedBounds:N,fontSize:m,unitsPerEm:H,ascender:B*X,descender:j*X,capHeight:G*X,xHeight:W*X,lineHeight:y,topBaseline:K,blockBounds:[et,nt-tt.length*y,et+z,nt],visibleBounds:I,timings:R})}))}function h(t){let e=t.match(/^([\d.]+)%$/),n=e?parseFloat(e[1]):NaN;return isNaN(n)?0:n/100}function d(t,e,n){const i=t[3*e],r=t[3*e+1],o=t[3*e+2],a=(r-i)/n;for(let s=0;s<n;s++){const n=3*(e+s);t[n]=i+a*s,t[n+1]=i+a*(s+1),t[n+2]=o}}function f(){return(self.performance||Date).now()}function p(){this.data=[]}const g=["glyphObj","x","width","charIndex"];return p.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(t){let e=p.flyweight;return e.data=this.data,e.index=t,e},splitAt(t){let e=new p;return e.data=this.data.splice(t*g.length),e}},p.flyweight=g.reduce(((t,e,n,i)=>(Object.defineProperty(t,e,{get(){return this.data[this.index*g.length+n]},set(t){this.data[this.index*g.length+n]=t}}),t)),{data:null,index:0}),{typeset:u,measure:function(t,e){u(t,(t=>{const[n,i,r,o]=t.blockBounds;e({width:r-n,height:o-i})}),{metricsOnly:!0})},loadFont:c}},lSt],init(t,e,n,i){const{defaultFontURL:r}=t;return n(e,i(),{defaultFontURL:r})}}),XSt=rSt({name:"Typesetter",dependencies:[qSt],init:t=>function(e){return new Promise((n=>{t.typeset(e,n)}))},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}});const YSt={};const KSt="aTroikaGlyphIndex";class ZSt extends xpt{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Pot,this.boundingBox=new dot}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const e=this.getIndex().count;this.setDrawRange(t===net?e/2:0,t===iet?e:e/2)}set detail(t){if(t!==this._detail){this._detail=t,("number"!==typeof t||t<1)&&(t=1);let e=function(t){let e=YSt[t];if(!e){const n=new Gst(1,1,t,t),i=n.clone(),r=n.attributes,o=i.attributes,a=new ist,s=r.uv.count;for(let t=0;t<s;t++)o.position.array[3*t]*=-1,o.normal.array[3*t+2]*=-1;["position","normal","uv"].forEach((t=>{a.setAttribute(t,new Yat([...r[t].array,...o[t].array],r[t].itemSize))})),a.setIndex([...n.index.array,...i.index.array.map((t=>t+s))]),a.translate(.5,.5,0),e=YSt[t]=a}return e}(t);["position","normal","uv"].forEach((t=>{this.attributes[t]=e.attributes[t].clone()})),this.setIndex(e.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,e,n,i,r){QSt(this,"aTroikaGlyphBounds",t,4),QSt(this,KSt,e,1),QSt(this,"aTroikaGlyphColor",r,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=e.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:e,boundingBox:n}=this;if(e){const{PI:i,floor:r,min:o,max:a,sin:s,cos:l}=Math,c=i/2,u=2*i,h=Math.abs(e),d=t[0]/h,f=t[2]/h,p=r((d+c)/u)!==r((f+c)/u)?-h:o(s(d)*h,s(f)*h),g=r((d-c)/u)!==r((f-c)/u)?h:a(s(d)*h,s(f)*h),m=r((d+i)/u)!==r((f+i)/u)?2*h:a(h-l(d)*h,h-l(f)*h);n.min.set(p,t[1],e<0?-m:0),n.max.set(g,t[3],e<0?0:m)}else n.min.set(t[0],t[1],0),n.max.set(t[2],t[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let e=this.getAttribute(KSt).count,n=this._chunkedBounds;if(n)for(let i=n.length;i--;){e=n[i].end;let r=n[i].rect;if(r[1]<t.w&&r[3]>t.y&&r[0]<t.z&&r[2]>t.x)break}this.instanceCount=e}}function QSt(t,e,n,i){const r=t.getAttribute(e);n?r&&r.array.length===n.length?(r.array.set(n),r.needsUpdate=!0):(t.setAttribute(e,new cht(n,i)),delete t._maxInstanceCount,t.dispose()):r&&t.deleteAttribute(e)}const JSt="\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n".concat("\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n"),$St="\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  ".concat("\n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  ","\n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  ","\n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n");const tEt=new Oat({color:16777215,side:iet,transparent:!0}),eEt=8421504,nEt=new Uot,iEt=new cot,rEt=new cot,oEt=[],aEt=new cot,sEt="+x+y";function lEt(t){return Array.isArray(t)?t[0]:t}let cEt=()=>{const t=new xst(new Gst(1,1),tEt);return cEt=()=>t,t},uEt=()=>{const t=new xst(new Gst(1,1,32,1),tEt);return uEt=()=>t,t};const hEt={type:"syncstart"},dEt={type:"synccomplete"},fEt=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],pEt=fEt.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class gEt extends xst{constructor(){super(new ZSt,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=eEt,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=sEt,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(hEt),jSt({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(e=>{this._isSyncing=!1,this._textRenderInfo=e,this.geometry.updateGlyphs(e.glyphBounds,e.glyphAtlasIndices,e.blockBounds,e.chunkedBounds,e.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((t=>t&&t()))}))),this.dispatchEvent(dEt),t&&t()}))))}onBeforeRender(t,e,n,i,r,o){this.sync(),r.isTroikaTextMaterial&&this._prepareForRender(r),r._hadOwnSide=r.hasOwnProperty("side"),this.geometry.setSide(r._actualSide=r.side),r.side=eet}onAfterRender(t,e,n,i,r,o){r._hadOwnSide?r.side=r._actualSide:delete r.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const e=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=tEt.clone());if(t&&t.baseMaterial===e||(t=this._derivedMaterial=function(t){const e=vSt(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Rrt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new eot(0,0,0,0)},uTroikaClipRect:{value:new eot(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Rrt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Aat},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Lrt},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:JSt,fragmentDefs:$St,fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter(t){let{vertexShader:e,fragmentShader:n}=t,i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(e)||(e=e.replace(cSt,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}(e),e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let e=t._outlineMtl;return e||(e=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),e.isTextOutlineMaterial=!0,e.depthWrite=!1,e.map=null,t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),[e,t]}return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return lEt(this.material).getDepthMaterial()}get customDistanceMaterial(){return lEt(this.material).getDistanceMaterial()}_prepareForRender(t){const e=t.isTextOutlineMaterial,n=t.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:t,blockBounds:r}=i;n.uTroikaSDFTexture.value=t,n.uTroikaSDFTextureSize.value.set(t.image.width,t.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(r),n.uTroikaUseGlyphColors.value=!e&&!!i.glyphColors;let o,a,s,l=0,c=0,u=0,h=0,d=0;if(e){let{outlineWidth:t,outlineOffsetX:e,outlineOffsetY:n,outlineBlur:i,outlineOpacity:r}=this;l=this._parsePercent(t)||0,c=Math.max(0,this._parsePercent(i)||0),o=r,h=this._parsePercent(e)||0,d=this._parsePercent(n)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?eEt:s),a=this.strokeOpacity,null==a&&(a=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=l,n.uTroikaPositionOffset.value.set(h,d),n.uTroikaBlurRadius.value=c,n.uTroikaStrokeWidth.value=u,n.uTroikaStrokeOpacity.value=a,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;let f=this.clipRect;if(f&&Array.isArray(f)&&4===f.length)n.uTroikaClipRect.value.fromArray(f);else{const t=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(r[0]-t,r[1]-t,r[2]+t,r[3]+t)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const r=e?this.outlineColor||0:this.color;if(null==r)delete t.color;else{const e=t.hasOwnProperty("color")?t.color:t.color=new Aat;r===e._input&&"object"!==typeof r||e.set(e._input=r)}let o=this.orientation||sEt;if(o!==t._orientation){let e=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let i=o!==sEt&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(i){let[,t,n,r,o]=i;iEt.set(0,0,0)[n]="-"===t?1:-1,rEt.set(0,0,0)[o]="-"===r?-1:1,nEt.lookAt(aEt,iEt.cross(rEt),rEt),e.setFromMatrix4(nEt)}else e.identity();t._orientation=o}}_parsePercent(t){if("string"===typeof t){let e=t.match(/^(-?[\d.]+)%$/),n=e?parseFloat(e[1]):NaN;t=(isNaN(n)?0:n/100)*this.fontSize}return t}localPositionToTextCoords(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt;e.copy(t);const n=this.curveRadius;return n&&(e.x=Math.atan2(t.x,Math.abs(n)-Math.abs(t.z))*Math.abs(n)),e}worldPositionToTextCoords(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Rrt;return iEt.copy(t),this.localPositionToTextCoords(this.worldToLocal(iEt),e)}raycast(t,e){const{textRenderInfo:n,curveRadius:i}=this;if(n){const r=n.blockBounds,o=i?uEt():cEt(),a=o.geometry,{position:s,uv:l}=a.attributes;for(let t=0;t<l.count;t++){let e=r[0]+l.getX(t)*(r[2]-r[0]);const n=r[1]+l.getY(t)*(r[3]-r[1]);let o=0;i&&(o=i-Math.cos(e/i)*i,e=Math.sin(e/i)*i),s.setXYZ(t,e,n,o)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,oEt.length=0,o.raycast(t,oEt);for(let t=0;t<oEt.length;t++)oEt[t].object=this,e.push(oEt[t])}}copy(t){const e=this.geometry;return super.copy(t),this.geometry=e,pEt.forEach((e=>{this[e]=t[e]})),this}clone(){return(new this.constructor).copy(this)}}fEt.forEach((t=>{const e="_private_"+t;Object.defineProperty(gEt.prototype,t,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})}));new WeakMap;new WeakMap;const mEt=e.forwardRef(((t,n)=>{let{sdfGlyphSize:i=64,anchorX:r="center",anchorY:o="middle",font:a,fontSize:s=1,children:l,characters:c,onSync:u,...h}=t;const d=rvt((t=>{let{invalidate:e}=t;return e})),[f]=e.useState((()=>new gEt)),[p,g]=e.useMemo((()=>{const t=[];let n="";return e.Children.forEach(l,(e=>{"string"===typeof e||"number"===typeof e?n+=e:t.push(e)})),[t,n]}),[l]);return dmt((()=>new Promise((t=>function(t,e){let{font:n,characters:i,sdfGlyphSize:r}=t;jSt({font:n,sdfGlyphSize:r,text:Array.isArray(i)?i.join("\n"):""+i},e)}({font:a,characters:c},t)))),["troika-text",a,c]),e.useLayoutEffect((()=>{f.sync((()=>{d(),u&&u(f)}))})),e.useEffect((()=>()=>f.dispose()),[f]),e.createElement("primitive",yvt({object:f,ref:n,font:a,text:g,anchorX:r,anchorY:o,fontSize:s,sdfGlyphSize:i},h),p)}));class vEt extends Gft{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,e,n,i){const r=this,o=new Xft(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(n){try{e(r.parse(n))}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}}),n,i)}parse(t){const e=this;function n(t,e,n,r,o,a,s,l){if(0==e||0==n)return void t.lineTo(l.x,l.y);r=r*Math.PI/180,e=Math.abs(e),n=Math.abs(n);const c=(s.x-l.x)/2,u=(s.y-l.y)/2,h=Math.cos(r)*c+Math.sin(r)*u,d=-Math.sin(r)*c+Math.cos(r)*u;let f=e*e,p=n*n;const g=h*h,m=d*d,v=g/f+m/p;if(v>1){const t=Math.sqrt(v);f=(e*=t)*e,p=(n*=t)*n}const y=f*m+p*g,b=(f*p-y)/y;let _=Math.sqrt(Math.max(0,b));o===a&&(_=-_);const x=_*e*d/n,w=-_*n*h/e,S=Math.cos(r)*x-Math.sin(r)*w+(s.x+l.x)/2,E=Math.sin(r)*x+Math.cos(r)*w+(s.y+l.y)/2,M=i(1,0,(h-x)/e,(d-w)/n),T=i((h-x)/e,(d-w)/n,(-h-x)/e,(-d-w)/n)%(2*Math.PI);t.currentPath.absellipse(S,E,e,n,M,M+T,0===a,r)}function i(t,e,n,i){const r=t*n+e*i,o=Math.sqrt(t*t+e*e)*Math.sqrt(n*n+i*i);let a=Math.acos(Math.max(-1,Math.min(1,r/o)));return t*i-e*n<0&&(a=-a),a}function r(t,e){e=Object.assign({},e);let n={};if(t.hasAttribute("class")){const e=t.getAttribute("class").split(/\s/).filter(Boolean).map((t=>t.trim()));for(let t=0;t<e.length;t++)n=Object.assign(n,f["."+e[t]])}function i(i,r,o){void 0===o&&(o=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(i)&&(e[r]=o(t.getAttribute(i))),n[i]&&(e[r]=o(n[i])),t.style&&""!==t.style[i]&&(e[r]=o(t.style[i]))}function r(t){return Math.max(0,Math.min(1,c(t)))}function o(t){return Math.max(0,c(t))}return t.hasAttribute("id")&&(n=Object.assign(n,f["#"+t.getAttribute("id")])),i("fill","fill"),i("fill-opacity","fillOpacity",r),i("fill-rule","fillRule"),i("opacity","opacity",r),i("stroke","stroke"),i("stroke-opacity","strokeOpacity",r),i("stroke-width","strokeWidth",o),i("stroke-linejoin","strokeLineJoin"),i("stroke-linecap","strokeLineCap"),i("stroke-miterlimit","strokeMiterLimit",o),i("visibility","visibility"),e}function o(t,e){return t-(e-t)}function a(t,e,n){if("string"!==typeof t)throw new TypeError("Invalid input: "+typeof t);const i={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let r=0,o=!0,a="",s="";const l=[];function c(t,e,n){const i=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw i.partial=n,i}function u(){""!==a&&(""===s?l.push(Number(a)):l.push(Number(a)*Math.pow(10,Number(s)))),a="",s=""}let h;const d=t.length;for(let f=0;f<d;f++)if(h=t[f],Array.isArray(e)&&e.includes(l.length%n)&&i.FLAGS.test(h))r=1,a=h,u();else{if(0===r){if(i.WHITESPACE.test(h))continue;if(i.DIGIT.test(h)||i.SIGN.test(h)){r=1,a=h;continue}if(i.POINT.test(h)){r=2,a=h;continue}i.COMMA.test(h)&&(o&&c(h,f,l),o=!0)}if(1===r){if(i.DIGIT.test(h)){a+=h;continue}if(i.POINT.test(h)){a+=h,r=2;continue}if(i.EXP.test(h)){r=3;continue}i.SIGN.test(h)&&1===a.length&&i.SIGN.test(a[0])&&c(h,f,l)}if(2===r){if(i.DIGIT.test(h)){a+=h;continue}if(i.EXP.test(h)){r=3;continue}i.POINT.test(h)&&"."===a[a.length-1]&&c(h,f,l)}if(3===r){if(i.DIGIT.test(h)){s+=h;continue}if(i.SIGN.test(h)){if(""===s){s+=h;continue}1===s.length&&i.SIGN.test(s)&&c(h,f,l)}}i.WHITESPACE.test(h)?(u(),r=0,o=!1):i.COMMA.test(h)?(u(),r=0,o=!0):i.SIGN.test(h)?(u(),r=1,a=h):i.POINT.test(h)?(u(),r=2,a=h):c(h,f,l)}return u(),l}const s=["mm","cm","in","pt","pc","px"],l={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(t){let n,i="px";if("string"===typeof t||t instanceof String)for(let e=0,r=s.length;e<r;e++){const n=s[e];if(t.endsWith(n)){i=n,t=t.substring(0,t.length-n.length);break}}return"px"===i&&"px"!==e.defaultUnit?n=l.in[e.defaultUnit]/e.defaultDPI:(n=l[i][e.defaultUnit],n<0&&(n=l[i].in*e.defaultDPI)),n*parseFloat(t)}function u(t){const e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function h(t){const e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}const d=[],f={},p=[],g=new Lrt,m=new Lrt,v=new Lrt,y=new Lrt,b=new Rrt,_=new cot,x=new Lrt,w=(new DOMParser).parseFromString(t,"image/svg+xml");!function t(e,i){if(1!==e.nodeType)return;const s=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;const e=function(t){const e=new Lrt,n=g;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){const n=c(t.getAttribute("x")),i=c(t.getAttribute("y"));e.translate(n,i)}if(t.hasAttribute("transform")){const i=t.getAttribute("transform").split(")");for(let t=i.length-1;t>=0;t--){const r=i[t].trim();if(""===r)continue;const o=r.indexOf("("),s=r.length;if(o>0&&o<s){const t=r.substr(0,o),e=a(r.substr(o+1,s-o-1));switch(n.identity(),t){case"translate":if(e.length>=1){const t=e[0];let i=t;e.length>=2&&(i=e[1]),n.translate(t,i)}break;case"rotate":if(e.length>=1){let t=0,i=0,r=0;t=-e[0]*Math.PI/180,e.length>=3&&(i=e[1],r=e[2]),m.identity().translate(-i,-r),v.identity().rotate(t),y.multiplyMatrices(v,m),m.identity().translate(i,r),n.multiplyMatrices(m,y)}break;case"scale":if(e.length>=1){const t=e[0];let i=t;e.length>=2&&(i=e[1]),n.scale(t,i)}break;case"skewX":1===e.length&&n.set(1,Math.tan(e[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===e.length&&n.set(1,0,0,Math.tan(e[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===e.length&&n.set(e[0],e[2],e[4],e[1],e[3],e[5],0,0,1)}}e.premultiply(n)}}return e}(t);p.length>0&&e.premultiply(p[p.length-1]);return x.copy(e),p.push(e),e}(e);let l=!0,w=null;switch(e.nodeName){case"svg":break;case"style":!function(t){if(!t.sheet||!t.sheet.cssRules||!t.sheet.cssRules.length)return;for(let e=0;e<t.sheet.cssRules.length;e++){const n=t.sheet.cssRules[e];if(1!==n.type)continue;const i=n.selectorText.split(/,/gm).filter(Boolean).map((t=>t.trim()));for(let t=0;t<i.length;t++)f[i[t]]=Object.assign(f[i[t]]||{},n.style)}}(e);break;case"g":i=r(e,i);break;case"path":i=r(e,i),e.hasAttribute("d")&&(w=function(t){const e=new emt,i=new Rrt,r=new Rrt,s=new Rrt;let l=!0,c=!1;const u=t.getAttribute("d"),h=u.match(/[a-df-z][^a-df-z]*/gi);for(let d=0,f=h.length;d<f;d++){const t=h[d],u=t.charAt(0),f=t.substr(1).trim();let p;switch(!0===l&&(c=!0,l=!1),u){case"M":p=a(f);for(let t=0,n=p.length;t<n;t+=2)i.x=p[t+0],i.y=p[t+1],r.x=i.x,r.y=i.y,0===t?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y),0===t&&s.copy(i);break;case"H":p=a(f);for(let t=0,n=p.length;t<n;t++)i.x=p[t],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===t&&!0===c&&s.copy(i);break;case"V":p=a(f);for(let t=0,n=p.length;t<n;t++)i.y=p[t],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===t&&!0===c&&s.copy(i);break;case"L":p=a(f);for(let t=0,n=p.length;t<n;t+=2)i.x=p[t+0],i.y=p[t+1],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===t&&!0===c&&s.copy(i);break;case"C":p=a(f);for(let t=0,n=p.length;t<n;t+=6)e.bezierCurveTo(p[t+0],p[t+1],p[t+2],p[t+3],p[t+4],p[t+5]),r.x=p[t+2],r.y=p[t+3],i.x=p[t+4],i.y=p[t+5],0===t&&!0===c&&s.copy(i);break;case"S":p=a(f);for(let t=0,n=p.length;t<n;t+=4)e.bezierCurveTo(o(i.x,r.x),o(i.y,r.y),p[t+0],p[t+1],p[t+2],p[t+3]),r.x=p[t+0],r.y=p[t+1],i.x=p[t+2],i.y=p[t+3],0===t&&!0===c&&s.copy(i);break;case"Q":p=a(f);for(let t=0,n=p.length;t<n;t+=4)e.quadraticCurveTo(p[t+0],p[t+1],p[t+2],p[t+3]),r.x=p[t+0],r.y=p[t+1],i.x=p[t+2],i.y=p[t+3],0===t&&!0===c&&s.copy(i);break;case"T":p=a(f);for(let t=0,n=p.length;t<n;t+=2){const n=o(i.x,r.x),a=o(i.y,r.y);e.quadraticCurveTo(n,a,p[t+0],p[t+1]),r.x=n,r.y=a,i.x=p[t+0],i.y=p[t+1],0===t&&!0===c&&s.copy(i)}break;case"A":p=a(f,[3,4],7);for(let t=0,o=p.length;t<o;t+=7){if(p[t+5]==i.x&&p[t+6]==i.y)continue;const o=i.clone();i.x=p[t+5],i.y=p[t+6],r.x=i.x,r.y=i.y,n(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],o,i),0===t&&!0===c&&s.copy(i)}break;case"m":p=a(f);for(let t=0,n=p.length;t<n;t+=2)i.x+=p[t+0],i.y+=p[t+1],r.x=i.x,r.y=i.y,0===t?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y),0===t&&s.copy(i);break;case"h":p=a(f);for(let t=0,n=p.length;t<n;t++)i.x+=p[t],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===t&&!0===c&&s.copy(i);break;case"v":p=a(f);for(let t=0,n=p.length;t<n;t++)i.y+=p[t],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===t&&!0===c&&s.copy(i);break;case"l":p=a(f);for(let t=0,n=p.length;t<n;t+=2)i.x+=p[t+0],i.y+=p[t+1],r.x=i.x,r.y=i.y,e.lineTo(i.x,i.y),0===t&&!0===c&&s.copy(i);break;case"c":p=a(f);for(let t=0,n=p.length;t<n;t+=6)e.bezierCurveTo(i.x+p[t+0],i.y+p[t+1],i.x+p[t+2],i.y+p[t+3],i.x+p[t+4],i.y+p[t+5]),r.x=i.x+p[t+2],r.y=i.y+p[t+3],i.x+=p[t+4],i.y+=p[t+5],0===t&&!0===c&&s.copy(i);break;case"s":p=a(f);for(let t=0,n=p.length;t<n;t+=4)e.bezierCurveTo(o(i.x,r.x),o(i.y,r.y),i.x+p[t+0],i.y+p[t+1],i.x+p[t+2],i.y+p[t+3]),r.x=i.x+p[t+0],r.y=i.y+p[t+1],i.x+=p[t+2],i.y+=p[t+3],0===t&&!0===c&&s.copy(i);break;case"q":p=a(f);for(let t=0,n=p.length;t<n;t+=4)e.quadraticCurveTo(i.x+p[t+0],i.y+p[t+1],i.x+p[t+2],i.y+p[t+3]),r.x=i.x+p[t+0],r.y=i.y+p[t+1],i.x+=p[t+2],i.y+=p[t+3],0===t&&!0===c&&s.copy(i);break;case"t":p=a(f);for(let t=0,n=p.length;t<n;t+=2){const n=o(i.x,r.x),a=o(i.y,r.y);e.quadraticCurveTo(n,a,i.x+p[t+0],i.y+p[t+1]),r.x=n,r.y=a,i.x=i.x+p[t+0],i.y=i.y+p[t+1],0===t&&!0===c&&s.copy(i)}break;case"a":p=a(f,[3,4],7);for(let t=0,o=p.length;t<o;t+=7){if(0==p[t+5]&&0==p[t+6])continue;const o=i.clone();i.x+=p[t+5],i.y+=p[t+6],r.x=i.x,r.y=i.y,n(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],o,i),0===t&&!0===c&&s.copy(i)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(i.copy(s),e.currentPath.currentPoint.copy(i),l=!0);break;default:console.warn(t)}c=!1}return e}(e));break;case"rect":i=r(e,i),w=function(t){const e=c(t.getAttribute("x")||0),n=c(t.getAttribute("y")||0),i=c(t.getAttribute("rx")||t.getAttribute("ry")||0),r=c(t.getAttribute("ry")||t.getAttribute("rx")||0),o=c(t.getAttribute("width")),a=c(t.getAttribute("height")),s=.448084975506,l=new emt;l.moveTo(e+i,n),l.lineTo(e+o-i,n),(0!==i||0!==r)&&l.bezierCurveTo(e+o-i*s,n,e+o,n+r*s,e+o,n+r);l.lineTo(e+o,n+a-r),(0!==i||0!==r)&&l.bezierCurveTo(e+o,n+a-r*s,e+o-i*s,n+a,e+o-i,n+a);l.lineTo(e+i,n+a),(0!==i||0!==r)&&l.bezierCurveTo(e+i*s,n+a,e,n+a-r*s,e,n+a-r);l.lineTo(e,n+r),(0!==i||0!==r)&&l.bezierCurveTo(e,n+r*s,e+i*s,n,e+i,n);return l}(e);break;case"polygon":i=r(e,i),w=function(t){function e(t,e,n){const o=c(e),a=c(n);0===r?i.moveTo(o,a):i.lineTo(o,a),r++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,i=new emt;let r=0;return t.getAttribute("points").replace(n,e),i.currentPath.autoClose=!0,i}(e);break;case"polyline":i=r(e,i),w=function(t){function e(t,e,n){const o=c(e),a=c(n);0===r?i.moveTo(o,a):i.lineTo(o,a),r++}const n=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,i=new emt;let r=0;return t.getAttribute("points").replace(n,e),i.currentPath.autoClose=!1,i}(e);break;case"circle":i=r(e,i),w=function(t){const e=c(t.getAttribute("cx")||0),n=c(t.getAttribute("cy")||0),i=c(t.getAttribute("r")||0),r=new ldt;r.absarc(e,n,i,0,2*Math.PI);const o=new emt;return o.subPaths.push(r),o}(e);break;case"ellipse":i=r(e,i),w=function(t){const e=c(t.getAttribute("cx")||0),n=c(t.getAttribute("cy")||0),i=c(t.getAttribute("rx")||0),r=c(t.getAttribute("ry")||0),o=new ldt;o.absellipse(e,n,i,r,0,2*Math.PI);const a=new emt;return a.subPaths.push(o),a}(e);break;case"line":i=r(e,i),w=function(t){const e=c(t.getAttribute("x1")||0),n=c(t.getAttribute("y1")||0),i=c(t.getAttribute("x2")||0),r=c(t.getAttribute("y2")||0),o=new emt;return o.moveTo(e,n),o.lineTo(i,r),o.currentPath.autoClose=!1,o}(e);break;case"defs":case"mask":l=!1;break;case"use":i=r(e,i);const s=e.href.baseVal.substring(1),u=e.viewportElement.getElementById(s);u?t(u,i):console.warn("SVGLoader: 'use node' references non-existent node id: "+s)}if(w&&(void 0!==i.fill&&"none"!==i.fill&&w.color.setStyle(i.fill),function(t,e){function n(t){_.set(t.x,t.y,1).applyMatrix3(e),t.set(_.x,_.y)}const i=function(t){return 0!==t.elements[1]||0!==t.elements[3]}(e),r=t.subPaths;for(let o=0,a=r.length;o<a;o++){const t=r[o].curves;for(let r=0;r<t.length;r++){const o=t[r];o.isLineCurve?(n(o.v1),n(o.v2)):o.isCubicBezierCurve?(n(o.v0),n(o.v1),n(o.v2),n(o.v3)):o.isQuadraticBezierCurve?(n(o.v0),n(o.v1),n(o.v2)):o.isEllipseCurve&&(i&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),b.set(o.aX,o.aY),n(b),o.aX=b.x,o.aY=b.y,o.xRadius*=u(e),o.yRadius*=h(e))}}}(w,x),d.push(w),w.userData={node:e,style:i}),l){const n=e.childNodes;for(let e=0;e<n.length;e++)t(n[e],i)}s&&(p.pop(),p.length>0?x.copy(p[p.length-1]):x.identity())}(w.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:d,xml:w.documentElement}}static createShapes(t){const e=999999999,n=0,i=1,r=2,o=3,a=4,s=5,l=6,c={loc:n,t:0};function u(t,e,i,o){const a=t.x,s=e.x,l=i.x,u=o.x,d=t.y,f=e.y,p=i.y,g=o.y,m=(u-l)*(d-p)-(g-p)*(a-l),v=(g-p)*(s-a)-(u-l)*(f-d),y=m/v,b=((s-a)*(d-p)-(f-d)*(a-l))/v;if(0===v&&0!==m||y<=0||y>=1||b<0||b>1)return null;if(0===m&&0===v){for(let l=0;l<2;l++){if(h(0===l?i:o,t,e),c.loc==n){const t=0===l?i:o;return{x:t.x,y:t.y,t:c.t}}if(c.loc==r){return{x:+(a+c.t*(s-a)).toPrecision(10),y:+(d+c.t*(f-d)).toPrecision(10),t:c.t}}}return null}for(let r=0;r<2;r++)if(h(0===r?i:o,t,e),c.loc==n){const t=0===r?i:o;return{x:t.x,y:t.y,t:c.t}}return{x:+(a+y*(s-a)).toPrecision(10),y:+(d+y*(f-d)).toPrecision(10),t:y}}function h(t,e,u){const h=u.x-e.x,d=u.y-e.y,f=t.x-e.x,p=t.y-e.y,g=h*p-f*d;if(t.x===e.x&&t.y===e.y)return c.loc=n,void(c.t=0);if(t.x===u.x&&t.y===u.y)return c.loc=i,void(c.t=1);if(g<-Number.EPSILON)return void(c.loc=o);if(g>Number.EPSILON)return void(c.loc=a);if(h*f<0||d*p<0)return void(c.loc=s);if(Math.sqrt(h*h+d*d)<Math.sqrt(f*f+p*p))return void(c.loc=l);let m;m=0!==h?f/h:p/d,c.loc=r,c.t=m}function d(t,e,n){const i=new Rrt;e.getCenter(i);const r=[];return n.forEach((e=>{if(e.boundingBox.containsPoint(i)){const n=function(t,e){const n=[],i=[];for(let r=1;r<t.length;r++){const o=t[r-1],a=t[r];for(let t=1;t<e.length;t++){const r=u(o,a,e[t-1],e[t]);null!==r&&void 0===n.find((t=>t.t<=r.t+Number.EPSILON&&t.t>=r.t-Number.EPSILON))&&(n.push(r),i.push(new Rrt(r.x,r.y)))}}return i}(t,e.points);n.forEach((t=>{r.push({identifier:e.identifier,isCW:e.isCW,point:t})}))}})),r.sort(((t,e)=>t.point.x-e.point.x)),r}let f=0,p=e,g=-999999999,m=t.subPaths.map((t=>{const n=t.getPoints();let i=-999999999,r=e,o=-999999999,a=e;for(let e=0;e<n.length;e++){const t=n[e];t.y>i&&(i=t.y),t.y<r&&(r=t.y),t.x>o&&(o=t.x),t.x<a&&(a=t.x)}return g<=o&&(g=o+1),p>=a&&(p=a-1),{curves:t.curves,points:n,isCW:Xdt.isClockWise(n),identifier:f++,boundingBox:new _gt(new Rrt(a,r),new Rrt(o,i))}}));m=m.filter((t=>t.points.length>1));const v=m.map((e=>function(t,e,n,i,r){null!==r&&void 0!==r&&""!==r||(r="nonzero");const o=new Rrt;t.boundingBox.getCenter(o);const a=d([new Rrt(n,o.y),new Rrt(i,o.y)],t.boundingBox,e);a.sort(((t,e)=>t.point.x-e.point.x));const s=[],l=[];a.forEach((e=>{e.identifier===t.identifier?s.push(e):l.push(e)}));const c=s[0].point.x,u=[];let h=0;for(;h<l.length&&l[h].point.x<c;)u.length>0&&u[u.length-1]===l[h].identifier?u.pop():u.push(l[h].identifier),h++;if(u.push(t.identifier),"evenodd"===r){const e=u.length%2===0,n=u[u.length-2];return{identifier:t.identifier,isHole:e,for:n}}if("nonzero"===r){let n=!0,i=null,r=null;for(let t=0;t<u.length;t++){const o=u[t];n?(r=e[o].isCW,n=!1,i=o):r!==e[o].isCW&&(r=e[o].isCW,n=!0)}return{identifier:t.identifier,isHole:n,for:i}}console.warn('fill-rule: "'+r+'" is currently not implemented.')}(e,m,p,g,t.userData.style.fillRule))),y=[];return m.forEach((t=>{if(!v[t.identifier].isHole){const e=new xdt;e.curves=t.curves;v.filter((e=>e.isHole&&e.for===t.identifier)).forEach((t=>{const n=m[t.identifier],i=new ldt;i.curves=n.curves,e.holes.push(i)})),y.push(e)}})),y}static getStrokeStyle(t,e,n,i,r){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:i=void 0!==i?i:"butt",strokeMiterLimit:r=void 0!==r?r:4}}static pointsToStroke(t,e,n,i){const r=[],o=[],a=[];if(0===vEt.pointsToStrokeWithBuffers(t,e,n,i,r,o,a))return null;const s=new ist;return s.setAttribute("position",new Yat(r,3)),s.setAttribute("normal",new Yat(o,3)),s.setAttribute("uv",new Yat(a,2)),s}static pointsToStrokeWithBuffers(t,e,n,i,r,o,a,s){const l=new Rrt,c=new Rrt,u=new Rrt,h=new Rrt,d=new Rrt,f=new Rrt,p=new Rrt,g=new Rrt,m=new Rrt,v=new Rrt,y=new Rrt,b=new Rrt,_=new Rrt,x=new Rrt,w=new Rrt,S=new Rrt,E=new Rrt;n=void 0!==n?n:12,i=void 0!==i?i:.001,s=void 0!==s?s:0,t=function(t){let e=!1;for(let r=1,o=t.length-1;r<o;r++)if(t[r].distanceTo(t[r+1])<i){e=!0;break}if(!e)return t;const n=[];n.push(t[0]);for(let r=1,o=t.length-1;r<o;r++)t[r].distanceTo(t[r+1])>=i&&n.push(t[r]);return n.push(t[t.length-1]),n}(t);const M=t.length;if(M<2)return 0;const T=t[0].equals(t[M-1]);let k,C,A=t[0];const P=e.strokeWidth/2,O=1/(M-1);let R,L,D,I,N=0,z=!1,F=0,U=3*s,B=2*s;j(t[0],t[1],l).multiplyScalar(P),g.copy(t[0]).sub(l),m.copy(t[0]).add(l),v.copy(g),y.copy(m);for(let Y=1;Y<M;Y++){k=t[Y],C=Y===M-1?T?t[1]:void 0:t[Y+1];const n=l;if(j(A,k,n),u.copy(n).multiplyScalar(P),b.copy(k).sub(u),_.copy(k).add(u),R=N+O,L=!1,void 0!==C){j(k,C,c),u.copy(c).multiplyScalar(P),x.copy(k).sub(u),w.copy(k).add(u),D=!0,u.subVectors(C,A),n.dot(u)<0&&(D=!1),1===Y&&(z=D),u.subVectors(C,k),u.normalize();const t=Math.abs(n.dot(u));if(0!==t){const n=P/t;u.multiplyScalar(-n),h.subVectors(k,A),d.copy(h).setLength(n).add(u),S.copy(d).negate();const i=d.length(),r=h.length();h.divideScalar(r),f.subVectors(C,k);const o=f.length();switch(f.divideScalar(o),h.dot(S)<r&&f.dot(S)<o&&(L=!0),E.copy(d).add(k),S.add(k),I=!1,L?D?(w.copy(S),_.copy(S)):(x.copy(S),b.copy(S)):G(),e.strokeLineJoin){case"bevel":W(D,L,R);break;case"round":q(D,L),D?V(k,b,x,R,0):V(k,w,_,R,1);break;default:const t=P*e.strokeMiterLimit/i;if(t<1){if("miter-clip"!==e.strokeLineJoin){W(D,L,R);break}q(D,L),D?(f.subVectors(E,b).multiplyScalar(t).add(b),p.subVectors(E,x).multiplyScalar(t).add(x),H(b,R,0),H(f,R,0),H(k,R,.5),H(k,R,.5),H(f,R,0),H(p,R,0),H(k,R,.5),H(p,R,0),H(x,R,0)):(f.subVectors(E,_).multiplyScalar(t).add(_),p.subVectors(E,w).multiplyScalar(t).add(w),H(_,R,1),H(f,R,1),H(k,R,.5),H(k,R,.5),H(f,R,1),H(p,R,1),H(k,R,.5),H(p,R,1),H(w,R,1))}else L?(D?(H(m,N,1),H(g,N,0),H(E,R,0),H(m,N,1),H(E,R,0),H(S,R,1)):(H(m,N,1),H(g,N,0),H(E,R,1),H(g,N,0),H(S,R,0),H(E,R,1)),D?x.copy(E):w.copy(E)):D?(H(b,R,0),H(E,R,0),H(k,R,.5),H(k,R,.5),H(E,R,0),H(x,R,0)):(H(_,R,1),H(E,R,1),H(k,R,.5),H(k,R,.5),H(E,R,1),H(w,R,1)),I=!0}}else G()}else G();T||Y!==M-1||X(t[0],v,y,D,!0,N),N=R,A=k,g.copy(x),m.copy(w)}if(T){if(L&&r){let t=E,e=S;z!==D&&(t=S,e=E),D?(I||z)&&(e.toArray(r,0),e.toArray(r,9),I&&t.toArray(r,3)):!I&&z||(e.toArray(r,3),e.toArray(r,9),I&&t.toArray(r,0))}}else X(k,b,_,D,!1,R);return F;function j(t,e,n){return n.subVectors(e,t),n.set(-n.y,n.x).normalize()}function H(t,e,n){r&&(r[U]=t.x,r[U+1]=t.y,r[U+2]=0,o&&(o[U]=0,o[U+1]=0,o[U+2]=1),U+=3,a&&(a[B]=e,a[B+1]=n,B+=2)),F+=3}function V(t,e,i,r,o){l.copy(e).sub(t).normalize(),c.copy(i).sub(t).normalize();let a=Math.PI;const s=l.dot(c);Math.abs(s)<1&&(a=Math.abs(Math.acos(s))),a/=n,u.copy(e);for(let l=0,c=n-1;l<c;l++)h.copy(u).rotateAround(t,a),H(u,r,o),H(h,r,o),H(t,r,.5),u.copy(h);H(h,r,o),H(i,r,o),H(t,r,.5)}function G(){H(m,N,1),H(g,N,0),H(b,R,0),H(m,N,1),H(b,R,1),H(_,R,0)}function W(t,e,n){e?t?(H(m,N,1),H(g,N,0),H(b,R,0),H(m,N,1),H(b,R,0),H(S,R,1),H(b,n,0),H(x,n,0),H(S,n,.5)):(H(m,N,1),H(g,N,0),H(_,R,1),H(g,N,0),H(S,R,0),H(_,R,1),H(_,n,1),H(w,n,0),H(S,n,.5)):t?(H(b,n,0),H(x,n,0),H(k,n,.5)):(H(_,n,1),H(w,n,0),H(k,n,.5))}function q(t,e){e&&(t?(H(m,N,1),H(g,N,0),H(b,R,0),H(m,N,1),H(b,R,0),H(S,R,1),H(b,N,0),H(k,R,.5),H(S,R,1),H(k,R,.5),H(x,N,0),H(S,R,1)):(H(m,N,1),H(g,N,0),H(_,R,1),H(g,N,0),H(S,R,0),H(_,R,1),H(_,N,1),H(S,R,0),H(k,R,.5),H(k,R,.5),H(S,R,0),H(w,N,1)))}function X(t,n,i,o,a,s){switch(e.strokeLineCap){case"round":a?V(t,i,n,s,.5):V(t,n,i,s,.5);break;case"square":if(a)l.subVectors(n,t),c.set(l.y,-l.x),u.addVectors(l,c).add(t),h.subVectors(c,l).add(t),o?(u.toArray(r,3),h.toArray(r,0),h.toArray(r,9)):(u.toArray(r,3),u.toArray(r,9),h.toArray(r,0));else{l.subVectors(i,t),c.set(l.y,-l.x),u.addVectors(l,c).add(t),h.subVectors(c,l).add(t);const e=r.length;o?(u.toArray(r,e-3),h.toArray(r,e-6),h.toArray(r,e-12)):(u.toArray(r,e-6),h.toArray(r,e-3),h.toArray(r,e-12))}}}}}const yEt=(0,e.forwardRef)((function(t,n){let{src:i,skipFill:r,skipStrokes:o,fillMaterial:a,strokeMaterial:s,fillMeshProps:l,strokeMeshProps:c,...u}=t;const h=svt(vEt,i.startsWith("<svg")?"data:image/svg+xml;utf8,".concat(i):i),d=(0,e.useMemo)((()=>o?[]:h.paths.map((t=>{var e;return void 0===(null==(e=t.userData)?void 0:e.style.stroke)||"none"===t.userData.style.stroke?null:t.subPaths.map((e=>vEt.pointsToStroke(e.getPoints(),t.userData.style)))}))),[h,o]);return(0,e.useEffect)((()=>()=>d.forEach((t=>t&&t.map((t=>t.dispose()))))),[d]),e.createElement("object3D",yvt({ref:n},u),e.createElement("object3D",{scale:[1,-1,1]},h.paths.map(((t,n)=>{var i,u;return e.createElement(e.Fragment,{key:n},!r&&void 0!==(null==(i=t.userData)?void 0:i.style.fill)&&"none"!==t.userData.style.fill&&vEt.createShapes(t).map(((n,i)=>e.createElement("mesh",yvt({key:i},l),e.createElement("shapeGeometry",{args:[n]}),e.createElement("meshBasicMaterial",yvt({color:t.userData.style.fill,opacity:t.userData.style.fillOpacity,transparent:!0,side:iet,depthWrite:!1},a))))),!o&&void 0!==(null==(u=t.userData)?void 0:u.style.stroke)&&"none"!==t.userData.style.stroke&&t.subPaths.map(((i,r)=>e.createElement("mesh",yvt({key:r,geometry:d[n][r]},c),e.createElement("meshBasicMaterial",yvt({color:t.userData.style.stroke,opacity:t.userData.style.strokeOpacity,transparent:!0,side:iet,depthWrite:!1},s))))))}))))}));function bEt(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pointer",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document.body;e.useEffect((()=>{if(t)return r.style.cursor=n,()=>{r.style.cursor=i}}),[t])}const _Et=new cot,xEt=new cot,wEt=new cot;function SEt(t,e,n){const i=_Et.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,o=n.height/2;return[i.x*r+r,-i.y*o+o]}const EEt=t=>Math.abs(t)<1e-10?0:t;function MEt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i="matrix3d(";for(let r=0;16!==r;r++)i+=EEt(e[r]*t.elements[r])+(15!==r?",":")");return n+i}const TEt=(kEt=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],t=>MEt(t,kEt));var kEt;const CEt=(t,e)=>{return MEt(t,[1/(n=e),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const AEt=e.forwardRef(((t,n)=>{let{children:i,eps:o=.001,style:a,className:s,prepend:l,center:c,fullscreen:u,portal:h,distanceFactor:d,sprite:f=!1,transform:p=!1,occlude:g,onOcclude:m,castShadow:v,receiveShadow:y,material:b,geometry:_,zIndexRange:x=[16777271,0],calculatePosition:w=SEt,as:S="div",wrapperClass:E,pointerEvents:M="auto",...T}=t;const{gl:k,camera:C,scene:A,size:P,raycaster:O,events:R,viewport:L}=rvt(),[D]=e.useState((()=>document.createElement(S))),I=e.useRef(),N=e.useRef(null),z=e.useRef(0),F=e.useRef([0,0]),U=e.useRef(null),B=e.useRef(null),j=(null==h?void 0:h.current)||R.connected||k.domElement.parentNode,H=e.useRef(null),V=e.useRef(!1),G=e.useMemo((()=>g&&"blending"!==g||Array.isArray(g)&&g.length&&function(t){return t&&"object"===typeof t&&"current"in t}(g[0])),[g]);e.useLayoutEffect((()=>{const t=k.domElement;g&&"blending"===g?(t.style.zIndex="".concat(Math.floor(x[0]/2)),t.style.position="absolute",t.style.pointerEvents="none"):(t.style.zIndex=null,t.style.position=null,t.style.pointerEvents=null)}),[g]),e.useLayoutEffect((()=>{if(N.current){const t=I.current=r.createRoot(D);if(A.updateMatrixWorld(),p)D.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const t=w(N.current,C,P);D.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(t[0],"px,").concat(t[1],"px,0);transform-origin:0 0;")}return j&&(l?j.prepend(D):j.appendChild(D)),()=>{j&&j.removeChild(D),t.unmount()}}}),[j,p]),e.useLayoutEffect((()=>{E&&(D.className=E)}),[E]);const W=e.useMemo((()=>p?{position:"absolute",top:0,left:0,width:P.width,height:P.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:c?"translate3d(-50%,-50%,0)":"none",...u&&{top:-P.height/2,left:-P.width/2,width:P.width,height:P.height},...a}),[a,c,u,P,p]),q=e.useMemo((()=>({position:"absolute",pointerEvents:M})),[M]);e.useLayoutEffect((()=>{var t,r;(V.current=!1,p)?null==(t=I.current)||t.render(e.createElement("div",{ref:U,style:W},e.createElement("div",{ref:B,style:q},e.createElement("div",{ref:n,className:s,style:a,children:i})))):null==(r=I.current)||r.render(e.createElement("div",{ref:n,style:W,className:s,children:i}))}));const X=e.useRef(!0);ovt((t=>{if(N.current){C.updateMatrixWorld(),N.current.updateWorldMatrix(!0,!1);const t=p?F.current:w(N.current,C,P);if(p||Math.abs(z.current-C.zoom)>o||Math.abs(F.current[0]-t[0])>o||Math.abs(F.current[1]-t[1])>o){const e=function(t,e){const n=_Et.setFromMatrixPosition(t.matrixWorld),i=xEt.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),o=e.getWorldDirection(wEt);return r.angleTo(o)>Math.PI/2}(N.current,C);let n=!1;G&&(Array.isArray(g)?n=g.map((t=>t.current)):"blending"!==g&&(n=[A]));const i=X.current;if(n){const t=function(t,e,n,i){const r=_Et.setFromMatrixPosition(t.matrixWorld),o=r.clone();o.project(e),n.setFromCamera(o,e);const a=n.intersectObjects(i,!0);if(a.length){const t=a[0].distance;return r.distanceTo(n.ray.origin)<t}return!0}(N.current,C,O,n);X.current=t&&!e}else X.current=!e;i!==X.current&&(m?m(!X.current):D.style.display=X.current?"block":"none");const r=Math.floor(x[0]/2),o=g?G?[x[0],r]:[r-1,0]:x;if(D.style.zIndex="".concat(function(t,e,n){if(e instanceof Pst||e instanceof elt){const i=_Et.setFromMatrixPosition(t.matrixWorld),r=xEt.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(r),a=(n[1]-n[0])/(e.far-e.near),s=n[1]-a*e.far;return Math.round(a*o+s)}}(N.current,C,o)),p){const[t,e]=[P.width/2,P.height/2],n=C.projectionMatrix.elements[5]*e,{isOrthographicCamera:i,top:r,left:o,bottom:a,right:s}=C,l=TEt(C.matrixWorldInverse),c=i?"scale(".concat(n,")translate(").concat(EEt(-(s+o)/2),"px,").concat(EEt((r+a)/2),"px)"):"translateZ(".concat(n,"px)");let u=N.current.matrixWorld;f&&(u=C.matrixWorldInverse.clone().transpose().copyPosition(u).scale(N.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),D.style.width=P.width+"px",D.style.height=P.height+"px",D.style.perspective=i?"":"".concat(n,"px"),U.current&&B.current&&(U.current.style.transform="".concat(c).concat(l,"translate(").concat(t,"px,").concat(e,"px)"),B.current.style.transform=CEt(u,1/((d||10)/400)))}else{const e=void 0===d?1:function(t,e){if(e instanceof elt)return e.zoom;if(e instanceof Pst){const n=_Et.setFromMatrixPosition(t.matrixWorld),i=xEt.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,o=n.distanceTo(i);return 1/(2*Math.tan(r/2)*o)}return 1}(N.current,C)*d;D.style.transform="translate3d(".concat(t[0],"px,").concat(t[1],"px,0) scale(").concat(e,")")}F.current=t,z.current=C.zoom}}if(!G&&H.current&&!V.current)if(p){if(U.current){const t=U.current.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const{isOrthographicCamera:e}=C;if(e||_)T.scale&&(Array.isArray(T.scale)?T.scale instanceof cot?H.current.scale.copy(T.scale.clone().divideScalar(1)):H.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):H.current.scale.setScalar(1/T.scale));else{const e=(d||10)/400,n=t.clientWidth*e,i=t.clientHeight*e;H.current.scale.set(n,i,1)}V.current=!0}}}else{const e=D.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const t=1/L.factor,n=e.clientWidth*t,i=e.clientHeight*t;H.current.scale.set(n,i,1),V.current=!0}H.current.lookAt(t.camera.position)}}));const Y=e.useMemo((()=>({vertexShader:p?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[p]);return e.createElement("group",yvt({},T,{ref:N}),g&&!G&&e.createElement("mesh",{castShadow:v,receiveShadow:y,ref:H},_||e.createElement("planeGeometry",null),b||e.createElement("shaderMaterial",{side:iet,vertexShader:Y.vertexShader,fragmentShader:Y.fragmentShader})))}));var PEt=n(7674);let OEt=XEt();const REt=t=>VEt(t,OEt);let LEt=XEt();REt.write=t=>VEt(t,LEt);let DEt=XEt();REt.onStart=t=>VEt(t,DEt);let IEt=XEt();REt.onFrame=t=>VEt(t,IEt);let NEt=XEt();REt.onFinish=t=>VEt(t,NEt);let zEt=[];REt.setTimeout=(t,e)=>{let n=REt.now()+e,i=()=>{let t=zEt.findIndex((t=>t.cancel==i));~t&&zEt.splice(t,1),jEt-=~t?1:0},r={time:n,handler:t,cancel:i};return zEt.splice(FEt(n),0,r),jEt+=1,GEt(),r};let FEt=t=>~(~zEt.findIndex((e=>e.time>t))||~zEt.length);REt.cancel=t=>{DEt.delete(t),IEt.delete(t),NEt.delete(t),OEt.delete(t),LEt.delete(t)},REt.sync=t=>{HEt=!0,REt.batchedUpdates(t),HEt=!1},REt.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e=i,REt.onStart(n)}return i.handler=t,i.cancel=()=>{DEt.delete(n),e=null},i};let UEt="undefined"!=typeof window?window.requestAnimationFrame:()=>{};REt.use=t=>UEt=t,REt.now="undefined"!=typeof performance?()=>performance.now():Date.now,REt.batchedUpdates=t=>t(),REt.catch=console.error,REt.frameLoop="always",REt.advance=()=>{"demand"!==REt.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):qEt()};let BEt=-1,jEt=0,HEt=!1;function VEt(t,e){HEt?(e.delete(t),t(0)):(e.add(t),GEt())}function GEt(){BEt<0&&(BEt=0,"demand"!==REt.frameLoop&&UEt(WEt))}function WEt(){~BEt&&(UEt(WEt),REt.batchedUpdates(qEt))}function qEt(){let t=BEt;BEt=REt.now();let e=FEt(BEt);e&&(YEt(zEt.splice(0,e),(t=>t.handler())),jEt-=e),jEt?(DEt.flush(),OEt.flush(t?Math.min(64,BEt-t):16.667),IEt.flush(),LEt.flush(),NEt.flush()):BEt=-1}function XEt(){let t=new Set,e=t;return{add(n){jEt+=e!=t||t.has(n)?0:1,t.add(n)},delete:n=>(jEt-=e==t&&t.has(n)?1:0,t.delete(n)),flush(n){e.size&&(t=new Set,jEt-=e.size,YEt(e,(e=>e(n)&&t.add(e))),jEt+=t.size,e=t)}}}function YEt(t,e){t.forEach((t=>{try{e(t)}catch(n){REt.catch(n)}}))}function KEt(){}const ZEt={arr:Array.isArray,obj:t=>!!t&&"Object"===t.constructor.name,fun:t=>"function"===typeof t,str:t=>"string"===typeof t,num:t=>"number"===typeof t,und:t=>void 0===t};function QEt(t,e){if(ZEt.arr(t)){if(!ZEt.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}const JEt=(t,e)=>t.forEach(e);function $Et(t,e,n){if(ZEt.arr(t))for(let i=0;i<t.length;i++)e.call(n,t[i],"".concat(i));else for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}const tMt=t=>ZEt.und(t)?[]:ZEt.arr(t)?t:[t];function eMt(t,e){if(t.size){const n=Array.from(t);t.clear(),JEt(n,e)}}const nMt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return eMt(t,(t=>t(...n)))},iMt=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let rMt,oMt,aMt=null,sMt=!1,lMt=KEt;const cMt=t=>{t.to&&(oMt=t.to),t.now&&(REt.now=t.now),void 0!==t.colors&&(aMt=t.colors),null!=t.skipAnimation&&(sMt=t.skipAnimation),t.createStringInterpolator&&(rMt=t.createStringInterpolator),t.requestAnimationFrame&&REt.use(t.requestAnimationFrame),t.batchedUpdates&&(REt.batchedUpdates=t.batchedUpdates),t.willAdvance&&(lMt=t.willAdvance),t.frameLoop&&(REt.frameLoop=t.frameLoop)};var uMt=Object.freeze({__proto__:null,get createStringInterpolator(){return rMt},get to(){return oMt},get colors(){return aMt},get skipAnimation(){return sMt},get willAdvance(){return lMt},assign:cMt});const hMt=new Set;let dMt=[],fMt=[],pMt=0;const gMt={get idle(){return!hMt.size&&!dMt.length},start(t){pMt>t.priority?(hMt.add(t),REt.onStart(mMt)):(vMt(t),REt(bMt))},advance:bMt,sort(t){if(pMt)REt.onFrame((()=>gMt.sort(t)));else{const e=dMt.indexOf(t);~e&&(dMt.splice(e,1),yMt(t))}},clear(){dMt=[],hMt.clear()}};function mMt(){hMt.forEach(vMt),hMt.clear(),REt(bMt)}function vMt(t){dMt.includes(t)||yMt(t)}function yMt(t){dMt.splice(function(t,e){const n=t.findIndex(e);return n<0?t.length:n}(dMt,(e=>e.priority>t.priority)),0,t)}function bMt(t){const e=fMt;for(let n=0;n<dMt.length;n++){const i=dMt[n];pMt=i.priority,i.idle||(lMt(i),i.advance(t),i.idle||e.push(i))}return pMt=0,fMt=dMt,fMt.length=0,dMt=e,dMt.length>0}const _Mt="[-+]?\\d*\\.?\\d+",xMt=_Mt+"%";function wMt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const SMt=new RegExp("rgb"+wMt(_Mt,_Mt,_Mt)),EMt=new RegExp("rgba"+wMt(_Mt,_Mt,_Mt,_Mt)),MMt=new RegExp("hsl"+wMt(_Mt,xMt,xMt)),TMt=new RegExp("hsla"+wMt(_Mt,xMt,xMt,_Mt)),kMt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,CMt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,AMt=/^#([0-9a-fA-F]{6})$/,PMt=/^#([0-9a-fA-F]{8})$/;function OMt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function RMt(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,o=OMt(r,i,t+1/3),a=OMt(r,i,t),s=OMt(r,i,t-1/3);return Math.round(255*o)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function LMt(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function DMt(t){return(parseFloat(t)%360+360)%360/360}function IMt(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(255*e)}function NMt(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function zMt(t){let e=function(t){let e;return"number"===typeof t?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=AMt.exec(t))?parseInt(e[1]+"ff",16)>>>0:aMt&&void 0!==aMt[t]?aMt[t]:(e=SMt.exec(t))?(LMt(e[1])<<24|LMt(e[2])<<16|LMt(e[3])<<8|255)>>>0:(e=EMt.exec(t))?(LMt(e[1])<<24|LMt(e[2])<<16|LMt(e[3])<<8|IMt(e[4]))>>>0:(e=kMt.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=PMt.exec(t))?parseInt(e[1],16)>>>0:(e=CMt.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=MMt.exec(t))?(255|RMt(DMt(e[1]),NMt(e[2]),NMt(e[3])))>>>0:(e=TMt.exec(t))?(RMt(DMt(e[1]),NMt(e[2]),NMt(e[3]))|IMt(e[4]))>>>0:null}(t);if(null===e)return t;e=e||0;let n=(16711680&e)>>>16,i=(65280&e)>>>8,r=(255&e)/255;return"rgba(".concat((4278190080&e)>>>24,", ").concat(n,", ").concat(i,", ").concat(r,")")}const FMt=(t,e,n)=>{if(ZEt.fun(t))return t;if(ZEt.arr(t))return FMt({range:t,output:e,extrapolate:n});if(ZEt.str(t.output[0]))return rMt(t);const i=t,r=i.output,o=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",s=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(t=>t);return t=>{const e=function(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}(t,o);return function(t,e,n,i,r,o,a,s,l){let c=l?l(t):t;if(c<e){if("identity"===a)return c;"clamp"===a&&(c=e)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(i===r)return i;if(e===n)return t<=e?i:r;e===-1/0?c=-c:n===1/0?c-=e:c=(c-e)/(n-e);c=o(c),i===-1/0?c=-c:r===1/0?c+=i:c=c*(r-i)+i;return c}(t,o[e],o[e+1],r[e],r[e+1],l,a,s,i.map)}};const UMt=1.70158,BMt=1.525*UMt,jMt=UMt+1,HMt=2*Math.PI/3,VMt=2*Math.PI/4.5,GMt=t=>{const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},WMt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>0===t?0:Math.pow(2,10*t-10),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>jMt*t*t*t-UMt*t*t,easeOutBack:t=>1+jMt*Math.pow(t-1,3)+UMt*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*(7.189819*t-BMt)/2:(Math.pow(2*t-2,2)*((BMt+1)*(2*t-2)+BMt)+2)/2,easeInElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*HMt),easeOutElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*HMt)+1,easeInOutElastic:t=>0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*VMt)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*VMt)/2+1,easeInBounce:t=>1-GMt(1-t),easeOutBounce:GMt,easeInOutBounce:t=>t<.5?(1-GMt(1-2*t))/2:(1+GMt(2*t-1))/2,steps:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return n=>{const i=(n="end"===e?Math.min(n,.999):Math.max(n,.001))*t;return((t,e,n)=>Math.min(Math.max(n,t),e))(0,1,("end"===e?Math.floor(i):Math.ceil(i))/t)}}};function qMt(){return qMt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qMt.apply(this,arguments)}const XMt=Symbol.for("FluidValue.get"),YMt=Symbol.for("FluidValue.observers"),KMt=t=>Boolean(t&&t[XMt]),ZMt=t=>t&&t[XMt]?t[XMt]():t,QMt=t=>t[YMt]||null;function JMt(t,e){let n=t[YMt];n&&n.forEach((t=>{!function(t,e){t.eventObserved?t.eventObserved(e):t(e)}(t,e)}))}class $Mt{constructor(t){if(this[XMt]=void 0,this[YMt]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");tTt(this,t)}}const tTt=(t,e)=>iTt(t,XMt,e);function eTt(t,e){if(t[XMt]){let n=t[YMt];n||iTt(t,YMt,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function nTt(t,e){let n=t[YMt];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[YMt]=null,t.observerRemoved&&t.observerRemoved(i,e)}}const iTt=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),rTt=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,oTt=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,aTt=new RegExp("(".concat(rTt.source,")(%|[a-z]+)"),"i"),sTt=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,lTt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,cTt=t=>{const[e,n]=uTt(t);if(!e||iMt())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const e=window.getComputedStyle(document.documentElement).getPropertyValue(n);return e||t}return n&&lTt.test(n)?cTt(n):n||t},uTt=t=>{const e=lTt.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]};let hTt;const dTt=(t,e,n,i,r)=>"rgba(".concat(Math.round(e),", ").concat(Math.round(n),", ").concat(Math.round(i),", ").concat(r,")"),fTt=t=>{hTt||(hTt=aMt?new RegExp("(".concat(Object.keys(aMt).join("|"),")(?!\\w)"),"g"):/^\b$/);const e=t.output.map((t=>ZMt(t).replace(lTt,cTt).replace(oTt,zMt).replace(hTt,zMt))),n=e.map((t=>t.match(rTt).map(Number))),i=n[0].map(((t,e)=>n.map((t=>{if(!(e in t))throw Error('The arity of each "output" value must be equal');return t[e]})))),r=i.map((e=>FMt(qMt({},t,{output:e}))));return t=>{var n;const i=!aTt.test(e[0])&&(null==(n=e.find((t=>aTt.test(t))))?void 0:n.replace(rTt,""));let o=0;return e[0].replace(rTt,(()=>"".concat(r[o++](t)).concat(i||""))).replace(sTt,dTt)}},pTt="react-spring: ",gTt=t=>{const e=t;let n=!1;if("function"!=typeof e)throw new TypeError("".concat(pTt,"once requires a function parameter"));return function(){n||(e(...arguments),n=!0)}},mTt=gTt(console.warn);const vTt=gTt(console.warn);function yTt(t){return ZEt.str(t)&&("#"==t[0]||/\d/.test(t)||!iMt()&&lTt.test(t)||t in(aMt||{}))}new WeakMap;new Set;new WeakMap,new WeakMap,new WeakMap;const bTt=iMt()?e.useEffect:e.useLayoutEffect,_Tt=()=>{const t=(0,e.useRef)(!1);return bTt((()=>(t.current=!0,()=>{t.current=!1})),[]),t};function xTt(){const t=(0,e.useState)()[1],n=_Tt();return()=>{n.current&&t(Math.random())}}const wTt=t=>(0,e.useEffect)(t,STt),STt=[];function ETt(t){const n=(0,e.useRef)();return(0,e.useEffect)((()=>{n.current=t})),n.current}const MTt=Symbol.for("Animated:node"),TTt=t=>t&&t[MTt],kTt=(t,e)=>((t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}))(t,MTt,e),CTt=t=>t&&t[MTt]&&t[MTt].getPayload();class ATt{constructor(){this.payload=void 0,kTt(this,this)}getPayload(){return this.payload||[]}}class PTt extends ATt{constructor(t){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=t,ZEt.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new PTt(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return ZEt.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value!==t&&(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ZEt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}}class OTt extends PTt{constructor(t){super(0),this._string=null,this._toString=void 0,this._toString=FMt({output:[t,t]})}static create(t){return new OTt(t)}getValue(){let t=this._string;return null==t?this._string=this._toString(this._value):t}setValue(t){if(ZEt.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else{if(!super.setValue(t))return!1;this._string=null}return!0}reset(t){t&&(this._toString=FMt({output:[this.getValue(),t]})),this._value=0,super.reset()}}const RTt={dependencies:null};class LTt extends ATt{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return $Et(this.source,((n,i)=>{(t=>!!t&&t[MTt]===t)(n)?e[i]=n.getValue(t):KMt(n)?e[i]=ZMt(n):t||(e[i]=n)})),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&JEt(this.payload,(t=>t.reset()))}_makePayload(t){if(t){const e=new Set;return $Et(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){RTt.dependencies&&KMt(t)&&RTt.dependencies.add(t);const e=CTt(t);e&&JEt(e,(t=>this.add(t)))}}class DTt extends LTt{constructor(t){super(t)}static create(t){return new DTt(t)}getValue(){return this.source.map((t=>t.getValue()))}setValue(t){const e=this.getPayload();return t.length==e.length?e.map(((e,n)=>e.setValue(t[n]))).some(Boolean):(super.setValue(t.map(ITt)),!0)}}function ITt(t){return(yTt(t)?OTt:PTt).create(t)}function NTt(t){const e=TTt(t);return e?e.constructor:ZEt.arr(t)?DTt:yTt(t)?OTt:PTt}function zTt(){return zTt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zTt.apply(this,arguments)}const FTt=(t,n)=>{const i=!ZEt.fun(t)||t.prototype&&t.prototype.isReactComponent;return(0,e.forwardRef)(((r,o)=>{const a=(0,e.useRef)(null),s=i&&(0,e.useCallback)((t=>{a.current=function(t,e){t&&(ZEt.fun(t)?t(e):t.current=e);return e}(o,t)}),[o]),[l,c]=function(t,e){const n=new Set;RTt.dependencies=n,t.style&&(t=zTt({},t,{style:e.createAnimatedStyle(t.style)}));return t=new LTt(t),RTt.dependencies=null,[t,n]}(r,n),u=xTt(),h=()=>{const t=a.current;if(i&&!t)return;!1===(!!t&&n.applyAnimatedValues(t,l.getValue(!0)))&&u()},d=new UTt(h,c),f=(0,e.useRef)();bTt((()=>(f.current=d,JEt(c,(t=>eTt(t,d))),()=>{f.current&&(JEt(f.current.deps,(t=>nTt(t,f.current))),REt.cancel(f.current.update))}))),(0,e.useEffect)(h,[]),wTt((()=>()=>{const t=f.current;JEt(t.deps,(e=>nTt(e,t)))}));const p=n.getComponentProps(l.getValue());return e.createElement(t,zTt({},p,{ref:s}))}))};class UTt{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){"change"==t.type&&REt.write(this.update)}}const BTt=Symbol.for("AnimatedComponent"),jTt=t=>ZEt.str(t)?t:t&&ZEt.str(t.displayName)?t.displayName:ZEt.fun(t)&&t.name||null;function HTt(){return HTt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},HTt.apply(this,arguments)}function VTt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ZEt.fun(t)?t(...n):t}const GTt=(t,e)=>!0===t||!!(e&&t&&(ZEt.fun(t)?t(e):tMt(t).includes(e))),WTt=(t,e)=>ZEt.obj(t)?e&&t[e]:t,qTt=(t,e)=>!0===t.default?t[e]:t.default?t.default[e]:void 0,XTt=t=>t,YTt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XTt,n=KTt;t.default&&!0!==t.default&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const n=e(t[r],r);ZEt.und(n)||(i[r]=n)}return i},KTt=["config","onProps","onStart","onChange","onPause","onResume","onRest"],ZTt={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function QTt(t){const e=function(t){const e={};let n=0;if($Et(t,((t,i)=>{ZTt[i]||(e[i]=t,n++)})),n)return e}(t);if(e){const n={to:e};return $Et(t,((t,i)=>i in e||(n[i]=t))),n}return HTt({},t)}function JTt(t){return t=ZMt(t),ZEt.arr(t)?t.map(JTt):yTt(t)?uMt.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function $Tt(t){for(const e in t)return!0;return!1}function tkt(t){return ZEt.fun(t)||ZEt.arr(t)&&ZEt.obj(t[0])}function ekt(t,e){var n;null==(n=t.ref)||n.delete(t),null==e||e.delete(t)}function nkt(t,e){var n;e&&t.ref!==e&&(null==(n=t.ref)||n.delete(t),e.add(t),t.ref=e)}const ikt=HTt({},{tension:170,friction:26},{mass:1,damping:1,easing:WMt.linear,clamp:!1});class rkt{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,ikt)}}function okt(t,e){if(ZEt.und(e.decay)){const n=!ZEt.und(e.tension)||!ZEt.und(e.friction);!n&&ZEt.und(e.frequency)&&ZEt.und(e.damping)&&ZEt.und(e.mass)||(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}else t.duration=void 0}const akt=[];class skt{constructor(){this.changed=!1,this.values=akt,this.toValues=null,this.fromValues=akt,this.to=void 0,this.from=void 0,this.config=new rkt,this.immediate=!1}}function lkt(t,e){let{key:n,props:i,defaultProps:r,state:o,actions:a}=e;return new Promise(((e,s)=>{var l;let c,u,h=GTt(null!=(l=i.cancel)?l:null==r?void 0:r.cancel,n);if(h)p();else{ZEt.und(i.pause)||(o.paused=GTt(i.pause,n));let t=null==r?void 0:r.pause;!0!==t&&(t=o.paused||GTt(t,n)),c=VTt(i.delay||0,n),t?(o.resumeQueue.add(f),a.pause()):(a.resume(),f())}function d(){o.resumeQueue.add(f),o.timeouts.delete(u),u.cancel(),c=u.time-REt.now()}function f(){c>0&&!uMt.skipAnimation?(o.delayed=!0,u=REt.setTimeout(p,c),o.pauseQueue.add(d),o.timeouts.add(u)):p()}function p(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(d),o.timeouts.delete(u),t<=(o.cancelId||0)&&(h=!0);try{a.start(HTt({},i,{callId:t,cancel:h}),e)}catch(n){s(n)}}}))}const ckt=(t,e)=>1==e.length?e[0]:e.some((t=>t.cancelled))?dkt(t.get()):e.every((t=>t.noop))?ukt(t.get()):hkt(t.get(),e.every((t=>t.finished))),ukt=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),hkt=function(t,e){return{value:t,finished:e,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},dkt=t=>({value:t,cancelled:!0,finished:!1});function fkt(t,e,n,i){const{callId:r,parentId:o,onRest:a}=e,{asyncTo:s,promise:l}=n;return o||t!==s||e.reset?n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=YTt(e,((t,e)=>"onRest"===e?void 0:t));let u,h;const d=new Promise(((t,e)=>(u=t,h=e))),f=t=>{const e=r<=(n.cancelId||0)&&dkt(i)||r!==n.asyncId&&hkt(i,!1);if(e)throw t.result=e,h(t),t},p=(t,e)=>{const o=new gkt,a=new mkt;return(async()=>{if(uMt.skipAnimation)throw pkt(n),a.result=hkt(i,!1),h(a),a;f(o);const s=ZEt.obj(t)?HTt({},t):HTt({},e,{to:t});s.parentId=r,$Et(c,((t,e)=>{ZEt.und(s[e])&&(s[e]=t)}));const l=await i.start(s);return f(o),n.paused&&await new Promise((t=>{n.resumeQueue.add(t)})),l})()};let g;if(uMt.skipAnimation)return pkt(n),hkt(i,!1);try{let e;e=ZEt.arr(t)?(async t=>{for(const e of t)await p(e)})(t):Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([e.then(u),d]),g=hkt(i.get(),!0,!1)}catch(m){if(m instanceof gkt)g=m.result;else{if(!(m instanceof mkt))throw m;g=m.result}}finally{r==n.asyncId&&(n.asyncId=o,n.asyncTo=o?s:void 0,n.promise=o?l:void 0)}return ZEt.fun(a)&&REt.batchedUpdates((()=>{a(g,i,i.item)})),g})():l}function pkt(t,e){eMt(t.timeouts,(t=>t.cancel())),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}class gkt extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class mkt extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const vkt=t=>t instanceof bkt;let ykt=1;class bkt extends $Mt{constructor(){super(...arguments),this.id=ykt++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=TTt(this);return t&&t.getValue()}to(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return uMt.to(this,e)}interpolate(){mTt("".concat(pTt,'The "interpolate" function is deprecated in v9 (use "to" instead)'));for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return uMt.to(this,e)}toJSON(){return this.get()}observerAdded(t){1==t&&this._attach()}observerRemoved(t){0==t&&this._detach()}_attach(){}_detach(){}_onChange(t){JMt(this,{type:"change",parent:this,value:t,idle:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}_onPriorityChange(t){this.idle||gMt.sort(this),JMt(this,{type:"priority",parent:this,priority:t})}}const _kt=Symbol.for("SpringPhase"),xkt=t=>(1&t[_kt])>0,wkt=t=>(2&t[_kt])>0,Skt=t=>(4&t[_kt])>0,Ekt=(t,e)=>e?t[_kt]|=3:t[_kt]&=-3,Mkt=(t,e)=>e?t[_kt]|=4:t[_kt]&=-5;class Tkt extends bkt{constructor(t,e){if(super(),this.key=void 0,this.animation=new skt,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ZEt.und(t)||!ZEt.und(e)){const n=ZEt.obj(t)?HTt({},t):HTt({},e,{from:t});ZEt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(wkt(this)||this._state.asyncTo)||Skt(this)}get goal(){return ZMt(this.animation.to)}get velocity(){const t=TTt(this);return t instanceof PTt?t.lastVelocity||0:t.getPayload().map((t=>t.lastVelocity||0))}get hasAnimated(){return xkt(this)}get isAnimating(){return wkt(this)}get isPaused(){return Skt(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{config:r,toValues:o}=i;const a=CTt(i.to);!a&&KMt(i.to)&&(o=tMt(ZMt(i.to))),i.values.forEach(((s,l)=>{if(s.done)return;const c=s.constructor==OTt?1:a?a[l].lastPosition:o[l];let u=i.immediate,h=c;if(!u){if(h=s.lastPosition,r.tension<=0)return void(s.done=!0);let e=s.elapsedTime+=t;const n=i.fromValues[l],o=null!=s.v0?s.v0:s.v0=ZEt.arr(r.velocity)?r.velocity[l]:r.velocity;let a;const d=r.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(ZEt.und(r.duration))if(r.decay){const t=!0===r.decay?.998:r.decay,i=Math.exp(-(1-t)*e);h=n+o/(1-t)*(1-i),u=Math.abs(s.lastPosition-h)<=d,a=o*i}else{a=null==s.lastVelocity?o:s.lastVelocity;const e=r.restVelocity||d/10,i=r.clamp?0:r.bounce,l=!ZEt.und(i),f=n==c?s.v0>0:n<c;let p,g=!1;const m=1,v=Math.ceil(t/m);for(let t=0;t<v&&(p=Math.abs(a)>e,p||(u=Math.abs(c-h)<=d,!u));++t){l&&(g=h==c||h>c==f,g&&(a=-a*i,h=c));a+=(1e-6*-r.tension*(h-c)+.001*-r.friction*a)/r.mass*m,h+=a*m}}else{let i=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,s.durationProgress>0&&(s.elapsedTime=r.duration*s.durationProgress,e=s.elapsedTime+=t)),i=(r.progress||0)+e/this._memoizedDuration,i=i>1?1:i<0?0:i,s.durationProgress=i),h=n+r.easing(i)*(c-n),a=(h-s.lastPosition)/t,u=1==i}s.lastVelocity=a,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),u=!0)}a&&!a[l].done&&(u=!1),u?s.done=!0:e=!1,s.setValue(h,r.round)&&(n=!0)}));const s=TTt(this),l=s.getValue();if(e){const t=ZMt(i.to);l===t&&!n||r.decay?n&&r.decay&&this._onChange(l):(s.setValue(t),this._onChange(t)),this._stop()}else n&&this._onChange(l)}set(t){return REt.batchedUpdates((()=>{this._stop(),this._focus(t),this._set(t)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(wkt(this)){const{to:t,config:e}=this.animation;REt.batchedUpdates((()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()}))}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return ZEt.und(t)?(n=this.queue||[],this.queue=[]):n=[ZEt.obj(t)?t:HTt({},e,{to:t})],Promise.all(n.map((t=>this._update(t)))).then((t=>ckt(this,t)))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),pkt(this._state,t&&this._lastCallId),REt.batchedUpdates((()=>this._stop(e,t))),this}reset(){this._update({reset:!0})}eventObserved(t){"change"==t.type?this._start():"priority"==t.type&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=ZEt.obj(n)?n[e]:n,(null==n||tkt(n))&&(n=void 0),i=ZEt.obj(i)?i[e]:i,null==i&&(i=void 0);const r={to:n,from:i};return xkt(this)||(t.reverse&&([n,i]=[i,n]),i=ZMt(i),ZEt.und(i)?TTt(this)||this._set(n):this._set(i)),r}_update(t,e){let n=HTt({},t);const{key:i,defaultProps:r}=this;n.default&&Object.assign(r,YTt(n,((t,e)=>/^on/.test(e)?WTt(t,i):t))),Lkt(this,n,"onProps"),Dkt(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return lkt(++this._lastCallId,{key:i,props:n,defaultProps:r,state:a,actions:{pause:()=>{Skt(this)||(Mkt(this,!0),nMt(a.pauseQueue),Dkt(this,"onPause",hkt(this,kkt(this,this.animation.to)),this))},resume:()=>{Skt(this)&&(Mkt(this,!1),wkt(this)&&this._resume(),nMt(a.resumeQueue),Dkt(this,"onResume",hkt(this,kkt(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((t=>{if(n.loop&&t.finished&&(!e||!t.noop)){const t=Ckt(n);if(t)return this._update(t,!0)}return t}))}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(dkt(this));const i=!ZEt.und(t.to),r=!ZEt.und(t.from);if(i||r){if(!(e.callId>this._lastToId))return n(dkt(this));this._lastToId=e.callId}const{key:o,defaultProps:a,animation:s}=this,{to:l,from:c}=s;let{to:u=l,from:h=c}=t;!r||i||e.default&&!ZEt.und(u)||(u=h),e.reverse&&([u,h]=[h,u]);const d=!QEt(h,c);d&&(s.from=h),h=ZMt(h);const f=!QEt(u,l);f&&this._focus(u);const p=tkt(e.to),{config:g}=s,{decay:m,velocity:v}=g;(i||r)&&(g.velocity=0),e.config&&!p&&function(t,e,n){n&&(okt(n=HTt({},n),e),e=HTt({},n,e)),okt(t,e),Object.assign(t,e);for(const a in ikt)null==t[a]&&(t[a]=ikt[a]);let{mass:i,frequency:r,damping:o}=t;ZEt.und(r)||(r<.01&&(r=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/r,2)*i,t.friction=4*Math.PI*o*i/r)}(g,VTt(e.config,o),e.config!==a.config?VTt(a.config,o):void 0);let y=TTt(this);if(!y||ZEt.und(u))return n(hkt(this,!0));const b=ZEt.und(e.reset)?r&&!e.default:!ZEt.und(h)&&GTt(e.reset,o),_=b?h:this.get(),x=JTt(u),w=ZEt.num(x)||ZEt.arr(x)||yTt(x),S=!p&&(!w||GTt(a.immediate||e.immediate,o));if(f){const t=NTt(u);if(t!==y.constructor){if(!S)throw Error("Cannot animate between ".concat(y.constructor.name," and ").concat(t.name,', as the "to" prop suggests'));y=this._set(x)}}const E=y.constructor;let M=KMt(u),T=!1;if(!M){const t=b||!xkt(this)&&d;(f||t)&&(T=QEt(JTt(_),x),M=!T),(QEt(s.immediate,S)||S)&&QEt(g.decay,m)&&QEt(g.velocity,v)||(M=!0)}if(T&&wkt(this)&&(s.changed&&!b?M=!0:M||this._stop(l)),!p&&((M||KMt(l))&&(s.values=y.getPayload(),s.toValues=KMt(u)?null:E==OTt?[1]:tMt(x)),s.immediate!=S&&(s.immediate=S,S||b||this._set(l)),M)){const{onRest:t}=s;JEt(Rkt,(t=>Lkt(this,e,t)));const i=hkt(this,kkt(this,l));nMt(this._pendingCalls,i),this._pendingCalls.add(n),s.changed&&REt.batchedUpdates((()=>{s.changed=!b,null==t||t(i,this),b?VTt(a.onRest,i):null==s.onStart||s.onStart(i,this)}))}b&&this._set(_),p?n(fkt(e.to,e,this._state,this)):M?this._start():wkt(this)&&!f?this._pendingCalls.add(n):n(ukt(_))}_focus(t){const e=this.animation;t!==e.to&&(QMt(this)&&this._detach(),e.to=t,QMt(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;KMt(e)&&(eTt(e,this),vkt(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;KMt(t)&&nTt(t,this)}_set(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=ZMt(t);if(!ZEt.und(n)){const t=TTt(this);if(!t||!QEt(n,t.getValue())){const i=NTt(n);t&&t.constructor==i?t.setValue(n):kTt(this,i.create(n)),t&&REt.batchedUpdates((()=>{this._onChange(n,e)}))}}return TTt(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Dkt(this,"onStart",hkt(this,kkt(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),VTt(this.animation.onChange,t,this)),VTt(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;TTt(this).reset(ZMt(t.to)),t.immediate||(t.fromValues=t.values.map((t=>t.lastPosition))),wkt(this)||(Ekt(this,!0),Skt(this)||this._resume())}_resume(){uMt.skipAnimation?this.finish():gMt.start(this)}_stop(t,e){if(wkt(this)){Ekt(this,!1);const n=this.animation;JEt(n.values,(t=>{t.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),JMt(this,{type:"idle",parent:this});const i=e?dkt(this.get()):hkt(this.get(),kkt(this,null!=t?t:n.to));nMt(this._pendingCalls,i),n.changed&&(n.changed=!1,Dkt(this,"onRest",i,this))}}}function kkt(t,e){const n=JTt(e);return QEt(JTt(t.get()),n)}function Ckt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.to,i=VTt(e);if(i){const r=!0!==i&&QTt(i),o=(r||t).reverse,a=!r||r.reset;return Akt(HTt({},t,{loop:e,default:!1,pause:void 0,to:!o||tkt(n)?n:void 0,from:a?t.from:void 0,reset:a},r))}}function Akt(t){const{to:e,from:n}=t=QTt(t),i=new Set;return ZEt.obj(e)&&Okt(e,i),ZEt.obj(n)&&Okt(n,i),t.keys=i.size?Array.from(i):null,t}function Pkt(t){const e=Akt(t);return ZEt.und(e.default)&&(e.default=YTt(e)),e}function Okt(t,e){$Et(t,((t,n)=>null!=t&&e.add(n)))}const Rkt=["onStart","onRest","onChange","onPause","onResume"];function Lkt(t,e,n){t.animation[n]=e[n]!==qTt(e,n)?WTt(e[n],t.key):void 0}function Dkt(t,e){for(var n,i,r,o,a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];null==(n=(i=t.animation)[e])||n.call(i,...s),null==(r=(o=t.defaultProps)[e])||r.call(o,...s)}const Ikt=["onStart","onChange","onRest"];let Nkt=1;class zkt{constructor(t,e){this.id=Nkt++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start(HTt({default:!0},t))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((t=>t.idle&&!t.isDelayed&&!t.isPaused))}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each(((e,n)=>t[n]=e.get())),t}set(t){for(const e in t){const n=t[e];ZEt.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Akt(t)),this}start(t){let{queue:e}=this;return t?e=tMt(t).map(Akt):this.queue=[],this._flush?this._flush(this,e):(Gkt(this,e),Fkt(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;JEt(tMt(e),(e=>n[e].stop(!!t)))}else pkt(this._state,this._lastAsyncId),this.each((e=>e.stop(!!t)));return this}pause(t){if(ZEt.und(t))this.start({pause:!0});else{const e=this.springs;JEt(tMt(t),(t=>e[t].pause()))}return this}resume(t){if(ZEt.und(t))this.start({pause:!1});else{const e=this.springs;JEt(tMt(t),(t=>e[t].resume()))}return this}each(t){$Et(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,eMt(t,(t=>{let[e,n]=t;n.value=this.get(),e(n,this,this._item)})));const o=!i&&this._started,a=r||o&&n.size?this.get():null;r&&e.size&&eMt(e,(t=>{let[e,n]=t;n.value=a,e(n,this,this._item)})),o&&(this._started=!1,eMt(n,(t=>{let[e,n]=t;n.value=a,e(n,this,this._item)})))}eventObserved(t){if("change"==t.type)this._changed.add(t.parent),t.idle||this._active.add(t.parent);else{if("idle"!=t.type)return;this._active.delete(t.parent)}REt.onFrame(this._onFrame)}}function Fkt(t,e){return Promise.all(e.map((e=>Ukt(t,e)))).then((e=>ckt(t,e)))}async function Ukt(t,e,n){const{keys:i,to:r,from:o,loop:a,onRest:s,onResolve:l}=e,c=ZEt.obj(e.default)&&e.default;a&&(e.loop=!1),!1===r&&(e.to=null),!1===o&&(e.from=null);const u=ZEt.arr(r)||ZEt.fun(r)?r:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):JEt(Ikt,(n=>{const i=e[n];if(ZEt.fun(i)){const r=t._events[n];e[n]=t=>{let{finished:e,cancelled:n}=t;const o=r.get(i);o?(e||(o.finished=!1),n&&(o.cancelled=!0)):r.set(i,{value:null,finished:e||!1,cancelled:n||!1})},c&&(c[n]=e[n])}}));const h=t._state;e.pause===!h.paused?(h.paused=e.pause,nMt(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const d=(i||Object.keys(t.springs)).map((n=>t.springs[n].start(e))),f=!0===e.cancel||!0===qTt(e,"cancel");(u||f&&h.asyncId)&&d.push(lkt(++t._lastAsyncId,{props:e,state:h,actions:{pause:KEt,resume:KEt,start(e,n){f?(pkt(h,t._lastAsyncId),n(dkt(t))):(e.onRest=s,n(fkt(u,e,h,t)))}}})),h.paused&&await new Promise((t=>{h.resumeQueue.add(t)}));const p=ckt(t,await Promise.all(d));if(a&&p.finished&&(!n||!p.noop)){const n=Ckt(e,a,r);if(n)return Gkt(t,[n]),Ukt(t,n,!0)}return l&&REt.batchedUpdates((()=>l(p,t,t.item))),p}function Bkt(t,e){const n=HTt({},t.springs);return e&&JEt(tMt(e),(t=>{ZEt.und(t.keys)&&(t=Akt(t)),ZEt.obj(t.to)||(t=HTt({},t,{to:void 0})),Vkt(n,t,(t=>Hkt(t)))})),jkt(t,n),n}function jkt(t,e){$Et(e,((e,n)=>{t.springs[n]||(t.springs[n]=e,eTt(e,t))}))}function Hkt(t,e){const n=new Tkt;return n.key=t,e&&eTt(n,e),n}function Vkt(t,e,n){e.keys&&JEt(e.keys,(i=>{(t[i]||(t[i]=n(i)))._prepareNode(e)}))}function Gkt(t,e){JEt(e,(e=>{Vkt(t.springs,e,(e=>Hkt(e,t)))}))}function Wkt(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}const qkt=["children"],Xkt=t=>{let{children:n}=t,i=Wkt(t,qkt);const r=(0,e.useContext)(Ykt),o=i.pause||!!r.pause,a=i.immediate||!!r.immediate;i=function(t,n){const[i]=(0,e.useState)((()=>({inputs:n,result:t()}))),r=(0,e.useRef)(),o=r.current;let a=o;if(a){const e=Boolean(n&&a.inputs&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(n,a.inputs));e||(a={inputs:n,result:t()})}else a=i;return(0,e.useEffect)((()=>{r.current=a,o==i&&(i.inputs=i.result=void 0)}),[a]),a.result}((()=>({pause:o,immediate:a})),[o,a]);const{Provider:s}=Ykt;return e.createElement(s,{value:i},n)},Ykt=(Kkt=Xkt,Zkt={},Object.assign(Kkt,e.createContext(Zkt)),Kkt.Provider._context=Kkt,Kkt.Consumer._context=Kkt,Kkt);var Kkt,Zkt;Xkt.Provider=Ykt.Provider,Xkt.Consumer=Ykt.Consumer;const Qkt=()=>{const t=[],e=function(e){vTt("".concat(pTt,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));const i=[];return JEt(t,((t,r)=>{if(ZEt.und(e))i.push(t.start());else{const o=n(e,t,r);o&&i.push(t.start(o))}})),i};e.current=t,e.add=function(e){t.includes(e)||t.push(e)},e.delete=function(e){const n=t.indexOf(e);~n&&t.splice(n,1)},e.pause=function(){return JEt(t,(t=>t.pause(...arguments))),this},e.resume=function(){return JEt(t,(t=>t.resume(...arguments))),this},e.set=function(e){JEt(t,(t=>t.set(e)))},e.start=function(e){const n=[];return JEt(t,((t,i)=>{if(ZEt.und(e))n.push(t.start());else{const r=this._getProps(e,t,i);r&&n.push(t.start(r))}})),n},e.stop=function(){return JEt(t,(t=>t.stop(...arguments))),this},e.update=function(e){return JEt(t,((t,n)=>t.update(this._getProps(e,t,n)))),this};const n=function(t,e,n){return ZEt.fun(t)?t(n,e):t};return e._getProps=n,e};function Jkt(t,n,i){const r=ZEt.fun(n)&&n;r&&!i&&(i=[]);const o=(0,e.useMemo)((()=>r||3==arguments.length?Qkt():void 0),[]),a=(0,e.useRef)(0),s=xTt(),l=(0,e.useMemo)((()=>({ctrls:[],queue:[],flush(t,e){const n=Bkt(t,e);return a.current>0&&!l.queue.length&&!Object.keys(n).some((e=>!t.springs[e]))?Fkt(t,e):new Promise((i=>{jkt(t,n),l.queue.push((()=>{i(Fkt(t,e))})),s()}))}})),[]),c=(0,e.useRef)([...l.ctrls]),u=[],h=ETt(t)||0;function d(t,e){for(let i=t;i<e;i++){const t=c.current[i]||(c.current[i]=new zkt(null,l.flush)),e=r?r(i,t):n[i];e&&(u[i]=Pkt(e))}}(0,e.useMemo)((()=>{JEt(c.current.slice(t,h),(t=>{ekt(t,o),t.stop(!0)})),c.current.length=t,d(h,t)}),[t]),(0,e.useMemo)((()=>{d(0,Math.min(h,t))}),i);const f=c.current.map(((t,e)=>Bkt(t,u[e]))),p=(0,e.useContext)(Xkt),g=ETt(p),m=p!==g&&$Tt(p);bTt((()=>{a.current++,l.ctrls=c.current;const{queue:t}=l;t.length&&(l.queue=[],JEt(t,(t=>t()))),JEt(c.current,((t,e)=>{null==o||o.add(t),m&&t.start({default:p});const n=u[e];n&&(nkt(t,n.ref),t.ref?t.queue.push(n):t.start(n))}))})),wTt((()=>()=>{JEt(l.ctrls,(t=>t.stop(!0)))}));const v=f.map((t=>HTt({},t)));return o?[v,o]:v}function $kt(t,e){const n=ZEt.fun(t),[[i],r]=Jkt(1,n?t:[t],n?e||[]:e);return n||2==arguments.length?[i,r]:i}let tCt;!function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"}(tCt||(tCt={}));class eCt extends bkt{constructor(t,e){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=t,this.calc=FMt(...e);const n=this._get(),i=NTt(n);kTt(this,i.create(n))}advance(t){const e=this._get();QEt(e,this.get())||(TTt(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&iCt(this._active)&&rCt(this)}_get(){const t=ZEt.arr(this.source)?this.source.map(ZMt):tMt(ZMt(this.source));return this.calc(...t)}_start(){this.idle&&!iCt(this._active)&&(this.idle=!1,JEt(CTt(this),(t=>{t.done=!1})),uMt.skipAnimation?(REt.batchedUpdates((()=>this.advance())),rCt(this)):gMt.start(this))}_attach(){let t=1;JEt(tMt(this.source),(e=>{KMt(e)&&eTt(e,this),vkt(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))})),this.priority=t,this._start()}_detach(){JEt(tMt(this.source),(t=>{KMt(t)&&nTt(t,this)})),this._active.clear(),rCt(this)}eventObserved(t){"change"==t.type?t.idle?this.advance():(this._active.add(t.parent),this._start()):"idle"==t.type?this._active.delete(t.parent):"priority"==t.type&&(this.priority=tMt(this.source).reduce(((t,e)=>Math.max(t,(vkt(e)?e.priority:0)+1)),0))}}function nCt(t){return!1!==t.idle}function iCt(t){return!t.size||Array.from(t).every(nCt)}function rCt(t){t.idle||(t.idle=!0,JEt(CTt(t),(t=>{t.done=!0})),JMt(t,{type:"idle",parent:t}))}uMt.assign({createStringInterpolator:fTt,to:(t,e)=>new eCt(t,e)});gMt.advance;const oCt=["primitive"].concat(Object.keys(t).filter((t=>/^[A-Z]/.test(t))).map((t=>t[0].toLowerCase()+t.slice(1))));uMt.assign({createStringInterpolator:fTt,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),(t=>{Xmt(t,Kmt)})((()=>{REt.advance()}));const aCt=function(t){let{applyAnimatedValues:e=(()=>!1),createAnimatedStyle:n=(t=>new LTt(t)),getComponentProps:i=(t=>t)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},o=t=>{const e=jTt(t)||"Anonymous";return(t=ZEt.str(t)?o[t]||(o[t]=FTt(t,r)):t[BTt]||(t[BTt]=FTt(t,r))).displayName="Animated(".concat(e,")"),t};return $Et(t,((e,n)=>{ZEt.arr(t)&&(n=jTt(e)),o[n]=o(e)})),{animated:o}}(oCt,{applyAnimatedValues:dvt}),sCt=aCt.animated,lCt=1,cCt=2,uCt=4,hCt=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),dCt=0,fCt=1,pCt=-1;function gCt(t){return t.isPerspectiveCamera}function mCt(t){return t.isOrthographicCamera}const vCt=2*Math.PI,yCt=Math.PI/2,bCt=1e-5,_Ct=Math.PI/180;function xCt(t,e,n){return Math.max(e,Math.min(n,t))}function wCt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bCt;return Math.abs(t)<e}function SCt(t,e){return wCt(t-e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:bCt)}function ECt(t,e){return Math.round(t/e)*e}function MCt(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function TCt(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function kCt(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=arguments.length>5?arguments[5]:void 0;const a=2/(i=Math.max(1e-4,i)),s=a*o,l=1/(1+s+.48*s*s+.235*s*s*s);let c=t-e;const u=e,h=r*i;c=xCt(c,-h,h),e=t-c;const d=(n.value+a*c)*o;n.value=(n.value-a*d)*l;let f=e+(c+d)*l;return u-t>0===f>u&&(f=u,n.value=(f-u)/o),f}function CCt(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;const s=2/(i=Math.max(1e-4,i)),l=s*o,c=1/(1+l+.48*l*l+.235*l*l*l);let u=e.x,h=e.y,d=e.z,f=t.x-u,p=t.y-h,g=t.z-d;const m=u,v=h,y=d,b=r*i,_=f*f+p*p+g*g;if(_>b*b){const t=Math.sqrt(_);f=f/t*b,p=p/t*b,g=g/t*b}u=t.x-f,h=t.y-p,d=t.z-g;const x=(n.x+s*f)*o,w=(n.y+s*p)*o,S=(n.z+s*g)*o;n.x=(n.x-s*x)*c,n.y=(n.y-s*w)*c,n.z=(n.z-s*S)*c,a.x=u+(f+x)*c,a.y=h+(p+w)*c,a.z=d+(g+S)*c;const E=m-t.x,M=v-t.y,T=y-t.z;return E*(a.x-m)+M*(a.y-v)+T*(a.z-y)>0&&(a.x=m,a.y=v,a.z=y,n.x=(a.x-m)/o,n.y=(a.y-v)/o,n.z=(a.z-y)/o),a}function ACt(t,e){e.set(0,0),t.forEach((t=>{e.x+=t.clientX,e.y+=t.clientY})),e.x/=t.length,e.y/=t.length}function PCt(t,e){return!!mCt(t)&&(console.warn("".concat(e," is not supported in OrthographicCamera")),!0)}class OCt{constructor(){this._listeners={}}addEventListener(t,e){const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}removeAllEventListeners(t){t?Array.isArray(this._listeners[t])&&(this._listeners[t].length=0):this._listeners={}}dispatchEvent(t){const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t)}}}var RCt;const LCt=1/8,DCt=/Mac/.test(null===(RCt=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===RCt?void 0:RCt.platform);let ICt,NCt,zCt,FCt,UCt,BCt,jCt,HCt,VCt,GCt,WCt,qCt,XCt,YCt,KCt,ZCt,QCt,JCt,$Ct,tAt,eAt,nAt,iAt;class rAt extends OCt{static install(t){ICt=t.THREE,NCt=Object.freeze(new ICt.Vector3(0,0,0)),zCt=Object.freeze(new ICt.Vector3(0,1,0)),FCt=Object.freeze(new ICt.Vector3(0,0,1)),UCt=new ICt.Vector2,BCt=new ICt.Vector3,jCt=new ICt.Vector3,HCt=new ICt.Vector3,VCt=new ICt.Vector3,GCt=new ICt.Vector3,WCt=new ICt.Vector3,qCt=new ICt.Vector3,XCt=new ICt.Vector3,YCt=new ICt.Vector3,KCt=new ICt.Spherical,ZCt=new ICt.Spherical,QCt=new ICt.Box3,JCt=new ICt.Box3,$Ct=new ICt.Sphere,tAt=new ICt.Quaternion,eAt=new ICt.Quaternion,nAt=new ICt.Matrix4,iAt=new ICt.Raycaster}static get ACTION(){return hCt}constructor(t,e){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=hCt.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=dCt,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new ICt.Vector3,this._focalOffsetVelocity=new ICt.Vector3,this._zoomVelocity={value:0},this._truckInternal=(t,e,n)=>{let i,r;if(gCt(this._camera)){const n=BCt.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*_Ct,a=n.length()*Math.tan(.5*o);i=this.truckSpeed*t*a/this._elementRect.height,r=this.truckSpeed*e*a/this._elementRect.height}else{if(!mCt(this._camera))return;{const n=this._camera;i=t*(n.right-n.left)/n.zoom/this._elementRect.width,r=e*(n.top-n.bottom)/n.zoom/this._elementRect.height}}this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+i,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(i,0,!0),this.forward(-r,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+i,this._focalOffsetEnd.y+r,this._focalOffsetEnd.z,!0):this.truck(i,r,!0)},this._rotateInternal=(t,e)=>{const n=vCt*this.azimuthRotateSpeed*t/this._elementRect.height,i=vCt*this.polarRotateSpeed*e/this._elementRect.height;this.rotate(n,i,!0)},this._dollyInternal=(t,e,n)=>{const i=Math.pow(.95,-t*this.dollySpeed),r=this._sphericalEnd.radius,o=this._sphericalEnd.radius*i,a=xCt(o,this.minDistance,this.maxDistance),s=a-o;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(o,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(s,!0),this._dollyToNoClamp(a,!0)):this._dollyToNoClamp(a,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?o:a)-r,this._dollyControlCoord.set(e,n)),this._lastDollyDirection=Math.sign(-t)},this._zoomInternal=(t,e,n)=>{const i=Math.pow(.95,t*this.dollySpeed),r=this._zoom,o=this._zoom*i;this.zoomTo(o,!0),this.dollyToCursor&&(this._changedZoom+=o-r,this._dollyControlCoord.set(e,n))},"undefined"===typeof ICt&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=(new ICt.Quaternion).setFromUnitVectors(this._camera.up,zCt),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=hCt.NONE,this._target=new ICt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new ICt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new ICt.Spherical).setFromVector3(BCt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new ICt.Vector3,new ICt.Vector3,new ICt.Vector3,new ICt.Vector3],this._updateNearPlaneCorners(),this._boundary=new ICt.Box3(new ICt.Vector3(-1/0,-1/0,-1/0),new ICt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new ICt.Vector2,this.mouseButtons={left:hCt.ROTATE,middle:hCt.DOLLY,right:hCt.TRUCK,wheel:gCt(this._camera)?hCt.DOLLY:mCt(this._camera)?hCt.ZOOM:hCt.NONE},this.touches={one:hCt.TOUCH_ROTATE,two:gCt(this._camera)?hCt.TOUCH_DOLLY_TRUCK:mCt(this._camera)?hCt.TOUCH_ZOOM_TRUCK:hCt.NONE,three:hCt.TOUCH_TRUCK};const n=new ICt.Vector2,i=new ICt.Vector2,r=new ICt.Vector2,o=t=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const e=this._domElement.getBoundingClientRect(),n=t.clientX/e.width,i=t.clientY/e.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||i<this._interactiveArea.top||i>this._interactiveArea.bottom)return}const e="mouse"!==t.pointerType?null:(t.buttons&lCt)===lCt?lCt:(t.buttons&uCt)===uCt?uCt:(t.buttons&cCt)===cCt?cCt:null;if(null!==e){const t=this._findPointerByMouseButton(e);t&&this._disposePointer(t)}if((t.buttons&lCt)===lCt&&this._lockedPointer)return;const n={pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,deltaX:0,deltaY:0,mouseButton:e};this._activePointers.push(n),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",s),this._isDragging=!0,h(t)},a=t=>{t.cancelable&&t.preventDefault();const e=t.pointerId,n=this._lockedPointer||this._findPointerById(e);if(n){if(n.clientX=t.clientX,n.clientY=t.clientY,n.deltaX=t.movementX,n.deltaY=t.movementY,this._state=0,"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(t.buttons&lCt)===lCt)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(t.buttons&uCt)===uCt&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(t.buttons&cCt)===cCt&&(this._state=this._state|this.mouseButtons.right);d()}},s=t=>{const e=this._findPointerById(t.pointerId);if(!e||e!==this._lockedPointer){if(e&&this._disposePointer(e),"touch"===t.pointerType)switch(this._activePointers.length){case 0:this._state=hCt.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=hCt.NONE;f()}};let l=-1;const c=t=>{if(!this._domElement)return;if(!this._enabled||this.mouseButtons.wheel===hCt.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const e=this._domElement.getBoundingClientRect(),n=t.clientX/e.width,i=t.clientY/e.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||i<this._interactiveArea.top||i>this._interactiveArea.bottom)return}if(t.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===hCt.ROTATE||this.mouseButtons.wheel===hCt.TRUCK){const t=performance.now();l-t<1e3&&this._getClientRect(this._elementRect),l=t}const e=DCt?-1:-3,n=1===t.deltaMode?t.deltaY/e:t.deltaY/(10*e),i=this.dollyToCursor?(t.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,r=this.dollyToCursor?(t.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case hCt.ROTATE:this._rotateInternal(t.deltaX,t.deltaY),this._isUserControllingRotate=!0;break;case hCt.TRUCK:this._truckInternal(t.deltaX,t.deltaY,!1),this._isUserControllingTruck=!0;break;case hCt.OFFSET:this._truckInternal(t.deltaX,t.deltaY,!0),this._isUserControllingOffset=!0;break;case hCt.DOLLY:this._dollyInternal(-n,i,r),this._isUserControllingDolly=!0;break;case hCt.ZOOM:this._zoomInternal(-n,i,r),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},u=t=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===rAt.ACTION.NONE){const e=t instanceof PointerEvent?t.pointerId:0,n=this._findPointerById(e);return n&&this._disposePointer(n),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),void this._domElement.ownerDocument.removeEventListener("pointerup",s)}t.preventDefault()}},h=t=>{if(!this._enabled)return;ACt(this._activePointers,UCt),this._getClientRect(this._elementRect),n.copy(UCt),i.copy(UCt);if(this._activePointers.length>=2){const t=UCt.x-this._activePointers[1].clientX,e=UCt.y-this._activePointers[1].clientY,n=Math.sqrt(t*t+e*e);r.set(0,n);const o=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),a=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);i.set(o,a)}if(this._state=0,t)if("pointerType"in t&&"touch"===t.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._lockedPointer||(t.buttons&lCt)!==lCt||(this._state=this._state|this.mouseButtons.left),(t.buttons&uCt)===uCt&&(this._state=this._state|this.mouseButtons.middle),(t.buttons&cCt)===cCt&&(this._state=this._state|this.mouseButtons.right);else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);(this._state&hCt.ROTATE)!==hCt.ROTATE&&(this._state&hCt.TOUCH_ROTATE)!==hCt.TOUCH_ROTATE&&(this._state&hCt.TOUCH_DOLLY_ROTATE)!==hCt.TOUCH_DOLLY_ROTATE&&(this._state&hCt.TOUCH_ZOOM_ROTATE)!==hCt.TOUCH_ZOOM_ROTATE||(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),(this._state&hCt.TRUCK)!==hCt.TRUCK&&(this._state&hCt.TOUCH_TRUCK)!==hCt.TOUCH_TRUCK&&(this._state&hCt.TOUCH_DOLLY_TRUCK)!==hCt.TOUCH_DOLLY_TRUCK&&(this._state&hCt.TOUCH_ZOOM_TRUCK)!==hCt.TOUCH_ZOOM_TRUCK||(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),(this._state&hCt.DOLLY)!==hCt.DOLLY&&(this._state&hCt.TOUCH_DOLLY)!==hCt.TOUCH_DOLLY&&(this._state&hCt.TOUCH_DOLLY_TRUCK)!==hCt.TOUCH_DOLLY_TRUCK&&(this._state&hCt.TOUCH_DOLLY_OFFSET)!==hCt.TOUCH_DOLLY_OFFSET&&(this._state&hCt.TOUCH_DOLLY_ROTATE)!==hCt.TOUCH_DOLLY_ROTATE||(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),(this._state&hCt.ZOOM)!==hCt.ZOOM&&(this._state&hCt.TOUCH_ZOOM)!==hCt.TOUCH_ZOOM&&(this._state&hCt.TOUCH_ZOOM_TRUCK)!==hCt.TOUCH_ZOOM_TRUCK&&(this._state&hCt.TOUCH_ZOOM_OFFSET)!==hCt.TOUCH_ZOOM_OFFSET&&(this._state&hCt.TOUCH_ZOOM_ROTATE)!==hCt.TOUCH_ZOOM_ROTATE||(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),(this._state&hCt.OFFSET)!==hCt.OFFSET&&(this._state&hCt.TOUCH_OFFSET)!==hCt.TOUCH_OFFSET&&(this._state&hCt.TOUCH_DOLLY_OFFSET)!==hCt.TOUCH_DOLLY_OFFSET&&(this._state&hCt.TOUCH_ZOOM_OFFSET)!==hCt.TOUCH_ZOOM_OFFSET||(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},d=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,ACt(this._activePointers,UCt);const t=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,e=t?-t.deltaX:i.x-UCt.x,o=t?-t.deltaY:i.y-UCt.y;if(i.copy(UCt),(this._state&hCt.ROTATE)!==hCt.ROTATE&&(this._state&hCt.TOUCH_ROTATE)!==hCt.TOUCH_ROTATE&&(this._state&hCt.TOUCH_DOLLY_ROTATE)!==hCt.TOUCH_DOLLY_ROTATE&&(this._state&hCt.TOUCH_ZOOM_ROTATE)!==hCt.TOUCH_ZOOM_ROTATE||(this._rotateInternal(e,o),this._isUserControllingRotate=!0),(this._state&hCt.DOLLY)===hCt.DOLLY||(this._state&hCt.ZOOM)===hCt.ZOOM){const t=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,e=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,i=this.dollyDragInverted?-1:1;(this._state&hCt.DOLLY)===hCt.DOLLY?(this._dollyInternal(i*o*LCt,t,e),this._isUserControllingDolly=!0):(this._zoomInternal(i*o*LCt,t,e),this._isUserControllingZoom=!0)}if((this._state&hCt.TOUCH_DOLLY)===hCt.TOUCH_DOLLY||(this._state&hCt.TOUCH_ZOOM)===hCt.TOUCH_ZOOM||(this._state&hCt.TOUCH_DOLLY_TRUCK)===hCt.TOUCH_DOLLY_TRUCK||(this._state&hCt.TOUCH_ZOOM_TRUCK)===hCt.TOUCH_ZOOM_TRUCK||(this._state&hCt.TOUCH_DOLLY_OFFSET)===hCt.TOUCH_DOLLY_OFFSET||(this._state&hCt.TOUCH_ZOOM_OFFSET)===hCt.TOUCH_ZOOM_OFFSET||(this._state&hCt.TOUCH_DOLLY_ROTATE)===hCt.TOUCH_DOLLY_ROTATE||(this._state&hCt.TOUCH_ZOOM_ROTATE)===hCt.TOUCH_ZOOM_ROTATE){const t=UCt.x-this._activePointers[1].clientX,e=UCt.y-this._activePointers[1].clientY,n=Math.sqrt(t*t+e*e),o=r.y-n;r.set(0,n);const a=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,s=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&hCt.TOUCH_DOLLY)===hCt.TOUCH_DOLLY||(this._state&hCt.TOUCH_DOLLY_ROTATE)===hCt.TOUCH_DOLLY_ROTATE||(this._state&hCt.TOUCH_DOLLY_TRUCK)===hCt.TOUCH_DOLLY_TRUCK||(this._state&hCt.TOUCH_DOLLY_OFFSET)===hCt.TOUCH_DOLLY_OFFSET?(this._dollyInternal(o*LCt,a,s),this._isUserControllingDolly=!0):(this._zoomInternal(o*LCt,a,s),this._isUserControllingZoom=!0)}(this._state&hCt.TRUCK)!==hCt.TRUCK&&(this._state&hCt.TOUCH_TRUCK)!==hCt.TOUCH_TRUCK&&(this._state&hCt.TOUCH_DOLLY_TRUCK)!==hCt.TOUCH_DOLLY_TRUCK&&(this._state&hCt.TOUCH_ZOOM_TRUCK)!==hCt.TOUCH_ZOOM_TRUCK||(this._truckInternal(e,o,!1),this._isUserControllingTruck=!0),(this._state&hCt.OFFSET)!==hCt.OFFSET&&(this._state&hCt.TOUCH_OFFSET)!==hCt.TOUCH_OFFSET&&(this._state&hCt.TOUCH_DOLLY_OFFSET)!==hCt.TOUCH_DOLLY_OFFSET&&(this._state&hCt.TOUCH_ZOOM_OFFSET)!==hCt.TOUCH_ZOOM_OFFSET||(this._truckInternal(e,o,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},f=()=>{ACt(this._activePointers,UCt),i.copy(UCt),this._dragNeedsUpdate=!1,(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",p),this._domElement.ownerDocument.addEventListener("pointerlockerror",g),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",s),h())},this.unlockPointer=()=>{var t,e,n;null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),null===(t=this._domElement)||void 0===t||t.ownerDocument.exitPointerLock(),null===(e=this._domElement)||void 0===e||e.ownerDocument.removeEventListener("pointerlockchange",p),null===(n=this._domElement)||void 0===n||n.ownerDocument.removeEventListener("pointerlockerror",g),this.cancel()};const p=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},g=()=>{this.unlockPointer()};this._addAllEventListeners=t=>{this._domElement=t,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",s),this._domElement.addEventListener("wheel",c,{passive:!1}),this._domElement.addEventListener("contextmenu",u)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",s),this._domElement.removeEventListener("wheel",c,{passive:!1}),this._domElement.removeEventListener("contextmenu",u),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this._domElement.ownerDocument.removeEventListener("pointerlockchange",p),this._domElement.ownerDocument.removeEventListener("pointerlockerror",g))},this.cancel=()=>{this._state!==hCt.NONE&&(this._state=hCt.NONE,this._activePointers.length=0,f())},e&&this.connect(e),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}set interactiveArea(t){this._interactiveArea.width=xCt(t.width,0,1),this._interactiveArea.height=xCt(t.height,0,1),this._interactiveArea.x=xCt(t.x,0,1-this._interactiveArea.width),this._interactiveArea.y=xCt(t.y,0,1-this._interactiveArea.height)}addEventListener(t,e){super.addEventListener(t,e)}removeEventListener(t,e){super.removeEventListener(t,e)}rotate(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+e,n)}rotateAzimuthTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(t,this._sphericalEnd.phi,e)}rotatePolarTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(this._sphericalEnd.theta,t,e)}rotateTo(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isUserControllingRotate=!1;const i=xCt(t,this.minAzimuthAngle,this.maxAzimuthAngle),r=xCt(e,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=r,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||SCt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&SCt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dollyTo(this._sphericalEnd.radius-t,e)}dollyTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._isUserControllingDolly=!1,this._lastDollyDirection=dCt,this._changedDolly=0,this._dollyToNoClamp(xCt(t,this.minDistance,this.maxDistance),e)}_dollyToNoClamp(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const e=this._collisionTest(),i=SCt(e,this._spherical.radius);if(!(n>t)&&i)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,e)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,e||(this._spherical.radius=this._sphericalEnd.radius);const i=!e||SCt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(i)}dollyInFixed(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._targetEnd.add(this._getCameraDirection(VCt).multiplyScalar(t)),e||this._target.copy(this._targetEnd);const n=!e||SCt(this._target.x,this._targetEnd.x,this.restThreshold)&&SCt(this._target.y,this._targetEnd.y,this.restThreshold)&&SCt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomTo(this._zoomEnd+t,e)}zoomTo(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._isUserControllingZoom=!1,this._zoomEnd=xCt(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,e||(this._zoom=this._zoomEnd);const n=!e||SCt(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn("`pan` has been renamed to `truck`"),this.truck(t,e,n)}truck(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._camera.updateMatrix(),GCt.setFromMatrixColumn(this._camera.matrix,0),WCt.setFromMatrixColumn(this._camera.matrix,1),GCt.multiplyScalar(t),WCt.multiplyScalar(-e);const i=BCt.copy(GCt).add(WCt),r=jCt.copy(this._targetEnd).add(i);return this.moveTo(r.x,r.y,r.z,n)}forward(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];BCt.setFromMatrixColumn(this._camera.matrix,0),BCt.crossVectors(this._camera.up,BCt),BCt.multiplyScalar(t);const n=jCt.copy(this._targetEnd).add(BCt);return this.moveTo(n.x,n.y,n.z,e)}elevate(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return BCt.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+BCt.x,this._targetEnd.y+BCt.y,this._targetEnd.z+BCt.z,e)}moveTo(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._isUserControllingTruck=!1;const r=BCt.set(t,e,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,r,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const o=!i||SCt(this._target.x,this._targetEnd.x,this.restThreshold)&&SCt(this._target.y,this._targetEnd.y,this.restThreshold)&&SCt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=BCt.set(t,e,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(r.x,r.y,r.z,i)}fitToBox(t,e){let{cover:n=!1,paddingLeft:i=0,paddingRight:r=0,paddingBottom:o=0,paddingTop:a=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=[],l=t.isBox3?QCt.copy(t):QCt.setFromObject(t);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const c=ECt(this._sphericalEnd.theta,yCt),u=ECt(this._sphericalEnd.phi,yCt);s.push(this.rotateTo(c,u,e));const h=BCt.setFromSpherical(this._sphericalEnd).normalize(),d=tAt.setFromUnitVectors(h,FCt),f=SCt(Math.abs(h.y),1);f&&d.multiply(eAt.setFromAxisAngle(zCt,c)),d.multiply(this._yAxisUpSpaceInverse);const p=JCt.makeEmpty();jCt.copy(l.min).applyQuaternion(d),p.expandByPoint(jCt),jCt.copy(l.min).setX(l.max.x).applyQuaternion(d),p.expandByPoint(jCt),jCt.copy(l.min).setY(l.max.y).applyQuaternion(d),p.expandByPoint(jCt),jCt.copy(l.max).setZ(l.min.z).applyQuaternion(d),p.expandByPoint(jCt),jCt.copy(l.min).setZ(l.max.z).applyQuaternion(d),p.expandByPoint(jCt),jCt.copy(l.max).setY(l.min.y).applyQuaternion(d),p.expandByPoint(jCt),jCt.copy(l.max).setX(l.min.x).applyQuaternion(d),p.expandByPoint(jCt),jCt.copy(l.max).applyQuaternion(d),p.expandByPoint(jCt),p.min.x-=i,p.min.y-=o,p.max.x+=r,p.max.y+=a,d.setFromUnitVectors(FCt,h),f&&d.premultiply(eAt.invert()),d.premultiply(this._yAxisUpSpace);const g=p.getSize(BCt),m=p.getCenter(jCt).applyQuaternion(d);if(gCt(this._camera)){const t=this.getDistanceToFitBox(g.x,g.y,g.z,n);s.push(this.moveTo(m.x,m.y,m.z,e)),s.push(this.dollyTo(t,e)),s.push(this.setFocalOffset(0,0,0,e))}else if(mCt(this._camera)){const t=this._camera,i=t.right-t.left,r=t.top-t.bottom,o=n?Math.max(i/g.x,r/g.y):Math.min(i/g.x,r/g.y);s.push(this.moveTo(m.x,m.y,m.z,e)),s.push(this.zoomTo(o,e)),s.push(this.setFocalOffset(0,0,0,e))}return Promise.all(s)}fitToSphere(t,e){const n=[],i=t instanceof ICt.Sphere?$Ct.copy(t):rAt.createBoundingSphere(t,$Ct);if(n.push(this.moveTo(i.center.x,i.center.y,i.center.z,e)),gCt(this._camera)){const t=this.getDistanceToFitSphere(i.radius);n.push(this.dollyTo(t,e))}else if(mCt(this._camera)){const t=this._camera.right-this._camera.left,r=this._camera.top-this._camera.bottom,o=2*i.radius,a=Math.min(t/o,r/o);n.push(this.zoomTo(a,e))}return n.push(this.setFocalOffset(0,0,0,e)),Promise.all(n)}setLookAt(t,e,n,i,r,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dCt,this._changedDolly=0;const s=jCt.set(i,r,o),l=BCt.set(t,e,n);this._targetEnd.copy(s),this._sphericalEnd.setFromVector3(l.sub(s).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const c=!a||SCt(this._target.x,this._targetEnd.x,this.restThreshold)&&SCt(this._target.y,this._targetEnd.y,this.restThreshold)&&SCt(this._target.z,this._targetEnd.z,this.restThreshold)&&SCt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&SCt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&SCt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(t,e,n,i,r,o,a,s,l,c,u,h,d){let f=arguments.length>13&&void 0!==arguments[13]&&arguments[13];this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=dCt,this._changedDolly=0;const p=BCt.set(i,r,o),g=jCt.set(t,e,n);KCt.setFromVector3(g.sub(p).applyQuaternion(this._yAxisUpSpace));const m=HCt.set(c,u,h),v=jCt.set(a,s,l);ZCt.setFromVector3(v.sub(m).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(m,d));const y=ZCt.theta-KCt.theta,b=ZCt.phi-KCt.phi,_=ZCt.radius-KCt.radius;this._sphericalEnd.set(KCt.radius+_*d,KCt.phi+b*d,KCt.theta+y*d),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const x=!f||SCt(this._target.x,this._targetEnd.x,this.restThreshold)&&SCt(this._target.y,this._targetEnd.y,this.restThreshold)&&SCt(this._target.z,this._targetEnd.z,this.restThreshold)&&SCt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&SCt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&SCt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(x)}setPosition(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.setLookAt(t,e,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=this.getPosition(BCt),o=this.setLookAt(r.x,r.y,r.z,t,e,n,i);return this._sphericalEnd.phi=xCt(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,e,n),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);const r=!i||SCt(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&SCt(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&SCt(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}setOrbitPoint(t,e,n){this._camera.updateMatrixWorld(),GCt.setFromMatrixColumn(this._camera.matrixWorldInverse,0),WCt.setFromMatrixColumn(this._camera.matrixWorldInverse,1),qCt.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=BCt.set(t,e,n),r=i.distanceTo(this._camera.position),o=i.sub(this._camera.position);GCt.multiplyScalar(o.x),WCt.multiplyScalar(o.y),qCt.multiplyScalar(o.z),BCt.copy(GCt).add(WCt).add(qCt),BCt.z=BCt.z+r,this.dollyTo(r,!1),this.setFocalOffset(-BCt.x,BCt.y,-BCt.z,!1),this.moveTo(t,e,n,!1)}setBoundary(t){if(!t)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,e,n,i){null!==t?(this._viewport=this._viewport||new ICt.Vector4,"number"===typeof t?this._viewport.set(t,e,n,i):this._viewport.copy(t)):this._viewport=null}getDistanceToFitBox(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(PCt(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const r=t/e,o=this._camera.getEffectiveFOV()*_Ct,a=this._camera.aspect;return.5*((i?r>a:r<a)?e:t/a)/Math.tan(.5*o)+.5*n}getDistanceToFitSphere(t){if(PCt(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const e=this._camera.getEffectiveFOV()*_Ct,n=2*Math.atan(Math.tan(.5*e)*this._camera.aspect),i=1<this._camera.aspect?e:n;return t/Math.sin(.5*i)}getTarget(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t&&t.isVector3?t:new ICt.Vector3).copy(e?this._targetEnd:this._target)}getPosition(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t&&t.isVector3?t:new ICt.Vector3).setFromSpherical(e?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(e?this._targetEnd:this._target)}getSpherical(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t&&t instanceof ICt.Spherical?t:new ICt.Spherical).copy(e?this._sphericalEnd:this._spherical)}getFocalOffset(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t&&t.isVector3?t:new ICt.Vector3).copy(e?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%vCt,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=vCt),this._spherical.theta+=vCt*Math.round((this._sphericalEnd.theta-this._spherical.theta)/vCt)}reset(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!SCt(this._camera.up.x,this._cameraUp0.x)||!SCt(this._camera.up.y,this._cameraUp0.y)||!SCt(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const t=this.getPosition(BCt);this.updateCameraUp(),this.setPosition(t.x,t.y,t.z)}const e=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(e)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,zCt),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=BCt.subVectors(this._target,this._camera.position).normalize(),e=jCt.crossVectors(t,this._camera.up);this._camera.up.crossVectors(e,t).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(BCt);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(t){const e=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,i=this._sphericalEnd.radius-this._spherical.radius,r=XCt.subVectors(this._targetEnd,this._target),o=YCt.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(wCt(e))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const e=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=kCt(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,e,1/0,t),this._needsUpdate=!0}if(wCt(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const e=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=kCt(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,e,1/0,t),this._needsUpdate=!0}if(wCt(i))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const e=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=kCt(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,e,this.maxSpeed,t),this._needsUpdate=!0}if(wCt(r.x)&&wCt(r.y)&&wCt(r.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const e=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;CCt(this._target,this._targetEnd,this._targetVelocity,e,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(wCt(o.x)&&wCt(o.y)&&wCt(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const e=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;CCt(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,e,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(wCt(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const e=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=kCt(this._zoom,this._zoomEnd,this._zoomVelocity,e,1/0,t)}if(this.dollyToCursor)if(gCt(this._camera)&&0!==this._changedDolly){const t=this._spherical.radius-this._lastDistance,e=this._camera,n=this._getCameraDirection(VCt),i=BCt.copy(n).cross(e.up).normalize();0===i.lengthSq()&&(i.x=1);const r=jCt.crossVectors(i,n),o=this._sphericalEnd.radius*Math.tan(e.getEffectiveFOV()*_Ct*.5),a=(this._sphericalEnd.radius-t-this._sphericalEnd.radius)/this._sphericalEnd.radius,s=HCt.copy(this._targetEnd).add(i.multiplyScalar(this._dollyControlCoord.x*o*e.aspect)).add(r.multiplyScalar(this._dollyControlCoord.y*o)),l=BCt.copy(this._targetEnd).lerp(s,a),c=this._lastDollyDirection===fCt&&this._spherical.radius<=this.minDistance,u=this._lastDollyDirection===pCt&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(c||u)){this._sphericalEnd.radius-=t,this._spherical.radius-=t;const e=jCt.copy(n).multiplyScalar(-t);l.add(e)}this._boundary.clampPoint(l,l);const h=jCt.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(h),this._changedDolly-=t,wCt(this._changedDolly)&&(this._changedDolly=0)}else if(mCt(this._camera)&&0!==this._changedZoom){const t=this._zoom-this._lastZoom,e=this._camera,n=BCt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(e.near+e.far)/(e.near-e.far)).unproject(e),i=jCt.set(0,0,-1).applyQuaternion(e.quaternion),r=HCt.copy(n).add(i.multiplyScalar(-n.dot(e.up))),o=-(this._zoom-t-this._zoom)/this._zoom,a=this._getCameraDirection(VCt),s=this._targetEnd.dot(a),l=BCt.copy(this._targetEnd).lerp(r,o),c=l.dot(a),u=a.multiplyScalar(c-s);l.sub(u),this._boundary.clampPoint(l,l);const h=jCt.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(h),this._changedZoom-=t,wCt(this._changedZoom)&&(this._changedZoom=0)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const s=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,s),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);(!wCt(this._focalOffset.x)||!wCt(this._focalOffset.y)||!wCt(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),GCt.setFromMatrixColumn(this._camera.matrix,0),WCt.setFromMatrixColumn(this._camera.matrix,1),qCt.setFromMatrixColumn(this._camera.matrix,2),GCt.multiplyScalar(this._focalOffset.x),WCt.multiplyScalar(-this._focalOffset.y),qCt.multiplyScalar(this._focalOffset.z),BCt.copy(GCt).add(WCt).add(qCt),this._camera.position.add(BCt)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),BCt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const l=this._needsUpdate;return l&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):l?(this.dispatchEvent({type:"update"}),wCt(e,this.restThreshold)&&wCt(n,this.restThreshold)&&wCt(i,this.restThreshold)&&wCt(r.x,this.restThreshold)&&wCt(r.y,this.restThreshold)&&wCt(r.z,this.restThreshold)&&wCt(o.x,this.restThreshold)&&wCt(o.y,this.restThreshold)&&wCt(o.z,this.restThreshold)&&wCt(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!l&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=l,this._needsUpdate=!1,l}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:MCt(this.maxDistance),minZoom:this.minZoom,maxZoom:MCt(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:MCt(this.maxPolarAngle),minAzimuthAngle:MCt(this.minAzimuthAngle),maxAzimuthAngle:MCt(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:BCt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=JSON.parse(t);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=TCt(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=TCt(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=TCt(n.maxPolarAngle),this.minAzimuthAngle=TCt(n.minAzimuthAngle),this.maxAzimuthAngle=TCt(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],e),KCt.setFromVector3(BCt.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(KCt.theta,KCt.phi,e),this.dollyTo(KCt.radius,e),this.zoomTo(n.zoom,e),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],e),this._needsUpdate=!0}connect(t){this._domElement?console.warn("camera-controls is already connected."):(t.setAttribute("data-camera-controls-version","2.8.3"),this._addAllEventListeners(t),this._getClientRect(this._elementRect))}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find((e=>e.pointerId===t))}_findPointerByMouseButton(t){return this._activePointers.find((e=>e.mouseButton===t))}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,e,n){const i=e.lengthSq();if(0===i)return t;const r=jCt.copy(e).add(t),o=this._boundary.clampPoint(r,HCt).sub(r),a=o.lengthSq();if(0===a)return t.add(e);if(a===i)return t;if(0===n)return t.add(e).add(o);{const i=1+n*a/e.dot(o);return t.add(jCt.copy(e).multiplyScalar(i)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(gCt(this._camera)){const t=this._camera,e=t.near,n=t.getEffectiveFOV()*_Ct,i=Math.tan(.5*n)*e,r=i*t.aspect;this._nearPlaneCorners[0].set(-r,-i,0),this._nearPlaneCorners[1].set(r,-i,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(-r,i,0)}else if(mCt(this._camera)){const t=this._camera,e=1/t.zoom,n=t.left*e,i=t.right*e,r=t.top*e,o=t.bottom*e;this._nearPlaneCorners[0].set(n,r,0),this._nearPlaneCorners[1].set(i,r,0),this._nearPlaneCorners[2].set(i,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1))return t;if(PCt(this._camera,"_collisionTest"))return t;const e=this._getTargetDirection(VCt);nAt.lookAt(NCt,e,this._camera.up);for(let n=0;n<4;n++){const i=jCt.copy(this._nearPlaneCorners[n]);i.applyMatrix4(nAt);const r=HCt.addVectors(this._target,i);iAt.set(r,e),iAt.far=this._spherical.radius+1;const o=iAt.intersectObjects(this.colliderMeshes);0!==o.length&&o[0].distance<t&&(t=o[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const e=this._domElement.getBoundingClientRect();return t.x=e.left,t.y=e.top,this._viewport?(t.x+=this._viewport.x,t.y+=e.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=e.width,t.height=e.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((t=>{const e=()=>{this.removeEventListener("rest",e),t()};this.addEventListener("rest",e)})))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ICt.Sphere,n=e.center;QCt.makeEmpty(),t.traverseVisible((t=>{t.isMesh&&QCt.expandByObject(t)})),QCt.getCenter(n);let i=0;return t.traverseVisible((t=>{if(!t.isMesh)return;const e=t,r=e.geometry.clone();r.applyMatrix4(e.matrixWorld);const o=r.attributes.position;for(let a=0,s=o.count;a<s;a++)BCt.fromBufferAttribute(o,a),i=Math.max(i,n.distanceToSquared(BCt))})),e.radius=Math.sqrt(i),e}}const oAt=["ctrl","alt","meta","shift"],aAt="__0_1_2_3_4_5_6_7_8_9_a_b_c_d_e_f_g_h_i_j_k_l_m_n_o_p_q_r_s_t_u_v_w_x_y_z_ _`_'_\"_~_!_@_#_$_%_^_&_*_(_)_._-_+_=_[_]_{_}_<_>_,_/_?_;_:_\\_|_capslock_numlock_enter_tab_arrowdown_arrowleft_arrowright_arrowup_end_home_pagedown_pageup_backspace_delete_insert_escape_f1_f2_f3_f4_f5_f6_f7_f8_f9_f10_f11_f12_f13_f14_f15_f16_f17_f18_f19_f20_f21_f22_f23".split("_");aAt[1]="_";const sAt={};for(const[n,Set]of aAt.entries())sAt[Set]=n;const lAt={space:" ",plus:"+",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright",esc:"escape"},cAt=4,uAt=9+cAt,hAt=2**cAt,dAt=2**uAt,fAt=2**(2*uAt),pAt=2**(3*uAt);function gAt(t){let e;return"+"===t?["+"]:("+"==t.slice(-1)?(e=t.slice(0,-2).split("+"),e.push("+")):e=t.split("+"),e.map((t=>lAt[t]||t)))}function mAt(t){const e=new Set(t);let n=sAt[t[t.length-1].toLowerCase()]||0;for(const i of oAt)n=2*n+(e.has(i)?1:0);return n}function vAt(t){return t>>cAt}function yAt(t){return t%hAt}function bAt(t,e){if(void 0===t)return!1;if(vAt(t)>0)return!1;const n=yAt(t);return(n!==yAt(e)||0!==vAt(e))&&(n&yAt(e))===n}function _At(t){let e=sAt[t.key.toLowerCase()]||0;for(const n of oAt)e=2*e+(t["".concat(n,"Key")]?1:0);return e}function xAt(t){return t.map(gAt)}function wAt(t){if(t.length>4)throw"Can't encode sequence of more than 4 keys!";let e=0;for(const n of t)e=e*dAt+mAt(n);return e}function SAt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{history:[],historySize:0,bindings:new Map,disabledSequenceCodes:new Set,...t}}function EAt(t,e,n){const i=wAt(xAt(e));return t.bindings.has(i)||t.bindings.set(i,new Set),t.bindings.get(i).add(n),PAt(t)}function MAt(t,e,n){const i=wAt(xAt(e)),r=t.bindings.get(i);return r&&(r.delete(n),0==r.size&&t.bindings.delete(i)),PAt(t)}function TAt(t,e){const n=wAt(xAt(e));return t.disabledSequenceCodes.delete(n),t}function kAt(t,e){const n=wAt(xAt(e));return t.disabledSequenceCodes.add(n),t}function CAt(t,e){const n=_At(e);return bAt(t.history.at(-1),n)&&t.history.pop(),t.history.push(n),t.history.length>t.historySize&&t.history.shift(),t}function AAt(t,e){const n=function(t){const e=[];for(const n of function(t){const e=[];let n=0,i=0;for(let r=t.length-1;r>=0;r--)n=2**i*t[r]+n,i+=13,e.push(n);return e}(t.history))t.disabledSequenceCodes.has(n)||e.push(...t.bindings.get(n)||[]);return e}(t=CAt(t,e));for(const i of n)i(e);return[t,n]}function PAt(t){t.historySize=0;for(const n of t.bindings.keys())t.historySize=Math.max(t.historySize,(e=n)<dAt?1:e<fAt?2:e<pAt?3:4);var e;return t}class OAt{add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.slice(0,-1),r=e.at(-1);return this.state=EAt(this.state,i,r),this}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const i=e.slice(0,-1),r=e.at(-1);return this.state=MAt(this.state,i,r),this}enable(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.state=TAt(this.state,e),this}disable(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.state=kAt(this.state,e),this}handle(t){const[e,n]=AAt(this.state,t);return this.state=e,n.length>0}constructor(t){this.state=t,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.handle=this.handle.bind(this)}}function RAt(){return new OAt(SAt())}let LAt=!1;const DAt=RAt(),IAt=RAt(),NAt=RAt(),zAt=new Map;let FAt=[];const UAt=t=>Array.isArray(t)?t.map((t=>t.toLowerCase())):[t.toLowerCase()],BAt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[n,i]=(0,e.useState)([]);return(0,e.useLayoutEffect)((()=>{LAt||void 0===window||(window.addEventListener("keypress",DAt.handle),window.addEventListener("keyup",IAt.handle),window.addEventListener("keydown",NAt.handle),LAt=!0)}),[]),(0,e.useLayoutEffect)((()=>(t.map((t=>{var e;t.disabled||(t.callback=(t=>e=>{const n=e.target,i="INPUT"===n.tagName&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(n.type);if(!n.isContentEditable&&(!i&&"TEXTAREA"!==n.tagName&&"SELECT"!==n.tagName||n.readOnly))return t(e)})(t.callback),(null==(e=t.ref)?void 0:e.current)?((t=>{var e,n,i,r;const o=RAt();o.add(...UAt(t.keys),t.callback),null==(i=null==(n=t.ref)?void 0:n.current)||i.addEventListener(null!==(e=t.action)&&void 0!==e?e:"keypress",o.handle),zAt.set(null==(r=t.ref)?void 0:r.current,o)})(t),FAt=[...FAt,t]):t.ref||((t=>{t.action&&"keypress"!==t.action||DAt.add(...UAt(t.keys),t.callback),"keyup"===t.action&&IAt.add(...UAt(t.keys),t.callback),"keydown"===t.action&&NAt.add(...UAt(t.keys),t.callback)})(t),FAt=[...FAt,t]))})),()=>{t.map((t=>{(t=>{var e,n,i,r;if((null==(e=t.ref)?void 0:e.current)&&!t.disabled){var o;const e=zAt.get(null==(n=t.ref)?void 0:n.current);e.remove(...UAt(t.keys),t.callback),null==(r=null==(i=t.ref)?void 0:i.current)||r.removeEventListener(null!==(o=t.action)&&void 0!==o?o:"keypress",e.handle)}})(t),(t=>{t.action&&"keypress"!==t.action||DAt.remove(...UAt(t.keys),t.callback),"keyup"===t.action&&IAt.remove(...UAt(t.keys),t.callback),"keydown"===t.action&&NAt.remove(...UAt(t.keys),t.callback)})(t),FAt=FAt.filter((e=>t!==e))}))})),[t]),(0,e.useEffect)((()=>{i(FAt)}),[]),n};let jAt=!1;try{navigator&&(jAt=navigator.platform.toUpperCase().indexOf("MAC")>=0)}catch(DOt){console.warn(DOt)}var HAt;!function(t){t.HOLD_START="holdStart",t.HOLD_END="holdEnd",t.HOLDING="holding"}(HAt||(HAt={}));class VAt{constructor(){this._listeners={}}addEventListener(t,e){const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}removeEventListener(t,e){const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t)}}}class GAt extends VAt{constructor(t){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=t=>{if(!this._enabled)return;if(this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:HAt.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),this._holding=!0;const e=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(e,this.holdIntervalDelay):window.requestAnimationFrame(e);const n=performance.now();this._deltaTime=n-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:HAt.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t})};this._intervalId=this.holdIntervalDelay?window.setTimeout(e,this.holdIntervalDelay):window.requestAnimationFrame(e)},this._holdEnd=t=>{if(!this._enabled)return;if(!this._holding)return;const e=performance.now();this._deltaTime=e-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:HAt.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:t}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=t}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&(this._enabled=t,this._enabled||this._holdEnd())}}class WAt extends GAt{constructor(t,e){super(e),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);document.addEventListener("keydown",(e=>{(function(t){const e=t.target;return"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable})(e)||e.keyCode===t&&this._holdStart(e)})),document.addEventListener("keyup",(e=>{e.keyCode===t&&this._holdEnd(e)})),window.addEventListener("blur",this._holdEnd)}}const qAt=(t,e)=>{const n=null!==t[0].index,i=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),o={},a={},s=t[0].morphTargetsRelative,l=new ist;let c=0;if(t.forEach(((t,u)=>{let h=0;if(n!==(null!==t.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let e in t.attributes){if(!i.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[e]&&(o[e]=[]),o[e].push(t.attributes[e]),h++}if(h!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(s!==t.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let e in t.morphAttributes){if(!r.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[e]&&(a[e]=[]),a[e].push(t.morphAttributes[e])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(t.userData),e){let e;if(t.index)e=t.index.count;else{if(void 0===t.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;e=t.attributes.position.count}l.addGroup(c,e,u),c+=e}})),n){let e=0;const n=[];t.forEach((t=>{const i=t.index;for(let r=0;r<i.count;++r)n.push(i.getX(r)+e);e+=t.attributes.position.count})),l.setIndex(n)}for(let u in o){const t=XAt(o[u]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,t)}for(let u in a){const t=a[u][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let e=0;e<t;++e){const t=[];for(let i=0;i<a[u].length;++i)t.push(a[u][i][e]);const n=XAt(t);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(n)}}return l},XAt=t=>{let e,n,i,r=0;if(t.forEach((t=>(void 0===e&&(e=t.array.constructor),e!==t.array.constructor?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null):(void 0===n&&(n=t.itemSize),n!==t.itemSize?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null):(void 0===i&&(i=t.normalized),i!==t.normalized?(console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null):void(r+=t.array.length)))))),e&&n){const o=new e(r);let a=0;return t.forEach((t=>{o.set(t.array,a),a+=t.array.length})),new Uat(o,n,i)}};const YAt=new jst,KAt=new cot,ZAt=new cot,QAt=new cot,JAt=new cot,$At=new cot,tPt=new cot,ePt=new cot,nPt=new cot,iPt=new cot,rPt=new cot,oPt=new cot,aPt=new cot,sPt=new cot,lPt=new cot;class cPt{constructor(t,e,n){this.camera=t,this.scene=e,this.startPoint=new cot,this.endPoint=new cot,this.collection=[],this.deep=n||Number.MAX_VALUE}select(t,e){return this.startPoint=t||this.startPoint,this.endPoint=e||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(YAt,this.scene),this.collection}updateFrustum(t,e){if(t=t||this.startPoint,e=e||this.endPoint,t.x===e.x&&(e.x+=Number.EPSILON),t.y===e.y&&(e.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera)ZAt.copy(t),ZAt.x=Math.min(t.x,e.x),ZAt.y=Math.max(t.y,e.y),e.x=Math.max(t.x,e.x),e.y=Math.min(t.y,e.y),QAt.setFromMatrixPosition(this.camera.matrixWorld),JAt.copy(ZAt),$At.set(e.x,ZAt.y,0),tPt.copy(e),ePt.set(ZAt.x,e.y,0),JAt.unproject(this.camera),$At.unproject(this.camera),tPt.unproject(this.camera),ePt.unproject(this.camera),aPt.copy(JAt).sub(QAt),sPt.copy($At).sub(QAt),lPt.copy(tPt).sub(QAt),aPt.normalize(),sPt.normalize(),lPt.normalize(),aPt.multiplyScalar(this.deep),sPt.multiplyScalar(this.deep),lPt.multiplyScalar(this.deep),aPt.add(QAt),sPt.add(QAt),lPt.add(QAt),(n=YAt.planes)[0].setFromCoplanarPoints(QAt,JAt,$At),n[1].setFromCoplanarPoints(QAt,$At,tPt),n[2].setFromCoplanarPoints(tPt,ePt,QAt),n[3].setFromCoplanarPoints(ePt,JAt,QAt),n[4].setFromCoplanarPoints($At,tPt,ePt),n[5].setFromCoplanarPoints(lPt,sPt,aPt),n[5].normal.multiplyScalar(-1);else if(this.camera.isOrthographicCamera){const i=Math.min(t.x,e.x),r=Math.max(t.y,e.y),o=Math.max(t.x,e.x),a=Math.min(t.y,e.y);var n;JAt.set(i,r,-1),$At.set(o,r,-1),tPt.set(o,a,-1),ePt.set(i,a,-1),nPt.set(i,r,1),iPt.set(o,r,1),rPt.set(o,a,1),oPt.set(i,a,1),JAt.unproject(this.camera),$At.unproject(this.camera),tPt.unproject(this.camera),ePt.unproject(this.camera),nPt.unproject(this.camera),iPt.unproject(this.camera),rPt.unproject(this.camera),oPt.unproject(this.camera),(n=YAt.planes)[0].setFromCoplanarPoints(JAt,nPt,iPt),n[1].setFromCoplanarPoints($At,iPt,rPt),n[2].setFromCoplanarPoints(rPt,oPt,ePt),n[3].setFromCoplanarPoints(oPt,nPt,JAt),n[4].setFromCoplanarPoints($At,tPt,ePt),n[5].setFromCoplanarPoints(rPt,iPt,nPt),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(t,e){if((e.isMesh||e.isLine||e.isPoints)&&void 0!==e.material&&(null===e.geometry.boundingSphere&&e.geometry.computeBoundingSphere(),KAt.copy(e.geometry.boundingSphere.center),KAt.applyMatrix4(e.matrixWorld),t.containsPoint(KAt)&&this.collection.push(e)),e.children.length>0)for(let n=0;n<e.children.length;n++)this.searchChildInFrustum(t,e.children[n])}}var uPt,hPt;n(8139);function dPt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.length;for(const i of t){const t=e.indexOf(i);if(t>-1){const n=[...e.slice(t),i].map((t=>t.data.id));throw new Error("Invalid Graph: Circular node path detected: ".concat(n.join(" -> "),"."))}n>i.depth&&(i.depth=n,dPt(i.out,[...e,i]))}}function fPt(t,e){let n=!1;const i=t.reduce(((t,e)=>({...t,[e.id]:{data:e,out:[],depth:-1,ins:[]}})),{});try{for(const t of e){const e=t.source,n=t.target;if(!i.hasOwnProperty(e))throw new Error("Missing source Node ".concat(e));if(!i.hasOwnProperty(n))throw new Error("Missing target Node ".concat(n));const r=i[e],o=i[n];o.ins.push(r),r.out.push(o)}dPt(Object.values(i))}catch(DOt){n=!0}const r=Object.keys(i).map((t=>i[t].depth)),o=Math.max(...r);return{invalid:n,depths:i,maxDepth:o||1}}!function(){try{if("undefined"!=typeof document){var t=document.createElement("style");t.appendChild(document.createTextNode("._canvas_670zp_1 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n._container_155l7_1 {\n  transform-origin: bottom right;\n  overflow: hidden;\n  position: absolute;\n  border: solid 1px var(--radial-menu-border);\n}\n\n  ._container_155l7_1._disabled_155l7_7 {\n    opacity: 0.6;\n  }\n\n  ._container_155l7_1._disabled_155l7_7 ._contentContainer_155l7_10 {\n      cursor: not-allowed;\n    }\n\n  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10 {\n      cursor: pointer;\n    }\n\n  ._container_155l7_1:not(._disabled_155l7_7) ._contentContainer_155l7_10:hover {\n        color: var(--radial-menu-active-color);\n        background: var(--radial-menu-active-background);\n      }\n\n  ._container_155l7_1 ._contentContainer_155l7_10 {\n    width: 200%;\n    height: 200%;\n    transform-origin: 50% 50%;\n    border-radius: 50%;\n    outline: none;\n    transition: background 150ms ease-in-out;\n    color: var(--radial-menu-color);\n  }\n\n  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 {\n      position: absolute;\n      width: 100%;\n      text-align: center;\n    }\n\n  ._container_155l7_1 ._contentContainer_155l7_10 ._contentInner_155l7_35 ._content_155l7_10 {\n        display: inline-block;\n      }\n\n  ._container_155l7_1 svg {\n    margin: 0 auto;\n    fill: var(--radial-menu-active-color);\n    height: 25px;\n    width: 25px;\n    display: block;\n  }\n._container_x9hyx_1 {\n  border-radius: 50%;\n  z-index: 9;\n  position: relative;\n  height: 175px;\n  width: 175px;\n  border: solid 5px var(--radial-menu-border);\n  overflow: hidden;\n  background: var(--radial-menu-background);\n}\n\n  ._container_x9hyx_1:before {\n    content: ' ';\n    background: var(--radial-menu-border);\n    border-radius: 50%;\n    height: 25px;\n    width: 25px;\n    position: absolute;\n    z-index: 9;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }")),document.head.appendChild(t)}}catch(DOt){console.error("vite-plugin-css-injected-by-js",DOt)}}();const pPt=["radialin","radialout"];function gPt(t){let{nodes:e,edges:n,mode:i="lr",nodeLevelRatio:r=2}=t;const{depths:o,maxDepth:a,invalid:s}=fPt(e,n);if(s)return null;const l=pPt.includes(i)?1:5,c=e.length/a*r*l;if(i){const t=(t,e)=>n=>t?(o[n.id].depth-a/2)*c*(e?-1:1):void 0,n=t(["lr","rl"].includes(i),"rl"===i),r=t(["td","bu"].includes(i),"td"===i),s=t(["zin","zout"].includes(i),"zout"===i);e.forEach((t=>{t.fx=n(t),t.fy=r(t),t.fz=s(t)}))}return pPt.includes(i)?function(t,e,n,i){var r,o,a,s,l=Wvt(.1);function c(t){for(var l=0,c=r.length;l<c;++l){var u=r[l],h=u.x-e||1e-6,d=(u.y||0)-n||1e-6,f=(u.z||0)-i||1e-6,p=Math.sqrt(h*h+d*d+f*f),g=(s[l]-p)*a[l]*t/p;u.vx+=h*g,o>1&&(u.vy+=d*g),o>2&&(u.vz+=f*g)}}function u(){if(r){var e,n=r.length;for(a=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(r[e],e,r),a[e]=isNaN(s[e])?0:+l(r[e],e,r)}}return"function"!==typeof t&&(t=Wvt(+t)),null==e&&(e=0),null==n&&(n=0),null==i&&(i=0),c.initialize=function(t){r=t;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];o=n.find((t=>[1,2,3].includes(t)))||2,u()},c.strength=function(t){return arguments.length?(l="function"===typeof t?t:Wvt(+t),u(),c):l},c.radius=function(e){return arguments.length?(t="function"===typeof e?e:Wvt(+e),u(),c):t},c.x=function(t){return arguments.length?(e=+t,c):e},c.y=function(t){return arguments.length?(n=+t,c):n},c.z=function(t){return arguments.length?(i=+t,c):i},c}((t=>{const e=o[t.id];return("radialin"===i?a-e.depth:e.depth)*c})).strength(1):null}function mPt(t){const e=[],n=[];return t.forEachNode(((t,n)=>{e.push({...n,id:t,radius:n.size||1})})),t.forEachEdge(((t,e)=>{n.push({...e,id:t})})),{nodes:e,edges:n}}function vPt(){const t=t=>()=>t;let e,n,i=t=>t.index,r=[],o=[],a=[100,100],s=t(1),l=t(-1),c=t(100),u=t(.1),h={},d=.1,f=.001,p=[],g=[0,0],m=t=>t.cluster,v="treemap",y=!0,b=.1;function _(t){if(!y)return _;"force"===v&&(n.tick(),S());for(let e,n=0,i=r.length,o=t*b;n<i;++n)e=r[n],e.vx+=(h[m(e)].x-e.x)*o,e.vy+=(h[m(e)].y-e.y)*o}function x(){r&&("treemap"===v?function(){let t=function(){var t=hbt,e=!1,n=1,i=1,r=[0],o=pbt,a=pbt,s=pbt,l=pbt,c=pbt;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),r=[0],e&&t.eachBefore(lbt),t}function h(e){var n=r[e.depth],i=e.x0+n,u=e.y0+n,h=e.x1-n,d=e.y1-n;h<i&&(i=h=(i+h)/2),d<u&&(u=d=(u+d)/2),e.x0=i,e.y0=u,e.x1=h,e.y1=d,e.children&&(n=r[e.depth+1]=o(e)/2,i+=c(e)-n,u+=a(e)-n,(h-=s(e)-n)<i&&(i=h=(i+h)/2),(d-=l(e)-n)<u&&(u=d=(u+d)/2),t(e,i,u,h,d))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],i=+t[1],u):[n,i]},u.tile=function(e){return arguments.length?(t=fbt(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(o="function"===typeof t?t:gbt(+t),u):o},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(a="function"===typeof t?t:gbt(+t),u):a},u.paddingRight=function(t){return arguments.length?(s="function"===typeof t?t:gbt(+t),u):s},u.paddingBottom=function(t){return arguments.length?(l="function"===typeof t?t:gbt(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"===typeof t?t:gbt(+t),u):c},u}().size(_.size());e=vbt(function(){let t,e,n,i=[];for(t of(n=w(_.nodes()),n.keys()))e=n.get(t),i.push({id:t,size:e.count});return{id:"clustersTree",children:i}}()).sum((t=>t.radius)).sort((function(t,e){return e.height-t.height||e.value-t.value})),p=t(e).leaves(),S()}():function(){let t;if(!r||!r.length)return;(function(){let t=0;if(0===r.length)return;o.forEach((function(e){let n,i;if(r){if(n=e.source,i=e.target,"object"!==typeof e.source&&(n=r.find((t=>t.id===e.source))),"object"!==typeof e.target&&(i=r.find((t=>t.id===e.target))),void 0===n||void 0===i)throw Error("Error setting links, couldnt find nodes for a link (see it on the console)");e.source=n,e.target=i,e.index=t++}}))})(),t=function(){let t,e,n,i,a,s=[],l=[],c=new Map;for(t of(i=w(r),a=function(t){let e=new Map,n=[];return t.forEach((function(t){let n,i=function(t){let e=m(t.source),n=m(t.target);return e<=n?e+"~"+n:n+"~"+e}(t);n=e.has(i)?e.get(i):0,n+=1,e.set(i,n)})),e.forEach((function(t,e){let i,r;i=e.split("~")[0],r=e.split("~")[1],void 0!==i&&void 0!==r&&n.push({source:i,target:r,count:t})})),n}(o),i.keys()))n=i.get(t),s.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),c.set(t,e);return a.forEach((function(t){let e=c.get(t.source),n=c.get(t.target);void 0!==e&&void 0!==n&&l.push({source:e,target:n,count:t.count})})),{nodes:s,links:l}}(),n=Tyt(t.nodes).force("x",kyt(a[0]/2).strength(.1)).force("y",Cyt(a[1]/2).strength(.1)).force("collide",ibt((t=>t.r)).iterations(4)).force("charge",rbt().strength(l)).force("links",sbt(t.nodes.length?t.links:[]).distance(c).strength(u)),p=n.nodes(),S()}())}function w(t){let e=new Map,n={};return t.forEach((function(t){e.has(m(t))||e.set(m(t),{count:0,sumforceNodeSize:0})})),t.forEach((function(t){n=e.get(m(t)),n.count=n.count+1,n.sumforceNodeSize=n.sumforceNodeSize+Math.PI*(s(t)*s(t))*1.3,e.set(m(t),n)})),e}function S(){return h.none={x:0,y:0},p.forEach((function(t){"treemap"===v?h[t.data.id]={x:t.x0+(t.x1-t.x0)/2-g[0],y:t.y0+(t.y1-t.y0)/2-g[1]}:h[t.id]={x:t.x-g[0],y:t.y-g[1]}})),h}return _.initialize=function(t){r=t,x()},_.template=function(t){return arguments.length?(v=t,x(),_):v},_.groupBy=function(t){return arguments.length?"string"===typeof t?(m=function(e){return e[t]},_):(m=t,_):m},_.enableGrouping=function(t){return arguments.length?(y=t,_):y},_.strength=function(t){return arguments.length?(b=t,_):b},_.getLinkStrength=function(t){return y?m(t.source)===m(t.target)?"function"===typeof d?d(t):d:"function"===typeof f?f(t):f:"function"===typeof d?d(t):d},_.id=function(t){return arguments.length?(i=t,_):i},_.size=function(t){return arguments.length?(a=t,_):a},_.linkStrengthInterCluster=function(t){return arguments.length?(f=t,_):f},_.linkStrengthIntraCluster=function(t){return arguments.length?(d=t,_):d},_.nodes=function(t){return arguments.length?(r=t,_):r},_.links=function(t){return arguments.length?(o=null===t?[]:t,x(),_):o},_.template=function(t){return arguments.length?(v=t,x(),_):v},_.forceNodeSize=function(e){return arguments.length?(s="function"===typeof e?e:t(+e),x(),_):s},_.nodeSize=_.forceNodeSize,_.forceCharge=function(e){return arguments.length?(l="function"===typeof e?e:t(+e),x(),_):l},_.forceLinkDistance=function(e){return arguments.length?(c="function"===typeof e?e:t(+e),x(),_):c},_.forceLinkStrength=function(e){return arguments.length?(u="function"===typeof e?e:t(+e),x(),_):u},_.offset=function(e){return arguments.length?(g="function"===typeof e?e:t(+e),_):g},_.getFocis=S,_}function yPt(t){let{graph:e,nodeLevelRatio:n=2,mode:i=null,dimensions:r=2,nodeStrength:o=-250,linkDistance:a=50,clusterStrength:s=.5,linkStrengthInterCluster:l=.01,linkStrengthIntraCluster:c=.5,forceLinkDistance:u=100,forceLinkStrength:h=.1,clusterType:d="force",forceCharge:f=-700,getNodePosition:p,drags:g,clusterAttribute:m,forceLayout:v}=t;const{nodes:y,edges:b}=mPt(e),_=2===r&&b.length>25?2*o:o;let x,w;"forceDirected2d"===v?(x=kyt(),w=Cyt()):(x=kyt(600).strength(.05),w=Cyt(600).strength(.05));const S=Tyt().force("link",sbt()).force("charge",rbt().strength(_)).force("x",x).force("y",w).force("z",function(t){var e,n,i,r=Wvt(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vz+=(i[o]-r.z)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!==typeof t&&(t=Wvt(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"===typeof t?t:Wvt(+t),a(),o):r},o.z=function(e){return arguments.length?(t="function"===typeof e?e:Wvt(+e),a(),o):t},o}()).force("collide",ibt((t=>t.radius+10))).force("dagRadial",gPt({nodes:y,edges:b,mode:i,nodeLevelRatio:n})).stop();let E;if(m){let t=f;if(null==y?void 0:y.length){t=f*Math.ceil(y.length/200)}E=vPt().strength(s).template(d).groupBy((t=>t.data[m])).links(b).size([100,100]).linkStrengthInterCluster(l).linkStrengthIntraCluster(c).forceLinkDistance(u).forceLinkStrength(h).forceCharge(t).forceNodeSize((t=>t.radius))}let M=S.numDimensions(r).nodes(y);if(E&&(M=M.force("group",E)),a){let t=M.force("link");var T;if(t)if(t.id((t=>t.id)).links(b).distance(a),E)t=t.strength(null!==(T=null==E?void 0:E.getLinkStrength)&&void 0!==T?T:.1)}const k=new Map(y.map((t=>[t.id,t])));return{step(){for(;S.alpha()>.01;)S.tick();return!0},getNodePosition(t){var n,i;if(p){const n=p(t,{graph:e,drags:g,nodes:y,edges:b});if(n)return n}return(null==(n=null==g?void 0:g[t])?void 0:n.position)?null==(i=null==g?void 0:g[t])?void 0:i.position:k.get(t)}}}const bPt={td:{x:"x",y:"y",factor:-1},lr:{x:"y",y:"x",factor:1}};function _Pt(t){let{graph:e,drags:n,mode:i="td",nodeSeparation:r=1,nodeSize:o=[50,50],getNodePosition:a}=t;const{nodes:s,edges:l}=mPt(e),{depths:c}=fPt(s,l),u=Object.keys(c).map((t=>c[t])),h=Cbt().id((t=>t.data.id)).parentId((t=>{var e,n,i;return null==(i=null==(n=null==(e=t.ins)?void 0:e[0])?void 0:n.data)?void 0:i.id}))(u),d=zbt().separation((()=>r)).nodeSize(o)(vbt(h)).descendants(),f=bPt[i],p=new Map(s.map((t=>{const{x:e,y:n}=d.find((e=>e.data.id===t.id));return[t.id,{...t,[f.x]:e*f.factor,[f.y]:n*f.factor,z:0}]})));return{step:()=>!0,getNodePosition(t){var i,r;if(a){const i=a(t,{graph:e,drags:n,nodes:s,edges:l});if(i)return i}return(null==(i=null==n?void 0:n[t])?void 0:i.position)?null==(r=null==n?void 0:n[t])?void 0:r.position:p.get(t)}}}const xPt=["forceDirected2d","treeTd2d","treeLr2d","radialOut2d","treeTd3d","treeLr3d","radialOut3d","forceDirected3d"];function wPt(t){let{type:e,...n}=t;if(xPt.includes(e)){const{nodeStrength:t,linkDistance:i,nodeLevelRatio:r}=n;if("forceDirected2d"===e)return yPt({...n,dimensions:2,nodeLevelRatio:r||2,nodeStrength:t||-250,linkDistance:i,forceLayout:e});if("treeTd2d"===e)return yPt({...n,mode:"td",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-250,linkDistance:i||50,forceLayout:e});if("treeLr2d"===e)return yPt({...n,mode:"lr",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-250,linkDistance:i||50,forceLayout:e});if("radialOut2d"===e)return yPt({...n,mode:"radialout",dimensions:2,nodeLevelRatio:r||5,nodeStrength:t||-500,linkDistance:i||100,forceLayout:e});if("treeTd3d"===e)return yPt({...n,mode:"td",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||50});if("treeLr3d"===e)return yPt({...n,mode:"lr",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||50,forceLayout:e});if("radialOut3d"===e)return yPt({...n,mode:"radialout",dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-500,linkDistance:i||100,forceLayout:e});if("forceDirected3d"===e)return yPt({...n,dimensions:3,nodeLevelRatio:r||2,nodeStrength:t||-250,linkDistance:i,forceLayout:e})}else{if("circular2d"===e){const{radius:t}=n;return function(t){let{graph:e,radius:n,drags:i,getNodePosition:r}=t;const o=Fbt(e,{scale:n}),{nodes:a,edges:s}=mPt(e);return{step:()=>!0,getNodePosition(t){var n,l;if(r){const n=r(t,{graph:e,drags:i,nodes:a,edges:s});if(n)return n}return(null==(n=null==i?void 0:i[t])?void 0:n.position)?null==(l=null==i?void 0:i[t])?void 0:l.position:null==o?void 0:o[t]}}}({...n,radius:t||300})}if("hierarchicalTd"===e)return _Pt({...n,mode:"td"});if("hierarchicalLr"===e)return _Pt({...n,mode:"lr"});if("nooverlap"===e){const{graph:t,maxIterations:e,ratio:i,margin:r,gridSize:o,...a}=n;return function(t){let{graph:e,margin:n,drags:i,getNodePosition:r,ratio:o,gridSize:a,maxIterations:s}=t;const{nodes:l,edges:c}=mPt(e),u=Ubt(e,{maxIterations:s,inputReducer:(t,e)=>({...e,x:e.x||0,y:e.y||0}),settings:{ratio:o,margin:n,gridSize:a}});return{step:()=>!0,getNodePosition(t){var n,o;if(r){const n=r(t,{graph:e,drags:i,nodes:l,edges:c});if(n)return n}return(null==(n=null==i?void 0:i[t])?void 0:n.position)?null==(o=null==i?void 0:i[t])?void 0:o.position:null==u?void 0:u[t]}}}({type:"nooverlap",graph:t,margin:r||10,maxIterations:e||50,ratio:i||10,gridSize:o||20,...a})}if("forceatlas2"===e){const{graph:t,iterations:e,gravity:i,scalingRatio:r,...o}=n;return function(t){let{graph:e,drags:n,iterations:i,...r}=t;jbt.assign(e);const o=Bbt(e,{iterations:i,settings:r});return{step:()=>!0,getNodePosition(t){var e;return(null==(e=null==n?void 0:n[t])?void 0:e.position)||(null==o?void 0:o[t])}}}({type:"forceatlas2",graph:t,...o,scalingRatio:r||100,gravity:i||10,iterations:e||50})}if("custom"===e)return function(t){let{graph:e,drags:n,getNodePosition:i}=t;const{nodes:r,edges:o}=mPt(e);return{step:()=>!0,getNodePosition:t=>i(t,{graph:e,drags:n,nodes:r,edges:o})}}({type:"custom",...n})}throw new Error("Layout ".concat(e," not found."))}const SPt=20;function EPt(t){let{nodeCount:e,nodePosition:n,labelType:i,camera:r}=t;return(t,o)=>{var a;return!(r&&n&&(null==(a=null==r?void 0:r.position)?void 0:a.z)/(null==r?void 0:r.zoom)-(null==n?void 0:n.z)>6e3)&&("all"===i||("nodes"===i&&"node"===t||("edges"===i&&"edge"===t||"auto"===i&&"node"===t&&(e<=SPt||o>7))))}}function MPt(t,e){switch(e){case"above":return t;case"below":return-t;default:return 0}}const TPt={pagerank:function(t){let{graph:e}=t;const n=Hbt(e);return{ranks:n,getSizeForNode:t=>80*n[t]}},centrality:function(t){let{graph:e}=t;const n=(0,Vbt.gI)(e);return{ranks:n,getSizeForNode:t=>20*n[t]}},attribute:function(t){let{graph:e,attribute:n,defaultSize:i}=t;const r=new Map;return n?e.forEachNode(((t,e)=>{var i;const o=null==(i=e.data)?void 0:i[n];isNaN(o)&&console.warn("Attribute ".concat(o," is not a number for node ").concat(e.id)),r.set(t,o||0)})):console.warn("Attribute sizing configured but no attribute provided"),{getSizeForNode:t=>n&&r?r.get(t):i}},none:t=>{let{defaultSize:e}=t;return{getSizeForNode:t=>e}}};function kPt(t){let{graph:e,layout:n,sizingType:i,labelType:r,sizingAttribute:o,defaultNodeSize:a,minNodeSize:s,maxNodeSize:l}=t;const c=[],u=[],h=new Map,d=function(t){let{type:e,...n}=t;var i;const r=null==(i=TPt[e])?void 0:i.call(TPt,n);if(!r&&"default"!==e)throw new Error("Unknown sizing strategy: ".concat(e));const{graph:o,minSize:a,maxSize:s}=n,l=new Map;let c,u;if(o.forEachNode(((t,i)=>{let o;o="default"===e?i.size||n.defaultSize:r.getSizeForNode(t),(void 0===c||o<c)&&(c=o),(void 0===u||o>u)&&(u=o),l.set(t,o)})),"none"!==e){const t=Ext().domain([c,u]).rangeRound([a,s]);for(const[e,n]of l)l.set(e,t(n))}return l}({graph:e,type:i,attribute:o,minSize:s,maxSize:l,defaultSize:a}),f=EPt({nodeCount:e.nodes().length,labelType:r});return e.forEachNode(((t,i)=>{const r=n.getNodePosition(t),{data:o,fill:a,icon:s,label:l,size:u,...p}=i,g=d.get(i.id),m=f("node",g),v=(e.inboundNeighbors(i.id)||[]).map((t=>e.getNodeAttributes(t))),y={...i,size:g,labelVisible:m,label:l,icon:s,fill:a,parents:v,data:{...p,...null!==o&&void 0!==o?o:{}},position:{...r,x:r.x||0,y:r.y||0,z:r.z||1}};h.set(i.id,y),c.push(y)})),e.forEachEdge(((t,e)=>{const n=h.get(e.source),i=h.get(e.target);if(n&&i){const{data:t,id:n,label:i,size:r,...o}=e,a=f("edge",r);u.push({...e,id:n,label:i,labelVisible:a,size:r,data:{...o,id:n,...t||{}}})}})),{nodes:c,edges:u}}const CPt={mass:10,tension:1e3,friction:300,precision:.1};function APt(t,e,n){const i=e.getLength(),r=(("end"===t?i:i/2)-("end"===t?n/2:0))/i;return[e.getPointAt(r),e.getTangentAt(r)]}function PPt(t){return[t+6,2+t/1.5]}function OPt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=new cot(t.x,t.y||0,t.z||0),r=new cot(e.x,e.y||0,e.z||0),o=(new cot).addVectors(i,r).divideScalar(2);return o.setLength(o.length()+n)}function RPt(t,e,n,i,r,o){const a=DPt(t,n,e),s=DPt(n,t,i);return r?new rdt(...function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const i=t.clone(),r=e.clone(),o=(new cot).subVectors(r,i),a=o.length(),s=o.clone().normalize(),l=(new cot).subVectors(r,i).divideScalar(2),c=Math.abs(s.x)%1,u=new cot(-s.y,s.x-c*s.z,c*s.y).normalize();return[t,(new cot).add(i).add(l).add(u.multiplyScalar(a/4).multiplyScalar(n)),e]}(a,s,o)):new ndt(a,s)}function LPt(t){return new cot(t.position.x,t.position.y,t.position.z||0)}function DPt(t,e,n){const i=t.distanceTo(e);return t.clone().add(e.clone().sub(t).multiplyScalar(n/i))}function IPt(t,e){return{...t,position:{...t.position,x:t.position.x+e.x,y:t.position.y+e.y,z:t.position.z+e.z}}}function NPt(t){let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let s of t)e=Math.min(e,s.position.x),n=Math.max(n,s.position.x),i=Math.min(i,s.position.y),r=Math.max(r,s.position.y),o=Math.min(o,s.position.z),a=Math.max(a,s.position.z);return{height:r-i,width:n-e,minX:e,maxX:n,minY:i,maxY:r,minZ:o,maxZ:a,x:(n+e)/2,y:(r+i)/2,z:(a+o)/2}}function zPt(t){let{nodes:e,clusterAttribute:n}=t;const i=new Map;if(n){const t=function(t,e){return e?t.reduce(((t,n)=>{const i=n.data[e];return i&&t.set(i,[...t.get(i)||[],n]),t}),new Map):new Map}(e,n);for(const[e,n]of t){const t=NPt(n);i.set(e,{label:e,nodes:n,position:t})}}return i}const FPt=t=>{let{sensitivity:n=7,interval:i=50,timeout:r=0,disabled:o,onPointerOver:a,onPointerOut:s}=t;const l=(0,e.useRef)(!1),c=(0,e.useRef)(null),u=(0,e.useRef)(0),h=(0,e.useRef)({x:null,y:null,px:null,py:null}),d=(0,e.useCallback)((t=>{h.current.x=t.clientX,h.current.y=t.clientY}),[]),f=(0,e.useCallback)((t=>{c.current=clearTimeout(c.current);const{px:e,x:r,py:o,y:s}=h.current;Math.abs(e-r)+Math.abs(o-s)<n?(u.current=1,a(t)):(h.current.px=r,h.current.py=s,c.current=setTimeout((()=>f(t)),i))}),[i,a,n]),p=(0,e.useCallback)((()=>{clearTimeout(c.current),"undefined"!==typeof window&&document.removeEventListener("mousemove",d,!1)}),[d]),g=(0,e.useCallback)((t=>{o||(l.current=!0,p(),1!==u.current&&(h.current.px=t.pointer.x,h.current.py=t.pointer.y,"undefined"!==typeof window&&document.addEventListener("mousemove",d,!1),c.current=setTimeout((()=>f(t)),r)))}),[p,f,o,d,r]),m=(0,e.useCallback)((t=>{c.current=clearTimeout(c.current),u.current=0,s(t)}),[s]);return{pointerOver:g,pointerOut:(0,e.useCallback)((t=>{l.current=!1,p(),1===u.current&&(c.current=setTimeout((()=>m(t)),r))}),[p,m,r])}};const{Provider:UPt,useStore:BPt}=function(){console.warn("[DEPRECATED] `context` will be removed in a future version. Instead use `import { createStore, useStore } from 'zustand'`. See: https://github.com/pmndrs/zustand/discussions/1180.");const t=(0,e.createContext)(void 0);return{Provider:n=>{let{createStore:i,children:r}=n;const o=(0,e.useRef)();return o.current||(o.current=i()),(0,e.createElement)(t.Provider,{value:o.current},r)},useStore:(n,i)=>{const r=(0,e.useContext)(t);if(!r)throw new Error("Seems like you have not used zustand provider as an ancestor.");return Axt(r,n,i)},useStoreApi:()=>{const n=(0,e.useContext)(t);if(!n)throw new Error("Seems like you have not used zustand provider as an ancestor.");return(0,e.useMemo)((()=>({...n})),[n])}}}();function jPt(t){let{nodeId:e,nodes:n,edges:i,currentHiddenNodes:r,currentHiddenEdges:o}=t;const a=[],s=[],l=r.map((t=>t.id)),c=o.map((t=>t.id)),u=i.filter((t=>t.source===e)),h=u.map((t=>t.target));s.push(...u);for(const p of h){const t=i.filter((t=>t.target===p&&t.source!==e));let r=!1;if(0===t.length)r=!0;else if(t.length>0&&!l.includes(p)){t.map((t=>t.id)).every((t=>c.includes(t)))&&(r=!0)}if(r){const t=n.find((t=>t.id===p));t&&a.push(t);const e=jPt({nodeId:p,nodes:n,edges:i,currentHiddenEdges:s,currentHiddenNodes:a});s.push(...e.hiddenEdges),a.push(...e.hiddenNodes)}}const d=Object.values(s.reduce(((t,e)=>({...t,[e.id]:e})),{})),f=Object.values(a.reduce(((t,e)=>({...t,[e.id]:e})),{}));return{hiddenEdges:d,hiddenNodes:f}}const HPt=t=>{let{collapsedIds:e,nodes:n,edges:i}=t;const r=[],o=[];for(const l of e){const{hiddenEdges:t,hiddenNodes:e}=jPt({nodeId:l,nodes:n,edges:i,currentHiddenEdges:o,currentHiddenNodes:r});r.push(...e),o.push(...t)}const a=r.map((t=>t.id)),s=o.map((t=>t.id));return{visibleNodes:n.filter((t=>!a.includes(t.id))),visibleEdges:i.filter((t=>!s.includes(t.id)))}},VPt=t=>{let{layoutType:n,sizingType:i,labelType:r,sizingAttribute:o,clusterAttribute:a,selections:s,nodes:l,edges:c,actives:u,collapsedNodeIds:h,defaultNodeSize:d,maxNodeSize:f,minNodeSize:p,layoutOverrides:g}=t;const m=BPt((t=>t.graph)),v=BPt((t=>t.setClusters)),y=BPt((t=>t.collapsedNodeIds)),b=BPt((t=>t.setEdges)),_=BPt((t=>t.nodes)),x=BPt((t=>t.setNodes)),w=BPt((t=>t.setSelections)),S=BPt((t=>t.setActives)),E=BPt((t=>t.drags)),M=BPt((t=>t.setDrags)),T=BPt((t=>t.setCollapsedNodeIds)),k=(0,e.useRef)(!1),C=(0,e.useRef)(null),A=rvt((t=>t.camera)),{visibleEdges:P,visibleNodes:O}=(0,e.useMemo)((()=>HPt({collapsedIds:y,nodes:l,edges:c})),[y,l,c]),R=(0,e.useRef)(E);(0,e.useEffect)((()=>{R.current=E}),[E]);const L=(0,e.useCallback)((async t=>{C.current=t||wPt({...g,type:n,graph:m,drags:R.current,clusterAttribute:a}),await function(t){return new Promise(((e,n)=>{let i;!function n(){i?e(i):(i=t.step(),n())}()}))}(C.current);const e=kPt({graph:m,layout:C.current,sizingType:i,labelType:r,sizingAttribute:o,maxNodeSize:f,minNodeSize:p,defaultNodeSize:d}),s=zPt({nodes:e.nodes,clusterAttribute:a});b(e.edges),x(e.nodes),v(s)}),[g,n,a,i,r,o,f,p,d,b,x,v]);(0,e.useEffect)((()=>{const t=_.map((t=>({...t,labelVisible:EPt({nodeCount:null==_?void 0:_.length,labelType:r,camera:A,nodePosition:null==t?void 0:t.position})("node",null==t?void 0:t.size)}))),e=t.some(((t,e)=>t.labelVisible!==_[e].labelVisible));e&&x(t)}),[A,A.zoom,A.position.z,x,_,r]),(0,e.useEffect)((()=>{k.current&&w(s)}),[s,w]),(0,e.useEffect)((()=>{k.current&&S(u)}),[u,S]),(0,e.useEffect)((()=>{!async function(){k.current=!1,function(t,e,n){t.clear();for(const r of e)try{t.addNode(r.id,r)}catch({message:i}){console.error("[Graph] ".concat(i))}for(const r of n)try{t.addEdge(r.source,r.target,r)}catch({message:i}){console.error("[Graph] ".concat(i))}}(m,O,P),await L(),k.current=!0}()}),[O,P]),(0,e.useEffect)((()=>{k.current&&T(h)}),[h,T]),(0,e.useEffect)((()=>{k.current&&(R.current={},M({}),L())}),[n,L,M]),(0,e.useEffect)((()=>{k.current&&L(C.current)}),[i,o,r,L])},GPt=t=>{let{text:n,fontSize:i,fontUrl:r,color:o,opacity:s,stroke:l,active:c,ellipsis:u}=t;const h=u&&!c?PEt(n,u):n,d=(0,e.useMemo)((()=>new Aat(o)),[o]),f=(0,e.useMemo)((()=>l?new Aat(l):void 0),[l]);return(0,a.jsx)(Kwt,{position:[0,0,1],children:(0,a.jsx)(mEt,{font:r,fontSize:i,color:d,fillOpacity:s,textAlign:"center",outlineWidth:l?1:0,outlineColor:f,depthOffset:0,maxWidth:100,overflowWrap:"break-word",children:h})})};GPt.defaultProps={opacity:1,fontSize:7,color:"#2A6475",ellipsis:75};const WPt=t=>{let{color:n,id:i,size:r,opacity:o,animated:s}=t;const{scale:l,nodeOpacity:c}=$kt({from:{scale:[1e-5,1e-5,1e-5],nodeOpacity:0},to:{scale:[r,r,r],nodeOpacity:o},config:{...CPt,duration:s?void 0:0}}),u=(0,e.useMemo)((()=>new Aat(n)),[n]);return(0,a.jsxs)(sCt.mesh,{userData:{id:i,type:"node"},scale:l,children:[(0,a.jsx)("sphereGeometry",{attach:"geometry",args:[1,25,25]}),(0,a.jsx)(sCt.meshPhongMaterial,{attach:"material",side:iet,transparent:!0,fog:!0,opacity:c,color:u})]})};WPt.defaultProps={opacity:1,active:!1};const qPt=t=>{let{color:n,size:i,opacity:r,animated:o}=t;const s=(0,e.useMemo)((()=>new Aat(n)),[n]),{ringSize:l,ringOpacity:c}=$kt({from:{ringOpacity:0,ringSize:[1e-5,1e-5,1e-5]},to:{ringOpacity:r,ringSize:[i/2,i/2,1]},config:{...CPt,duration:o?void 0:0}});return(0,a.jsx)(Kwt,{position:[0,0,1],children:(0,a.jsxs)(sCt.mesh,{scale:l,children:[(0,a.jsx)("ringGeometry",{attach:"geometry",args:[4,4.5,25]}),(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material",color:s,transparent:!0,depthTest:!1,opacity:c,side:iet,fog:!0})]})})};qPt.defaultProps={color:"#D8E6EA",size:1,opacity:.5};const XPt=(0,e.createContext)({controls:null,resetControls:()=>{},zoomIn:()=>{},zoomOut:()=>{},panLeft:()=>{},panRight:()=>{},panUp:()=>{},panDown:()=>{}}),YPt=()=>{const t=(0,e.useContext)(XPt);if(void 0===t)throw new Error("`useCameraControls` hook must be used within a `ControlsProvider` component");return t};rAt.install({THREE:{MOUSE:Wtt,Vector2:Rrt,Vector3:cot,Vector4:eot,Quaternion:lot,Matrix4:Uot,Spherical:vgt,Box3:dot,Sphere:Pot,Raycaster:pgt,MathUtils:{DEG2RAD:null==(uPt=Ort)?void 0:uPt.DEG2RAD,clamp:null==(hPt=Ort)?void 0:hPt.clamp}}}),pmt({ThreeCameraControls:rAt});const KPt=38,ZPt=39,QPt=40,JPt=new WAt(37,100),$Pt=new WAt(ZPt,100),tOt=new WAt(KPt,100),eOt=new WAt(QPt,100),nOt=(0,e.forwardRef)(((t,n)=>{let{mode:i,children:r,animated:o,disabled:s}=t;const l=(0,e.useRef)(null),c=rvt((t=>t.camera)),u=rvt((t=>t.gl)),h="orbit"===i,d=BPt((t=>t.setPanning));ovt(((t,e)=>{var n,i;(null==(n=l.current)?void 0:n.enabled)&&(null==(i=l.current)||i.update(e)),h&&(l.current.azimuthAngle+=20*e*Ort.DEG2RAD)}),-1),(0,e.useEffect)((()=>()=>{var t;return null==(t=l.current)?void 0:t.dispose()}),[]);const f=(0,e.useCallback)((()=>{var t;null==(t=l.current)||t.zoom(c.zoom/2,o)}),[o,c.zoom]),p=(0,e.useCallback)((()=>{var t;null==(t=l.current)||t.zoom(-c.zoom/2,o)}),[o,c.zoom]),g=(0,e.useCallback)((t=>{var e;h||null==(e=l.current)||e.truck(-.03*t.deltaTime,0,o)}),[o,h]),m=(0,e.useCallback)((t=>{var e;h||null==(e=l.current)||e.truck(.03*t.deltaTime,0,o)}),[o,h]),v=(0,e.useCallback)((t=>{var e;h||null==(e=l.current)||e.truck(0,.03*t.deltaTime,o)}),[o,h]),y=(0,e.useCallback)((t=>{var e;h||null==(e=l.current)||e.truck(0,-.03*t.deltaTime,o)}),[o,h]),b=(0,e.useCallback)((t=>{"Space"===t.code&&(l.current.mouseButtons.left="rotate"===i?rAt.ACTION.TRUCK:rAt.ACTION.ROTATE)}),[i]),_=(0,e.useCallback)((t=>{"Space"===t.code&&(l.current.mouseButtons.left="rotate"===i?rAt.ACTION.ROTATE:rAt.ACTION.TRUCK)}),[i]);(0,e.useEffect)((()=>(s||(JPt.addEventListener("holding",m),$Pt.addEventListener("holding",g),tOt.addEventListener("holding",v),eOt.addEventListener("holding",y),"undefined"!==typeof window&&(window.addEventListener("keydown",b),window.addEventListener("keyup",_))),()=>{JPt.removeEventListener("holding",m),$Pt.removeEventListener("holding",g),tOt.removeEventListener("holding",v),eOt.removeEventListener("holding",y),"undefined"!==typeof window&&(window.removeEventListener("keydown",b),window.removeEventListener("keyup",_))})),[s,b,_,y,m,g,v]),(0,e.useEffect)((()=>{s?(l.current.mouseButtons.left=0,l.current.mouseButtons.middle=0,l.current.mouseButtons.wheel=0):(l.current.mouseButtons.left=2,l.current.mouseButtons.middle=2,l.current.mouseButtons.wheel=16)}),[s]),(0,e.useEffect)((()=>{const t=()=>d(!0),e=()=>d(!1),n=l.current;return n&&(n.addEventListener("control",t),n.addEventListener("controlend",e)),()=>{n&&(n.removeEventListener("control",t),n.removeEventListener("controlend",e))}}),[l,d]),(0,e.useEffect)((()=>{l.current.mouseButtons.left="rotate"===i?rAt.ACTION.ROTATE:rAt.ACTION.TRUCK}),[i]),BAt([{name:"Zoom In",disabled:s,category:"Graph",keys:"command+shift+i",callback:t=>{t.preventDefault(),f()}},{name:"Zoom Out",category:"Graph",disabled:s,keys:"command+shift+o",callback:t=>{t.preventDefault(),p()}}]);const x=(0,e.useMemo)((()=>({controls:l.current,zoomIn:()=>f(),zoomOut:()=>p(),panLeft:function(){return m({deltaTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:100})},panRight:function(){return g({deltaTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:100})},panDown:function(){return y({deltaTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:100})},panUp:function(){return v({deltaTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:100})},resetControls:t=>{var e;return null==(e=l.current)?void 0:e.reset(t)}})),[f,p,m,g,y,v,l.current]);return(0,e.useImperativeHandle)(n,(()=>x)),(0,a.jsxs)(XPt.Provider,{value:x,children:[(0,a.jsx)("threeCameraControls",{ref:l,args:[c,u.domElement],smoothTime:.1,minDistance:1e3,dollyToCursor:!0,maxDistance:5e4}),r]})}));function iOt(t,e){const n=e.position.z;t<n?t-=n:t+=n;const i=e.fov/e.zoom*Math.PI/180;return 2*Math.tan(i/2)*Math.abs(t)}function rOt(t,e){var n,i,r,o;const a=function(t,e){return iOt(t,e)*e.aspect}(1,t),s=iOt(1,t),l=(null==(n=null==t?void 0:t.position)?void 0:n.x)-a/2,c=(null==(i=null==t?void 0:t.position)?void 0:i.x)+a/2,u=(null==(r=null==t?void 0:t.position)?void 0:r.y)-s/2,h=(null==(o=null==t?void 0:t.position)?void 0:o.y)+s/2;return(null==e?void 0:e.x)>l&&(null==e?void 0:e.x)<c&&(null==e?void 0:e.y)>u&&(null==e?void 0:e.y)<h}function oOt(t,e){return e.reduce(((e,n)=>Math.abs(n-t%Math.PI)<Math.abs(e-t%Math.PI)?n:e))}nOt.defaultProps={mode:"rotate"};const aOt=t=>{let{animated:n,disabled:i,layoutType:r}=t;const o=BPt((t=>t.nodes)),[a,s]=(0,e.useState)(!1),l=rvt((t=>t.invalidate)),{controls:c}=YPt(),u=rvt((t=>t.camera)),h=(0,e.useRef)(!1),d=(0,e.useCallback)((async function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((null==t?void 0:t.some((t=>!rOt(u,t.position))))||!h.current){const{minX:n,maxX:i,minY:o,maxY:u,minZ:h,maxZ:d,x:f,y:p,z:g}=NPt(t);if(!r.includes("3d")){const{horizontalRotation:t,verticalRotation:e}=function(t,e){const n=oOt(t,[0,Math.PI]),i=oOt(e,[Math.PI/2,3*Math.PI/2]);return{horizontalRotation:n-t%Math.PI,verticalRotation:i-e%Math.PI}}(null==c?void 0:c.azimuthAngle,null==c?void 0:c.polarAngle);null==c||c.rotate(t,e,!0)}await(null==c?void 0:c.fitToBox(new dot(new cot(n,o,h),new cot(i,u,d)),e,{cover:!1,paddingLeft:50,paddingRight:50,paddingBottom:50,paddingTop:50})),await c.setTarget(f,p,g,e),a||s(!0),l()}}),[l,c,n,o]),f=(0,e.useCallback)((t=>{let e=null;(null==t?void 0:t.length)&&(e=t.reduce(((t,e)=>{const n=o.find((t=>t.id===e));if(!n)throw new Error("Attempted to center ".concat(e," but it was not found in the nodes"));return t.push(n),t}),[])),d(e||o)}),[d,o]);return(0,e.useLayoutEffect)((()=>{!async function(){c&&(null==o?void 0:o.length)&&!h.current&&(await d(o,!1),h.current=!0)}()}),[c,d,o]),BAt([{name:"Center",disabled:i,category:"Graph",keys:["command+shift+c"],callback:()=>d(o)}]),{centerNodes:d,centerNodesById:f,isCentered:a}},sOt=t=>{let{image:n,id:i,size:r,opacity:o,animated:s}=t;const l=(0,e.useMemo)((()=>(new $ft).load(n)),[n]),{scale:c,spriteOpacity:u}=$kt({from:{scale:[1e-5,1e-5,1e-5],spriteOpacity:0},to:{scale:[r,r,r],spriteOpacity:o},config:{...CPt,duration:s?void 0:0}});return(0,a.jsx)(sCt.sprite,{userData:{id:i,type:"node"},scale:c,children:(0,a.jsx)(sCt.spriteMaterial,{attach:"material",opacity:u,fog:!0,depthTest:!1,transparent:!0,side:iet,children:(0,a.jsx)("primitive",{attach:"map",object:l,minFilter:ant})})})};sOt.defaultProps={opacity:1};const lOt=t=>{let{id:n,image:i,color:r,size:o,opacity:s,animated:l,...c}=t;const u=o/25,{scale:h}=$kt({from:{scale:[1e-5,1e-5,1e-5]},to:{scale:[u,u,u]},config:{...CPt,duration:l?void 0:0}}),d=(0,e.useMemo)((()=>new Aat(r)),[r]);return(0,a.jsx)(sCt.group,{userData:{id:n,type:"node"},scale:h,children:(0,a.jsx)(Kwt,{position:[0,0,1],children:(0,a.jsx)(yEt,{...c,src:i,fillMaterial:{fog:!0,depthTest:!1,transparent:!0,color:d,opacity:s,side:iet,...c.fillMaterial||{}},fillMeshProps:{position:[-25,-25,1],...c.fillMeshProps||{}}})})})};lOt.defaultProps={opacity:1};const cOt=t=>{let{animated:n,disabled:i,id:r,draggable:o,labelFontUrl:s,contextMenu:l,onClick:c,onDoubleClick:u,onPointerOver:h,onDragged:d,onPointerOut:f,onContextMenu:p,renderNode:g}=t;var m,v,y;const b=YPt(),_=BPt((t=>t.theme)),x=BPt((t=>t.nodes.find((t=>t.id===r)))),w=BPt((t=>t.edges)),S=BPt((t=>t.draggingId)),E=BPt((t=>t.collapsedNodeIds)),M=BPt((t=>t.setDraggingId)),T=BPt((t=>t.setNodePosition)),k=BPt((t=>t.setCollapsedNodeIds)),C=BPt((t=>t.collapsedNodeIds.includes(r))),A=BPt((t=>{var e;return null==(e=t.actives)?void 0:e.includes(r)})),P=BPt((t=>{var e;return null==(e=t.selections)?void 0:e.includes(r)})),O=BPt((t=>{var e;return(null==(e=t.selections)?void 0:e.length)>0})),R=BPt((t=>t.centerPosition)),L=S===r,{position:D,label:I,subLabel:N,size:z=7,labelVisible:F=!0}=x,U=(0,e.useRef)(null),[B,j]=(0,e.useState)(!1),[H,V]=(0,e.useState)(!1),G=B||P||A,W=O?G?_.node.selectedOpacity:_.node.inactiveOpacity:_.node.opacity,q=(0,e.useMemo)((()=>w.filter((t=>t.source===r)).length>0||C),[w,r,C]),X=(0,e.useCallback)((()=>{q&&k(C?E.filter((t=>t!==r)):[...E,r])}),[q,E,r,C,k]),[{nodePosition:Y,labelPosition:K,subLabelPosition:Z}]=$kt((()=>({from:{nodePosition:R?[R.x,R.y,0]:[0,0,0],labelPosition:[0,-(z+7),2],subLabelPosition:[0,-(z+14),2]},to:{nodePosition:D?[D.x,D.y,G?D.z+1:D.z]:[0,0,0],labelPosition:[0,-(z+7),2],subLabelPosition:[0,-(z+14),2]},config:{...CPt,duration:n&&!S?void 0:0}})),[L,D,n,z,G]),Q=(t=>{let{draggable:n,set:i,position:r,onDragStart:o,onDragEnd:a}=t;const s=rvt((t=>t.camera)),l=rvt((t=>t.raycaster)),c=rvt((t=>t.size)),u=rvt((t=>t.gl)),{mouse2D:h,mouse3D:d,offset:f,normal:p,plane:g}=(0,e.useMemo)((()=>({mouse2D:new Rrt,mouse3D:new cot,offset:new cot,normal:new cot,plane:new Fst})),[]),m=(0,e.useMemo)((()=>u.domElement.getBoundingClientRect()),[u.domElement]);return qwt({onDragStart:t=>{let{event:e}=t;const{eventObject:n,point:i}=e;n.getWorldPosition(f).sub(i),d.copy(i),o()},onDrag:t=>{var e,n;let{event:o}=t;const a=(o.clientX-(null!==(e=null==m?void 0:m.left)&&void 0!==e?e:0))/c.width*2-1,u=-(o.clientY-(null!==(n=null==m?void 0:m.top)&&void 0!==n?n:0))/c.height*2+1;h.set(a,u),l.setFromCamera(h,s),s.getWorldDirection(p).negate(),g.setFromNormalAndCoplanarPoint(p,d),l.ray.intersectPlane(g,d);const v=new cot(r.x,r.y,r.z).copy(d).add(f);return i(v)},onDragEnd:a},{drag:{enabled:n,threshold:10}})})({draggable:o,position:D,set:t=>T(r,t),onDragStart:()=>{M(r),j(!0)},onDragEnd:()=>{M(null),j(!1),null==d||d(x)}});bEt(B&&!S&&void 0!==c,"pointer"),bEt(B&&o&&!L&&void 0===c,"grab"),bEt(L,"grabbing");const J=G||L,$=J?_.node.activeFill:x.fill||_.node.fill,{pointerOver:tt,pointerOut:et}=FPt({disabled:i||L,onPointerOver:()=>{b.controls.enabled=!1,j(!0),null==h||h(x)},onPointerOut:()=>{b.controls.enabled=!0,j(!1),null==f||f(x)}}),nt=(0,e.useMemo)((()=>g?g({id:r,color:$,size:z,active:J,opacity:W,animated:n,node:x}):(0,a.jsx)(a.Fragment,{children:x.icon?(0,a.jsx)(sOt,{id:r,image:x.icon||"",size:z+8,opacity:W,animated:n,color:$,node:x,active:J}):(0,a.jsx)(WPt,{id:r,size:z,opacity:W,animated:n,color:$,node:x,active:J})})),[g,r,$,z,J,W,n,x]),it=(0,e.useMemo)((()=>{var t,e,n;return(F||P||B)&&I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sCt.group,{position:K,children:(0,a.jsx)(GPt,{text:I,fontUrl:s,opacity:W,stroke:_.node.label.stroke,active:P||B||L||A,color:P||B||L||A?_.node.label.activeColor:_.node.label.color})}),N&&(0,a.jsx)(sCt.group,{position:Z,children:(0,a.jsx)(GPt,{text:N,fontUrl:s,fontSize:5,opacity:W,stroke:null==(t=_.node.subLabel)?void 0:t.stroke,active:P||B||L||A,color:P||B||L||A?null==(e=_.node.subLabel)?void 0:e.activeColor:null==(n=_.node.subLabel)?void 0:n.color})})]})}),[B,A,L,P,I,s,K,F,W,N,Z,_.node.label.activeColor,_.node.label.color,_.node.label.stroke,null==(m=_.node.subLabel)?void 0:m.activeColor,null==(v=_.node.subLabel)?void 0:v.color,null==(y=_.node.subLabel)?void 0:y.stroke]),rt=(0,e.useMemo)((()=>H&&l&&(0,a.jsx)(AEt,{prepend:!0,center:!0,children:l({data:x,canCollapse:q,isCollapsed:C,onCollapse:X,onClose:()=>V(!1)})})),[H,l,x,q,C,X]);return(0,a.jsxs)(sCt.group,{userData:{id:r,type:"node"},ref:U,position:Y,onPointerOver:tt,onPointerOut:et,onClick:()=>{i||L||null==c||c(x,{canCollapse:q,isCollapsed:C})},onDoubleClick:()=>{i||L||null==u||u(x)},onContextMenu:()=>{i||(V(!0),null==p||p(x,{canCollapse:q,isCollapsed:C,onCollapse:X}))},...Q(),children:[nt,(0,a.jsx)(qPt,{opacity:P?.5:0,size:z,animated:n,color:P||B?_.ring.activeFill:_.ring.fill}),rt,it]})};cOt.defaultProps={draggable:!1};const uOt=t=>{let{animated:n,color:i,length:r,opacity:o,position:s,rotation:l,size:c,onActive:u,onContextMenu:h}=t;const d=(0,e.useMemo)((()=>new Aat(i)),[i]),f=(0,e.useRef)(null),p=BPt((t=>t.draggingId)),g=BPt((t=>t.centerPosition)),[{pos:m,arrowOpacity:v}]=$kt((()=>({from:{pos:g?[g.x,g.y,g.z]:[0,0,0],arrowOpacity:0},to:{pos:[s.x,s.y,s.z],arrowOpacity:o},config:{...CPt,duration:n&&!p?void 0:0}})),[n,p,o,s]),y=(0,e.useCallback)((()=>{var t;const e=new cot(0,1,0);null==(t=f.current)||t.quaternion.setFromUnitVectors(e,l)}),[l,f]);return(0,e.useEffect)((()=>y()),[y]),(0,a.jsxs)(sCt.mesh,{position:m,ref:f,scale:[1,1,1],onPointerOver:()=>u(!0),onPointerOut:()=>u(!1),onPointerDown:t=>{2===t.nativeEvent.buttons&&(t.stopPropagation(),h())},children:[(0,a.jsx)("cylinderGeometry",{args:[0,c,r,20,1,!0],attach:"geometry"}),(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material",color:d,depthTest:!1,opacity:v,transparent:!0,side:iet,fog:!0})]})};uOt.defaultProps={size:1,opacity:.5,color:"#D8E6EA"};const hOt=t=>{let{curveOffset:n,animated:i,color:r,curve:o,curved:s=!1,id:l,opacity:c,size:u,onContextMenu:h,onClick:d,onPointerOver:f,onPointerOut:p}=t;const g=(0,e.useRef)(null),m=BPt((t=>t.draggingId)),v=(0,e.useMemo)((()=>new Aat(r)),[r]),y=BPt((t=>t.centerPosition)),b=(0,e.useRef)(!1),{lineOpacity:_}=$kt({from:{lineOpacity:0},to:{lineOpacity:c},config:{...CPt,duration:i?void 0:0}});return $kt((()=>{const t=o.getPoint(0),e=o.getPoint(1);return{from:{fromVertices:b.current?[null==e?void 0:e.x,null==e?void 0:e.y,(null==e?void 0:e.z)||0]:[null==y?void 0:y.x,null==y?void 0:y.y,(null==y?void 0:y.z)||0],toVertices:[null==t?void 0:t.x,null==t?void 0:t.y,(null==t?void 0:t.z)||0]},to:{fromVertices:[null==t?void 0:t.x,null==t?void 0:t.y,(null==t?void 0:t.z)||0],toVertices:[null==e?void 0:e.x,null==e?void 0:e.y,(null==e?void 0:e.z)||0]},onChange:t=>{const{fromVertices:e,toVertices:i}=t.value,r=RPt(new cot(...e),0,new cot(...i),0,s,n);g.current.copy(new aft(r,20,u/2,5,!1))},config:{...CPt,duration:i&&!m?void 0:0}}}),[i,m,o,u]),(0,e.useEffect)((()=>{b.current=!0}),[]),(0,a.jsxs)("mesh",{userData:{id:l,type:"edge"},onPointerOver:f,onPointerOut:p,onClick:d,onPointerDown:t=>{2===t.nativeEvent.buttons&&(t.stopPropagation(),h())},children:[(0,a.jsx)("tubeGeometry",{attach:"geometry",ref:g}),(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material",opacity:_,fog:!0,transparent:!0,depthTest:!1,color:v})]})};hOt.defaultProps={color:"#000",size:1,opacity:1};const dOt=t=>{let{animated:n,arrowPlacement:i,contextMenu:r,disabled:o,labelPlacement:s,id:l,interpolation:c,labelFontUrl:u,onContextMenu:h,onClick:d,onPointerOver:f,onPointerOut:p}=t;const g=BPt((t=>t.theme)),m=BPt((t=>t.draggingId)),[v,y]=(0,e.useState)(!1),[b,_]=(0,e.useState)(!1),x=BPt((t=>t.edges)),w=x.find((t=>t.id===l)),{target:S,source:E,label:M,labelVisible:T=!1,size:k=1}=w,C=BPt((t=>t.nodes.find((t=>t.id===E)))),A=BPt((t=>t.nodes.find((t=>t.id===S)))),P=(k+g.edge.label.fontSize)/2,[O,R]=(0,e.useMemo)((()=>PPt(k)),[k]),{curveOffset:L,curved:D}=(0,e.useMemo)((()=>function(t){let e,{edge:n,edges:i,curved:r}=t,o=r;const a=i.filter((t=>t.target===n.target&&t.source===n.source)).map((t=>t.id));if(a.length>1){o=!0;const t=a.indexOf(n.id);e=2===a.length?0===t?.7:-.7:.7*(t-Math.floor(a.length/2))}return{curved:o,curveOffset:e}}({edge:w,edges:x,curved:"curved"===c})),[w,x,c]),[I,N,z]=(0,e.useMemo)((()=>{const t=LPt(C),e=C.size;let n=RPt(t,e,LPt(A),A.size,D,L);const[r,o]=APt(i,n,O);return"end"===i&&(n=RPt(t,e,r,0,D,L)),[n,r,o]}),[C,A,D,L,i,O]),F=(0,e.useMemo)((()=>{let t=OPt(C.position,A.position,MPt(P,s));if(D){const e=(new cot).subVectors(t,I.getPoint(.5));switch(s){case"above":e.y=e.y-3;break;case"below":e.y=e.y+3}t=t.sub(e)}return t}),[C.position,A.position,P,s,D,I]),U=BPt((t=>{var e;return null==(e=t.selections)?void 0:e.includes(l)})),B=BPt((t=>{var e;return null==(e=t.selections)?void 0:e.length})),j=BPt((t=>{var e;return null==(e=t.actives)?void 0:e.includes(l)})),H=BPt((t=>t.centerPosition)),V=B?U||j?g.edge.selectedOpacity:g.edge.inactiveOpacity:g.edge.opacity,[{labelPosition:G}]=$kt((()=>({from:{labelPosition:H?[H.x,H.y,H.z]:[0,0,0]},to:{labelPosition:[F.x,F.y,F.z]},config:{...CPt,duration:n&&!m?void 0:0}})),[F,n,m]),W=(0,e.useMemo)((()=>new Kot(0,0,"natural"===s?0:Math.atan((A.position.y-C.position.y)/(A.position.x-C.position.x)))),[A.position.x,A.position.y,C.position.x,C.position.y,s]);bEt(v&&!m&&void 0!==d,"pointer");const{pointerOver:q,pointerOut:X}=FPt({disabled:o,onPointerOver:()=>{y(!0),null==f||f(w)},onPointerOut:()=>{y(!1),null==p||p(w)}}),Y=(0,e.useMemo)((()=>"none"!==i&&(0,a.jsx)(uOt,{animated:n,color:U||v||j?g.arrow.activeFill:g.arrow.fill,length:O,opacity:V,position:N,rotation:z,size:R,onActive:y,onContextMenu:()=>{o||(_(!0),null==h||h(w))}})),[v,n,O,i,N,z,R,o,w,j,U,h,V,g.arrow.activeFill,g.arrow.fill]),K=(0,e.useMemo)((()=>T&&M&&(0,a.jsx)(sCt.group,{position:G,rotation:W,children:(0,a.jsx)(GPt,{text:M,ellipsis:15,fontUrl:u,stroke:g.edge.label.stroke,color:U||v||j?g.edge.label.activeColor:g.edge.label.color,opacity:V,fontSize:g.edge.label.fontSize})})),[v,j,U,M,u,G,W,T,V,g.edge.label.activeColor,g.edge.label.color,g.edge.label.fontSize,g.edge.label.stroke]),Z=(0,e.useMemo)((()=>b&&r&&(0,a.jsx)(AEt,{prepend:!0,center:!0,children:r({data:w,onClose:()=>_(!1)})})),[b,r,w]);return(0,a.jsxs)("group",{children:[(0,a.jsx)(hOt,{curveOffset:L,animated:n,color:U||v||j?g.edge.activeFill:g.edge.fill,curve:I,curved:D,id:l,opacity:V,size:k,onClick:()=>{o||null==d||d(w)},onPointerOver:q,onPointerOut:X,onContextMenu:()=>{o||(_(!0),null==h||h(w))}}),Y,K,Z]})};dOt.defaultProps={labelPlacement:"inline",arrowPlacement:"end"};const fOt=new Sst(0,0,0);const pOt=t=>{let{animated:n,color:i,contextMenu:r,edge:o,labelFontUrl:s,labelPlacement:l,opacity:c}=t;const u=BPt((t=>t.theme)),{target:h,source:d,label:f,labelVisible:p=!1,size:g=1}=o,m=BPt((t=>t.nodes)),v=m.find((t=>t.id===d)),y=m.find((t=>t.id===h)),b=BPt((t=>t.draggingId)),_=(g+u.edge.label.fontSize)/2,x=(0,e.useMemo)((()=>OPt(v.position,y.position,MPt(_,l))),[v.position,y.position,_,l]),w=BPt((t=>t.edgeContextMenus)),S=BPt((t=>t.setEdgeContextMenus)),[{labelPosition:E}]=$kt((()=>({from:{labelPosition:[0,0,0]},to:{labelPosition:[x.x,x.y,x.z]},config:{...CPt,duration:n&&!b?void 0:0}})),[x,n,b]),M=(0,e.useCallback)((t=>{w.delete(t.id),S(new Set(w.values()))}),[w,S]),T=(0,e.useMemo)((()=>new Kot(0,0,"natural"===l?0:Math.atan((y.position.y-v.position.y)/(y.position.x-v.position.x)))),[y.position.x,y.position.y,v.position.x,v.position.y,l]);return(0,a.jsxs)("group",{children:[p&&f&&(0,a.jsx)(sCt.group,{position:E,rotation:T,children:(0,a.jsx)(GPt,{text:f,ellipsis:15,fontUrl:s,stroke:u.edge.label.stroke,color:i,opacity:c,fontSize:u.edge.label.fontSize})}),r&&w.has(o.id)&&(0,a.jsx)(AEt,{prepend:!0,center:!0,position:x,children:r({data:o,onClose:()=>M(o)})})]})};pOt.defaultProps={labelPlacement:"inline"};const gOt=t=>{let{interpolation:n="linear",arrowPlacement:i="end",labelPlacement:r="inline",animated:o,contextMenu:s,disabled:l,edges:c,labelFontUrl:u,onClick:h,onContextMenu:d,onPointerOut:f,onPointerOver:p}=t;const g=BPt((t=>t.theme)),{getGeometries:m,getGeometry:v}=function(t,n){const i=(0,e.useRef)(),r=BPt((t=>t.theme));BPt((t=>{i.current=t}));const o=(0,e.useRef)(new Map),a="curved"===n,s=(0,e.useCallback)((e=>{const n=[],s=o.current,{nodes:l}=i.current;return e.forEach((e=>{const{target:i,source:o,size:c=1}=e,u=l.find((t=>t.id===o)),h=l.find((t=>t.id===i));if(!u||!h)return;const d="fromX:".concat(u.position.x,",fromY:").concat(u.position.y,",toX:").concat(h.position.x,"},toY:").concat(h.position.y);if(s.has(d)){const t=s.get(d);return void n.push(t)}const f=LPt(u),p=u.size+r.edge.label.fontSize;let g=RPt(f,p,LPt(h),h.size+r.edge.label.fontSize,a),m=new aft(g,20,c/2,5,!1);if("none"===t)return n.push(m),void s.set(d,m);const[v,y]=PPt(c),[b,_]=APt(t,g,v),x=new lot;x.setFromUnitVectors(new cot(0,1,0),_);const w=new ddt(0,y,v,20,1,!0);if(w.applyQuaternion(x),w.translate(b.x,b.y,b.z),t&&"end"===t){const t=RPt(f,p,b,0,a);m=new aft(t,20,c/2,5,!1)}const S=qAt([m,w]);n.push(S),s.set(d,S)})),n}),[t,a,r.edge.label.fontSize]),l=(0,e.useCallback)(((t,e)=>{const n=s(t),i=s(e);return qAt([i.length?qAt(i):fOt,n.length?qAt(n):fOt],!0)}),[s]);return{getGeometries:s,getGeometry:l}}(i,n),y=BPt((t=>t.draggingId)),b=BPt((t=>t.edgeMeshes)),_=BPt((t=>t.setEdgeMeshes)),x=BPt((t=>t.actives||[])),w=BPt((t=>t.selections||[])),[S,E,M,T]=(0,e.useMemo)((()=>{const t=[],e=[],n=[],i=[];return c.forEach((r=>{y!==r.source&&y!==r.target?w.includes(r.id)||x.includes(r.id)?t.push(r):e.push(r):w.includes(r.id)||x.includes(r.id)?n.push(r):i.push(r)})),[t,e,n,i]}),[c,x,w,y]),k=!!w.length,C=(0,e.useMemo)((()=>v(S,E)),[v,S,E]),{activeOpacity:A,inactiveOpacity:P}=function(t,e,n){const[{activeOpacity:i,inactiveOpacity:r}]=$kt((()=>({from:{activeOpacity:0,inactiveOpacity:0},to:{activeOpacity:e?n.edge.selectedOpacity:n.edge.opacity,inactiveOpacity:e?n.edge.inactiveOpacity:n.edge.opacity},config:{...CPt,duration:t?void 0:0}})),[t,e,n]);return{activeOpacity:i,inactiveOpacity:r}}(o,k,g);!function(t,n){const i=(0,e.useRef)(t);(0,e.useEffect)((()=>{i.current=t}),[t]);const r=(0,e.useCallback)((()=>{const t=i.current.getAttribute("position");return{from:Array.from({length:t.array.length}).fill(0),to:Array.from(t.array)}}),[]),o=(0,e.useCallback)((t=>{const e=new Float32Array(t),n=new Uat(e,3,!1);i.current.setAttribute("position",n),n.needsUpdate=!0}),[]);$kt((()=>{if(!n)return null;const t=r();return{from:{positions:t.from},to:{positions:t.to},onChange:t=>{o(t.value.positions)},config:{...CPt,duration:n?void 0:0}}}),[n])}(C,o),(0,e.useEffect)((()=>{if(null===y){const t=m(c).map((t=>new xst(t)));_(t)}}),[m,_,c,y]);const O=(0,e.useRef)(new xst),R=(0,e.useRef)(new xst),L=(0,e.useCallback)((t=>{if(!t.camera)return[];const e=t.intersectObjects(b);return e.length?e.map((t=>c[b.indexOf(t.object)])):[]}),[b,c]),{handleClick:D,handleContextMenu:I,handleIntersections:N}=function(t,n,i){const{onClick:r,onContextMenu:o,onPointerOut:a,onPointerOver:s}=t,l=BPt((t=>t.edgeContextMenus)),c=BPt((t=>t.setEdgeContextMenus)),u=(0,e.useRef)(!1),h=(0,e.useCallback)((()=>{u.current=!0}),[]),d=(0,e.useRef)(!1),f=(0,e.useCallback)((()=>{d.current=!0}),[]),p=(0,e.useCallback)(((t,e)=>{if(r&&u.current&&(u.current=!1,i||e.forEach((t=>{r(t)}))),(n||o)&&d.current&&(d.current=!1,i||e.forEach((t=>{l.has(t.id)||(c(new Set([...l,t.id])),null==o||o(t))}))),s){const n=e.filter((e=>!t.includes(e)));n.forEach((t=>{s(t)}))}if(a){const n=t.filter((t=>!e.includes(t)));n.forEach((t=>{a(t)}))}}),[n,i,l,c,r,o,s,a]);return{handleClick:h,handleContextMenu:f,handleIntersections:p}}({onClick:h,onContextMenu:d,onPointerOut:f,onPointerOver:p},s,l),z=(0,e.useRef)(null),F=(0,e.useRef)([]);return ovt((t=>{if(O.current.geometry=C,l)return;const e=z.current;if((y||null===y&&null!==e)&&(R.current.geometry=v(M,T)),z.current=y,y)return;const n=F.current,i=L(t.raycaster);N(n,i),i.join()!==n.join()&&(R.current.geometry=v(i,[])),F.current=i})),(0,a.jsxs)("group",{onClick:D,onContextMenu:I,children:[(0,a.jsxs)("mesh",{ref:O,children:[(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material-0",color:g.edge.fill,depthTest:!1,fog:!0,opacity:P,side:iet,transparent:!0}),(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material-1",color:g.edge.activeFill,depthTest:!1,fog:!0,opacity:A,side:iet,transparent:!0})]}),(0,a.jsxs)("mesh",{ref:R,children:[(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material-0",color:g.edge.fill,depthTest:!1,fog:!0,opacity:P,side:iet,transparent:!0}),(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material-1",color:g.edge.activeFill,depthTest:!1,fog:!0,opacity:A,side:iet,transparent:!0})]}),c.map((t=>(0,a.jsx)(pOt,{animated:o,contextMenu:s,color:g.edge.label.color,disabled:l,edge:t,labelFontUrl:u,labelPlacement:r},t.id)))]})},mOt=t=>{let{animated:n,position:i,padding:r,labelFontUrl:o,disabled:s,radius:l,nodes:c,label:u,onClick:h,onPointerOver:d,onPointerOut:f}=t;var p,g,m,v,y;const b=BPt((t=>t.theme)),_=Math.max(i.width,i.height)/2,x=_-l+r,[w,S]=(0,e.useState)(!1),E=BPt((t=>t.centerPosition)),M=BPt((t=>{var e;return null==(e=t.actives)?void 0:e.some((t=>c.some((e=>e.id===t))))})),T=BPt((t=>{var e;return null==(e=t.selections)?void 0:e.some((t=>c.some((e=>e.id===t))))})),k=BPt((t=>{var e;return(null==(e=t.selections)?void 0:e.length)>0}))?T||w||M?null==(p=b.cluster)?void 0:p.selectedOpacity:null==(g=b.cluster)?void 0:g.inactiveOpacity:null==(m=b.cluster)?void 0:m.opacity,{circleOpacity:C,circlePosition:A,labelPosition:P}=$kt({from:{circlePosition:[E.x,E.y,-1],circleOpacity:0,labelPosition:[0,-x,2]},to:{labelPosition:[0,-x,2],circlePosition:i?[i.x,i.y,-1]:[0,0,-1],circleOpacity:k},config:{...CPt,duration:n?void 0:0}}),O=(0,e.useMemo)((()=>{var t;return new Aat(null==(t=b.cluster)?void 0:t.stroke)}),[null==(v=b.cluster)?void 0:v.stroke]),R=(0,e.useMemo)((()=>{var t;return new Aat(null==(t=b.cluster)?void 0:t.fill)}),[null==(y=b.cluster)?void 0:y.fill]);bEt(w&&void 0!==h,"pointer");const{pointerOver:L,pointerOut:D}=FPt({disabled:s,onPointerOver:()=>{S(!0),null==d||d({nodes:c,label:u})},onPointerOut:()=>{S(!1),null==f||f({nodes:c,label:u})}});return(0,e.useMemo)((()=>{var t,e,n;return b.cluster&&(0,a.jsxs)(sCt.group,{position:A,onPointerOver:L,onPointerOut:D,onClick:()=>{s||null==h||h({nodes:c,label:u})},children:[(0,a.jsxs)("mesh",{children:[(0,a.jsx)("ringGeometry",{attach:"geometry",args:[x,0,128]}),(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material",color:R,transparent:!0,depthTest:!1,opacity:(null==(t=b.cluster)?void 0:t.fill)?C:0,side:iet,fog:!0})]}),(0,a.jsxs)("mesh",{children:[(0,a.jsx)("ringGeometry",{attach:"geometry",args:[x,_+r,128]}),(0,a.jsx)(sCt.meshBasicMaterial,{attach:"material",color:O,transparent:!0,depthTest:!1,opacity:C,side:iet,fog:!0})]}),(null==(e=b.cluster)?void 0:e.label)&&(0,a.jsx)(sCt.group,{position:P,children:(0,a.jsx)(GPt,{text:u,opacity:k,fontUrl:o,stroke:b.cluster.label.stroke,active:!1,color:null==(n=b.cluster)?void 0:n.label.color,fontSize:12})})]})}),[b.cluster,A,L,D,x,R,C,_,r,O,P,u,k,o,s,h,c])};mOt.defaultProps={radius:2,padding:40};const vOt=(0,e.forwardRef)(((t,n)=>{let{onNodeClick:i,onNodeDoubleClick:r,onNodeContextMenu:o,onEdgeContextMenu:s,onEdgeClick:l,onEdgePointerOver:c,onEdgePointerOut:u,onNodePointerOver:h,onNodePointerOut:d,onClusterClick:f,onNodeDragged:p,onClusterPointerOver:g,onClusterPointerOut:m,contextMenu:v,animated:y,disabled:b,draggable:_,edgeLabelPosition:x,edgeArrowPosition:w,edgeInterpolation:S,labelFontUrl:E,renderNode:M,...T}=t;const{layoutType:k,clusterAttribute:C}=T,A=rvt((t=>t.gl)),P=rvt((t=>t.scene)),O=rvt((t=>t.camera));if(VPt(T),C&&"forceDirected2d"!==k&&"forceDirected3d"!==k)throw new Error("Clustering is only supported for the force directed layouts.");const R=BPt((t=>t.graph)),L=BPt((t=>t.nodes)),D=BPt((t=>t.edges)),I=BPt((t=>[...t.clusters.values()])),{centerNodesById:N,isCentered:z}=aOt({animated:y,disabled:b,layoutType:k});(0,e.useImperativeHandle)(n,(()=>({centerGraph:N,graph:R,renderScene:()=>A.render(P,O)})),[N,R,A,P,O]);const F=(0,e.useMemo)((()=>L.map((t=>(0,a.jsx)(cOt,{id:null==t?void 0:t.id,labelFontUrl:E,draggable:_,disabled:b,animated:y,contextMenu:v,renderNode:M,onClick:i,onDoubleClick:r,onContextMenu:o,onPointerOver:h,onPointerOut:d,onDragged:p},null==t?void 0:t.id)))),[y,v,b,_,E,L,i,o,r,p,d,h,M]),U=(0,e.useMemo)((()=>y?D.map((t=>(0,a.jsx)(dOt,{id:t.id,disabled:b,animated:y,labelFontUrl:E,labelPlacement:x,arrowPlacement:w,interpolation:S,contextMenu:v,onClick:l,onContextMenu:s,onPointerOver:c,onPointerOut:u},t.id))):(0,a.jsx)(gOt,{edges:D,disabled:b,animated:y,labelFontUrl:E,labelPlacement:x,arrowPlacement:w,interpolation:S,contextMenu:v,onClick:l,onContextMenu:s,onPointerOver:c,onPointerOut:u})),[y,v,b,w,S,x,D,E,l,s,u,c]),B=(0,e.useMemo)((()=>I.map((t=>(0,a.jsx)(mOt,{animated:y,disabled:b,labelFontUrl:E,onClick:f,onPointerOver:g,onPointerOut:m,...t},t.label)))),[y,I,b,E,f,m,g]);return z&&(0,a.jsxs)(e.Fragment,{children:[F,U,B]})}));vOt.defaultProps={edgeInterpolation:"linear"};function yOt(t,e,n){const{offsetX:i,offsetY:r}=t,{width:o,height:a}=n;e.set(i/o*2-1,-r/a*2+1)}const bOt=t=>{let{children:n,type:i="none",onLasso:r,onLassoEnd:o,disabled:s}=t;var l;const c=BPt((t=>t.theme)),u=rvt((t=>t.camera)),h=rvt((t=>t.gl)),d=rvt((t=>t.setEvents)),f=rvt((t=>t.size)),p=rvt((t=>t.get)),g=rvt((t=>t.scene)),m=YPt(),v=BPt((t=>t.actives)),y=BPt((t=>t.setActives)),b=BPt((t=>t.edges)),_=BPt((t=>t.edgeMeshes)),x=(0,e.useRef)(!1),w=(0,e.useRef)(null),S=(0,e.useRef)(null),E=(0,e.useRef)(function(t){const e=document.createElement("div");return e.style.pointerEvents="none",e.style.border=t.lasso.border,e.style.backgroundColor=t.lasso.background,e.style.position="fixed",e}(c)),M=(0,e.useRef)(null),T=(0,e.useRef)(!1),k=(0,e.useRef)(p().events.enabled),C=(0,e.useRef)(null==(l=m.controls)?void 0:l.enabled);(0,e.useEffect)((()=>{x.current&&(null==r||r(v)),x.current=!0}),[v,r]);const A=(0,e.useCallback)((t=>{if(T.current){const[e,n,r]=M.current;r.x=Math.max(e.x,t.clientX),r.y=Math.max(e.y,t.clientY),n.x=Math.min(e.x,t.clientX),n.y=Math.min(e.y,t.clientY),E.current.style.left="".concat(n.x,"px"),E.current.style.top="".concat(n.y,"px"),E.current.style.width="".concat(r.x-n.x,"px"),E.current.style.height="".concat(r.y-n.y,"px"),yOt(t,w.current.endPoint,f),yOt(t,S.current.endPoint,f);const o=[],a=S.current.select().sort((t=>t.uuid)).map((t=>b[_.indexOf(t)].id));o.push(...a);const s=w.current.select().sort((t=>t.uuid)).filter((t=>{var e,n;return t.isMesh&&(null==(e=t.userData)?void 0:e.id)&&((null==(n=t.userData)?void 0:n.type)===i||"all"===i)})).map((t=>t.userData.id));o.push(...s),requestAnimationFrame((()=>{y(o)})),document.addEventListener("pointermove",A,{passive:!0,capture:!0,once:!0})}}),[b,_,y,f,i]),P=(0,e.useCallback)((()=>{var t;T.current&&(d({enabled:k.current}),T.current=!1,null==(t=E.current.parentElement)||t.removeChild(E.current),m.controls.enabled=C.current,null==o||o(v),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",P))}),[d,m.controls,o,v,A]),O=(0,e.useCallback)((t=>{var e,n;if(t.shiftKey){k.current=p().events.enabled,C.current=null==(e=m.controls)?void 0:e.enabled,w.current=new cPt(u,g);const i=new Mut;_.length&&i.add(..._),S.current=new cPt(u,i),M.current=[new Rrt,new Rrt,new Rrt];const[r]=M.current;m.controls.enabled=!1,d({enabled:!1}),T.current=!0,null==(n=h.domElement.parentElement)||n.appendChild(E.current),E.current.style.left="".concat(t.clientX,"px"),E.current.style.top="".concat(t.clientY,"px"),E.current.style.width="0px",E.current.style.height="0px",r.x=t.clientX,r.y=t.clientY,yOt(t,w.current.startPoint,f),yOt(t,S.current.startPoint,f),document.addEventListener("pointermove",A,{passive:!0,capture:!0,once:!0}),document.addEventListener("pointerup",P,{passive:!0})}}),[u,m.controls,_,p,h.domElement.parentElement,A,P,g,d,f]);return(0,e.useEffect)((()=>{if(!s&&"none"!==i)return"undefined"!==typeof window&&(document.addEventListener("pointerdown",O,{passive:!0}),document.addEventListener("pointermove",A,{passive:!0}),document.addEventListener("pointerup",P,{passive:!0})),()=>{"undefined"!==typeof window&&(document.removeEventListener("pointerdown",O),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",P))}}),[i,s,O,A,P]),(0,a.jsx)("group",{children:n})},_Ot="_canvas_670zp_1",xOt={alpha:!0,antialias:!0},wOt={position:[0,0,1e3],near:5,far:5e4,fov:10},SOt=(0,e.forwardRef)(((t,n)=>{let{cameraMode:i,edges:r,children:o,nodes:s,theme:l,onCanvasClick:c,animated:u,disabled:h,lassoType:d,onLasso:f,onLassoEnd:p,glOptions:g,...m}=t;var v,y;const b=(0,e.useRef)(null),_=(0,e.useRef)(null),x=(0,e.useRef)(null);(0,e.useImperativeHandle)(n,(()=>({centerGraph:t=>{var e;return null==(e=b.current)?void 0:e.centerGraph(t)},zoomIn:()=>{var t;return null==(t=_.current)?void 0:t.zoomIn()},zoomOut:()=>{var t;return null==(t=_.current)?void 0:t.zoomOut()},panLeft:()=>{var t;return null==(t=_.current)?void 0:t.panLeft()},panRight:()=>{var t;return null==(t=_.current)?void 0:t.panRight()},panDown:()=>{var t;return null==(t=_.current)?void 0:t.panDown()},panUp:()=>{var t;return null==(t=_.current)?void 0:t.panUp()},resetControls:t=>{var e;return null==(e=_.current)?void 0:e.resetControls(t)},getControls:()=>{var t;return null==(t=_.current)?void 0:t.controls},getGraph:()=>{var t;return null==(t=b.current)?void 0:t.graph},exportCanvas:()=>(b.current.renderScene(),x.current.toDataURL())})));const{selections:w,actives:S,collapsedNodeIds:E}=m,M=!(r.length+s.length>400)&&u,T=(0,e.useMemo)((()=>({...g,...xOt})),[g]);return(0,a.jsx)("div",{className:_Ot,children:(0,a.jsx)(Gvt,{legacy:!0,linear:!0,ref:x,flat:!0,gl:T,camera:wOt,onPointerMissed:c,children:(0,a.jsxs)(UPt,{createStore:()=>(t=>{let{actives:e=[],selections:n=[],collapsedNodeIds:i=[],theme:r}=t;return Oxt((t=>{var o;return{theme:{...r,edge:{...r.edge,label:{...r.edge.label,fontSize:null!==(o=r.edge.label.fontSize)&&void 0!==o?o:6}}},edges:[],nodes:[],collapsedNodeIds:i,clusters:new Map,panning:!1,draggingId:null,actives:e,edgeContextMenus:new Set,edgeMeshes:[],selections:n,drags:{},graph:new Ywt({multi:!0}),setTheme:e=>t((t=>({...t,theme:e}))),setClusters:e=>t((t=>({...t,clusters:e}))),setEdgeContextMenus:e=>t((t=>({...t,edgeContextMenus:e}))),setEdgeMeshes:e=>t((t=>({...t,edgeMeshes:e}))),setPanning:e=>t((t=>({...t,panning:e}))),setDrags:e=>t((t=>({...t,drags:e}))),setDraggingId:e=>t((t=>({...t,draggingId:e}))),setActives:e=>t((t=>({...t,actives:e}))),setSelections:e=>t((t=>({...t,selections:e}))),setNodes:e=>t((t=>({...t,nodes:e,centerPosition:NPt(e)}))),setEdges:e=>t((t=>({...t,edges:e}))),setNodePosition:(e,n)=>t((t=>{var i,r;const o=t.nodes.find((t=>t.id===e)),a=LPt(o),s=new cot(n.x,n.y,n.z).sub(a),l=[...t.nodes];if(null==(i=t.selections)?void 0:i.includes(e))null==(r=t.selections)||r.forEach((e=>{const n=t.nodes.find((t=>t.id===e));if(n){const e=t.nodes.indexOf(n);l[e]=IPt(n,s)}}));else{const e=t.nodes.indexOf(o);l[e]=IPt(o,s)}return{...t,drags:{...t.drags,[e]:o},nodes:l}})),setCollapsedNodeIds:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t((t=>({...t,collapsedNodeIds:e})))}}}))})({selections:w,actives:S,theme:l,collapsedNodeIds:E}),children:[(null==(v=l.canvas)?void 0:v.background)&&(0,a.jsx)("color",{attach:"background",args:[l.canvas.background]}),(0,a.jsx)("ambientLight",{intensity:1}),o,(null==(y=l.canvas)?void 0:y.fog)&&(0,a.jsx)("fog",{attach:"fog",args:[l.canvas.fog,4e3,9e3]}),(0,a.jsx)(nOt,{mode:i,ref:_,disabled:h,animated:u,children:(0,a.jsx)(bOt,{disabled:h,type:d,onLasso:f,onLassoEnd:p,children:(0,a.jsx)(e.Suspense,{children:(0,a.jsx)(vOt,{ref:b,disabled:h,animated:M,edges:r,nodes:s,...m})})})})]})})})}));SOt.defaultProps={cameraMode:"pan",layoutType:"forceDirected2d",sizingType:"default",labelType:"auto",theme:{canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#1DE9AC"},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#1DE9AC"},edge:{fill:"#D8E6EA",activeFill:"#1DE9AC",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#1DE9AC",fontSize:6}},arrow:{fill:"#D8E6EA",activeFill:"#1DE9AC"},cluster:{stroke:"#D8E6EA",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475"}}},animated:!0,defaultNodeSize:7,minNodeSize:5,maxNodeSize:15,lassoType:"none",glOptions:{}};function EOt(){const{query:t}=et(),[n,i]=(0,e.useState)(null),[r,o]=(0,e.useState)(null),[s,l]=(0,e.useState)(100);return(0,e.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://papercitation-backend4.onrender.com","/api/paper?query=").concat(encodeURIComponent(t)));if(!e.ok)throw new Error("Network response not ok");const n=await e.json();console.log(n),i(n),o(n.query)}catch(ROt){console.error("Error:",ROt)}})()}),[t]),(0,a.jsxs)("div",{style:{display:"flex",gap:"1em"},children:[(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsxs)("div",{className:"leftbox",style:{overflow:"auto"},children:[null!=n&&(0,a.jsxs)("div",{className:"card",style:{margin:"1em 0em 0em 1em"},children:[(0,a.jsx)("h5",{className:"card-header",children:"Seed Node"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:[(0,a.jsx)("h6",{style:{color:"#0d0d75"},children:n.query.title}),(0,a.jsx)("p",{style:{color:"green"},children:n.query.authors})]})})]}),(0,a.jsxs)("div",{className:"card",style:{margin:"1em 0em 0em 1em"},children:[(0,a.jsx)("h5",{className:"card-header",children:"Cited Paper List"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:null!=n&&n.citelist.length>0?n.citelist.map(((t,e)=>(0,a.jsxs)("li",{className:"list-group-item",children:[(0,a.jsx)("h6",{style:{color:"#0d0d75"},children:t.title}),(0,a.jsx)("p",{style:{color:"green"},children:t.authors})]},e))):(0,a.jsx)("p",{children:"No cite result"})})]})]})}),(0,a.jsx)("div",{style:{flex:2},children:n&&(0,a.jsx)(SOt,{nodes:[...n.reflist.map((t=>({id:t.pid,label:t.pid}))),...n.citelist.map((t=>({id:t.pid,label:t.pid}))),{id:n.query.pid,label:n.query.pid}],edges:[...n.reflist.map((t=>({source:n.query.pid,target:t.pid}))),...n.citelist.map((t=>({source:t.pid,target:n.query.pid})))]})}),r&&(0,a.jsxs)("div",{style:{width:"30%",marginTop:"1em"},children:[(0,a.jsx)("h5",{children:(0,a.jsx)("strong",{children:r.title})}),(0,a.jsx)("p",{children:r.comments}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Author:"})," ",r.authors]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Journal-ref:"})," ",r.journal]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Info:"})," ",r.body]})]})]})}var MOt=n(7950),TOt=n.t(MOt,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(DOt){}new Map;const kOt=i.startTransition;TOt.flushSync,i.useId;function COt(t){let{basename:n,children:i,future:r,window:o}=t,a=e.useRef();null==a.current&&(a.current=function(t){return void 0===t&&(t={}),m((function(t,e){let{pathname:n,search:i,hash:r}=t.location;return f("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")}),(function(t,e){return"string"===typeof e?e:p(e)}),null,t)}({window:o,v5Compat:!0}));let s=a.current,[l,c]=e.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},h=e.useCallback((t=>{u&&kOt?kOt((()=>c(t))):c(t)}),[c,u]);return e.useLayoutEffect((()=>s.listen(h)),[s,h]),e.createElement(gt,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:s,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var AOt,POt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(AOt||(AOt={})),function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"}(POt||(POt={}));const OOt=function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(COt,{children:[(0,a.jsx)(s,{}),(0,a.jsx)("div",{children:(0,a.jsxs)(mt,{children:[(0,a.jsx)(pt,{exact:!0,path:"/",element:(0,a.jsx)(yt,{})}),(0,a.jsx)(pt,{exact:!0,path:"/searchresults/:query",element:(0,a.jsx)(_t,{})}),(0,a.jsx)(pt,{eaxct:!0,path:"/paper/:query",element:(0,a.jsx)(Vtt,{})}),(0,a.jsx)(pt,{exact:!0,path:"/demo/:query",element:(0,a.jsx)(EOt,{})})]})})]})})};r.createRoot(document.getElementById("root")).render((0,a.jsx)(e.StrictMode,{children:(0,a.jsx)(OOt,{})}))})()})();
//# sourceMappingURL=main.2531e901.js.map